c1b2020b3c4f351c422933f540beec12
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock complex dependencies
jest.mock('../../vault/Utils', () => ({
    setIcon: jest.fn()
}));
jest.mock('three', () => ({}));
jest.mock('three/examples/jsm/loaders/GLTFLoader.js', () => ({}));
jest.mock('three/examples/jsm/controls/OrbitControls.js', () => ({}));
const FileProperty_1 = require("../../properties/FileProperty");
const MediaProperty_1 = require("../../properties/MediaProperty");
// Mock external dependencies
global.Notice = jest.fn();
global.selectMedia = jest.fn();
global.shell = {
    openPath: jest.fn()
};
// Mock require function to handle missing modules
const originalRequire = require;
global.require = jest.fn((moduleName) => {
    if (moduleName === 'electron') {
        return { shell: { openPath: jest.fn() } };
    }
    if (moduleName === '../../Utils/App') {
        return { Notice: jest.fn() };
    }
    if (moduleName === 'Utils/Modals/Modals') {
        return { selectMedia: jest.fn() };
    }
    if (moduleName === 'path') {
        return { join: jest.fn((a, b) => `${a}/${b}`) };
    }
    // Fallback to original require for other modules
    try {
        return originalRequire(moduleName);
    }
    catch {
        return {};
    }
});
// Additional global mocks for functions used in tests
global.Notice = jest.fn();
global.selectMedia = jest.fn();
describe('MediaProperty', () => {
    let mediaProperty;
    let mockVault;
    beforeEach(() => {
        // Reset DOM mocks
        document.body.innerHTML = '';
        jest.clearAllMocks();
        // Mock vault with necessary methods
        mockVault = {
            getMediaFromLink: jest.fn(),
            readLinkFile: jest.fn(),
            app: {
                openFile: jest.fn(),
                vault: {
                    getName: jest.fn().mockReturnValue('TestVault'),
                    adapter: {
                        basePath: '/test/vault/path',
                        getResourcePath: jest.fn().mockReturnValue('resource://test-path')
                    },
                    getFiles: jest.fn().mockReturnValue([])
                }
            }
        };
    });
    beforeEach(() => {
        mediaProperty = new MediaProperty_1.MediaProperty('testMedia');
    });
    describe('constructor', () => {
        it('should create MediaProperty with correct type', () => {
            expect(mediaProperty.type).toBe('media');
        });
        it('should inherit from FileProperty', () => {
            expect(mediaProperty).toBeInstanceOf(FileProperty_1.FileProperty);
        });
        it('should use default args when none provided', () => {
            const defaultProperty = new MediaProperty_1.MediaProperty('defaultTest');
            expect(defaultProperty.name).toBe('defaultTest');
            expect(defaultProperty.type).toBe('media');
        });
        it('should accept custom args', () => {
            const customArgs = { icon: 'custom-icon', display: 'embed', create: 'create-option' };
            const customProperty = new MediaProperty_1.MediaProperty('customName', customArgs);
            expect(customProperty.name).toBe('customName');
            expect(customProperty.createOption).toBe('create-option');
        });
        it('should handle empty create option', () => {
            const property = new MediaProperty_1.MediaProperty('test', { create: undefined });
            expect(property.createOption).toBe('');
        });
    });
    describe('getLink', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should return media name when value is valid', () => {
            const testValue = '[[TestImage.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue({ name: 'TestImage.jpg', path: 'images/TestImage.jpg' });
            const result = mediaProperty.getLink(testValue);
            expect(mockVault.getMediaFromLink).toHaveBeenCalledWith(testValue);
            expect(result).toBe('TestImage.jpg');
        });
        it('should return empty string when value is null', () => {
            const result = mediaProperty.getLink(null);
            expect(result).toBe('');
        });
        it('should return empty string when value is undefined', () => {
            const result = mediaProperty.getLink(undefined);
            expect(result).toBe('');
        });
        it('should return empty string when value is empty string', () => {
            const result = mediaProperty.getLink('');
            expect(result).toBe('');
        });
        it('should return empty string when media not found', () => {
            const testValue = '[[NonExistentImage.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue(null);
            const result = mediaProperty.getLink(testValue);
            expect(result).toBe('');
        });
        it('should return empty string when media has no name', () => {
            const testValue = '[[TestImage.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'images/TestImage.jpg' });
            const result = mediaProperty.getLink(testValue);
            expect(result).toBe('');
        });
        it('should handle vault parameter', () => {
            const newVault = { ...mockVault };
            newVault.getMediaFromLink.mockReturnValue({ name: 'test.jpg' });
            const result = mediaProperty.getLink('[[test.jpg]]', newVault);
            expect(result).toBe('test.jpg');
        });
    });
    describe('openFile', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should open file with correct path', () => {
            const { shell } = require('electron');
            const testValue = '[[TestImage.jpg]]';
            const mediaPath = 'images/TestImage.jpg';
            mockVault.getMediaFromLink.mockReturnValue({ path: mediaPath });
            mediaProperty.openFile(testValue);
            expect(mockVault.getMediaFromLink).toHaveBeenCalledWith(testValue);
            // Just check that shell.openPath was called, don't worry about exact path separator
            expect(shell.openPath).toHaveBeenCalledWith(expect.stringContaining('TestImage.jpg'));
        });
        it('should handle media file without path property', () => {
            const { shell } = require('electron');
            const testValue = '[[TestImage.jpg]]';
            // Return media object without path property
            mockVault.getMediaFromLink.mockReturnValue({ name: 'TestImage.jpg' });
            // This will attempt to call path.join with undefined, which may throw
            expect(() => {
                mediaProperty.openFile(testValue);
            }).toThrow();
        });
        it('should handle missing vault base path', () => {
            const { shell } = require('electron');
            const testValue = '[[TestImage.jpg]]';
            const mediaPath = 'images/TestImage.jpg';
            // Create a new vault mock without basePath
            const vaultWithoutBasePath = {
                ...mockVault,
                app: {
                    vault: {
                        adapter: {
                            getResourcePath: jest.fn().mockReturnValue('resource://test-path')
                        }
                    }
                }
            };
            mediaProperty.vault = vaultWithoutBasePath;
            vaultWithoutBasePath.getMediaFromLink.mockReturnValue({ path: mediaPath });
            mediaProperty.openFile(testValue);
            expect(shell.openPath).toHaveBeenCalledWith(mediaPath);
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should set vault property', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestImage.jpg]]';
            mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(mediaProperty.vault).toBe(mockVault);
        });
        it('should handle non-link values by calling parent', () => {
            const mockUpdate = jest.fn();
            const testValue = 'plain text';
            // Mock parent's fillDisplay
            const parentFillDisplay = jest.spyOn(FileProperty_1.FileProperty.prototype, 'fillDisplay');
            parentFillDisplay.mockReturnValue(document.createElement('div'));
            const result = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(parentFillDisplay).toHaveBeenCalled();
            expect(result).toBeTruthy();
            parentFillDisplay.mockRestore();
        });
        it('should process Obsidian links', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestImage.jpg]]';
            mediaProperty.display = 'embed';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'images/TestImage.jpg' });
            const result = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(result).toBeTruthy();
            expect(result.tagName).toBe('DIV');
        });
        it('should handle null value', () => {
            const mockUpdate = jest.fn();
            const result = mediaProperty.fillDisplay(mockVault, null, mockUpdate);
            expect(result).toBeTruthy();
        });
        it('should handle undefined value', () => {
            const mockUpdate = jest.fn();
            const result = mediaProperty.fillDisplay(mockVault, undefined, mockUpdate);
            expect(result).toBeTruthy();
        });
    });
    describe('createOption handling', () => {
        it('should store createOption from constructor', () => {
            const propertyWithCreate = new MediaProperty_1.MediaProperty('test', { create: 'freecad' });
            expect(propertyWithCreate.createOption).toBe('freecad');
        });
        it('should default to empty string for createOption', () => {
            const propertyWithoutCreate = new MediaProperty_1.MediaProperty('test');
            expect(propertyWithoutCreate.createOption).toBe('');
        });
    });
    describe('display property', () => {
        it('should be undefined initially', () => {
            expect(mediaProperty.display).toBeUndefined();
        });
        it('should be set during getDisplay or fillDisplay', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestImage.jpg]]';
            mediaProperty.display = 'embed';
            expect(mediaProperty.display).toBe('embed');
        });
    });
    describe('inheritance from FileProperty', () => {
        it('should have classes property from parent', () => {
            expect(mediaProperty.classes).toEqual([]);
        });
        it('should have getClasses method from parent', () => {
            expect(typeof mediaProperty.getClasses).toBe('function');
            expect(mediaProperty.getClasses()).toEqual([]);
        });
        it('should have validate method from parent', () => {
            expect(typeof mediaProperty.validate).toBe('function');
        });
        it('should have name property from parent', () => {
            expect(mediaProperty.name).toBe('testMedia');
        });
    });
    describe('error handling', () => {
        it('should handle missing vault gracefully', () => {
            const testValue = '[[TestImage.jpg]]';
            mediaProperty.vault = null;
            expect(() => {
                mediaProperty.getLink(testValue);
            }).toThrow();
        });
        it('should handle malformed Obsidian links in fillDisplay', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestImage.jpg'; // Malformed link
            expect(() => {
                mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            }).not.toThrow();
        });
    });
    describe('getDisplay advanced functionality', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
            mediaProperty.createOption = 'freecad';
        });
        it('should create file creation container when no file and createOption set', () => {
            const mockFile = { updateMetadata: jest.fn(), check: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue(null);
            const createFunction = jest.fn().mockResolvedValue('newfile.fcstd');
            const args = {
                createOptions: {
                    createFunction: createFunction,
                    title: 'Créer un fichier FreeCAD'
                }
            };
            const result = mediaProperty.getDisplay(mockFile, args);
            expect(result.classList.contains('create-freecad-container')).toBe(true);
            const button = result.querySelector('button');
            expect(button).toBeTruthy();
            expect(button?.textContent).toBe('Créer un fichier FreeCAD');
        });
        it('should handle file creation button click', async () => {
            const mockFile = { updateMetadata: jest.fn(), check: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue(null);
            const createFunction = jest.fn().mockResolvedValue('newfile.fcstd');
            mockVault.getMediaFromLink.mockReturnValue({ path: 'files/newfile.fcstd' });
            const args = {
                createOptions: {
                    createFunction: createFunction,
                    title: 'Créer un fichier'
                }
            };
            const result = mediaProperty.getDisplay(mockFile, args);
            const button = result.querySelector('button');
            // Simulate button click
            await button.click();
            expect(createFunction).toHaveBeenCalled();
            expect(mockFile.updateMetadata).toHaveBeenCalledWith(mediaProperty.name, '[[newfile.fcstd|newfile.fcstd]]');
        });
        it('should add update button when updateOptions provided', () => {
            const mockFile = { updateMetadata: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue('[[existing.jpg]]');
            mediaProperty.fillDisplay = jest.fn().mockReturnValue(document.createElement('div'));
            const updateFunction = jest.fn().mockResolvedValue('updated.jpg');
            const args = {
                updateOptions: {
                    updateFunction: updateFunction,
                    icon: 'refresh-cw'
                }
            };
            const result = mediaProperty.getDisplay(mockFile, args);
            const button = result.querySelector('button');
            expect(button).toBeTruthy();
            expect(button?.classList.contains('mod-cta')).toBe(true);
        });
        it('should handle update button click', async () => {
            const mockFile = { updateMetadata: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue('[[existing.jpg]]');
            mediaProperty.fillDisplay = jest.fn().mockReturnValue(document.createElement('div'));
            const updateFunction = jest.fn().mockResolvedValue('updated.jpg');
            const args = {
                updateOptions: {
                    updateFunction: updateFunction,
                    icon: 'refresh-cw'
                }
            };
            const result = mediaProperty.getDisplay(mockFile, args);
            const button = result.querySelector('button');
            await button.click();
            expect(updateFunction).toHaveBeenCalled();
            expect(mockFile.updateMetadata).toHaveBeenCalledWith(mediaProperty.name, '[[updated.jpg|updated.jpg]]');
        });
        it('should use default display name when no args provided', () => {
            const mockFile = { updateMetadata: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue('[[test.jpg]]');
            mediaProperty.fillDisplay = jest.fn().mockReturnValue(document.createElement('div'));
            mediaProperty.getDisplay(mockFile);
            expect(mediaProperty.display).toBe('name');
        });
        it('should set custom display from args', () => {
            const mockFile = { updateMetadata: jest.fn() };
            mediaProperty.read = jest.fn().mockReturnValue('[[test.jpg]]');
            mediaProperty.fillDisplay = jest.fn().mockReturnValue(document.createElement('div'));
            mediaProperty.getDisplay(mockFile, { display: 'embed' });
            expect(mediaProperty.display).toBe('embed');
        });
    });
    describe('getFileIcon', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should return image icon for image files', () => {
            const testValue = '[[test.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'images/test.jpg' });
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('image');
        });
        it('should return image icon for different image formats', () => {
            const formats = ['png', 'jpeg', 'gif'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `images/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('image');
            });
        });
        it('should return cube3d icon for 3D files', () => {
            const formats = ['glb', 'gltf', 'fcstd'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `3d/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('cube3d');
            });
        });
        it('should return file icon for document files', () => {
            const formats = ['pdf', 'docx', 'txt'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `docs/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('file');
            });
        });
        it('should return video icon for video files', () => {
            const formats = ['mp4', 'webm', 'ogg'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `videos/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('video');
            });
        });
        it('should return audio icon for audio files', () => {
            const formats = ['mp3', 'wav'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `audio/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('audio');
            });
        });
        it('should return archive icon for archive files', () => {
            const formats = ['zip', 'rar'];
            formats.forEach(format => {
                const testValue = `[[test.${format}]]`;
                mockVault.getMediaFromLink.mockReturnValue({ path: `archives/test.${format}` });
                const result = mediaProperty.getFileIcon(testValue);
                expect(result).toBe('archive');
            });
        });
        it('should return square-pen icon for sla files', () => {
            const testValue = '[[test.sla]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'prints/test.sla' });
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('square-pen');
        });
        it('should return flame icon for lbrn2 files', () => {
            const testValue = '[[test.lbrn2]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'laser/test.lbrn2' });
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('flame');
        });
        it('should return default icon for unknown file types', () => {
            const testValue = '[[test.unknown]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'files/test.unknown' });
            mediaProperty.icon = 'custom-icon';
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('custom-icon');
        });
        it('should return default media icon when no custom icon set', () => {
            const testValue = '[[test.unknown]]';
            mockVault.getMediaFromLink.mockReturnValue({ path: 'files/test.unknown' });
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('media');
        });
        it('should handle non-link values', () => {
            const result = mediaProperty.getFileIcon('not-a-link');
            expect(result).toBe('media');
        });
        it('should handle missing media file', () => {
            const testValue = '[[nonexistent.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue(null);
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('media');
        });
        it('should handle media without path', () => {
            const testValue = '[[test.jpg]]';
            mockVault.getMediaFromLink.mockReturnValue({ name: 'test.jpg' }); // No path
            const result = mediaProperty.getFileIcon(testValue);
            expect(result).toBe('media');
        });
    });
    describe('createEmbedImageContainer', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
            mockVault.app.vault.adapter.getResourcePath = jest.fn().mockReturnValue('resource://test-path');
        });
        it('should create image container with correct structure', () => {
            const mockUpdate = jest.fn();
            const mediaPath = 'images/test.jpg';
            const container = mediaProperty.createEmbedImageContainer(mediaPath, mockUpdate);
            expect(container.classList.contains('metadata-field')).toBe(true);
            expect(container.classList.contains('media-field')).toBe(true);
            expect(container.classList.contains('embed-container')).toBe(true);
        });
        it('should create img element with correct src', () => {
            const mockUpdate = jest.fn();
            const mediaPath = 'images/test.jpg';
            const container = mediaProperty.createEmbedImageContainer(mediaPath, mockUpdate);
            const img = container.querySelector('img');
            expect(img).toBeTruthy();
            expect(img?.src).toBe('resource://test-path');
            expect(img?.alt).toBe('Media');
            expect(img?.classList.contains('embed-media')).toBe(true);
        });
        it('should create icon container', () => {
            const mockUpdate = jest.fn();
            const mediaPath = 'images/test.jpg';
            const container = mediaProperty.createEmbedImageContainer(mediaPath, mockUpdate);
            const iconContainer = container.querySelector('.icon-container');
            expect(iconContainer).toBeTruthy();
        });
        it('should handle icon click for image selection', async () => {
            const mockUpdate = jest.fn();
            const mediaPath = 'images/test.jpg';
            mediaProperty.handleIconClick = jest.fn();
            const container = mediaProperty.createEmbedImageContainer(mediaPath, mockUpdate);
            const icon = container.querySelector('i');
            // Simulate icon click
            const clickEvent = new MouseEvent('click');
            icon?.dispatchEvent(clickEvent);
            // We can't easily test the actual click handler without more complex setup
            expect(icon).toBeTruthy();
        });
    });
    describe('createEmbedEditContainer and createEmbedOpenContainer', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should create edit container with correct positioning', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.createEmbedEditContainer(mockUpdate, testValue);
            expect(container.classList.contains('embed-edit-container')).toBe(true);
            expect(container.style.position).toBe('absolute');
            expect(container.style.top).toBe('5px');
            expect(container.style.left).toBe('5px');
            expect(container.style.cursor).toBe('pointer');
        });
        it('should create edit container with link icon', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.createEmbedEditContainer(mockUpdate, testValue);
            const iconContainer = container.querySelector('.icon-container');
            const icon = container.querySelector('i');
            expect(iconContainer).toBeTruthy();
            expect(icon).toBeTruthy();
        });
        it('should create open container with correct positioning', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.createEmbedOpenContainer(mockUpdate, testValue);
            expect(container.classList.contains('embed-open-container')).toBe(true);
            expect(container.style.position).toBe('absolute');
            expect(container.style.top).toBe('5px');
            expect(container.style.right).toBe('5px');
            expect(container.style.cursor).toBe('pointer');
        });
        it('should create open container with external-link icon', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.createEmbedOpenContainer(mockUpdate, testValue);
            const iconContainer = container.querySelector('.icon-container');
            const icon = container.querySelector('i');
            expect(iconContainer).toBeTruthy();
            expect(icon).toBeTruthy();
        });
        it('should handle open container click to open file', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.openFile = jest.fn();
            const container = mediaProperty.createEmbedOpenContainer(mockUpdate, testValue);
            const icon = container.querySelector('i');
            // Simulate click
            const clickEvent = new MouseEvent('click');
            Object.defineProperty(clickEvent, 'preventDefault', { value: jest.fn() });
            icon.click();
            expect(mediaProperty.openFile).toHaveBeenCalledWith(testValue);
        });
        it('should show notice when no value provided for open', () => {
            const mockUpdate = jest.fn();
            const { Notice } = require('../../Utils/App');
            const container = mediaProperty.createEmbedOpenContainer(mockUpdate, '');
            const icon = container.querySelector('i');
            // Simulate click
            const clickEvent = new MouseEvent('click');
            Object.defineProperty(clickEvent, 'preventDefault', { value: jest.fn() });
            icon.click();
            expect(Notice).toHaveBeenCalledWith('Unable to generate link for the media.');
        });
    });
    describe('handleIconClick', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should handle media selection', async () => {
            const { selectMedia } = require('Utils/Modals/Modals');
            const mockUpdate = jest.fn();
            const selectedFile = { path: 'images/selected.jpg', name: 'selected.jpg' };
            selectMedia.mockResolvedValue(selectedFile);
            const mockEvent = {
                target: {
                    closest: jest.fn().mockReturnValue({
                        querySelector: jest.fn().mockReturnValue({ textContent: '' })
                    })
                }
            };
            await mediaProperty.handleIconClick(mockUpdate, mockEvent);
            expect(selectMedia).toHaveBeenCalledWith(mockVault, 'Choisissez un document');
            expect(mockUpdate).toHaveBeenCalledWith('[[images/selected.jpg|selected.jpg]]');
        });
        it('should update link text after selection', async () => {
            const { selectMedia } = require('Utils/Modals/Modals');
            const mockUpdate = jest.fn();
            const selectedFile = { path: 'images/selected.jpg', name: 'selected.jpg' };
            selectMedia.mockResolvedValue(selectedFile);
            const linkElement = document.createElement('a');
            const mockEvent = {
                target: {
                    closest: jest.fn().mockReturnValue({
                        querySelector: jest.fn().mockReturnValue(linkElement)
                    })
                }
            };
            await mediaProperty.handleIconClick(mockUpdate, mockEvent);
            expect(linkElement.textContent).toBe('selected.jpg');
        });
        it('should handle cancelled selection', async () => {
            const { selectMedia } = require('Utils/Modals/Modals');
            const mockUpdate = jest.fn();
            selectMedia.mockResolvedValue(null);
            const mockEvent = { target: { closest: jest.fn() } };
            await mediaProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockUpdate).not.toHaveBeenCalled();
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
            jest.spyOn(mediaProperty, 'getLink');
        });
        it('should create field container with truncated text', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[verylongfilename.jpg]]';
            mediaProperty.getLink.mockReturnValue('verylongfilename.jpg');
            const container = mediaProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = container.querySelector('a');
            expect(container.classList.contains('field-container')).toBe(true);
            expect(link?.textContent).toBe('verylongfile...');
            expect(link?.getAttribute('full-text')).toBe('verylongfilename.jpg');
        });
        it('should not truncate short text', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[short.jpg]]';
            mediaProperty.getLink.mockReturnValue('short.jpg');
            const container = mediaProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = container.querySelector('a');
            expect(link?.textContent).toBe('short.jpg');
            expect(link?.getAttribute('full-text')).toBe('short.jpg');
        });
        it('should handle empty file name', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[]]';
            mediaProperty.getLink.mockReturnValue(null);
            const container = mediaProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = container.querySelector('a');
            expect(link?.textContent).toBe('');
            // Test que le lien existe même avec un nom vide
            expect(link).toBeTruthy();
        });
        it('should set up click handler for link', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.getLink.mockReturnValue('test.jpg');
            jest.spyOn(mediaProperty, 'modifyField');
            const container = mediaProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = container.querySelector('a');
            expect(link.href).toBe('http://localhost/#');
            expect(link.classList.contains('field-link')).toBe(true);
            expect(link.style.display).toBe('block');
        });
    });
    describe('modifyField', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
        });
        it('should open existing file', async () => {
            const mockFile = { name: 'existing.jpg' };
            const mockLeaf = { openFile: jest.fn() };
            // Add the missing mock methods
            mockVault.app.vault.getFiles = jest.fn().mockReturnValue([mockFile]);
            mockVault.app.workspace = { getLeaf: jest.fn().mockReturnValue(mockLeaf) };
            const linkElement = document.createElement('a');
            linkElement.setAttribute('full-text', 'existing.jpg');
            const mockEvent = {
                target: {
                    closest: jest.fn().mockReturnValue({
                        querySelector: jest.fn().mockReturnValue(linkElement)
                    })
                },
                preventDefault: jest.fn()
            };
            await mediaProperty.modifyField(mockEvent);
            expect(mockEvent.preventDefault).toHaveBeenCalled();
            expect(mockLeaf.openFile).toHaveBeenCalledWith(mockFile);
        });
        it('should show notice for non-existent file', async () => {
            const { Notice } = require('../../Utils/App');
            // Add the missing mock method
            mockVault.app.vault.getFiles = jest.fn().mockReturnValue([]);
            const linkElement = document.createElement('a');
            linkElement.setAttribute('full-text', 'nonexistent.jpg');
            const mockEvent = {
                target: {
                    closest: jest.fn().mockReturnValue({
                        querySelector: jest.fn().mockReturnValue(linkElement)
                    })
                },
                preventDefault: jest.fn()
            };
            await mediaProperty.modifyField(mockEvent);
            expect(Notice).toHaveBeenCalledWith('Le fichier nonexistent.jpg n\'existe pas');
        });
        it('should return early when no current field', async () => {
            const linkElement = document.createElement('a');
            // No full-text attribute
            const mockEvent = {
                target: {
                    closest: jest.fn().mockReturnValue({
                        querySelector: jest.fn().mockReturnValue(linkElement)
                    })
                },
                preventDefault: jest.fn()
            };
            await mediaProperty.modifyField(mockEvent);
            expect(mockEvent.preventDefault).not.toHaveBeenCalled();
        });
    });
    describe('fillDisplay icon mode', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
            mediaProperty.display = 'icon';
        });
        it('should create icon display container', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.getFileIcon = jest.fn().mockReturnValue('image');
            mockVault.getMediaFromLink.mockReturnValue({ name: 'test.jpg' });
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(container.classList.contains('metadata-field')).toBe(true);
            expect(container.classList.contains('media-field')).toBe(true);
        });
        it('should show file name in icon mode', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.getFileIcon = jest.fn().mockReturnValue('image');
            mockVault.getMediaFromLink.mockReturnValue({ name: 'test.jpg' });
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            const fileName = container.querySelector('.media-field-file-name');
            expect(fileName?.textContent).toBe('test.jpg');
        });
        it('should show "Fichier non trouvé" when file not found', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[missing.jpg]]';
            mediaProperty.getFileIcon = jest.fn().mockReturnValue('image');
            mockVault.getMediaFromLink.mockReturnValue(null);
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            const fileName = container.querySelector('.media-field-file-name');
            expect(fileName?.textContent).toBe('Fichier non trouvé');
        });
        it('should make container clickable in icon mode', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.getFileIcon = jest.fn().mockReturnValue('image');
            mediaProperty.openFile = jest.fn();
            mockVault.getMediaFromLink.mockReturnValue({ name: 'test.jpg' });
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(container.style.cursor).toBe('pointer');
            // Simulate click
            container.click();
            expect(mediaProperty.openFile).toHaveBeenCalledWith(testValue);
        });
    });
    describe('fillDisplay button mode', () => {
        beforeEach(() => {
            mediaProperty.vault = mockVault;
            mediaProperty.display = 'button';
        });
        it('should create button display container', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            expect(container.classList.contains('create-freecad-container')).toBe(true);
        });
        it('should create button with default text', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            const button = container.querySelector('button');
            expect(button?.classList.contains('mod-cta')).toBe(true);
            expect(button?.textContent).toBe('Ouvrir le fichier');
        });
        it('should create button with custom title', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.title = 'Custom Title';
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            const button = container.querySelector('button');
            expect(button?.textContent).toBe('Custom Title');
        });
        it('should handle button click to open file', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[test.jpg]]';
            mediaProperty.openFile = jest.fn();
            const container = mediaProperty.fillDisplay(mockVault, testValue, mockUpdate);
            const button = container.querySelector('button');
            button.click();
            expect(mediaProperty.openFile).toHaveBeenCalledWith(testValue);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcTWVkaWFQcm9wZXJ0eS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFLSCw0QkFBNEI7QUFDNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3JCLENBQUMsQ0FBQyxDQUFDO0FBb0NKLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsRSxJQUFJLENBQUMsSUFBSSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQTVDdEUsZ0VBQTZEO0FBQzdELGtFQUErRDtBQU8vRCw2QkFBNkI7QUFDNUIsTUFBYyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDbEMsTUFBYyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDdkMsTUFBYyxDQUFDLEtBQUssR0FBRztJQUNwQixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUN0QixDQUFDO0FBRUYsa0RBQWtEO0FBQ2xELE1BQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQztBQUMvQixNQUFjLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFrQixFQUFFLEVBQUU7SUFDckQsSUFBSSxVQUFVLEtBQUss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c291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXHNyY1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxNZWRpYVByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRmlsZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vcHJvcGVydGllcy9GaWxlUHJvcGVydHknO1xyXG5pbXBvcnQgeyBNZWRpYVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vcHJvcGVydGllcy9NZWRpYVByb3BlcnR5JztcclxuXHJcbi8vIE1vY2sgY29tcGxleCBkZXBlbmRlbmNpZXNcclxuamVzdC5tb2NrKCcuLi8uLi92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuLy8gTW9jayBleHRlcm5hbCBkZXBlbmRlbmNpZXNcclxuKGdsb2JhbCBhcyBhbnkpLk5vdGljZSA9IGplc3QuZm4oKTtcclxuKGdsb2JhbCBhcyBhbnkpLnNlbGVjdE1lZGlhID0gamVzdC5mbigpO1xyXG4oZ2xvYmFsIGFzIGFueSkuc2hlbGwgPSB7XHJcbiAgICBvcGVuUGF0aDogamVzdC5mbigpXHJcbn07XHJcblxyXG4vLyBNb2NrIHJlcXVpcmUgZnVuY3Rpb24gdG8gaGFuZGxlIG1pc3NpbmcgbW9kdWxlc1xyXG5jb25zdCBvcmlnaW5hbFJlcXVpcmUgPSByZXF1aXJlO1xyXG4oZ2xvYmFsIGFzIGFueSkucmVxdWlyZSA9IGplc3QuZm4oKG1vZHVsZU5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKG1vZHVsZU5hbWUgPT09ICdlbGVjdHJvbicpIHtcclxuICAgICAgICByZXR1cm4geyBzaGVsbDogeyBvcGVuUGF0aDogamVzdC5mbigpIH0gfTtcclxuICAgIH1cclxuICAgIGlmIChtb2R1bGVOYW1lID09PSAnLi4vLi4vVXRpbHMvQXBwJykge1xyXG4gICAgICAgIHJldHVybiB7IE5vdGljZTogamVzdC5mbigpIH07XHJcbiAgICB9XHJcbiAgICBpZiAobW9kdWxlTmFtZSA9PT0gJ1V0aWxzL01vZGFscy9Nb2RhbHMnKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc2VsZWN0TWVkaWE6IGplc3QuZm4oKSB9O1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZHVsZU5hbWUgPT09ICdwYXRoJykge1xyXG4gICAgICAgIHJldHVybiB7IGpvaW46IGplc3QuZm4oKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBgJHthfS8ke2J9YCkgfTtcclxuICAgIH1cclxuICAgIC8vIEZhbGxiYWNrIHRvIG9yaWdpbmFsIHJlcXVpcmUgZm9yIG90aGVyIG1vZHVsZXNcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUmVxdWlyZShtb2R1bGVOYW1lKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBBZGRpdGlvbmFsIGdsb2JhbCBtb2NrcyBmb3IgZnVuY3Rpb25zIHVzZWQgaW4gdGVzdHNcclxuKGdsb2JhbCBhcyBhbnkpLk5vdGljZSA9IGplc3QuZm4oKTtcclxuKGdsb2JhbCBhcyBhbnkpLnNlbGVjdE1lZGlhID0gamVzdC5mbigpO1xyXG5cclxuamVzdC5tb2NrKCd0aHJlZScsICgpID0+ICh7fSkpO1xyXG5qZXN0Lm1vY2soJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanMnLCAoKSA9PiAoe30pKTtcclxuamVzdC5tb2NrKCd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scy5qcycsICgpID0+ICh7fSkpO1xyXG5cclxuZGVzY3JpYmUoJ01lZGlhUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgbWVkaWFQcm9wZXJ0eTogTWVkaWFQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVmF1bHQ6IGFueTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAvLyBSZXNldCBET00gbW9ja3NcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1vY2sgdmF1bHQgd2l0aCBuZWNlc3NhcnkgbWV0aG9kc1xyXG4gICAgICAgIG1vY2tWYXVsdCA9IHtcclxuICAgICAgICAgICAgZ2V0TWVkaWFGcm9tTGluazogamVzdC5mbigpLFxyXG4gICAgICAgICAgICByZWFkTGlua0ZpbGU6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgYXBwOiB7XHJcbiAgICAgICAgICAgICAgICBvcGVuRmlsZTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICAgICAgdmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBnZXROYW1lOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdUZXN0VmF1bHQnKSxcclxuICAgICAgICAgICAgICAgICAgICBhZGFwdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiAnL3Rlc3QvdmF1bHQvcGF0aCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlc291cmNlUGF0aDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgncmVzb3VyY2U6Ly90ZXN0LXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0RmlsZXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgbWVkaWFQcm9wZXJ0eSA9IG5ldyBNZWRpYVByb3BlcnR5KCd0ZXN0TWVkaWEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBNZWRpYVByb3BlcnR5IHdpdGggY29ycmVjdCB0eXBlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QobWVkaWFQcm9wZXJ0eS50eXBlKS50b0JlKCdtZWRpYScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaGVyaXQgZnJvbSBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChtZWRpYVByb3BlcnR5KS50b0JlSW5zdGFuY2VPZihGaWxlUHJvcGVydHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IGFyZ3Mgd2hlbiBub25lIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0UHJvcGVydHkgPSBuZXcgTWVkaWFQcm9wZXJ0eSgnZGVmYXVsdFRlc3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGRlZmF1bHRQcm9wZXJ0eS5uYW1lKS50b0JlKCdkZWZhdWx0VGVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoZGVmYXVsdFByb3BlcnR5LnR5cGUpLnRvQmUoJ21lZGlhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWNjZXB0IGN1c3RvbSBhcmdzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21BcmdzID0geyBpY29uOiAnY3VzdG9tLWljb24nLCBkaXNwbGF5OiAnZW1iZWQnLCBjcmVhdGU6ICdjcmVhdGUtb3B0aW9uJyB9O1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21Qcm9wZXJ0eSA9IG5ldyBNZWRpYVByb3BlcnR5KCdjdXN0b21OYW1lJywgY3VzdG9tQXJncyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21Qcm9wZXJ0eS5uYW1lKS50b0JlKCdjdXN0b21OYW1lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21Qcm9wZXJ0eS5jcmVhdGVPcHRpb24pLnRvQmUoJ2NyZWF0ZS1vcHRpb24nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgY3JlYXRlIG9wdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBuZXcgTWVkaWFQcm9wZXJ0eSgndGVzdCcsIHsgY3JlYXRlOiB1bmRlZmluZWQgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wZXJ0eS5jcmVhdGVPcHRpb24pLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldExpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIG1lZGlhIG5hbWUgd2hlbiB2YWx1ZSBpcyB2YWxpZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEltYWdlLmpwZ11dJztcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgbmFtZTogJ1Rlc3RJbWFnZS5qcGcnLCBwYXRoOiAnaW1hZ2VzL1Rlc3RJbWFnZS5qcGcnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRMaW5rKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmspLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ1Rlc3RJbWFnZS5qcGcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIHdoZW4gdmFsdWUgaXMgbnVsbCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRMaW5rKG51bGwgYXMgYW55KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiB2YWx1ZSBpcyB1bmRlZmluZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0TGluayh1bmRlZmluZWQgYXMgYW55KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiB2YWx1ZSBpcyBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0TGluaygnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIHdoZW4gbWVkaWEgbm90IGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tOb25FeGlzdGVudEltYWdlLmpwZ11dJztcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRMaW5rKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIHdoZW4gbWVkaWEgaGFzIG5vIG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RJbWFnZS5qcGddXSc7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IHBhdGg6ICdpbWFnZXMvVGVzdEltYWdlLmpwZycgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB2YXVsdCBwYXJhbWV0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhdWx0ID0geyAuLi5tb2NrVmF1bHQgfTtcclxuICAgICAgICAgICAgbmV3VmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBuYW1lOiAndGVzdC5qcGcnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRMaW5rKCdbW3Rlc3QuanBnXV0nLCBuZXdWYXVsdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCd0ZXN0LmpwZycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ29wZW5GaWxlJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG9wZW4gZmlsZSB3aXRoIGNvcnJlY3QgcGF0aCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzaGVsbCB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEltYWdlLmpwZ11dJztcclxuICAgICAgICAgICAgY29uc3QgbWVkaWFQYXRoID0gJ2ltYWdlcy9UZXN0SW1hZ2UuanBnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IHBhdGg6IG1lZGlhUGF0aCB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkub3BlbkZpbGUodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluaykudG9IYXZlQmVlbkNhbGxlZFdpdGgodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgLy8gSnVzdCBjaGVjayB0aGF0IHNoZWxsLm9wZW5QYXRoIHdhcyBjYWxsZWQsIGRvbid0IHdvcnJ5IGFib3V0IGV4YWN0IHBhdGggc2VwYXJhdG9yXHJcbiAgICAgICAgICAgIGV4cGVjdChzaGVsbC5vcGVuUGF0aCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1Rlc3RJbWFnZS5qcGcnKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG1lZGlhIGZpbGUgd2l0aG91dCBwYXRoIHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNoZWxsIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0SW1hZ2UuanBnXV0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUmV0dXJuIG1lZGlhIG9iamVjdCB3aXRob3V0IHBhdGggcHJvcGVydHlcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgbmFtZTogJ1Rlc3RJbWFnZS5qcGcnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGF0dGVtcHQgdG8gY2FsbCBwYXRoLmpvaW4gd2l0aCB1bmRlZmluZWQsIHdoaWNoIG1heSB0aHJvd1xyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5vcGVuRmlsZSh0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICB9KS50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgdmF1bHQgYmFzZSBwYXRoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNoZWxsIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0SW1hZ2UuanBnXV0nO1xyXG4gICAgICAgICAgICBjb25zdCBtZWRpYVBhdGggPSAnaW1hZ2VzL1Rlc3RJbWFnZS5qcGcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHZhdWx0IG1vY2sgd2l0aG91dCBiYXNlUGF0aFxyXG4gICAgICAgICAgICBjb25zdCB2YXVsdFdpdGhvdXRCYXNlUGF0aCA9IHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tWYXVsdCxcclxuICAgICAgICAgICAgICAgIGFwcDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkYXB0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlc291cmNlUGF0aDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgncmVzb3VyY2U6Ly90ZXN0LXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnZhdWx0ID0gdmF1bHRXaXRob3V0QmFzZVBhdGg7XHJcbiAgICAgICAgICAgIHZhdWx0V2l0aG91dEJhc2VQYXRoLmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgcGF0aDogbWVkaWFQYXRoIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5vcGVuRmlsZSh0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNoZWxsLm9wZW5QYXRoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtZWRpYVBhdGgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbGxEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCB2YXVsdCBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEltYWdlLmpwZ11dJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB0ZXN0VmFsdWUsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm9uLWxpbmsgdmFsdWVzIGJ5IGNhbGxpbmcgcGFyZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAncGxhaW4gdGV4dCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHBhcmVudCdzIGZpbGxEaXNwbGF5XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEZpbGxEaXNwbGF5ID0gamVzdC5zcHlPbihGaWxlUHJvcGVydHkucHJvdG90eXBlLCAnZmlsbERpc3BsYXknKTtcclxuICAgICAgICAgICAgcGFyZW50RmlsbERpc3BsYXkubW9ja1JldHVyblZhbHVlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB0ZXN0VmFsdWUsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHBhcmVudEZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHBhcmVudEZpbGxEaXNwbGF5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcHJvY2VzcyBPYnNpZGlhbiBsaW5rcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEltYWdlLmpwZ11dJztcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5kaXNwbGF5ID0gJ2VtYmVkJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IHBhdGg6ICdpbWFnZXMvVGVzdEltYWdlLmpwZycgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdGVzdFZhbHVlLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbnVsbCB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCBudWxsLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsIHVuZGVmaW5lZCwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlT3B0aW9uIGhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgc3RvcmUgY3JlYXRlT3B0aW9uIGZyb20gY29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5V2l0aENyZWF0ZSA9IG5ldyBNZWRpYVByb3BlcnR5KCd0ZXN0JywgeyBjcmVhdGU6ICdmcmVlY2FkJyB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3BlcnR5V2l0aENyZWF0ZS5jcmVhdGVPcHRpb24pLnRvQmUoJ2ZyZWVjYWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBkZWZhdWx0IHRvIGVtcHR5IHN0cmluZyBmb3IgY3JlYXRlT3B0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVdpdGhvdXRDcmVhdGUgPSBuZXcgTWVkaWFQcm9wZXJ0eSgndGVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcGVydHlXaXRob3V0Q3JlYXRlLmNyZWF0ZU9wdGlvbikudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZGlzcGxheSBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGJlIHVuZGVmaW5lZCBpbml0aWFsbHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChtZWRpYVByb3BlcnR5LmRpc3BsYXkpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBzZXQgZHVyaW5nIGdldERpc3BsYXkgb3IgZmlsbERpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RJbWFnZS5qcGddXSc7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZGlzcGxheSA9ICdlbWJlZCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobWVkaWFQcm9wZXJ0eS5kaXNwbGF5KS50b0JlKCdlbWJlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2luaGVyaXRhbmNlIGZyb20gRmlsZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGF2ZSBjbGFzc2VzIHByb3BlcnR5IGZyb20gcGFyZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QobWVkaWFQcm9wZXJ0eS5jbGFzc2VzKS50b0VxdWFsKFtdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYXZlIGdldENsYXNzZXMgbWV0aG9kIGZyb20gcGFyZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIG1lZGlhUHJvcGVydHkuZ2V0Q2xhc3NlcykudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkuZ2V0Q2xhc3NlcygpKS50b0VxdWFsKFtdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYXZlIHZhbGlkYXRlIG1ldGhvZCBmcm9tIHBhcmVudCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBtZWRpYVByb3BlcnR5LnZhbGlkYXRlKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhdmUgbmFtZSBwcm9wZXJ0eSBmcm9tIHBhcmVudCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkubmFtZSkudG9CZSgndGVzdE1lZGlhJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyB2YXVsdCBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0SW1hZ2UuanBnXV0nO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnZhdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWRpYVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgfSkudG9UaHJvdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgT2JzaWRpYW4gbGlua3MgaW4gZmlsbERpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RJbWFnZS5qcGcnOyAvLyBNYWxmb3JtZWQgbGlua1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB0ZXN0VmFsdWUsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldERpc3BsYXkgYWR2YW5jZWQgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS52YXVsdCA9IG1vY2tWYXVsdDtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5jcmVhdGVPcHRpb24gPSAnZnJlZWNhZCc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGZpbGUgY3JlYXRpb24gY29udGFpbmVyIHdoZW4gbm8gZmlsZSBhbmQgY3JlYXRlT3B0aW9uIHNldCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGUgPSB7IHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCksIGNoZWNrOiBqZXN0LmZuKCkgfTtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUZ1bmN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCduZXdmaWxlLmZjc3RkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVPcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRnVuY3Rpb246IGNyZWF0ZUZ1bmN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ3LDqWVyIHVuIGZpY2hpZXIgRnJlZUNBRCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSwgYXJncyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmNsYXNzTGlzdC5jb250YWlucygnY3JlYXRlLWZyZWVjYWQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHJlc3VsdC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoYnV0dG9uPy50ZXh0Q29udGVudCkudG9CZSgnQ3LDqWVyIHVuIGZpY2hpZXIgRnJlZUNBRCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIGNyZWF0aW9uIGJ1dHRvbiBjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGUgPSB7IHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCksIGNoZWNrOiBqZXN0LmZuKCkgfTtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUZ1bmN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCduZXdmaWxlLmZjc3RkJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IHBhdGg6ICdmaWxlcy9uZXdmaWxlLmZjc3RkJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVPcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRnVuY3Rpb246IGNyZWF0ZUZ1bmN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ3LDqWVyIHVuIGZpY2hpZXInXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUsIGFyZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSByZXN1bHQucXVlcnlTZWxlY3RvcignYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBidXR0b24gY2xpY2tcclxuICAgICAgICAgICAgYXdhaXQgYnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY3JlYXRlRnVuY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tGaWxlLnVwZGF0ZU1ldGFkYXRhKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIG1lZGlhUHJvcGVydHkubmFtZSxcclxuICAgICAgICAgICAgICAgICdbW25ld2ZpbGUuZmNzdGR8bmV3ZmlsZS5mY3N0ZF1dJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGFkZCB1cGRhdGUgYnV0dG9uIHdoZW4gdXBkYXRlT3B0aW9ucyBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGUgPSB7IHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCkgfTtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnW1tleGlzdGluZy5qcGddXScpO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGdW5jdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgndXBkYXRlZC5qcGcnKTtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVGdW5jdGlvbjogdXBkYXRlRnVuY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3JlZnJlc2gtY3cnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUsIGFyZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSByZXN1bHQucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoYnV0dG9uKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24/LmNsYXNzTGlzdC5jb250YWlucygnbW9kLWN0YScpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB1cGRhdGUgYnV0dG9uIGNsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHsgdXBkYXRlTWV0YWRhdGE6IGplc3QuZm4oKSB9O1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdbW2V4aXN0aW5nLmpwZ11dJyk7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZ1bmN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCd1cGRhdGVkLmpwZycpO1xyXG4gICAgICAgICAgICBjb25zdCBhcmdzID0ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uOiB1cGRhdGVGdW5jdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVmcmVzaC1jdydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSwgYXJncyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHJlc3VsdC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZ1bmN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZS51cGRhdGVNZXRhZGF0YSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgICAgICAgICBtZWRpYVByb3BlcnR5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAnW1t1cGRhdGVkLmpwZ3x1cGRhdGVkLmpwZ11dJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IGRpc3BsYXkgbmFtZSB3aGVuIG5vIGFyZ3MgcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGaWxlID0geyB1cGRhdGVNZXRhZGF0YTogamVzdC5mbigpIH07XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkucmVhZCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ1tbdGVzdC5qcGddXScpO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkuZGlzcGxheSkudG9CZSgnbmFtZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCBjdXN0b20gZGlzcGxheSBmcm9tIGFyZ3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGaWxlID0geyB1cGRhdGVNZXRhZGF0YTogamVzdC5mbigpIH07XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkucmVhZCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ1tbdGVzdC5qcGddXScpO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUsIHsgZGlzcGxheTogJ2VtYmVkJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtZWRpYVByb3BlcnR5LmRpc3BsYXkpLnRvQmUoJ2VtYmVkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0RmlsZUljb24nLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGltYWdlIGljb24gZm9yIGltYWdlIGZpbGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0LmpwZ11dJztcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgcGF0aDogJ2ltYWdlcy90ZXN0LmpwZycgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdpbWFnZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBpbWFnZSBpY29uIGZvciBkaWZmZXJlbnQgaW1hZ2UgZm9ybWF0cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0cyA9IFsncG5nJywgJ2pwZWcnLCAnZ2lmJ107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3JtYXRzLmZvckVhY2goZm9ybWF0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9IGBbW3Rlc3QuJHtmb3JtYXR9XV1gO1xyXG4gICAgICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgcGF0aDogYGltYWdlcy90ZXN0LiR7Zm9ybWF0fWAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24odGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnaW1hZ2UnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGN1YmUzZCBpY29uIGZvciAzRCBmaWxlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0cyA9IFsnZ2xiJywgJ2dsdGYnLCAnZmNzdGQnXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcm1hdHMuZm9yRWFjaChmb3JtYXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gYFtbdGVzdC4ke2Zvcm1hdH1dXWA7XHJcbiAgICAgICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiBgM2QvdGVzdC4ke2Zvcm1hdH1gIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2N1YmUzZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZmlsZSBpY29uIGZvciBkb2N1bWVudCBmaWxlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0cyA9IFsncGRmJywgJ2RvY3gnLCAndHh0J107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3JtYXRzLmZvckVhY2goZm9ybWF0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9IGBbW3Rlc3QuJHtmb3JtYXR9XV1gO1xyXG4gICAgICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgcGF0aDogYGRvY3MvdGVzdC4ke2Zvcm1hdH1gIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2ZpbGUnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHZpZGVvIGljb24gZm9yIHZpZGVvIGZpbGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXRzID0gWydtcDQnLCAnd2VibScsICdvZ2cnXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcm1hdHMuZm9yRWFjaChmb3JtYXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gYFtbdGVzdC4ke2Zvcm1hdH1dXWA7XHJcbiAgICAgICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiBgdmlkZW9zL3Rlc3QuJHtmb3JtYXR9YCB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRGaWxlSWNvbih0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCd2aWRlbycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYXVkaW8gaWNvbiBmb3IgYXVkaW8gZmlsZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHMgPSBbJ21wMycsICd3YXYnXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcm1hdHMuZm9yRWFjaChmb3JtYXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gYFtbdGVzdC4ke2Zvcm1hdH1dXWA7XHJcbiAgICAgICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiBgYXVkaW8vdGVzdC4ke2Zvcm1hdH1gIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2F1ZGlvJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhcmNoaXZlIGljb24gZm9yIGFyY2hpdmUgZmlsZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHMgPSBbJ3ppcCcsICdyYXInXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcm1hdHMuZm9yRWFjaChmb3JtYXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gYFtbdGVzdC4ke2Zvcm1hdH1dXWA7XHJcbiAgICAgICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiBgYXJjaGl2ZXMvdGVzdC4ke2Zvcm1hdH1gIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2FyY2hpdmUnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHNxdWFyZS1wZW4gaWNvbiBmb3Igc2xhIGZpbGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0LnNsYV1dJztcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKHsgcGF0aDogJ3ByaW50cy90ZXN0LnNsYScgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdzcXVhcmUtcGVuJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGZsYW1lIGljb24gZm9yIGxicm4yIGZpbGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0Lmxicm4yXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiAnbGFzZXIvdGVzdC5sYnJuMicgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdmbGFtZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBkZWZhdWx0IGljb24gZm9yIHVua25vd24gZmlsZSB0eXBlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC51bmtub3duXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiAnZmlsZXMvdGVzdC51bmtub3duJyB9KTtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5pY29uID0gJ2N1c3RvbS1pY29uJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24odGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ2N1c3RvbS1pY29uJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGRlZmF1bHQgbWVkaWEgaWNvbiB3aGVuIG5vIGN1c3RvbSBpY29uIHNldCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC51bmtub3duXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBwYXRoOiAnZmlsZXMvdGVzdC51bmtub3duJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24odGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ21lZGlhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vbi1saW5rIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWVkaWFQcm9wZXJ0eS5nZXRGaWxlSWNvbignbm90LWEtbGluaycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnbWVkaWEnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBtZWRpYSBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tub25leGlzdGVudC5qcGddXSc7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24odGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ21lZGlhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG1lZGlhIHdpdGhvdXQgcGF0aCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IG5hbWU6ICd0ZXN0LmpwZycgfSk7IC8vIE5vIHBhdGhcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24odGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ21lZGlhJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRW1iZWRJbWFnZUNvbnRhaW5lcicsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS52YXVsdCA9IG1vY2tWYXVsdDtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5hZGFwdGVyLmdldFJlc291cmNlUGF0aCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ3Jlc291cmNlOi8vdGVzdC1wYXRoJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGltYWdlIGNvbnRhaW5lciB3aXRoIGNvcnJlY3Qgc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtZWRpYVBhdGggPSAnaW1hZ2VzL3Rlc3QuanBnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG1lZGlhUHJvcGVydHkuY3JlYXRlRW1iZWRJbWFnZUNvbnRhaW5lcihtZWRpYVBhdGgsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWRpYS1maWVsZCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnZW1iZWQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGltZyBlbGVtZW50IHdpdGggY29ycmVjdCBzcmMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhUGF0aCA9ICdpbWFnZXMvdGVzdC5qcGcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVFbWJlZEltYWdlQ29udGFpbmVyKG1lZGlhUGF0aCwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpbWcpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGltZz8uc3JjKS50b0JlKCdyZXNvdXJjZTovL3Rlc3QtcGF0aCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW1nPy5hbHQpLnRvQmUoJ01lZGlhJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbWc/LmNsYXNzTGlzdC5jb250YWlucygnZW1iZWQtbWVkaWEnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgaWNvbiBjb250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhUGF0aCA9ICdpbWFnZXMvdGVzdC5qcGcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVFbWJlZEltYWdlQ29udGFpbmVyKG1lZGlhUGF0aCwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGljb25Db250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmljb24tY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoaWNvbkNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpY29uIGNsaWNrIGZvciBpbWFnZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhUGF0aCA9ICdpbWFnZXMvdGVzdC5qcGcnO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmhhbmRsZUljb25DbGljayA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG1lZGlhUHJvcGVydHkuY3JlYXRlRW1iZWRJbWFnZUNvbnRhaW5lcihtZWRpYVBhdGgsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGljb24gY2xpY2tcclxuICAgICAgICAgICAgY29uc3QgY2xpY2tFdmVudCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycpO1xyXG4gICAgICAgICAgICBpY29uPy5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2UgY2FuJ3QgZWFzaWx5IHRlc3QgdGhlIGFjdHVhbCBjbGljayBoYW5kbGVyIHdpdGhvdXQgbW9yZSBjb21wbGV4IHNldHVwXHJcbiAgICAgICAgICAgIGV4cGVjdChpY29uKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRW1iZWRFZGl0Q29udGFpbmVyIGFuZCBjcmVhdGVFbWJlZE9wZW5Db250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGVkaXQgY29udGFpbmVyIHdpdGggY29ycmVjdCBwb3NpdGlvbmluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmNyZWF0ZUVtYmVkRWRpdENvbnRhaW5lcihtb2NrVXBkYXRlLCB0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2VtYmVkLWVkaXQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuc3R5bGUucG9zaXRpb24pLnRvQmUoJ2Fic29sdXRlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuc3R5bGUudG9wKS50b0JlKCc1cHgnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5zdHlsZS5sZWZ0KS50b0JlKCc1cHgnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5zdHlsZS5jdXJzb3IpLnRvQmUoJ3BvaW50ZXInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgZWRpdCBjb250YWluZXIgd2l0aCBsaW5rIGljb24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Rlc3QuanBnXV0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVFbWJlZEVkaXRDb250YWluZXIobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaWNvbi1jb250YWluZXInKTtcclxuICAgICAgICAgICAgY29uc3QgaWNvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoaWNvbkNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoaWNvbikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBvcGVuIGNvbnRhaW5lciB3aXRoIGNvcnJlY3QgcG9zaXRpb25pbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Rlc3QuanBnXV0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVFbWJlZE9wZW5Db250YWluZXIobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbWJlZC1vcGVuLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uKS50b0JlKCdhYnNvbHV0ZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnN0eWxlLnRvcCkudG9CZSgnNXB4Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuc3R5bGUucmlnaHQpLnRvQmUoJzVweCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnN0eWxlLmN1cnNvcikudG9CZSgncG9pbnRlcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBvcGVuIGNvbnRhaW5lciB3aXRoIGV4dGVybmFsLWxpbmsgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmNyZWF0ZUVtYmVkT3BlbkNvbnRhaW5lcihtb2NrVXBkYXRlLCB0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpY29uQ29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpY29uKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG9wZW4gY29udGFpbmVyIGNsaWNrIHRvIG9wZW4gZmlsZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkub3BlbkZpbGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmNyZWF0ZUVtYmVkT3BlbkNvbnRhaW5lcihtb2NrVXBkYXRlLCB0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGNsaWNrXHJcbiAgICAgICAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsaWNrRXZlbnQsICdwcmV2ZW50RGVmYXVsdCcsIHsgdmFsdWU6IGplc3QuZm4oKSB9KTtcclxuICAgICAgICAgICAgaWNvbi5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkub3BlbkZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBub3RpY2Ugd2hlbiBubyB2YWx1ZSBwcm92aWRlZCBmb3Igb3BlbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgeyBOb3RpY2UgfSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxzL0FwcCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVFbWJlZE9wZW5Db250YWluZXIobW9ja1VwZGF0ZSwgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGNsaWNrXHJcbiAgICAgICAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsaWNrRXZlbnQsICdwcmV2ZW50RGVmYXVsdCcsIHsgdmFsdWU6IGplc3QuZm4oKSB9KTtcclxuICAgICAgICAgICAgaWNvbi5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1VuYWJsZSB0byBnZW5lcmF0ZSBsaW5rIGZvciB0aGUgbWVkaWEuJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnaGFuZGxlSWNvbkNsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtZWRpYSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0TWVkaWEgfSA9IHJlcXVpcmUoJ1V0aWxzL01vZGFscy9Nb2RhbHMnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRGaWxlID0geyBwYXRoOiAnaW1hZ2VzL3NlbGVjdGVkLmpwZycsIG5hbWU6ICdzZWxlY3RlZC5qcGcnIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzZWxlY3RNZWRpYS5tb2NrUmVzb2x2ZWRWYWx1ZShzZWxlY3RlZEZpbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyB0ZXh0Q29udGVudDogJycgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbWVkaWFQcm9wZXJ0eS5oYW5kbGVJY29uQ2xpY2sobW9ja1VwZGF0ZSwgbW9ja0V2ZW50IGFzIGFueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0TWVkaWEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tWYXVsdCwgJ0Nob2lzaXNzZXogdW4gZG9jdW1lbnQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdbW2ltYWdlcy9zZWxlY3RlZC5qcGd8c2VsZWN0ZWQuanBnXV0nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgbGluayB0ZXh0IGFmdGVyIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZWxlY3RNZWRpYSB9ID0gcmVxdWlyZSgnVXRpbHMvTW9kYWxzL01vZGFscycpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEZpbGUgPSB7IHBhdGg6ICdpbWFnZXMvc2VsZWN0ZWQuanBnJywgbmFtZTogJ3NlbGVjdGVkLmpwZycgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNlbGVjdE1lZGlhLm1vY2tSZXNvbHZlZFZhbHVlKHNlbGVjdGVkRmlsZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobGlua0VsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG1lZGlhUHJvcGVydHkuaGFuZGxlSWNvbkNsaWNrKG1vY2tVcGRhdGUsIG1vY2tFdmVudCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50LnRleHRDb250ZW50KS50b0JlKCdzZWxlY3RlZC5qcGcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FuY2VsbGVkIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZWxlY3RNZWRpYSB9ID0gcmVxdWlyZSgnVXRpbHMvTW9kYWxzL01vZGFscycpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2VsZWN0TWVkaWEubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRXZlbnQgPSB7IHRhcmdldDogeyBjbG9zZXN0OiBqZXN0LmZuKCkgfSB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbWVkaWFQcm9wZXJ0eS5oYW5kbGVJY29uQ2xpY2sobW9ja1VwZGF0ZSwgbW9ja0V2ZW50IGFzIGFueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIGplc3Quc3B5T24obWVkaWFQcm9wZXJ0eSwgJ2dldExpbmsnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgZmllbGQgY29udGFpbmVyIHdpdGggdHJ1bmNhdGVkIHRleHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Zlcnlsb25nZmlsZW5hbWUuanBnXV0nO1xyXG4gICAgICAgICAgICAobWVkaWFQcm9wZXJ0eS5nZXRMaW5rIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKCd2ZXJ5bG9uZ2ZpbGVuYW1lLmpwZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnZmllbGQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rPy50ZXh0Q29udGVudCkudG9CZSgndmVyeWxvbmdmaWxlLi4uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rPy5nZXRBdHRyaWJ1dGUoJ2Z1bGwtdGV4dCcpKS50b0JlKCd2ZXJ5bG9uZ2ZpbGVuYW1lLmpwZycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCB0cnVuY2F0ZSBzaG9ydCB0ZXh0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tzaG9ydC5qcGddXSc7XHJcbiAgICAgICAgICAgIChtZWRpYVByb3BlcnR5LmdldExpbmsgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoJ3Nob3J0LmpwZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluaz8udGV4dENvbnRlbnQpLnRvQmUoJ3Nob3J0LmpwZycpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluaz8uZ2V0QXR0cmlidXRlKCdmdWxsLXRleHQnKSkudG9CZSgnc2hvcnQuanBnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGZpbGUgbmFtZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbXV0nO1xyXG4gICAgICAgICAgICAobWVkaWFQcm9wZXJ0eS5nZXRMaW5rIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluaz8udGV4dENvbnRlbnQpLnRvQmUoJycpO1xyXG4gICAgICAgICAgICAvLyBUZXN0IHF1ZSBsZSBsaWVuIGV4aXN0ZSBtw6ptZSBhdmVjIHVuIG5vbSB2aWRlXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IHVwIGNsaWNrIGhhbmRsZXIgZm9yIGxpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Rlc3QuanBnXV0nO1xyXG4gICAgICAgICAgICAobWVkaWFQcm9wZXJ0eS5nZXRMaW5rIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKCd0ZXN0LmpwZycpO1xyXG4gICAgICAgICAgICBqZXN0LnNweU9uKG1lZGlhUHJvcGVydHksICdtb2RpZnlGaWVsZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJykgYXMgSFRNTEFuY2hvckVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay5ocmVmKS50b0JlKCdodHRwOi8vbG9jYWxob3N0LyMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnbW9kaWZ5RmllbGQnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgb3BlbiBleGlzdGluZyBmaWxlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHsgbmFtZTogJ2V4aXN0aW5nLmpwZycgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0xlYWYgPSB7IG9wZW5GaWxlOiBqZXN0LmZuKCkgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgbWlzc2luZyBtb2NrIG1ldGhvZHNcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5nZXRGaWxlcyA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21vY2tGaWxlXSk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAud29ya3NwYWNlID0geyBnZXRMZWFmOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tMZWFmKSB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgnZnVsbC10ZXh0JywgJ2V4aXN0aW5nLmpwZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobGlua0VsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogamVzdC5mbigpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBtZWRpYVByb3BlcnR5Lm1vZGlmeUZpZWxkKG1vY2tFdmVudCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tFdmVudC5wcmV2ZW50RGVmYXVsdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja0xlYWYub3BlbkZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IG5vdGljZSBmb3Igbm9uLWV4aXN0ZW50IGZpbGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgTm90aWNlIH0gPSByZXF1aXJlKCcuLi8uLi9VdGlscy9BcHAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgbWlzc2luZyBtb2NrIG1ldGhvZFxyXG4gICAgICAgICAgICBtb2NrVmF1bHQuYXBwLnZhdWx0LmdldEZpbGVzID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdmdWxsLXRleHQnLCAnbm9uZXhpc3RlbnQuanBnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTZWxlY3RvcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShsaW5rRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBqZXN0LmZuKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG1lZGlhUHJvcGVydHkubW9kaWZ5RmllbGQobW9ja0V2ZW50IGFzIGFueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoTm90aWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnTGUgZmljaGllciBub25leGlzdGVudC5qcGcgblxcJ2V4aXN0ZSBwYXMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZWFybHkgd2hlbiBubyBjdXJyZW50IGZpZWxkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgLy8gTm8gZnVsbC10ZXh0IGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobGlua0VsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogamVzdC5mbigpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBtZWRpYVByb3BlcnR5Lm1vZGlmeUZpZWxkKG1vY2tFdmVudCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tFdmVudC5wcmV2ZW50RGVmYXVsdCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheSBpY29uIG1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZGlzcGxheSA9ICdpY29uJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgaWNvbiBkaXNwbGF5IGNvbnRhaW5lcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZ2V0RmlsZUljb24gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdpbWFnZScpO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TWVkaWFGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoeyBuYW1lOiAndGVzdC5qcGcnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsIHRlc3RWYWx1ZSwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ21lZGlhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBmaWxlIG5hbWUgaW4gaWNvbiBtb2RlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0LmpwZ11dJztcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5nZXRGaWxlSWNvbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2ltYWdlJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IG5hbWU6ICd0ZXN0LmpwZycgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdGVzdFZhbHVlLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lZGlhLWZpZWxkLWZpbGUtbmFtZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVOYW1lPy50ZXh0Q29udGVudCkudG9CZSgndGVzdC5qcGcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IFwiRmljaGllciBub24gdHJvdXbDqVwiIHdoZW4gZmlsZSBub3QgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW21pc3NpbmcuanBnXV0nO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LmdldEZpbGVJY29uID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnaW1hZ2UnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldE1lZGlhRnJvbUxpbmsubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsIHRlc3RWYWx1ZSwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tZWRpYS1maWVsZC1maWxlLW5hbWUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlTmFtZT8udGV4dENvbnRlbnQpLnRvQmUoJ0ZpY2hpZXIgbm9uIHRyb3V2w6knKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBtYWtlIGNvbnRhaW5lciBjbGlja2FibGUgaW4gaWNvbiBtb2RlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0LmpwZ11dJztcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5nZXRGaWxlSWNvbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2ltYWdlJyk7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkub3BlbkZpbGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRNZWRpYUZyb21MaW5rLm1vY2tSZXR1cm5WYWx1ZSh7IG5hbWU6ICd0ZXN0LmpwZycgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdGVzdFZhbHVlLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuc3R5bGUuY3Vyc29yKS50b0JlKCdwb2ludGVyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBjbGlja1xyXG4gICAgICAgICAgICBjb250YWluZXIuY2xpY2soKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkub3BlbkZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZmlsbERpc3BsYXkgYnV0dG9uIG1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIG1lZGlhUHJvcGVydHkuZGlzcGxheSA9ICdidXR0b24nO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBidXR0b24gZGlzcGxheSBjb250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Rlc3QuanBnXV0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbWVkaWFQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsIHRlc3RWYWx1ZSwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnY3JlYXRlLWZyZWVjYWQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGJ1dHRvbiB3aXRoIGRlZmF1bHQgdGV4dCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbdGVzdC5qcGddXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdGVzdFZhbHVlLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGJ1dHRvbj8uY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2QtY3RhJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24/LnRleHRDb250ZW50KS50b0JlKCdPdXZyaXIgbGUgZmljaGllcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBidXR0b24gd2l0aCBjdXN0b20gdGl0bGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW3Rlc3QuanBnXV0nO1xyXG4gICAgICAgICAgICBtZWRpYVByb3BlcnR5LnRpdGxlID0gJ0N1c3RvbSBUaXRsZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZWRpYVByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdGVzdFZhbHVlLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGJ1dHRvbj8udGV4dENvbnRlbnQpLnRvQmUoJ0N1c3RvbSBUaXRsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBidXR0b24gY2xpY2sgdG8gb3BlbiBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1t0ZXN0LmpwZ11dJztcclxuICAgICAgICAgICAgbWVkaWFQcm9wZXJ0eS5vcGVuRmlsZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG1lZGlhUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB0ZXN0VmFsdWUsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBidXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1lZGlhUHJvcGVydHkub3BlbkZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9