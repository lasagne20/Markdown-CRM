6dd31bcdce3f9a71a5a5492770f280dc
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock App module
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn((element, iconName) => {
        element.setAttribute('data-icon', iconName);
    }),
    sendNotice: jest.fn(),
    Notice: jest.fn()
}));
// Mock MyVault
jest.mock('../../src/vault/MyVault', () => ({
    MyVault: jest.fn()
}));
const Property_1 = require("../../src/properties/Property");
const SelectProperty_1 = require("../../src/properties/SelectProperty");
describe('SelectProperty', () => {
    let selectProperty;
    let mockVault;
    let mockFile;
    let options;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Mock vault
        mockVault = {
            app: {
                vault: { getFiles: jest.fn(() => []) }
            }
        };
        // Mock file
        mockFile = {
            getMetadata: jest.fn(() => ({ status: 'in-progress' })),
            getMetadataValue: jest.fn((key) => key === 'status' ? 'in-progress' : undefined),
            updateMetadata: jest.fn(),
            vault: mockVault
        };
        // Create test options
        options = [
            { name: 'todo', color: '#ffcccc' },
            { name: 'in-progress', color: '#ccffcc' },
            { name: 'done', color: '#ccccff' },
            { name: 'blocked', color: '#ffccff' }
        ];
        selectProperty = new SelectProperty_1.SelectProperty('status', mockVault, options);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('constructor', () => {
        it('should create SelectProperty with correct type and options', () => {
            const prop = new SelectProperty_1.SelectProperty('test', mockVault, options);
            expect(prop.name).toBe('test');
            expect(prop.type).toBe('select');
            expect(prop.options).toBe(options);
            expect(prop.options.length).toBe(4);
        });
        it('should inherit from Property', () => {
            expect(selectProperty).toBeInstanceOf(Property_1.Property);
            expect(selectProperty).toBeInstanceOf(SelectProperty_1.SelectProperty);
        });
        it('should accept custom arguments', () => {
            const args = { icon: 'custom-select', staticProperty: true };
            const prop = new SelectProperty_1.SelectProperty('custom', options, args);
            expect(prop.name).toBe('custom');
            expect(prop.static).toBe(true);
            expect(prop.icon).toBe('custom-select');
            expect(prop.options).toBe(options);
        });
        it('should handle empty options array', () => {
            const prop = new SelectProperty_1.SelectProperty('empty', mockVault, []);
            expect(prop.options).toEqual([]);
            expect(prop.options.length).toBe(0);
        });
    });
    describe('fillDisplay', () => {
        it('should create complete display structure', () => {
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay('in-progress', updateFn);
            expect(display).toBeTruthy();
            expect(display.classList.contains('metadata-field')).toBe(true);
            const fieldContainer = display.querySelector('.field-container-column');
            expect(fieldContainer).toBeTruthy();
            const selectElement = display.querySelector('select');
            expect(selectElement).toBeTruthy();
        });
        it('should create header when title is provided', () => {
            selectProperty.title = 'Project Status';
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay('todo', updateFn);
            const header = display.querySelector('.metadata-header');
            expect(header).toBeTruthy();
            expect(header?.textContent).toBe('Project Status');
        });
        it('should not create header when title is not provided', () => {
            selectProperty.title = undefined;
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay('todo', updateFn);
            const header = display.querySelector('.metadata-header');
            expect(header).toBeFalsy();
        });
        it('should set vault property', () => {
            const updateFn = jest.fn();
            selectProperty.fillDisplay('done', updateFn);
            expect(selectProperty.vault).toBe(mockVault);
        });
    });
    describe('createSelectWidget', () => {
        it('should create select element with all options', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('in-progress', updateFn);
            expect(selectElement.tagName).toBe('SELECT');
            expect(selectElement.classList.contains('select-dropdown')).toBe(true);
            const optionElements = selectElement.querySelectorAll('option');
            expect(optionElements.length).toBe(4);
            optionElements.forEach((optionEl, index) => {
                expect(optionEl.value).toBe(options[index].name);
                expect(optionEl.textContent).toBe(options[index].name);
                // Browser converts hex colors to rgb format, so we check the style attribute directly
                expect(optionEl.style.backgroundColor).toBeTruthy();
                expect(optionEl.classList.contains('select-dropdown-option')).toBe(true);
            });
        });
        it('should set selected option correctly', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('done', updateFn);
            const selectedOption = Array.from(selectElement.options).find(opt => opt.selected);
            expect(selectedOption?.value).toBe('done');
            expect(selectedOption?.textContent).toBe('done');
        });
        it('should apply background color of selected option', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('blocked', updateFn);
            // Check that a background color was set (browser converts hex to rgb)
            expect(selectElement.style.backgroundColor).toBeTruthy();
        });
        it('should handle no initial value by selecting first option', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('', updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // First option color set
            expect(updateFn).toHaveBeenCalledWith('todo'); // First option name
        });
        it('should handle empty value by selecting first option', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget(null, updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // First option color set
            expect(updateFn).toHaveBeenCalledWith('todo'); // First option name
        });
        it('should handle empty options array gracefully', () => {
            const emptyProperty = new SelectProperty_1.SelectProperty('empty', mockVault, []);
            const updateFn = jest.fn();
            const selectElement = emptyProperty.createSelectWidget('any-value', updateFn);
            expect(selectElement.options.length).toBe(0);
            expect(selectElement.style.backgroundColor).toBe(''); // No color set
            expect(updateFn).not.toHaveBeenCalled();
        });
        it('should disable select when static is true', () => {
            selectProperty.static = true;
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            expect(selectElement.disabled).toBe(true);
        });
        it('should not disable select when static is false', () => {
            selectProperty.static = false;
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            expect(selectElement.disabled).toBe(false);
        });
    });
    describe('change event handling', () => {
        it('should handle option change events', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            // Change to 'done' option
            selectElement.value = 'done';
            const changeEvent = new Event('change');
            selectElement.dispatchEvent(changeEvent);
            // Wait for async update
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(updateFn).toHaveBeenCalledWith('done');
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Color should be set
        });
        it('should update background color on change', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            const initialColor = selectElement.style.backgroundColor;
            expect(initialColor).toBeTruthy(); // todo color set
            // Change to 'in-progress'
            selectElement.value = 'in-progress';
            selectElement.dispatchEvent(new Event('change'));
            // Wait for event processing
            await new Promise(resolve => setTimeout(resolve, 0));
            const newColor = selectElement.style.backgroundColor;
            expect(newColor).toBeTruthy(); // in-progress color set
            expect(newColor).not.toBe(initialColor); // Color should change
        });
        it('should handle change to non-existent option gracefully', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            // Since select elements only allow values that exist as options,
            // setting a non-existent value will actually result in an empty string
            selectElement.value = 'non-existent'; // This gets normalized to ''
            selectElement.dispatchEvent(new Event('change'));
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(updateFn).toHaveBeenCalledWith(''); // Empty string for invalid value
            // Background color should remain unchanged since option not found
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Original color still set
        });
    });
    describe('integration with base Property class', () => {
        it('should work with getDisplay method', () => {
            selectProperty.read = jest.fn(() => 'in-progress');
            const display = selectProperty.getDisplay(mockFile);
            expect(display).toBeTruthy();
            expect(display.classList.contains('metadata-field')).toBe(true);
        });
        it('should inherit all base functionality', () => {
            expect(selectProperty.name).toBe('status');
            expect(selectProperty.type).toBe('select');
            expect(typeof selectProperty.read).toBe('function');
            expect(typeof selectProperty.createFieldContainer).toBe('function');
        });
        it('should use correct field container', () => {
            const container = selectProperty.createFieldContainer();
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('metadata-field')).toBe(true);
        });
    });
    describe('option management', () => {
        it('should handle options with different colors', () => {
            const colorfulOptions = [
                { name: 'red', color: 'red' },
                { name: 'green', color: 'green' },
                { name: 'blue', color: 'blue' },
                { name: 'yellow', color: '#ffff00' },
                { name: 'transparent', color: 'transparent' }
            ];
            const colorProperty = new SelectProperty_1.SelectProperty('colors', mockVault, colorfulOptions);
            const updateFn = jest.fn();
            const selectElement = colorProperty.createSelectWidget('blue', updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Blue color set
            const options = selectElement.querySelectorAll('option');
            expect(options[0].style.backgroundColor).toBeTruthy(); // Red set
            expect(options[1].style.backgroundColor).toBeTruthy(); // Green set
            expect(options[2].style.backgroundColor).toBeTruthy(); // Blue set
            expect(options[3].style.backgroundColor).toBeTruthy(); // Yellow set
            expect(options[4].style.backgroundColor).toBeTruthy(); // Transparent set
        });
        it('should handle options with special characters in names', () => {
            const specialOptions = [
                { name: 'option-with-dashes', color: 'red' },
                { name: 'option_with_underscores', color: 'green' },
                { name: 'option with spaces', color: 'blue' },
                { name: 'option.with.dots', color: 'yellow' },
                { name: 'option/with/slashes', color: 'purple' }
            ];
            const specialProperty = new SelectProperty_1.SelectProperty('special', mockVault, specialOptions);
            const updateFn = jest.fn();
            const selectElement = specialProperty.createSelectWidget('option with spaces', updateFn);
            const selectedOption = Array.from(selectElement.options).find(opt => opt.selected);
            expect(selectedOption?.value).toBe('option with spaces');
            expect(selectedOption?.textContent).toBe('option with spaces');
        });
        it('should handle long option names', () => {
            const longOptions = [
                { name: 'Very long option name that might cause display issues', color: 'red' },
                { name: 'Another extremely long option name for testing purposes', color: 'green' }
            ];
            const longProperty = new SelectProperty_1.SelectProperty('long', mockVault, longOptions);
            const updateFn = jest.fn();
            const selectElement = longProperty.createSelectWidget(longOptions[0].name, updateFn);
            const options = selectElement.querySelectorAll('option');
            expect(options[0].textContent).toBe(longOptions[0].name);
            expect(options[1].textContent).toBe(longOptions[1].name);
        });
    });
    describe('edge cases and error handling', () => {
        it('should handle undefined colors', () => {
            const undefinedColorOptions = [
                { name: 'no-color', color: undefined },
                { name: 'empty-color', color: '' },
                { name: 'null-color', color: null }
            ];
            const undefinedProperty = new SelectProperty_1.SelectProperty('undefined', mockVault, undefinedColorOptions);
            const updateFn = jest.fn();
            const selectElement = undefinedProperty.createSelectWidget('no-color', updateFn);
            // Should not crash and create options anyway
            expect(selectElement.options.length).toBe(3);
        });
        it('should handle duplicate option names', () => {
            const duplicateOptions = [
                { name: 'duplicate', color: 'red' },
                { name: 'unique', color: 'green' },
                { name: 'duplicate', color: 'blue' }
            ];
            const duplicateProperty = new SelectProperty_1.SelectProperty('duplicate', mockVault, duplicateOptions);
            const updateFn = jest.fn();
            const selectElement = duplicateProperty.createSelectWidget('duplicate', updateFn);
            // Should create all options, even duplicates
            expect(selectElement.options.length).toBe(3);
            // Last duplicate with same name should be selected (browser behavior)
            const selectedOptions = Array.from(selectElement.options).filter(opt => opt.selected);
            expect(selectedOptions.length).toBe(1);
            expect(selectedOptions[0].style.backgroundColor).toBeTruthy(); // Color should be set (last duplicate)
        });
        it('should handle case sensitivity in option selection', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('TODO', updateFn); // Wrong case
            // Value 'TODO' doesn't match any option (case sensitive), so no styling applied
            expect(selectElement.style.backgroundColor).toBe(''); // No color set for non-matching value
            expect(updateFn).not.toHaveBeenCalled(); // No update called for non-matching value
            // But the select element should still contain all options
            expect(selectElement.options.length).toBe(4);
        });
        it('should handle null/undefined values in widget creation', () => {
            const updateFn = jest.fn();
            // Should not crash with null/undefined
            expect(() => {
                selectProperty.createSelectWidget(null, updateFn);
            }).not.toThrow();
            expect(() => {
                selectProperty.createSelectWidget(undefined, updateFn);
            }).not.toThrow();
        });
    });
    describe('complete workflow', () => {
        it('should handle complete selection workflow', async () => {
            const updateFn = jest.fn();
            // Create display
            const display = selectProperty.fillDisplay('todo', updateFn);
            const selectElement = display.querySelector('select');
            // Verify initial state
            expect(selectElement.value).toBe('todo');
            const initialColor = selectElement.style.backgroundColor;
            expect(initialColor).toBeTruthy();
            // Change selection
            selectElement.value = 'done';
            selectElement.dispatchEvent(new Event('change'));
            await new Promise(resolve => setTimeout(resolve, 0));
            // Verify update
            expect(updateFn).toHaveBeenCalledWith('done');
            const newColor = selectElement.style.backgroundColor;
            expect(newColor).toBeTruthy();
            expect(newColor).not.toBe(initialColor);
        });
        it('should work with property read/write cycle', () => {
            // Mock the read method
            selectProperty.read = jest.fn(() => 'blocked');
            const display = selectProperty.getDisplay(mockFile);
            const selectElement = display.querySelector('select');
            expect(selectElement).toBeTruthy();
            // The value should be set based on what read returns
            expect(selectElement.style.backgroundColor).toBeTruthy(); // blocked color set
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFNlbGVjdFByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUtILGtCQUFrQjtBQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFvQixFQUFFLFFBQWdCLEVBQUUsRUFBRTtRQUN4RCxPQUFPLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUM7SUFDRixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNyQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNwQixDQUFDLENBQUMsQ0FBQztBQUVKLGVBQWU7QUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDeEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDckIsQ0FBQyxDQUFDLENBQUM7QUFmSiw0REFBeUQ7QUFDekQsd0VBQXFFO0FBZ0JyRSxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksY0FBOEIsQ0FBQztJQUNuQyxJQUFJLFNBQWMsQ0FBQztJQUNuQixJQUFJLFFBQWEsQ0FBQztJQUNsQixJQUFJLE9BQXdDLENBQUM7SUFFN0MsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLFlBQVk7UUFDWixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFN0IsYUFBYTtRQUNiLFNBQVMsR0FBRztZQUNSLEdBQUcsRUFBRTtnQkFDRCxLQUFLLEVBQUUs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O1lBQ2hCLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM5QyxNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQztZQUNyRCxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDOUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ2xELHVCQUF1QjtZQUN2QixjQUFjLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFL0MsTUFBTSxPQUFPLEdBQUcsY0FBYyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNwRCxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBc0IsQ0FBQztZQUUzRSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbkMscURBQXFEO1lBQ3JELE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsb0JBQW9CO1FBQ2xGLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcU2VsZWN0UHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cclxuICovXHJcblxyXG5pbXBvcnQgeyBQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL1Byb3BlcnR5JztcclxuaW1wb3J0IHsgU2VsZWN0UHJvcGVydHkgfSBmcm9tICcuLi8uLi9zcmMvcHJvcGVydGllcy9TZWxlY3RQcm9wZXJ0eSc7XHJcblxyXG4vLyBNb2NrIEFwcCBtb2R1bGVcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvdmF1bHQvVXRpbHMnLCAoKSA9PiAoe1xyXG4gICAgc2V0SWNvbjogamVzdC5mbigoZWxlbWVudDogSFRNTEVsZW1lbnQsIGljb25OYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1pY29uJywgaWNvbk5hbWUpO1xyXG4gICAgfSksXHJcbiAgICBzZW5kTm90aWNlOiBqZXN0LmZuKCksXHJcbiAgICBOb3RpY2U6IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG4vLyBNb2NrIE15VmF1bHRcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvdmF1bHQvTXlWYXVsdCcsICgpID0+ICh7XHJcbiAgICBNeVZhdWx0OiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ1NlbGVjdFByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHNlbGVjdFByb3BlcnR5OiBTZWxlY3RQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVmF1bHQ6IGFueTtcclxuICAgIGxldCBtb2NrRmlsZTogYW55O1xyXG4gICAgbGV0IG9wdGlvbnM6IHtuYW1lOiBzdHJpbmcsIGNvbG9yOiBzdHJpbmd9W107XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgRE9NXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBNb2NrIHZhdWx0XHJcbiAgICAgICAgbW9ja1ZhdWx0ID0ge1xyXG4gICAgICAgICAgICBhcHA6IHtcclxuICAgICAgICAgICAgICAgIHZhdWx0OiB7IGdldEZpbGVzOiBqZXN0LmZuKCgpID0+IFtdKSB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBNb2NrIGZpbGVcclxuICAgICAgICBtb2NrRmlsZSA9IHtcclxuICAgICAgICAgICAgZ2V0TWV0YWRhdGE6IGplc3QuZm4oKCkgPT4gKHsgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnIH0pKSxcclxuICAgICAgICAgICAgZ2V0TWV0YWRhdGFWYWx1ZTogamVzdC5mbigoa2V5OiBzdHJpbmcpID0+IGtleSA9PT0gJ3N0YXR1cycgPyAnaW4tcHJvZ3Jlc3MnIDogdW5kZWZpbmVkKSxcclxuICAgICAgICAgICAgdXBkYXRlTWV0YWRhdGE6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgdmF1bHQ6IG1vY2tWYXVsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0ZXN0IG9wdGlvbnNcclxuICAgICAgICBvcHRpb25zID0gW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICd0b2RvJywgY29sb3I6ICcjZmZjY2NjJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdpbi1wcm9ncmVzcycsIGNvbG9yOiAnI2NjZmZjYycgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnZG9uZScsIGNvbG9yOiAnI2NjY2NmZicgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnYmxvY2tlZCcsIGNvbG9yOiAnI2ZmY2NmZicgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHNlbGVjdFByb3BlcnR5ID0gbmV3IFNlbGVjdFByb3BlcnR5KCdzdGF0dXMnLCBtb2NrVmF1bHQsIG9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBTZWxlY3RQcm9wZXJ0eSB3aXRoIGNvcnJlY3QgdHlwZSBhbmQgb3B0aW9ucycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgndGVzdCcsIG1vY2tWYXVsdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5uYW1lKS50b0JlKCd0ZXN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLnR5cGUpLnRvQmUoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5vcHRpb25zKS50b0JlKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5vcHRpb25zLmxlbmd0aCkudG9CZSg0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbmhlcml0IGZyb20gUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoUHJvcGVydHkpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0UHJvcGVydHkpLnRvQmVJbnN0YW5jZU9mKFNlbGVjdFByb3BlcnR5KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgY3VzdG9tIGFyZ3VtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHsgaWNvbjogJ2N1c3RvbS1zZWxlY3QnLCBzdGF0aWNQcm9wZXJ0eTogdHJ1ZSB9O1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wID0gbmV3IFNlbGVjdFByb3BlcnR5KCdjdXN0b20nLCBvcHRpb25zLCBhcmdzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLm5hbWUpLnRvQmUoJ2N1c3RvbScpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5zdGF0aWMpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLmljb24pLnRvQmUoJ2N1c3RvbS1zZWxlY3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3Aub3B0aW9ucykudG9CZShvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgb3B0aW9ucyBhcnJheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgnZW1wdHknLCBtb2NrVmF1bHQsIFtdKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLm9wdGlvbnMpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5vcHRpb25zLmxlbmd0aCkudG9CZSgwKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjb21wbGV0ZSBkaXNwbGF5IHN0cnVjdHVyZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBzZWxlY3RQcm9wZXJ0eS5maWxsRGlzcGxheSgnaW4tcHJvZ3Jlc3MnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZGlzcGxheSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoZGlzcGxheS5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lciA9IGRpc3BsYXkucXVlcnlTZWxlY3RvcignLmZpZWxkLWNvbnRhaW5lci1jb2x1bW4nKTtcclxuICAgICAgICAgICAgZXhwZWN0KGZpZWxkQ29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZGlzcGxheS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgaGVhZGVyIHdoZW4gdGl0bGUgaXMgcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdFByb3BlcnR5LnRpdGxlID0gJ1Byb2plY3QgU3RhdHVzJztcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBzZWxlY3RQcm9wZXJ0eS5maWxsRGlzcGxheSgndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRpc3BsYXkucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXI/LnRleHRDb250ZW50KS50b0JlKCdQcm9qZWN0IFN0YXR1cycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBjcmVhdGUgaGVhZGVyIHdoZW4gdGl0bGUgaXMgbm90IHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS50aXRsZSA9IHVuZGVmaW5lZCBhcyBhbnk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gc2VsZWN0UHJvcGVydHkuZmlsbERpc3BsYXkoJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBkaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1oZWFkZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcikudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc2V0IHZhdWx0IHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgc2VsZWN0UHJvcGVydHkuZmlsbERpc3BsYXkoJ2RvbmUnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0UHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVTZWxlY3RXaWRnZXQnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgc2VsZWN0IGVsZW1lbnQgd2l0aCBhbGwgb3B0aW9ucycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ2luLXByb2dyZXNzJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQudGFnTmFtZSkudG9CZSgnU0VMRUNUJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LWRyb3Bkb3duJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50cyA9IHNlbGVjdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvcHRpb25FbGVtZW50cy5sZW5ndGgpLnRvQmUoNCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvcHRpb25FbGVtZW50cy5mb3JFYWNoKChvcHRpb25FbCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcHRpb25FbC52YWx1ZSkudG9CZShvcHRpb25zW2luZGV4XS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcHRpb25FbC50ZXh0Q29udGVudCkudG9CZShvcHRpb25zW2luZGV4XS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIC8vIEJyb3dzZXIgY29udmVydHMgaGV4IGNvbG9ycyB0byByZ2IgZm9ybWF0LCBzbyB3ZSBjaGVjayB0aGUgc3R5bGUgYXR0cmlidXRlIGRpcmVjdGx5XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3B0aW9uRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3B0aW9uRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3QtZHJvcGRvd24tb3B0aW9uJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCBzZWxlY3RlZCBvcHRpb24gY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgnZG9uZScsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gQXJyYXkuZnJvbShzZWxlY3RFbGVtZW50Lm9wdGlvbnMpLmZpbmQob3B0ID0+IG9wdC5zZWxlY3RlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RlZE9wdGlvbj8udmFsdWUpLnRvQmUoJ2RvbmUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdGVkT3B0aW9uPy50ZXh0Q29udGVudCkudG9CZSgnZG9uZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGFwcGx5IGJhY2tncm91bmQgY29sb3Igb2Ygc2VsZWN0ZWQgb3B0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgnYmxvY2tlZCcsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgYSBiYWNrZ3JvdW5kIGNvbG9yIHdhcyBzZXQgKGJyb3dzZXIgY29udmVydHMgaGV4IHRvIHJnYilcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vIGluaXRpYWwgdmFsdWUgYnkgc2VsZWN0aW5nIGZpcnN0IG9wdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBGaXJzdCBvcHRpb24gY29sb3Igc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3RvZG8nKTsgLy8gRmlyc3Qgb3B0aW9uIG5hbWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdmFsdWUgYnkgc2VsZWN0aW5nIGZpcnN0IG9wdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQobnVsbCBhcyBhbnksIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBGaXJzdCBvcHRpb24gY29sb3Igc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3RvZG8nKTsgLy8gRmlyc3Qgb3B0aW9uIG5hbWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgb3B0aW9ucyBhcnJheSBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbXB0eVByb3BlcnR5ID0gbmV3IFNlbGVjdFByb3BlcnR5KCdlbXB0eScsIG1vY2tWYXVsdCwgW10pO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGVtcHR5UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdhbnktdmFsdWUnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCkudG9CZSgwKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlKCcnKTsgLy8gTm8gY29sb3Igc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBkaXNhYmxlIHNlbGVjdCB3aGVuIHN0YXRpYyBpcyB0cnVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5zdGF0aWMgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LmRpc2FibGVkKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBkaXNhYmxlIHNlbGVjdCB3aGVuIHN0YXRpYyBpcyBmYWxzZScsICgpID0+IHtcclxuICAgICAgICAgICAgc2VsZWN0UHJvcGVydHkuc3RhdGljID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCd0b2RvJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuZGlzYWJsZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NoYW5nZSBldmVudCBoYW5kbGluZycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcHRpb24gY2hhbmdlIGV2ZW50cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdG8gJ2RvbmUnIG9wdGlvblxyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbHVlID0gJ2RvbmUnO1xyXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYXN5bmMgdXBkYXRlXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdkb25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBDb2xvciBzaG91bGQgYmUgc2V0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXBkYXRlIGJhY2tncm91bmQgY29sb3Igb24gY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxDb2xvciA9IHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5pdGlhbENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIHRvZG8gY29sb3Igc2V0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdG8gJ2luLXByb2dyZXNzJ1xyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbHVlID0gJ2luLXByb2dyZXNzJztcclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgZXZlbnQgcHJvY2Vzc2luZ1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbmV3Q29sb3IgPSBzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgICAgZXhwZWN0KG5ld0NvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIGluLXByb2dyZXNzIGNvbG9yIHNldFxyXG4gICAgICAgICAgICBleHBlY3QobmV3Q29sb3IpLm5vdC50b0JlKGluaXRpYWxDb2xvcik7IC8vIENvbG9yIHNob3VsZCBjaGFuZ2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2hhbmdlIHRvIG5vbi1leGlzdGVudCBvcHRpb24gZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW5jZSBzZWxlY3QgZWxlbWVudHMgb25seSBhbGxvdyB2YWx1ZXMgdGhhdCBleGlzdCBhcyBvcHRpb25zLFxyXG4gICAgICAgICAgICAvLyBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHZhbHVlIHdpbGwgYWN0dWFsbHkgcmVzdWx0IGluIGFuIGVtcHR5IHN0cmluZ1xyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LnZhbHVlID0gJ25vbi1leGlzdGVudCc7IC8vIFRoaXMgZ2V0cyBub3JtYWxpemVkIHRvICcnXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcnKTsgLy8gRW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIHZhbHVlXHJcbiAgICAgICAgICAgIC8vIEJhY2tncm91bmQgY29sb3Igc2hvdWxkIHJlbWFpbiB1bmNoYW5nZWQgc2luY2Ugb3B0aW9uIG5vdCBmb3VuZFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gT3JpZ2luYWwgY29sb3Igc3RpbGwgc2V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnaW50ZWdyYXRpb24gd2l0aCBiYXNlIFByb3BlcnR5IGNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgd29yayB3aXRoIGdldERpc3BsYXkgbWV0aG9kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigoKSA9PiAnaW4tcHJvZ3Jlc3MnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBzZWxlY3RQcm9wZXJ0eS5nZXREaXNwbGF5KG1vY2tGaWxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChkaXNwbGF5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChkaXNwbGF5LmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbmhlcml0IGFsbCBiYXNlIGZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RQcm9wZXJ0eS5uYW1lKS50b0JlKCdzdGF0dXMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdFByb3BlcnR5LnR5cGUpLnRvQmUoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIHNlbGVjdFByb3BlcnR5LnJlYWQpLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0eXBlb2Ygc2VsZWN0UHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXIpLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXNlIGNvcnJlY3QgZmllbGQgY29udGFpbmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnb3B0aW9uIG1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgb3B0aW9ucyB3aXRoIGRpZmZlcmVudCBjb2xvcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yZnVsT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3JlZCcsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnZ3JlZW4nLCBjb2xvcjogJ2dyZWVuJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnYmx1ZScsIGNvbG9yOiAnYmx1ZScgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3llbGxvdycsIGNvbG9yOiAnI2ZmZmYwMCcgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3RyYW5zcGFyZW50JywgY29sb3I6ICd0cmFuc3BhcmVudCcgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29sb3JQcm9wZXJ0eSA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgnY29sb3JzJywgbW9ja1ZhdWx0LCBjb2xvcmZ1bE9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGNvbG9yUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdibHVlJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIEJsdWUgY29sb3Igc2V0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gc2VsZWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFJlZCBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMV0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIEdyZWVuIHNldFxyXG4gICAgICAgICAgICBleHBlY3Qob3B0aW9uc1syXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gQmx1ZSBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbM10uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFllbGxvdyBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbNF0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFRyYW5zcGFyZW50IHNldFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcHRpb25zIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzIGluIG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ29wdGlvbi13aXRoLWRhc2hlcycsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uX3dpdGhfdW5kZXJzY29yZXMnLCBjb2xvcjogJ2dyZWVuJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uIHdpdGggc3BhY2VzJywgY29sb3I6ICdibHVlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uLndpdGguZG90cycsIGNvbG9yOiAneWVsbG93JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uL3dpdGgvc2xhc2hlcycsIGNvbG9yOiAncHVycGxlJyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsUHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ3NwZWNpYWwnLCBtb2NrVmF1bHQsIHNwZWNpYWxPcHRpb25zKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzcGVjaWFsUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdvcHRpb24gd2l0aCBzcGFjZXMnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IEFycmF5LmZyb20oc2VsZWN0RWxlbWVudC5vcHRpb25zKS5maW5kKG9wdCA9PiBvcHQuc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0ZWRPcHRpb24/LnZhbHVlKS50b0JlKCdvcHRpb24gd2l0aCBzcGFjZXMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdGVkT3B0aW9uPy50ZXh0Q29udGVudCkudG9CZSgnb3B0aW9uIHdpdGggc3BhY2VzJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvbmcgb3B0aW9uIG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsb25nT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1ZlcnkgbG9uZyBvcHRpb24gbmFtZSB0aGF0IG1pZ2h0IGNhdXNlIGRpc3BsYXkgaXNzdWVzJywgY29sb3I6ICdyZWQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdBbm90aGVyIGV4dHJlbWVseSBsb25nIG9wdGlvbiBuYW1lIGZvciB0ZXN0aW5nIHB1cnBvc2VzJywgY29sb3I6ICdncmVlbicgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbG9uZ1Byb3BlcnR5ID0gbmV3IFNlbGVjdFByb3BlcnR5KCdsb25nJywgbW9ja1ZhdWx0LCBsb25nT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gbG9uZ1Byb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldChsb25nT3B0aW9uc1swXS5uYW1lLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gc2VsZWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMF0udGV4dENvbnRlbnQpLnRvQmUobG9uZ09wdGlvbnNbMF0ubmFtZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvcHRpb25zWzFdLnRleHRDb250ZW50KS50b0JlKGxvbmdPcHRpb25zWzFdLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2VkZ2UgY2FzZXMgYW5kIGVycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCBjb2xvcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVuZGVmaW5lZENvbG9yT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ25vLWNvbG9yJywgY29sb3I6IHVuZGVmaW5lZCBhcyBhbnkgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2VtcHR5LWNvbG9yJywgY29sb3I6ICcnIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdudWxsLWNvbG9yJywgY29sb3I6IG51bGwgYXMgYW55IH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHVuZGVmaW5lZFByb3BlcnR5ID0gbmV3IFNlbGVjdFByb3BlcnR5KCd1bmRlZmluZWQnLCBtb2NrVmF1bHQsIHVuZGVmaW5lZENvbG9yT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gdW5kZWZpbmVkUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCduby1jb2xvcicsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBub3QgY3Jhc2ggYW5kIGNyZWF0ZSBvcHRpb25zIGFueXdheVxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCkudG9CZSgzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZHVwbGljYXRlIG9wdGlvbiBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2R1cGxpY2F0ZScsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndW5pcXVlJywgY29sb3I6ICdncmVlbicgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2R1cGxpY2F0ZScsIGNvbG9yOiAnYmx1ZScgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlUHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ2R1cGxpY2F0ZScsIG1vY2tWYXVsdCwgZHVwbGljYXRlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZHVwbGljYXRlUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdkdXBsaWNhdGUnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaG91bGQgY3JlYXRlIGFsbCBvcHRpb25zLCBldmVuIGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQub3B0aW9ucy5sZW5ndGgpLnRvQmUoMyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMYXN0IGR1cGxpY2F0ZSB3aXRoIHNhbWUgbmFtZSBzaG91bGQgYmUgc2VsZWN0ZWQgKGJyb3dzZXIgYmVoYXZpb3IpXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9ucyA9IEFycmF5LmZyb20oc2VsZWN0RWxlbWVudC5vcHRpb25zKS5maWx0ZXIob3B0ID0+IG9wdC5zZWxlY3RlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RlZE9wdGlvbnMubGVuZ3RoKS50b0JlKDEpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0ZWRPcHRpb25zWzBdLnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBDb2xvciBzaG91bGQgYmUgc2V0IChsYXN0IGR1cGxpY2F0ZSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FzZSBzZW5zaXRpdml0eSBpbiBvcHRpb24gc2VsZWN0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgnVE9ETycsIHVwZGF0ZUZuKTsgLy8gV3JvbmcgY2FzZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmFsdWUgJ1RPRE8nIGRvZXNuJ3QgbWF0Y2ggYW55IG9wdGlvbiAoY2FzZSBzZW5zaXRpdmUpLCBzbyBubyBzdHlsaW5nIGFwcGxpZWRcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlKCcnKTsgLy8gTm8gY29sb3Igc2V0IGZvciBub24tbWF0Y2hpbmcgdmFsdWVcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZuKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpOyAvLyBObyB1cGRhdGUgY2FsbGVkIGZvciBub24tbWF0Y2hpbmcgdmFsdWVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEJ1dCB0aGUgc2VsZWN0IGVsZW1lbnQgc2hvdWxkIHN0aWxsIGNvbnRhaW4gYWxsIG9wdGlvbnNcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQub3B0aW9ucy5sZW5ndGgpLnRvQmUoNCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwvdW5kZWZpbmVkIHZhbHVlcyBpbiB3aWRnZXQgY3JlYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCBjcmFzaCB3aXRoIG51bGwvdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQobnVsbCBhcyBhbnksIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQodW5kZWZpbmVkIGFzIGFueSwgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NvbXBsZXRlIHdvcmtmbG93JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIHNlbGVjdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgZGlzcGxheVxyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gc2VsZWN0UHJvcGVydHkuZmlsbERpc3BsYXkoJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmVyaWZ5IGluaXRpYWwgc3RhdGVcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQudmFsdWUpLnRvQmUoJ3RvZG8nKTtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvbG9yID0gc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbml0aWFsQ29sb3IpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC52YWx1ZSA9ICdkb25lJztcclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSB1cGRhdGVcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZG9uZScpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDb2xvciA9IHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBleHBlY3QobmV3Q29sb3IpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG5ld0NvbG9yKS5ub3QudG9CZShpbml0aWFsQ29sb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBwcm9wZXJ0eSByZWFkL3dyaXRlIGN5Y2xlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSByZWFkIG1ldGhvZFxyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigoKSA9PiAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHNlbGVjdFByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZGlzcGxheS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIC8vIFRoZSB2YWx1ZSBzaG91bGQgYmUgc2V0IGJhc2VkIG9uIHdoYXQgcmVhZCByZXR1cm5zXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBibG9ja2VkIGNvbG9yIHNldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=