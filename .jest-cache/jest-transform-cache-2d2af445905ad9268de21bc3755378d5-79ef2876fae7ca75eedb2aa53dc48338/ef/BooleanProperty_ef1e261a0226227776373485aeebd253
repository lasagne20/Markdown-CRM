da5ea656f4e4480e9dcf193abea64ee1
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BooleanProperty = void 0;
const Property_1 = require("./Property");
class BooleanProperty extends Property_1.Property {
    constructor(name, vault, args = {}) {
        super(name, vault, args);
        this.type = "boolean";
    }
    fillDisplay(value, update, args) {
        const container = document.createElement('div');
        const button = document.createElement('span');
        button.style.cursor = 'pointer';
        button.style.userSelect = 'none';
        button.tabIndex = 0; // Make focusable for accessibility
        this.vault.app.setIcon(button, this.icon);
        // Keep track of current state internally
        let currentValue = Boolean(value);
        const updateButtonState = (newValue) => {
            if (newValue) {
                button.classList.add('boolean-property-button-active');
            }
            else {
                button.classList.remove('boolean-property-button-active');
            }
        };
        // Set initial state
        updateButtonState(currentValue);
        if (!this.static) {
            button.onclick = async () => {
                currentValue = !currentValue;
                updateButtonState(currentValue);
                await update(currentValue);
            };
        }
        container.appendChild(button);
        return container;
    }
}
exports.BooleanProperty = BooleanProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEJvb2xlYW5Qcm9wZXJ0eS50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSx5Q0FBc0M7QUFHdEMsTUFBYSxlQUFnQixTQUFRLG1CQUFRO0lBSXpDLFlBQVksSUFBWSxFQUFFLEtBQVksRUFBRSxJQUFJLEdBQUcsRUFBRTtRQUM3QyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUhiLFNBQUksR0FBWSxTQUFTLENBQUM7SUFJMUMsQ0FBQztJQUVTLFdBQVcsQ0FBQyxLQUFVLEVBQUUsTUFBcUMsRUFBRSxJQUFVO1FBQzNFLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7UUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsbUNBQW1DO1FBQ3hELElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTFDLHlDQUF5QztRQUN6QyxJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbEMsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLFFBQWlCLEVBQUUsRUFBRTtZQUM1QyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNYLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFDM0QsQ0FBQztpQkFBTSxDQUFDO2dCQUNKLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFDOUQsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLG9CQUFvQjtRQUNwQixpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVoQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2YsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLElBQUksRUFBRTtnQkFDeEIsWUFBWSxHQUFHLENBQUMsWUFBWSxDQUFDO2dCQUM3QixpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDaEMsTUFBTSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0IsQ0FBQyxDQUFDO1FBQ04sQ0FBQztRQUVELFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztDQUNSO0FBekNELDBDQXlDQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXHNyY1xccHJvcGVydGllc1xcQm9vbGVhblByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBQcm9wZXJ0eSB9IGZyb20gJy4vUHJvcGVydHknO1xyXG5pbXBvcnQgeyBWYXVsdCB9IGZyb20gJy4uL3ZhdWx0L1ZhdWx0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBCb29sZWFuUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHR5cGUgOiBzdHJpbmcgPSBcImJvb2xlYW5cIjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCwgYXJncyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIobmFtZSwgdmF1bHQsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgICBvdmVycmlkZSBmaWxsRGlzcGxheSh2YWx1ZTogYW55LCB1cGRhdGU6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+LCBhcmdzPyA6IHt9KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBidXR0b24udGFiSW5kZXggPSAwOyAvLyBNYWtlIGZvY3VzYWJsZSBmb3IgYWNjZXNzaWJpbGl0eVxyXG4gICAgICAgICAgICB0aGlzLnZhdWx0LmFwcC5zZXRJY29uKGJ1dHRvbiwgdGhpcy5pY29uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgY3VycmVudCBzdGF0ZSBpbnRlcm5hbGx5XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUJ1dHRvblN0YXRlID0gKG5ld1ZhbHVlOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYm9vbGVhbi1wcm9wZXJ0eS1idXR0b24tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdib29sZWFuLXByb3BlcnR5LWJ1dHRvbi1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXHJcbiAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSAhY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbn0iXSwidmVyc2lvbiI6M30=