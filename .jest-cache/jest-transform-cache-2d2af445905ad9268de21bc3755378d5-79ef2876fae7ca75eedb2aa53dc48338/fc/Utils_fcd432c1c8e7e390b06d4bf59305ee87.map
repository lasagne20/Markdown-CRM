{"version":3,"names":["cov_22kzlx0glp","s","waitForFileMetaDataUpdate","app","filePath","key","callback","f","attempts","maxAttempts","file","getFile","b","metadata","getMetadata","undefined","error","console","warn","Promise","resolve","setTimeout","exports","waitForMetaDataCacheUpdate"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\vault\\Utils.ts"],"sourcesContent":["import { IApp } from \"../interfaces/IApp\";\r\n// Utility functions for file metadata operations\r\n\r\nexport const waitForFileMetaDataUpdate = async (\r\n    app: IApp,\r\n    filePath: string,\r\n    key: string,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que les métadonnées du fichier soient mises à jour\r\n    // Dans un environnement réel, ceci surveillerait les changements de métadonnées\r\n    let attempts = 0;\r\n    const maxAttempts = 50;\r\n    \r\n    try {\r\n        while (attempts < maxAttempts) {\r\n            try {\r\n                const file = await app.getFile(filePath);\r\n                if (file) {\r\n                    const metadata = await app.getMetadata(file);\r\n                    if (metadata && metadata[key] !== undefined) {\r\n                        try {\r\n                            await callback();\r\n                        } catch (error) {\r\n                            // Handle callback errors gracefully\r\n                            console.warn('Callback error in waitForFileMetaDataUpdate:', error);\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                // Handle file access errors gracefully\r\n                console.warn('File access error in waitForFileMetaDataUpdate:', error);\r\n                break;\r\n            }\r\n            \r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            attempts++;\r\n        }\r\n        \r\n        // Si on n'arrive pas à détecter le changement, on exécute quand même le callback\r\n        try {\r\n            await callback();\r\n        } catch (error) {\r\n            // Handle callback errors gracefully\r\n            console.warn('Callback error in waitForFileMetaDataUpdate:', error);\r\n        }\r\n    } catch (error) {\r\n        // Handle any other errors gracefully\r\n        console.warn('Unexpected error in waitForFileMetaDataUpdate:', error);\r\n    }\r\n};\r\n\r\nexport const waitForMetaDataCacheUpdate = async (\r\n    app: any,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que le cache des métadonnées soit mis à jour\r\n    // Simulation d'une attente courte\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    // Let callback errors propagate to caller - don't catch them\r\n    await callback();\r\n};\r\n"],"mappings":"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","ignoreList":[]}