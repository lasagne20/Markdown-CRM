d0bfa62bfc763f8246d418261373a1cd
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock flatpickr
jest.mock('flatpickr', () => {
    const mockFlatpickr = jest.fn();
    return mockFlatpickr;
});
jest.mock('flatpickr/dist/l10n/fr.js', () => ({}));
// Mock setIcon
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn()
}));
const DateProperty_1 = require("../../src/properties/DateProperty");
const RangeDateProperty_1 = require("../../src/properties/RangeDateProperty");
// Get the mocked flatpickr function
const flatpickr = jest.requireMock('flatpickr');
describe('RangeDateProperty', () => {
    let rangeDateProperty;
    let mockUpdate;
    let mockVault;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Reset all mocks
        jest.clearAllMocks();
        // Setup mock vault
        mockVault = {
            getAbstractFileByPath: jest.fn(),
            adapter: { path: { join: jest.fn() } }
        };
        mockUpdate = jest.fn().mockResolvedValue(undefined);
        // Reset flatpickr mock
        flatpickr.mockImplementation((element, options) => {
            // Store options on element for testing
            element._flatpickrOptions = options;
            return {
                destroy: jest.fn(),
                clear: jest.fn(),
                setDate: jest.fn()
            };
        });
    });
    describe('Constructor', () => {
        test('should create RangeDateProperty with correct type', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.type).toBe('dateRange');
        });
        test('should inherit from DateProperty', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
        });
        test('should handle custom arguments', () => {
            const args = { icon: 'calendar', defaultValue: '2023-01-01 to 2023-01-31' };
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, args);
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.icon).toBe('calendar');
        });
    });
    describe('validate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should validate single date format', () => {
            const result = rangeDateProperty.validate('2023-01-15');
            expect(result).toBe('2023-01-15');
        });
        test('should validate date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 to 2023-01-31');
            expect(result).toBe('2023-01-15 to 2023-01-31');
        });
        test('should reject invalid date format', () => {
            const result = rangeDateProperty.validate('2023/01/15');
            expect(result).toBe('');
        });
        test('should reject invalid date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 - 2023-01-31');
            expect(result).toBe('');
        });
        test('should reject malformed dates', () => {
            expect(rangeDateProperty.validate('invalid-date')).toBe('');
            // Note: La validation actuelle est basée sur regex, pas sur la validité de la date
            // Elle accepte donc des dates comme 2023-13-45 si elles suivent le format YYYY-MM-DD
            expect(rangeDateProperty.validate('15-01-2023')).toBe('');
        });
        test('should handle empty value', () => {
            expect(rangeDateProperty.validate('')).toBe('');
            expect(rangeDateProperty.validate(' ')).toBe('');
        });
    });
    describe('formatDateRangeForDisplay', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should format single date for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26');
            expect(result).toMatch(/dimanche 26 février 2023/);
        });
        test('should format date range for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26 to 2023-02-28');
            expect(result).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle invalid date gracefully', () => {
            // This might throw or return a default - let's test the behavior
            expect(() => {
                rangeDateProperty.formatDateRangeForDisplay('invalid-date');
            }).not.toThrow();
        });
    });
    describe('createFieldLink', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should create link with formatted date display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            expect(link.tagName).toBe('DIV');
            expect(link.classList.contains('date-field-link')).toBe(true);
            expect(link.classList.contains('field-link')).toBe(true);
            expect(link.style.cursor).toBe('pointer');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should create link with range display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should show default text for empty value', () => {
            const link = rangeDateProperty.createFieldLink('');
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should show default text for null value', () => {
            const link = rangeDateProperty.createFieldLink(null);
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should have click event listener', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            // Mock the modifyField method
            rangeDateProperty.modifyField = jest.fn();
            // Simulate click
            link.click();
            expect(rangeDateProperty.modifyField).toHaveBeenCalled();
        });
    });
    describe('createFieldDate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should create input with correct attributes', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(input.tagName).toBe('INPUT');
            expect(input.type).toBe('text');
            expect(input.value).toBe('2023-02-26');
            expect(input.classList.contains('field-input')).toBe(true);
        });
        test('should initialize flatpickr with correct options', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                dateFormat: 'Y-m-d',
                defaultDate: '2023-02-26',
                locale: 'fr',
                mode: 'range'
            }));
        });
        test('should handle empty value', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            expect(input.value).toBe('');
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                defaultDate: ''
            }));
        });
        test('should configure onChange callback for single date selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting same start and end date
            const sameDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([sameDate, sameDate]);
            expect(input.value).toBe('2023-02-26');
        });
        test('should configure onChange callback for date range selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting date range
            const startDate = new Date('2023-02-26');
            const endDate = new Date('2023-02-28');
            await flatpickrOptions.onChange([startDate, endDate]);
            expect(input.value).toBe('2023-02-26 to 2023-02-28');
        });
        test('should handle onChange with incomplete selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting only one date
            const startDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([startDate]);
            expect(rangeDateProperty.updateField).not.toHaveBeenCalled();
        });
        test('should configure onClose callback', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            await flatpickrOptions.onClose();
            expect(rangeDateProperty.updateField).toHaveBeenCalledWith(mockUpdate, input, link);
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should create container with correct structure', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('field-container')).toBe(true);
            expect(container.classList.contains('metadata-field')).toBe(true);
            expect(container.children.length).toBe(2); // link and input
        });
        test('should show link and hide input for valid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('block');
            expect(input.style.display).toBe('none');
        });
        test('should hide link and show input for invalid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, 'invalid-date');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
        test('should hide link and show input for empty value', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
    });
    describe('updateField', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
        });
        test('should update with valid date and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should update with valid date range and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26 to 2023-02-28';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should update with invalid date without changing display', async () => {
            const input = document.createElement('input');
            input.value = 'invalid-date';
            const link = document.createElement('div');
            // Set initial display states
            input.style.display = 'block';
            link.style.display = 'none';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('invalid-date');
            expect(input.style.display).toBe('block'); // Should remain unchanged
            expect(link.style.display).toBe('none'); // Should remain unchanged
        });
        test('should handle update errors gracefully', async () => {
            mockUpdate.mockRejectedValue(new Error('Update failed'));
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await expect(rangeDateProperty.updateField(mockUpdate, input, link)).rejects.toThrow('Update failed');
        });
    });
    describe('extractFirstDate static method', () => {
        test('should extract date from French formatted string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1); // February is month 1 (0-indexed)
            expect(result?.getDate()).toBe(26);
        });
        test('should extract first date from range string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023 au mardi 28 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1);
            expect(result?.getDate()).toBe(26);
        });
        test('should handle different months', () => {
            const testCases = [
                { input: '15 janvier 2023', expected: { year: 2023, month: 0, day: 15 } },
                { input: '10 mars 2023', expected: { year: 2023, month: 2, day: 10 } },
                { input: '25 novembre 2023', expected: { year: 2023, month: 10, day: 25 } } // éviter décembre à cause du bug d'accent
            ];
            testCases.forEach(({ input, expected }) => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result?.getFullYear()).toBe(expected.year);
                expect(result?.getMonth()).toBe(expected.month);
                expect(result?.getDate()).toBe(expected.day);
            });
        });
        test('should handle accented characters', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('15 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getMonth()).toBe(1); // février = February
        });
        test('should return null for invalid format', () => {
            const testCases = [
                'invalid date string',
                '2023-02-26',
                'February 26, 2023',
                '../../src/2023',
                ''
            ];
            testCases.forEach(input => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result).toBeNull();
            });
        });
        test('should return null for invalid month names', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('26 invalidmonth 2023');
            expect(result).toBeNull();
        });
    });
    describe('Integration tests', () => {
        test('should work with complete workflow', async () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
            // Create complete container
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const input = container.querySelector('input');
            const link = container.querySelector('.date-field-link');
            // Simulate user input
            input.value = '2023-02-26 to 2023-02-28';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle flatpickr integration', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalled();
            expect(input._flatpickrOptions).toBeDefined();
            expect(input._flatpickrOptions.mode).toBe('range');
            expect(input._flatpickrOptions.locale).toBe('fr');
        });
        test('should maintain proper inheritance', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault);
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
            expect(rangeDateProperty.type).toBe('dateRange');
            expect(typeof rangeDateProperty.formatDateForStorage).toBe('function');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhbmdlRGF0ZVByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUtILGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDeEIsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQ2hDLE9BQU8sYUFBYSxDQUFDO0FBQ3pCLENBQUMsQ0FBQyxDQUFDO0FBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFFbkQsZUFBZTtBQUNmLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN0QyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNyQixDQUFDLENBQUMsQ0FBQztBQWJKLG9FQUFpRTtBQUNqRSw4RUFBMkU7QUFjM0Usb0NBQW9DO0FBQ3BDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7QUFFaEQsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksVUFBOEMsQ0FBQztJQUNuRCxJQUFJLFNBQWMsQ0FBQztJQUVuQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osWUFBWTtRQUNaLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUM3QixrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLG1CQUFtQjtRQUNuQixTQUFTLEdBQUc7WUFDUixx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IiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxSYW5nZURhdGVQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERhdGVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL0RhdGVQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IFJhbmdlRGF0ZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvUmFuZ2VEYXRlUHJvcGVydHknO1xyXG5cclxuLy8gTW9jayBmbGF0cGlja3JcclxuamVzdC5tb2NrKCdmbGF0cGlja3InLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrRmxhdHBpY2tyID0gamVzdC5mbigpO1xyXG4gICAgcmV0dXJuIG1vY2tGbGF0cGlja3I7XHJcbn0pO1xyXG5qZXN0Lm1vY2soJ2ZsYXRwaWNrci9kaXN0L2wxMG4vZnIuanMnLCAoKSA9PiAoe30pKTtcclxuXHJcbi8vIE1vY2sgc2V0SWNvblxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuLy8gR2V0IHRoZSBtb2NrZWQgZmxhdHBpY2tyIGZ1bmN0aW9uXHJcbmNvbnN0IGZsYXRwaWNrciA9IGplc3QucmVxdWlyZU1vY2soJ2ZsYXRwaWNrcicpO1xyXG5cclxuZGVzY3JpYmUoJ1JhbmdlRGF0ZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHJhbmdlRGF0ZVByb3BlcnR5OiBSYW5nZURhdGVQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVXBkYXRlOiBqZXN0Lk1vY2s8UHJvbWlzZTx2b2lkPiwgW3N0cmluZ10+O1xyXG4gICAgbGV0IG1vY2tWYXVsdDogYW55O1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IERPTVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgLy8gUmVzZXQgYWxsIG1vY2tzXHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcblxyXG4gICAgICAgIC8vIFNldHVwIG1vY2sgdmF1bHRcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIGdldEFic3RyYWN0RmlsZUJ5UGF0aDogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBhZGFwdGVyOiB7IHBhdGg6IHsgam9pbjogamVzdC5mbigpIH0gfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG1vY2tVcGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZXNldCBmbGF0cGlja3IgbW9ja1xyXG4gICAgICAgIGZsYXRwaWNrci5tb2NrSW1wbGVtZW50YXRpb24oKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIG9wdGlvbnMgb24gZWxlbWVudCBmb3IgdGVzdGluZ1xyXG4gICAgICAgICAgICAoZWxlbWVudCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3k6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgICAgIGNsZWFyOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBzZXREYXRlOiBqZXN0LmZuKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdDb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIFJhbmdlRGF0ZVByb3BlcnR5IHdpdGggY29ycmVjdCB0eXBlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS5uYW1lKS50b0JlKCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnR5cGUpLnRvQmUoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaW5oZXJpdCBmcm9tIERhdGVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIG1vY2tWYXVsdCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkpLnRvQmVJbnN0YW5jZU9mKERhdGVQcm9wZXJ0eSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIGFyZ3VtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHsgaWNvbjogJ2NhbGVuZGFyJywgZGVmYXVsdFZhbHVlOiAnMjAyMy0wMS0wMSB0byAyMDIzLTAxLTMxJyB9O1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBhcmdzKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS5uYW1lKS50b0JlKCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5Lmljb24pLnRvQmUoJ2NhbGVuZGFyJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgndmFsaWRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgc2luZ2xlIGRhdGUgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy0wMS0xNScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcyMDIzLTAxLTE1Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBkYXRlIHJhbmdlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmFuZ2VEYXRlUHJvcGVydHkudmFsaWRhdGUoJzIwMjMtMDEtMTUgdG8gMjAyMy0wMS0zMScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcyMDIzLTAxLTE1IHRvIDIwMjMtMDEtMzEnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIGRhdGUgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy8wMS8xNScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIGRhdGUgcmFuZ2UgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy0wMS0xNSAtIDIwMjMtMDEtMzEnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgbWFsZm9ybWVkIGRhdGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudmFsaWRhdGUoJ2ludmFsaWQtZGF0ZScpKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgLy8gTm90ZTogTGEgdmFsaWRhdGlvbiBhY3R1ZWxsZSBlc3QgYmFzw6llIHN1ciByZWdleCwgcGFzIHN1ciBsYSB2YWxpZGl0w6kgZGUgbGEgZGF0ZVxyXG4gICAgICAgICAgICAvLyBFbGxlIGFjY2VwdGUgZG9uYyBkZXMgZGF0ZXMgY29tbWUgMjAyMy0xMy00NSBzaSBlbGxlcyBzdWl2ZW50IGxlIGZvcm1hdCBZWVlZLU1NLUREXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMTUtMDEtMjAyMycpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnICcpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmb3JtYXREYXRlUmFuZ2VGb3JEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZvcm1hdCBzaW5nbGUgZGF0ZSBmb3IgZGlzcGxheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmFuZ2VEYXRlUHJvcGVydHkuZm9ybWF0RGF0ZVJhbmdlRm9yRGlzcGxheSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgZm9ybWF0IGRhdGUgcmFuZ2UgZm9yIGRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LmZvcm1hdERhdGVSYW5nZUZvckRpc3BsYXkoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBkYXRlIGdyYWNlZnVsbHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdGhyb3cgb3IgcmV0dXJuIGEgZGVmYXVsdCAtIGxldCdzIHRlc3QgdGhlIGJlaGF2aW9yXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS5mb3JtYXREYXRlUmFuZ2VGb3JEaXNwbGF5KCdpbnZhbGlkLWRhdGUnKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVGaWVsZExpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGxpbmsgd2l0aCBmb3JtYXR0ZWQgZGF0ZSBkaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcyMDIzLTAyLTI2Jyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYXRlLWZpZWxkLWxpbmsnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmN1cnNvcikudG9CZSgncG9pbnRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGxpbmsgd2l0aCByYW5nZSBkaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b01hdGNoKC9kaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzIGF1IG1hcmRpIDI4IGbDqXZyaWVyIDIwMjMvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNob3cgZGVmYXVsdCB0ZXh0IGZvciBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnQXVjdW5lIGRhdGUgc8OpbGVjdGlvbm7DqWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNob3cgZGVmYXVsdCB0ZXh0IGZvciBudWxsIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKG51bGwgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b0JlKCdBdWN1bmUgZGF0ZSBzw6lsZWN0aW9ubsOpZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGF2ZSBjbGljayBldmVudCBsaXN0ZW5lcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTW9jayB0aGUgbW9kaWZ5RmllbGQgbWV0aG9kXHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5Lm1vZGlmeUZpZWxkID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgY2xpY2tcclxuICAgICAgICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5Lm1vZGlmeUZpZWxkKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRmllbGREYXRlJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBpbnB1dCB3aXRoIGNvcnJlY3QgYXR0cmlidXRlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnMjAyMy0wMi0yNicsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnRhZ05hbWUpLnRvQmUoJ0lOUFVUJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC50eXBlKS50b0JlKCd0ZXh0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1pbnB1dCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSBmbGF0cGlja3Igd2l0aCBjb3JyZWN0IG9wdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZERhdGUoJzIwMjMtMDItMjYnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChmbGF0cGlja3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGlucHV0LCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICBkYXRlRm9ybWF0OiAnWS1tLWQnLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGU6ICcyMDIzLTAyLTI2JyxcclxuICAgICAgICAgICAgICAgIGxvY2FsZTogJ2ZyJyxcclxuICAgICAgICAgICAgICAgIG1vZGU6ICdyYW5nZSdcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmbGF0cGlja3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGlucHV0LCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0ZTogJydcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY29uZmlndXJlIG9uQ2hhbmdlIGNhbGxiYWNrIGZvciBzaW5nbGUgZGF0ZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnJywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGluZyBzYW1lIHN0YXJ0IGFuZCBlbmQgZGF0ZVxyXG4gICAgICAgICAgICBjb25zdCBzYW1lRGF0ZSA9IG5ldyBEYXRlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGF3YWl0IGZsYXRwaWNrck9wdGlvbnMub25DaGFuZ2UoW3NhbWVEYXRlLCBzYW1lRGF0ZV0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnZhbHVlKS50b0JlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjb25maWd1cmUgb25DaGFuZ2UgY2FsbGJhY2sgZm9yIGRhdGUgcmFuZ2Ugc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZERhdGUoJycsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG4gICAgICAgICAgICBjb25zdCBmbGF0cGlja3JPcHRpb25zID0gKGlucHV0IGFzIGFueSkuX2ZsYXRwaWNrck9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBzZWxlY3RpbmcgZGF0ZSByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJzIwMjMtMDItMjgnKTtcclxuICAgICAgICAgICAgYXdhaXQgZmxhdHBpY2tyT3B0aW9ucy5vbkNoYW5nZShbc3RhcnREYXRlLCBlbmREYXRlXSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG9uQ2hhbmdlIHdpdGggaW5jb21wbGV0ZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnJywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGluZyBvbmx5IG9uZSBkYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGF3YWl0IGZsYXRwaWNrck9wdGlvbnMub25DaGFuZ2UoW3N0YXJ0RGF0ZV0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY29uZmlndXJlIG9uQ2xvc2UgY2FsbGJhY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnMjAyMy0wMi0yNicsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG4gICAgICAgICAgICBjb25zdCBmbGF0cGlja3JPcHRpb25zID0gKGlucHV0IGFzIGFueSkuX2ZsYXRwaWNrck9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBmbGF0cGlja3JPcHRpb25zLm9uQ2xvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29udGFpbmVyIHdpdGggY29ycmVjdCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnMjAyMy0wMi0yNicpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpLnRvQmUoMik7IC8vIGxpbmsgYW5kIGlucHV0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzaG93IGxpbmsgYW5kIGhpZGUgaW5wdXQgZm9yIHZhbGlkIGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoaWRlIGxpbmsgYW5kIHNob3cgaW5wdXQgZm9yIGludmFsaWQgZGF0ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsICdpbnZhbGlkLWRhdGUnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGlkZSBsaW5rIGFuZCBzaG93IGlucHV0IGZvciBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsICcnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZUZpZWxkJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSB3aXRoIHZhbGlkIGRhdGUgYW5kIHNob3cgbGluaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcyMDIzLTAyLTI2JztcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b01hdGNoKC9kaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgd2l0aCB2YWxpZCBkYXRlIHJhbmdlIGFuZCBzaG93IGxpbmsnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnMjAyMy0wMi0yNiB0byAyMDIzLTAyLTI4JztcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnN0eWxlLmRpc3BsYXkpLnRvQmUoJ25vbmUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMgYXUgbWFyZGkgMjggZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIHdpdGggaW52YWxpZCBkYXRlIHdpdGhvdXQgY2hhbmdpbmcgZGlzcGxheScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICdpbnZhbGlkLWRhdGUnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTZXQgaW5pdGlhbCBkaXNwbGF5IHN0YXRlc1xyXG4gICAgICAgICAgICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdpbnZhbGlkLWRhdGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7IC8vIFNob3VsZCByZW1haW4gdW5jaGFuZ2VkXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ25vbmUnKTsgICAvLyBTaG91bGQgcmVtYWluIHVuY2hhbmdlZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVwZGF0ZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1VwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VwZGF0ZSBmYWlsZWQnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzIwMjMtMDItMjYnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspKS5yZWplY3RzLnRvVGhyb3coJ1VwZGF0ZSBmYWlsZWQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdleHRyYWN0Rmlyc3REYXRlIHN0YXRpYyBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGV4dHJhY3QgZGF0ZSBmcm9tIEZyZW5jaCBmb3JtYXR0ZWQgc3RyaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKCdkaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RnVsbFllYXIoKSkudG9CZSgyMDIzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0TW9udGgoKSkudG9CZSgxKTsgLy8gRmVicnVhcnkgaXMgbW9udGggMSAoMC1pbmRleGVkKVxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXREYXRlKCkpLnRvQmUoMjYpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgZXh0cmFjdCBmaXJzdCBkYXRlIGZyb20gcmFuZ2Ugc3RyaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKCdkaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzIGF1IG1hcmRpIDI4IGbDqXZyaWVyIDIwMjMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRGdWxsWWVhcigpKS50b0JlKDIwMjMpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRNb250aCgpKS50b0JlKDEpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXREYXRlKCkpLnRvQmUoMjYpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBtb250aHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgaW5wdXQ6ICcxNSBqYW52aWVyIDIwMjMnLCBleHBlY3RlZDogeyB5ZWFyOiAyMDIzLCBtb250aDogMCwgZGF5OiAxNSB9IH0sXHJcbiAgICAgICAgICAgICAgICB7IGlucHV0OiAnMTAgbWFycyAyMDIzJywgZXhwZWN0ZWQ6IHsgeWVhcjogMjAyMywgbW9udGg6IDIsIGRheTogMTAgfSB9LFxyXG4gICAgICAgICAgICAgICAgeyBpbnB1dDogJzI1IG5vdmVtYnJlIDIwMjMnLCBleHBlY3RlZDogeyB5ZWFyOiAyMDIzLCBtb250aDogMTAsIGRheTogMjUgfSB9IC8vIMOpdml0ZXIgZMOpY2VtYnJlIMOgIGNhdXNlIGR1IGJ1ZyBkJ2FjY2VudFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdGVzdENhc2VzLmZvckVhY2goKHsgaW5wdXQsIGV4cGVjdGVkIH0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RnVsbFllYXIoKSkudG9CZShleHBlY3RlZC55ZWFyKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldE1vbnRoKCkpLnRvQmUoZXhwZWN0ZWQubW9udGgpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RGF0ZSgpKS50b0JlKGV4cGVjdGVkLmRheSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGFjY2VudGVkIGNoYXJhY3RlcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoJzE1IGbDqXZyaWVyIDIwMjMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRNb250aCgpKS50b0JlKDEpOyAvLyBmw6l2cmllciA9IEZlYnJ1YXJ5XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3IgaW52YWxpZCBmb3JtYXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcclxuICAgICAgICAgICAgICAgICdpbnZhbGlkIGRhdGUgc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgICcyMDIzLTAyLTI2JyxcclxuICAgICAgICAgICAgICAgICdGZWJydWFyeSAyNiwgMjAyMycsXHJcbiAgICAgICAgICAgICAgICAnLi4vLi4vc3JjLzIwMjMnLFxyXG4gICAgICAgICAgICAgICAgJydcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIHRlc3RDYXNlcy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3IgaW52YWxpZCBtb250aCBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmFuZ2VEYXRlUHJvcGVydHkuZXh0cmFjdEZpcnN0RGF0ZSgnMjYgaW52YWxpZG1vbnRoIDIwMjMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiB0ZXN0cycsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgd29yayB3aXRoIGNvbXBsZXRlIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb21wbGV0ZSBjb250YWluZXJcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsICcnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLWZpZWxkLWxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHVzZXIgaW5wdXRcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnMjAyMy0wMi0yNiB0byAyMDIzLTAyLTI4JztcclxuICAgICAgICAgICAgYXdhaXQgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMgYXUgbWFyZGkgMjggZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGZsYXRwaWNrciBpbnRlZ3JhdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcyMDIzLTAyLTI2JywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmxhdHBpY2tyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucykudG9CZURlZmluZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KChpbnB1dCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zLm1vZGUpLnRvQmUoJ3JhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucy5sb2NhbGUpLnRvQmUoJ2ZyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBtYWludGFpbiBwcm9wZXIgaW5oZXJpdGFuY2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5KS50b0JlSW5zdGFuY2VPZihEYXRlUHJvcGVydHkpO1xyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudHlwZSkudG9CZSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0eXBlb2YgcmFuZ2VEYXRlUHJvcGVydHkuZm9ybWF0RGF0ZUZvclN0b3JhZ2UpLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==