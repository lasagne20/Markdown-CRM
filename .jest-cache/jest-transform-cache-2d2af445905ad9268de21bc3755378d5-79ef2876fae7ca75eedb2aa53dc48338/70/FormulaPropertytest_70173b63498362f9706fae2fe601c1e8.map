{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\Properties\\FormulaProperty.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\Properties\\FormulaProperty.test.ts"],"sourcesContent":["import { Classe } from '../../src/vault/Classe';\r\nimport { Vault } from '../../src/vault/Vault';\r\nimport { FormulaProperty } from '../../src/properties/FormulaProperty';\r\n\r\n// Mock des dépendances\r\njest.mock('../../src/vault/Classe');\r\njest.mock('../../src/vault/Vault');\r\n\r\ndescribe('FormulaProperty', () => {\r\n    let formulaProperty: FormulaProperty;\r\n    let mockFile: jest.Mocked<Classe>;\r\n    let mockVault: jest.Mocked<Vault>;\r\n\r\n    beforeEach(() => {\r\n        // Configuration des mocks\r\n        mockVault = {\r\n            getName: jest.fn().mockReturnValue('TestVault'),\r\n            app: {\r\n                vault: {\r\n                    getName: jest.fn().mockReturnValue('TestVault')\r\n                },\r\n                setIcon: jest.fn((element: HTMLElement, iconName: string) => {\r\n                    element.setAttribute('data-icon', iconName);\r\n                    element.textContent = `[${iconName}]`;\r\n                })\r\n            },\r\n            readLinkFile: jest.fn()\r\n        } as any;\r\n\r\n        mockFile = {\r\n            vault: mockVault,\r\n            getName: jest.fn(),\r\n            getAllProperties: jest.fn(),\r\n            getMetadataValue: jest.fn(),\r\n            updateMetadata: jest.fn()\r\n        } as any;\r\n\r\n        // Reset des mocks\r\n        jest.clearAllMocks();\r\n    });\r\n\r\n    describe('Constructor', () => {\r\n        test('should create formula property with default arguments', () => {\r\n            formulaProperty = new FormulaProperty('testFormula', mockVault, '1 + 1');\r\n            \r\n            expect(formulaProperty.name).toBe('testFormula');\r\n            expect(formulaProperty.formula).toBe('1 + 1');\r\n            expect(formulaProperty.type).toBe('formula');\r\n            expect(formulaProperty.write).toBe(false);\r\n            expect(formulaProperty.static).toBe(true);\r\n        });\r\n\r\n        test('should create formula property with custom arguments', () => {\r\n            formulaProperty = new FormulaProperty('testFormula', mockVault, '2 * 3', {\r\n                icon: 'calculator',\r\n                static: false,\r\n                write: true\r\n            });\r\n            \r\n            expect(formulaProperty.name).toBe('testFormula');\r\n            expect(formulaProperty.formula).toBe('2 * 3');\r\n            expect(formulaProperty.type).toBe('formula');\r\n            expect(formulaProperty.write).toBe(true);\r\n            expect(formulaProperty.static).toBe(false);\r\n            expect(formulaProperty.icon).toBe('calculator');\r\n        });\r\n\r\n        test('should handle partial arguments', () => {\r\n            formulaProperty = new FormulaProperty('testFormula', mockVault, 'x + y', {\r\n                icon: 'math',\r\n                write: true\r\n                // static will use default value from FormulaProperty constructor (true)\r\n            });\r\n            \r\n            expect(formulaProperty.write).toBe(true);\r\n            // La valeur sera false car LinkProperty n'override pas le default de Property\r\n            expect(formulaProperty.static).toBe(false);\r\n            expect(formulaProperty.icon).toBe('math');\r\n        });\r\n    });\r\n\r\n    describe('validate', () => {\r\n        beforeEach(() => {\r\n            formulaProperty = new FormulaProperty('test', mockVault, '1 + 1');\r\n        });\r\n\r\n        test('should return input value unchanged', () => {\r\n            expect(formulaProperty.validate('test')).toBe('test');\r\n            expect(formulaProperty.validate('123')).toBe('123');\r\n            expect(formulaProperty.validate('')).toBe('');\r\n        });\r\n    });\r\n\r\n    describe('read', () => {\r\n        beforeEach(() => {\r\n            formulaProperty = new FormulaProperty('totalFormula', mockVault, 'price * quantity');\r\n            \r\n            // Mock des propriétés du fichier\r\n            mockFile.getAllProperties.mockReturnValue({\r\n                price: { name: 'price' } as any,\r\n                quantity: { name: 'quantity' } as any,\r\n                totalFormula: { name: 'totalFormula' } as any\r\n            });\r\n            \r\n            mockFile.getName.mockReturnValue('TestFile');\r\n        });\r\n\r\n        test('should execute simple arithmetic formula', () => {\r\n            mockFile.getMetadataValue\r\n                .mockImplementation((key: string) => {\r\n                    if (key === 'price') return 10;\r\n                    if (key === 'quantity') return 5;\r\n                    return null;\r\n                });\r\n\r\n            const result = formulaProperty.read(mockFile);\r\n            expect(result).toBe(50);\r\n        });\r\n\r\n        test('should handle formula with return statement', () => {\r\n            const formulaWithReturn = new FormulaProperty('test', mockVault, 'return price + quantity');\r\n            \r\n            mockFile.getMetadataValue\r\n                .mockImplementation((key: string) => {\r\n                    if (key === 'price') return 15;\r\n                    if (key === 'quantity') return 25;\r\n                    return null;\r\n                });\r\n\r\n            const result = formulaWithReturn.read(mockFile);\r\n            expect(result).toBe(40);\r\n        });\r\n\r\n        test('should sanitize property names (remove spaces)', () => {\r\n            mockFile.getAllProperties.mockReturnValue({\r\n                'unit price': { name: 'unit price' } as any,\r\n                'item count': { name: 'item count' } as any,\r\n                totalFormula: { name: 'totalFormula' } as any\r\n            });\r\n\r\n            mockFile.getMetadataValue\r\n                .mockImplementation((key: string) => {\r\n                    if (key === 'unit price') return 12;\r\n                    if (key === 'item count') return 3;\r\n                    return null;\r\n                });\r\n\r\n            const sanitizedFormula = new FormulaProperty('test', mockVault, 'unitprice * itemcount');\r\n            const result = sanitizedFormula.read(mockFile);\r\n            expect(result).toBe(36);\r\n        });\r\n\r\n        test('should exclude self property from formula context', () => {\r\n            mockFile.getAllProperties.mockReturnValue({\r\n                price: { name: 'price' } as any,\r\n                totalFormula: { name: 'totalFormula' } as any\r\n            });\r\n\r\n            mockFile.getMetadataValue\r\n                .mockImplementation((key: string) => {\r\n                    if (key === 'price') return 100;\r\n                    if (key === 'totalFormula') return 999; // Should be excluded\r\n                    return null;\r\n                });\r\n\r\n            const selfExcludingFormula = new FormulaProperty('totalFormula', mockVault, 'price * 2');\r\n            const result = selfExcludingFormula.read(mockFile);\r\n            expect(result).toBe(200);\r\n        });\r\n\r\n        test('should handle formula errors gracefully (ReferenceError)', () => {\r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n            \r\n            mockFile.getMetadataValue.mockReturnValue(null);\r\n            \r\n            const faultyFormula = new FormulaProperty('test', mockVault, 'undefinedVariable * 5');\r\n            const result = faultyFormula.read(mockFile);\r\n            \r\n            expect(result).toBeNull();\r\n            // Test simple que console.error a été appelé avec le bon message\r\n            expect(consoleSpy).toHaveBeenCalled();\r\n            const errorCall = consoleSpy.mock.calls[0];\r\n            expect(errorCall[0]).toContain('Formula error : undefinedVariable * 5');\r\n            expect(errorCall[0]).toContain('This is all the properties available');\r\n            \r\n            consoleSpy.mockRestore();\r\n        });\r\n\r\n        test('should handle general formula errors', () => {\r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n            \r\n            mockFile.getMetadataValue.mockReturnValue(null);\r\n            \r\n            const faultyFormula = new FormulaProperty('test', mockVault, 'throw new Error(\"test error\")');\r\n            const result = faultyFormula.read(mockFile);\r\n            \r\n            expect(result).toBeNull();\r\n            expect(consoleSpy).toHaveBeenCalledWith(\r\n                expect.stringContaining('Formula error : throw new Error(\"test error\")')\r\n            );\r\n            \r\n            consoleSpy.mockRestore();\r\n        });\r\n\r\n        describe('write functionality', () => {\r\n            test('should update metadata when write is true and value changed', () => {\r\n                const writeFormula = new FormulaProperty('total', mockVault, 'price + tax', {\r\n                    icon: '',\r\n                    write: true\r\n                });\r\n\r\n                // Mock getAllProperties pour cette instance\r\n                mockFile.getAllProperties.mockReturnValue({\r\n                    price: { name: 'price' } as any,\r\n                    tax: { name: 'tax' } as any,\r\n                    total: { name: 'total' } as any\r\n                });\r\n\r\n                mockFile.getMetadataValue\r\n                    .mockImplementation((key: string) => {\r\n                        if (key === 'price') return 100;\r\n                        if (key === 'tax') return 20;\r\n                        if (key === 'total') return 110; // Old value\r\n                        return null;\r\n                    });\r\n\r\n                const result = writeFormula.read(mockFile);\r\n                \r\n                expect(result).toBe(120);\r\n                expect(mockFile.updateMetadata).toHaveBeenCalledWith('total', 120);\r\n            });\r\n\r\n            test('should not update metadata when write is true but value unchanged', () => {\r\n                const writeFormula = new FormulaProperty('total', mockVault, 'price + tax', {\r\n                    icon: '',\r\n                    write: true\r\n                });\r\n\r\n                // Mock getAllProperties pour cette instance\r\n                mockFile.getAllProperties.mockReturnValue({\r\n                    price: { name: 'price' } as any,\r\n                    tax: { name: 'tax' } as any,\r\n                    total: { name: 'total' } as any\r\n                });\r\n\r\n                mockFile.getMetadataValue\r\n                    .mockImplementation((key: string) => {\r\n                        if (key === 'price') return 100;\r\n                        if (key === 'tax') return 20;\r\n                        if (key === 'total') return 120; // Same as calculated\r\n                        return null;\r\n                    });\r\n\r\n                const result = writeFormula.read(mockFile);\r\n                \r\n                expect(result).toBe(120);\r\n                expect(mockFile.updateMetadata).not.toHaveBeenCalled();\r\n            });\r\n\r\n            test('should not update metadata when write is false', () => {\r\n                const readOnlyFormula = new FormulaProperty('total', mockVault, 'price + tax', {\r\n                    icon: '',\r\n                    write: false\r\n                });\r\n\r\n                // Mock getAllProperties pour cette instance\r\n                mockFile.getAllProperties.mockReturnValue({\r\n                    price: { name: 'price' } as any,\r\n                    tax: { name: 'tax' } as any,\r\n                    total: { name: 'total' } as any\r\n                });\r\n\r\n                mockFile.getMetadataValue\r\n                    .mockImplementation((key: string) => {\r\n                        if (key === 'price') return 100;\r\n                        if (key === 'tax') return 20;\r\n                        return null;\r\n                    });\r\n\r\n                const result = readOnlyFormula.read(mockFile);\r\n                \r\n                expect(result).toBe(120);\r\n                expect(mockFile.updateMetadata).not.toHaveBeenCalled();\r\n            });\r\n        });\r\n    });\r\n\r\n    describe('getPretty', () => {\r\n        beforeEach(() => {\r\n            formulaProperty = new FormulaProperty('test', mockVault, '1 + 1');\r\n        });\r\n\r\n        test('should return input if falsy', () => {\r\n            expect(formulaProperty.getPretty('')).toBe('');\r\n            expect(formulaProperty.getPretty(null as any)).toBe(null);\r\n            expect(formulaProperty.getPretty(undefined as any)).toBe(undefined);\r\n        });\r\n\r\n        test('should handle non-string values', () => {\r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n            \r\n            const numberValue = 123 as any;\r\n            const result = formulaProperty.getPretty(numberValue);\r\n            \r\n            expect(result).toBe(123);\r\n            expect(consoleSpy).toHaveBeenCalledWith('Value is not a string:', 123);\r\n            \r\n            consoleSpy.mockRestore();\r\n        });\r\n\r\n        test('should format dates in French locale', () => {\r\n            const dateString = '2023-12-25';\r\n            const result = formulaProperty.getPretty(dateString);\r\n            \r\n            expect(result).toBe('25 décembre 2023');\r\n        });\r\n\r\n        test('should format integers with French locale formatting', () => {\r\n            const integerString = '1234';\r\n            const result = formulaProperty.getPretty(integerString);\r\n            \r\n            // Vérifions d'abord le résultat réel\r\n            console.log('Actual result:', JSON.stringify(result));\r\n            // Le format peut varier selon l'environnement, testons que c'est bien formaté\r\n            expect(result).toMatch(/1[,\\s]234[.,]00/);\r\n        });\r\n\r\n        test('should not format decimal numbers as integers', () => {\r\n            const decimalString = '123.45';\r\n            const result = formulaProperty.getPretty(decimalString);\r\n            \r\n            expect(result).toBe('123.45');\r\n        });\r\n\r\n        test('should clean URLs by removing protocols', () => {\r\n            expect(formulaProperty.getPretty('https://example.com')).toBe('example.com');\r\n            expect(formulaProperty.getPretty('http://test.org')).toBe('test.org');\r\n        });\r\n\r\n        test('should clean Obsidian links by removing brackets', () => {\r\n            expect(formulaProperty.getPretty('[[Note Title]]')).toBe('Note Title');\r\n        });\r\n\r\n        test('should handle complex strings with multiple cleanups', () => {\r\n            const complexString = 'https://[[example.com]]';\r\n            const result = formulaProperty.getPretty(complexString);\r\n            \r\n            expect(result).toBe('example.com');\r\n        });\r\n\r\n        test('should return regular strings unchanged', () => {\r\n            const regularString = 'Just a normal string';\r\n            const result = formulaProperty.getPretty(regularString);\r\n            \r\n            expect(result).toBe('Just a normal string');\r\n        });\r\n    });\r\n\r\n    describe('getLink', () => {\r\n        beforeEach(() => {\r\n            formulaProperty = new FormulaProperty('test', mockVault, '1 + 1');\r\n            formulaProperty.vault = mockVault;\r\n        });\r\n\r\n        test('should return input if falsy', () => {\r\n            expect(formulaProperty.getLink('')).toBe('');\r\n            expect(formulaProperty.getLink(null as any)).toBe(null);\r\n            expect(formulaProperty.getLink(undefined as any)).toBe(undefined);\r\n        });\r\n\r\n        test('should create mailto links for emails', () => {\r\n            expect(formulaProperty.getLink('test@example.com')).toBe('mailto:test@example.com');\r\n            expect(formulaProperty.getLink('user.name+tag@domain.co.uk')).toBe('mailto:user.name+tag@domain.co.uk');\r\n        });\r\n\r\n        test('should handle Obsidian links', () => {\r\n            mockVault.readLinkFile.mockReturnValue([null, 'path/to/file.md'] as any);\r\n            \r\n            const result = formulaProperty.getLink('[[My Note]]');\r\n            \r\n            expect(result).toBe('obsidian://open?vault=TestVault&file=path%2Fto%2Ffile.md');\r\n            expect(mockVault.readLinkFile).toHaveBeenCalledWith('My Note', true);\r\n        });\r\n\r\n        test('should handle Obsidian link errors gracefully', () => {\r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n            mockVault.readLinkFile.mockImplementation(() => {\r\n                throw new Error('File not found');\r\n            });\r\n            \r\n            const result = formulaProperty.getLink('[[Invalid Note]]');\r\n            \r\n            expect(result).toBe('[[Invalid Note]]');\r\n            expect(consoleSpy).toHaveBeenCalledWith(\r\n                'Error parsing link for [[Invalid Note]]:',\r\n                expect.any(Error)\r\n            );\r\n            \r\n            consoleSpy.mockRestore();\r\n        });\r\n\r\n        test('should handle URLs with protocols', () => {\r\n            expect(formulaProperty.getLink('https://example.com')).toBe('https://example.com');\r\n            expect(formulaProperty.getLink('http://test.org/path')).toBe('http://test.org/path');\r\n        });\r\n\r\n        test('should add protocol to URLs without them', () => {\r\n            expect(formulaProperty.getLink('example.com')).toBe('http://example.com');\r\n            expect(formulaProperty.getLink('test.org/path')).toBe('http://test.org/path');\r\n        });\r\n\r\n        test('should return regular strings unchanged', () => {\r\n            const regularString = 'Just a normal string';\r\n            const result = formulaProperty.getLink(regularString);\r\n            \r\n            expect(result).toBe('Just a normal string');\r\n        });\r\n\r\n        test('should handle invalid URL formats', () => {\r\n            const invalidUrl = 'not-a-url';\r\n            const result = formulaProperty.getLink(invalidUrl);\r\n            \r\n            expect(result).toBe('not-a-url');\r\n        });\r\n    });\r\n});\r\n"],"version":3}