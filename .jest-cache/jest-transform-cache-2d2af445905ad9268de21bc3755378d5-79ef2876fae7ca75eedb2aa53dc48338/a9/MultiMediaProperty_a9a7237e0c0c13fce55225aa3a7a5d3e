3ede84661b83fd3d02ce50bdf64d6021
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MultiMediaProperty = void 0;
const Utils_1 = require("../vault/Utils");
const MultiFileProperty_1 = require("./MultiFileProperty");
const MediaProperty_1 = require("./MediaProperty");
class MultiMediaProperty extends MultiFileProperty_1.MultiFileProperty {
    constructor(name, args = {}) {
        super(name, [], args);
        this.type = "multiMedia";
        this.flexSpan = 2;
        this.property = new MediaProperty_1.MediaProperty(name, args);
    }
    // Méthode principale pour obtenir l'affichage
    fillDisplay(vault, values, update) {
        this.vault = vault;
        const container = document.createElement("div");
        container.classList.add("metadata-multiFiles-container-" + this.name.toLowerCase());
        container.classList.add("metadata-multiFiles-container");
        // Créer les lignes d'objet
        this.createObjects(values, update, container);
        const addButton = this.createAddButton(values, update, container);
        container.appendChild(addButton);
        return container;
    }
    createObjects(values, update, container) {
        if (!Array.isArray(values) || values.length === 0)
            return;
        values.forEach((objects, index) => {
            const row = this.createObjectRow(values, update, objects, index, container);
            container.appendChild(row);
        });
    }
    createObjectRow(values, update, value, index, container) {
        const row = document.createElement("div");
        row.classList.add("metadata-multiFiles-row-inline");
        // Ajouter le bouton de suppression
        const deleteButton = this.createDeleteButton(values, update, index, container);
        row.appendChild(deleteButton);
        let propertyContainer = document.createElement("div");
        propertyContainer.classList.add("metadata-multiFiles-property-inline");
        propertyContainer.appendChild(this.property.fillDisplay(this.vault, value, async (value) => await this.updateObject(values, update, index, this.property, value)));
        row.appendChild(propertyContainer);
        return row;
    }
    createDeleteButton(values, update, index, container) {
        const deleteButton = document.createElement("button");
        (0, Utils_1.setIcon)(deleteButton, "minus");
        deleteButton.classList.add("metadata-delete-button-inline-small");
        deleteButton.onclick = async () => await this.removeProperty(values, update, index, container);
        return deleteButton;
    }
    async addProperty(values, update, container) {
        // let newFile = await selectMedia(this.vault, "Choisissez un media "); // TODO: Fix selectMedia
        let newFile = ""; // Temporary placeholder
        if (newFile) {
            if (!values) {
                values = [];
            }
            // values.push(`[[${newFile.path}|${newFile.name}]]`); // TODO: Fix when selectMedia is available
            values.push(newFile);
            await update(values);
            await this.reloadObjects(values, update);
        }
    }
    createAddButton(values, update, container) {
        const addButton = document.createElement("button");
        (0, Utils_1.setIcon)(addButton, "plus");
        addButton.classList.add("metadata-add-button-inline-small");
        addButton.onclick = async () => await this.addProperty(values, update, container);
        return addButton;
    }
    enableDragAndDrop() {
        // Disable drag and drop
    }
}
exports.MultiMediaProperty = MultiMediaProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXE11bHRpTWVkaWFQcm9wZXJ0eS50cyIsIm1hcHBpbmdzIjoiOzs7QUFHQSwwQ0FBeUM7QUFJekMsMkRBQXdEO0FBQ3hELG1EQUFnRDtBQUdoRCxNQUFhLGtCQUFtQixTQUFRLHFDQUFpQjtJQU9yRCxZQUFZLElBQVksRUFBRSxJQUFJLEdBQUcsRUFBRTtRQUMvQixLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQU5WLFNBQUksR0FBWSxZQUFZLENBQUM7UUFFN0IsYUFBUSxHQUFHLENBQUMsQ0FBQztRQUt6QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksNkJBQWEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELDhDQUE4QztJQUNyQyxXQUFXLENBQUMsS0FBVyxFQUFDLE1BQVcsRUFBRSxNQUFxQztRQUMvRSxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hELFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxHQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztRQUNsRixTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1FBRXpELDJCQUEyQjtRQUMzQixJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFOUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ2xF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LENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUM1QyxDQUFDO0lBQ0wsQ0FBQztJQUVRLGVBQWUsQ0FBQyxNQUFXLEVBQUUsTUFBcUMsRUFBRSxTQUF5QjtRQUNsRyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25ELElBQUEsZUFBTyxFQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMzQixTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO1FBQzVELFNBQVMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNsRixPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0lBRVEsaUJBQWlCO1FBQ3RCLHdCQUF3QjtJQUM1QixDQUFDO0NBQ0o7QUFyRkQsZ0RBcUZDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxwcm9wZXJ0aWVzXFxNdWx0aU1lZGlhUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7IE9iamVjdFByb3BlcnR5IH0gZnJvbSBcIi4vT2JqZWN0UHJvcGVydHlcIjtcclxuaW1wb3J0IHsgRmlsZVByb3BlcnR5IH0gZnJvbSBcIi4vRmlsZVByb3BlcnR5XCI7XHJcbmltcG9ydCB7IHNldEljb24gfSBmcm9tIFwiLi4vdmF1bHQvVXRpbHNcIjtcclxuLy8gaW1wb3J0IHsgc2VsZWN0RmlsZSwgc2VsZWN0TWVkaWEgfSBmcm9tIFwiVXRpbHMvTW9kYWxzL01vZGFsc1wiOyAvLyBUT0RPOiBGaXggbW9kYWxzIGltcG9ydFxyXG5pbXBvcnQgeyBGaWxlIH0gZnJvbSBcIi4uL3ZhdWx0L0ZpbGVcIjtcclxuaW1wb3J0IHsgTXlWYXVsdCB9IGZyb20gXCIuLi92YXVsdC9NeVZhdWx0XCI7XHJcbmltcG9ydCB7IE11bHRpRmlsZVByb3BlcnR5IH0gZnJvbSBcIi4vTXVsdGlGaWxlUHJvcGVydHlcIjtcclxuaW1wb3J0IHsgTWVkaWFQcm9wZXJ0eSB9IGZyb20gXCIuL01lZGlhUHJvcGVydHlcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTXVsdGlNZWRpYVByb3BlcnR5IGV4dGVuZHMgTXVsdGlGaWxlUHJvcGVydHkge1xyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZSB0eXBlIDogc3RyaW5nID0gXCJtdWx0aU1lZGlhXCI7XHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgcHJvcGVydHkgOiBNZWRpYVByb3BlcnR5O1xyXG4gICAgcHVibGljIG92ZXJyaWRlIGZsZXhTcGFuID0gMjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzID0ge30pe1xyXG4gICAgICAgIHN1cGVyKG5hbWUsIFtdLCBhcmdzKTtcclxuICAgICAgICB0aGlzLnByb3BlcnR5ID0gbmV3IE1lZGlhUHJvcGVydHkobmFtZSwgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTcOpdGhvZGUgcHJpbmNpcGFsZSBwb3VyIG9idGVuaXIgbCdhZmZpY2hhZ2VcclxuICAgIG92ZXJyaWRlIGZpbGxEaXNwbGF5KHZhdWx0IDogYW55LHZhbHVlczogYW55LCB1cGRhdGU6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1tdWx0aUZpbGVzLWNvbnRhaW5lci1cIit0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1tdWx0aUZpbGVzLWNvbnRhaW5lclwiKTtcclxuXHJcbiAgICAgICAgLy8gQ3LDqWVyIGxlcyBsaWduZXMgZCdvYmpldFxyXG4gICAgICAgIHRoaXMuY3JlYXRlT2JqZWN0cyh2YWx1ZXMsIHVwZGF0ZSwgY29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gdGhpcy5jcmVhdGVBZGRCdXR0b24odmFsdWVzLCB1cGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgY3JlYXRlT2JqZWN0cyh2YWx1ZXM6IGFueSwgdXBkYXRlOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPiwgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXMpIHx8IHZhbHVlcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICB2YWx1ZXMuZm9yRWFjaCgob2JqZWN0czogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgdXBkYXRlLCBvYmplY3RzLCBpbmRleCwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgY3JlYXRlT2JqZWN0Um93KHZhbHVlczogYW55LCB1cGRhdGU6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+LCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyLCBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1tdWx0aUZpbGVzLXJvdy1pbmxpbmVcIik7XHJcblxyXG4gICAgICAgIC8vIEFqb3V0ZXIgbGUgYm91dG9uIGRlIHN1cHByZXNzaW9uXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5jcmVhdGVEZWxldGVCdXR0b24odmFsdWVzLCB1cGRhdGUsIGluZGV4LCBjb250YWluZXIpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xyXG5cclxuXHJcbiBcclxuICAgICAgICBsZXQgcHJvcGVydHlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHByb3BlcnR5Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1tdWx0aUZpbGVzLXByb3BlcnR5LWlubGluZVwiKTtcclxuICAgICAgICBwcm9wZXJ0eUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnByb3BlcnR5LmZpbGxEaXNwbGF5KHRoaXMudmF1bHQsIHZhbHVlLCBhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMudXBkYXRlT2JqZWN0KHZhbHVlcywgdXBkYXRlLCBpbmRleCwgdGhpcy5wcm9wZXJ0eSwgdmFsdWUpKSk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHByb3BlcnR5Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICBvdmVycmlkZSBjcmVhdGVEZWxldGVCdXR0b24odmFsdWVzOiBhbnksIHVwZGF0ZTogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4sIGluZGV4OiBudW1iZXIsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiBIVE1MQnV0dG9uRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBzZXRJY29uKGRlbGV0ZUJ1dHRvbiwgXCJtaW51c1wiKTtcclxuICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1ldGFkYXRhLWRlbGV0ZS1idXR0b24taW5saW5lLXNtYWxsXCIpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5yZW1vdmVQcm9wZXJ0eSh2YWx1ZXMsIHVwZGF0ZSwgaW5kZXgsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZUJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBvdmVycmlkZSBhc3luYyBhZGRQcm9wZXJ0eSh2YWx1ZXM6IGFueSwgdXBkYXRlOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPiwgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIC8vIGxldCBuZXdGaWxlID0gYXdhaXQgc2VsZWN0TWVkaWEodGhpcy52YXVsdCwgXCJDaG9pc2lzc2V6IHVuIG1lZGlhIFwiKTsgLy8gVE9ETzogRml4IHNlbGVjdE1lZGlhXHJcbiAgICAgICAgbGV0IG5ld0ZpbGUgPSBcIlwiOyAvLyBUZW1wb3JhcnkgcGxhY2Vob2xkZXJcclxuICAgICAgICBpZiAobmV3RmlsZSkge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlcyl7dmFsdWVzID0gW119XHJcbiAgICAgICAgICAgIC8vIHZhbHVlcy5wdXNoKGBbWyR7bmV3RmlsZS5wYXRofXwke25ld0ZpbGUubmFtZX1dXWApOyAvLyBUT0RPOiBGaXggd2hlbiBzZWxlY3RNZWRpYSBpcyBhdmFpbGFibGVcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2gobmV3RmlsZSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZSh2YWx1ZXMpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlbG9hZE9iamVjdHModmFsdWVzLCB1cGRhdGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG92ZXJyaWRlIGNyZWF0ZUFkZEJ1dHRvbih2YWx1ZXM6IGFueSwgdXBkYXRlOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPiwgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IEhUTUxCdXR0b25FbGVtZW50IHtcclxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHNldEljb24oYWRkQnV0dG9uLCBcInBsdXNcIik7XHJcbiAgICAgICAgYWRkQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1hZGQtYnV0dG9uLWlubGluZS1zbWFsbFwiKTtcclxuICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYWRkUHJvcGVydHkodmFsdWVzLCB1cGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIGFkZEJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBvdmVycmlkZSBlbmFibGVEcmFnQW5kRHJvcCgpIHtcclxuICAgICAgICAvLyBEaXNhYmxlIGRyYWcgYW5kIGRyb3BcclxuICAgIH1cclxufSJdLCJ2ZXJzaW9uIjozfQ==