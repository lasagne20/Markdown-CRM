{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\File.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\File.test.ts"],"sourcesContent":["import { File, Folder } from '../../src/vault/File';\r\nimport { Vault } from '../../src/vault/Vault';\r\nimport { IFile } from '../../src/interfaces/IApp';\r\nimport * as jsYaml from 'js-yaml';\r\n\r\n// Mock UUID\r\njest.mock('uuid', () => ({\r\n    v4: jest.fn(() => 'mock-uuid-1234')\r\n}));\r\n\r\n// Mock js-yaml\r\njest.mock('js-yaml');\r\nconst mockJsYaml = jsYaml as jest.Mocked<typeof jsYaml>;\r\n\r\n// Mock implementations\r\nconst mockApp = {\r\n    getFile: jest.fn(),\r\n    readFile: jest.fn(),\r\n    writeFile: jest.fn(),\r\n    renameFile: jest.fn(),\r\n    getMetadata: jest.fn(),\r\n    waitForFileMetaDataUpdate: jest.fn()\r\n};\r\n\r\nconst mockVault = {\r\n    app: mockApp,\r\n    getFromLink: jest.fn()\r\n} as unknown as Vault;\r\n\r\nconst mockIFile: IFile = {\r\n    name: 'test.md',\r\n    path: 'folder/test.md',\r\n    basename: 'test',\r\n    extension: 'md'\r\n};\r\n\r\ndescribe('Folder', () => {\r\n    it('should create Folder instance', () => {\r\n        const folder = new Folder();\r\n        expect(folder).toBeInstanceOf(Folder);\r\n    });\r\n});\r\n\r\ndescribe('File', () => {\r\n    let file: File;\r\n\r\n    beforeEach(() => {\r\n        jest.clearAllMocks();\r\n        file = new File(mockVault, mockIFile);\r\n        \r\n        // Reset mock implementations\r\n        mockJsYaml.load.mockReturnValue({ testKey: 'testValue' });\r\n        mockJsYaml.dump.mockReturnValue('testKey: testValue\\n');\r\n    });\r\n\r\n    describe('Constructor', () => {\r\n        it('should create File instance with correct properties', () => {\r\n            expect(file).toBeInstanceOf(File);\r\n            expect(file.name).toBe('test.md');\r\n            expect(file.path).toBe('folder/test.md');\r\n            expect(file.basename).toBe('test');\r\n            expect(file.extension).toBe('md');\r\n            expect(file.vault).toBe(mockVault);\r\n        });\r\n\r\n        it('should initialize lock as false', () => {\r\n            expect(file['lock']).toBe(false);\r\n        });\r\n\r\n        it('should set linkRegex correctly', () => {\r\n            expect(file.linkRegex).toEqual(/^\"?\\[\\[(.*?)\\]\\]\"?$/);\r\n        });\r\n    });\r\n\r\n    describe('Path methods', () => {\r\n        it('should get folder path', () => {\r\n            expect(file.getFolderPath()).toBe('folder');\r\n        });\r\n\r\n        it('should get folder path for root file', () => {\r\n            const rootFile = new File(mockVault, { ...mockIFile, path: 'root.md' });\r\n            expect(rootFile.getFolderPath()).toBe('');\r\n        });\r\n\r\n        it('should get file object', () => {\r\n            expect(file.getFile()).toBe(mockIFile);\r\n        });\r\n\r\n        it('should get path', () => {\r\n            expect(file.getPath()).toBe('folder/test.md');\r\n        });\r\n\r\n        it('should get link format', () => {\r\n            expect(file.getLink()).toBe('[[folder/test.md|test]]');\r\n        });\r\n    });\r\n\r\n    describe('Name methods', () => {\r\n        it('should get name with extension by default', () => {\r\n            expect(file.getName()).toBe('test.md');\r\n        });\r\n\r\n        it('should get name without extension when md=false', () => {\r\n            expect(file.getName(false)).toBe('test');\r\n        });\r\n\r\n        it('should get name with extension when md=true', () => {\r\n            expect(file.getName(true)).toBe('test.md');\r\n        });\r\n    });\r\n\r\n    describe('Folder file methods', () => {\r\n        it('should detect folder file', () => {\r\n            const folderFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                name: 'folder.md',\r\n                path: 'parent/folder/folder.md'\r\n            });\r\n            expect(folderFile.isFolderFile()).toBe(true);\r\n        });\r\n\r\n        it('should not detect regular file as folder file', () => {\r\n            expect(file.isFolderFile()).toBe(false);\r\n        });\r\n\r\n        it('should get folder file path for folder file', () => {\r\n            const folderFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                name: 'folder.md',\r\n                path: 'parent/folder/folder.md'\r\n            });\r\n            expect(folderFile.getFolderFilePath()).toBe('parent/folder');\r\n        });\r\n\r\n        it('should get folder file path for regular file', () => {\r\n            expect(file.getFolderFilePath()).toBe('folder/test');\r\n        });\r\n\r\n        it('should get parent folder path for folder file', () => {\r\n            const folderFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                name: 'folder.md',\r\n                path: 'parent/folder/folder.md'\r\n            });\r\n            expect(folderFile.getParentFolderPath()).toBe('parent');\r\n        });\r\n\r\n        it('should get parent folder path for regular file', () => {\r\n            expect(file.getParentFolderPath()).toBe('folder');\r\n        });\r\n    });\r\n\r\n    describe('ID management', () => {\r\n        it('should get existing ID from metadata', async () => {\r\n            mockApp.getMetadata.mockResolvedValue({ Id: 'existing-id' });\r\n            \r\n            const id = await file.getID();\r\n            expect(id).toBe('existing-id');\r\n        });\r\n\r\n        it('should generate new ID when not exists', async () => {\r\n            mockApp.getMetadata.mockResolvedValue({});\r\n            file.updateMetadata = jest.fn();\r\n            \r\n            const id = await file.getID();\r\n            expect(id).toBe('mock-uuid-1234');\r\n            expect(file.updateMetadata).toHaveBeenCalledWith('Id', 'mock-uuid-1234');\r\n        });\r\n\r\n        it('should generate new ID when metadata is null', async () => {\r\n            mockApp.getMetadata.mockResolvedValue(null);\r\n            file.updateMetadata = jest.fn();\r\n            \r\n            const id = await file.getID();\r\n            expect(id).toBe('mock-uuid-1234');\r\n        });\r\n    });\r\n\r\n    describe('Move operations', () => {\r\n        beforeEach(() => {\r\n            file['lock'] = false;\r\n        });\r\n\r\n        it('should move file to target folder', async () => {\r\n            mockApp.getFile.mockResolvedValue(null); // No existing file\r\n            \r\n            await file.move('target/folder', 'newname.md');\r\n            \r\n            expect(mockApp.renameFile).toHaveBeenCalledWith(\r\n                mockIFile,\r\n                'target/folder/newname.md'\r\n            );\r\n        });\r\n\r\n        it('should move file with original name when no target name provided', async () => {\r\n            mockApp.getFile.mockResolvedValue(null);\r\n            \r\n            await file.move('target/folder');\r\n            \r\n            expect(mockApp.renameFile).toHaveBeenCalledWith(\r\n                mockIFile,\r\n                'target/folder/test.md'\r\n            );\r\n        });\r\n\r\n        it('should not move when target file exists', async () => {\r\n            mockApp.getFile.mockResolvedValue({ path: 'target/folder/test.md' });\r\n            \r\n            await file.move('target/folder');\r\n            \r\n            expect(mockApp.renameFile).not.toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle move errors gracefully', async () => {\r\n            mockApp.getFile.mockResolvedValue(null);\r\n            mockApp.renameFile.mockRejectedValue(new Error('Move failed'));\r\n            \r\n            await expect(file.move('target/folder')).resolves.not.toThrow();\r\n        });\r\n\r\n        it('should wait for lock to be released', async () => {\r\n            file['lock'] = true;\r\n            \r\n            // Simulate lock being released after 200ms\r\n            setTimeout(() => {\r\n                file['lock'] = false;\r\n            }, 200);\r\n            \r\n            mockApp.getFile.mockResolvedValue(null);\r\n            \r\n            await file.move('target/folder');\r\n            \r\n            expect(mockApp.renameFile).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should move folder file correctly', async () => {\r\n            const folderFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                name: 'folder.md',\r\n                path: 'parent/folder/folder.md'\r\n            });\r\n            \r\n            const mockFolder = { path: 'parent/folder' };\r\n            mockApp.getFile\r\n                .mockResolvedValueOnce(null) // No target file exists\r\n                .mockResolvedValueOnce(mockFolder); // Folder exists\r\n            \r\n            await folderFile.move('target');\r\n            \r\n            expect(mockApp.renameFile).toHaveBeenCalledWith(\r\n                mockFolder,\r\n                'target/folder'\r\n            );\r\n        });\r\n    });\r\n\r\n    describe('Metadata operations', () => {\r\n        it('should get metadata', async () => {\r\n            const expectedMetadata = { key: 'value' };\r\n            mockApp.getMetadata.mockResolvedValue(expectedMetadata);\r\n            \r\n            const metadata = await file.getMetadata();\r\n            expect(metadata).toBe(expectedMetadata);\r\n            expect(mockApp.getMetadata).toHaveBeenCalledWith(mockIFile);\r\n        });\r\n\r\n        it('should get metadata value', async () => {\r\n            mockApp.getMetadata.mockResolvedValue({ testKey: 'testValue' });\r\n            \r\n            const value = await file.getMetadataValue('testKey');\r\n            expect(value).toBe('testValue');\r\n        });\r\n\r\n        it('should return undefined for non-existent metadata key', async () => {\r\n            mockApp.getMetadata.mockResolvedValue({ otherKey: 'value' });\r\n            \r\n            const value = await file.getMetadataValue('nonExistent');\r\n            expect(value).toBeUndefined();\r\n        });\r\n\r\n        it('should return undefined when no metadata', async () => {\r\n            mockApp.getMetadata.mockResolvedValue(null);\r\n            \r\n            const value = await file.getMetadataValue('anyKey');\r\n            expect(value).toBeUndefined();\r\n        });\r\n\r\n        it('should get all properties from metadata', () => {\r\n            file.getMetadata = jest.fn().mockReturnValue({ prop1: 'value1', prop2: 'value2' });\r\n            \r\n            const properties = file.getAllProperties();\r\n            expect(properties).toEqual({\r\n                prop1: { name: 'prop1' },\r\n                prop2: { name: 'prop2' }\r\n            });\r\n        });\r\n\r\n        it('should return empty object when no metadata for getAllProperties', () => {\r\n            file.getMetadata = jest.fn().mockReturnValue(null);\r\n            \r\n            const properties = file.getAllProperties();\r\n            expect(properties).toEqual({});\r\n        });\r\n    });\r\n\r\n    describe('Update metadata', () => {\r\n        const mockContent = `---\r\nexisting: value\r\n---\r\nBody content here`;\r\n\r\n        beforeEach(() => {\r\n            mockApp.readFile.mockResolvedValue(mockContent);\r\n            file['lock'] = false;\r\n        });\r\n\r\n        it('should update metadata successfully', async () => {\r\n            const expectedNewContent = `---\r\ntestKey: testValue\r\n\r\n---\r\nBody content here`;\r\n            \r\n            await file.updateMetadata('newKey', 'newValue');\r\n            \r\n            expect(mockJsYaml.load).toHaveBeenCalledWith('existing: value');\r\n            expect(mockJsYaml.dump).toHaveBeenCalledWith({ existing: 'value', newKey: 'newValue' });\r\n            expect(mockApp.writeFile).toHaveBeenCalledWith(mockIFile, expectedNewContent);\r\n            expect(mockApp.waitForFileMetaDataUpdate).toHaveBeenCalledWith(\r\n                'folder/test.md',\r\n                'newKey',\r\n                expect.any(Function)\r\n            );\r\n        });\r\n\r\n        it('should wait for lock before updating', async () => {\r\n            file['lock'] = true;\r\n            \r\n            // Release lock after 100ms\r\n            setTimeout(() => {\r\n                file['lock'] = false;\r\n            }, 100);\r\n            \r\n            await file.updateMetadata('key', 'value');\r\n            \r\n            expect(mockApp.writeFile).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle yaml parsing errors', async () => {\r\n            mockJsYaml.load.mockImplementation(() => {\r\n                throw new Error('YAML parse error');\r\n            });\r\n            \r\n            await file.updateMetadata('key', 'value');\r\n            \r\n            expect(mockApp.writeFile).not.toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle missing frontmatter', async () => {\r\n            file.extractFrontmatter = jest.fn().mockReturnValue({\r\n                existingFrontmatter: null,\r\n                body: 'content'\r\n            });\r\n            \r\n            await file.updateMetadata('key', 'value');\r\n            \r\n            expect(mockApp.writeFile).not.toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle null frontmatter from yaml parsing', async () => {\r\n            mockJsYaml.load.mockReturnValue(null);\r\n            \r\n            await file.updateMetadata('key', 'value');\r\n            \r\n            expect(mockApp.writeFile).not.toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('Remove metadata', () => {\r\n        it('should remove metadata key', async () => {\r\n            const mockFrontmatter = { key1: 'value1', key2: 'value2' };\r\n            file.getMetadata = jest.fn().mockResolvedValue(mockFrontmatter);\r\n            file.saveFrontmatter = jest.fn();\r\n            \r\n            await file.removeMetadata('key1');\r\n            \r\n            expect(file.saveFrontmatter).toHaveBeenCalledWith({ key2: 'value2' });\r\n        });\r\n\r\n        it('should handle removing from null metadata', async () => {\r\n            file.getMetadata = jest.fn().mockResolvedValue(null);\r\n            file.saveFrontmatter = jest.fn();\r\n            \r\n            await file.removeMetadata('key1');\r\n            \r\n            expect(file.saveFrontmatter).not.toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('Reorder metadata', () => {\r\n        it('should reorder metadata according to properties order', async () => {\r\n            const mockFrontmatter = { prop3: 'c', prop1: 'a', prop2: 'b' };\r\n            file.getMetadata = jest.fn().mockReturnValue(mockFrontmatter);\r\n            file.sortFrontmatter = jest.fn().mockReturnValue({\r\n                sortedFrontmatter: { prop1: 'a', prop2: 'b', prop3: 'c', Id: null },\r\n                extraProperties: []\r\n            });\r\n            file.saveFrontmatter = jest.fn();\r\n            \r\n            await file.reorderMetadata(['prop1', 'prop2', 'prop3']);\r\n            \r\n            expect(file.saveFrontmatter).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should not reorder when order is already correct', async () => {\r\n            const mockFrontmatter = { prop1: 'a', prop2: 'b', Id: 'test-id' };\r\n            file.getMetadata = jest.fn().mockReturnValue(mockFrontmatter);\r\n            file.saveFrontmatter = jest.fn();\r\n            \r\n            await file.reorderMetadata(['prop1', 'prop2']);\r\n            \r\n            expect(file.saveFrontmatter).not.toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle null metadata in reorder', async () => {\r\n            file.getMetadata = jest.fn().mockReturnValue(null);\r\n            file.saveFrontmatter = jest.fn();\r\n            \r\n            await file.reorderMetadata(['prop1', 'prop2']);\r\n            \r\n            expect(file.saveFrontmatter).not.toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('Save frontmatter', () => {\r\n        const mockContent = `---\r\nold: content\r\n---\r\nBody content`;\r\n\r\n        beforeEach(() => {\r\n            mockApp.readFile.mockResolvedValue(mockContent);\r\n        });\r\n\r\n        it('should save frontmatter correctly', async () => {\r\n            const frontmatter = { key: 'value' };\r\n            const expectedContent = `---\r\ntestKey: testValue\r\n\r\n---\r\nBody content`;\r\n            \r\n            await file.saveFrontmatter(frontmatter);\r\n            \r\n            expect(mockJsYaml.dump).toHaveBeenCalledWith(frontmatter);\r\n            expect(mockApp.writeFile).toHaveBeenCalledWith(mockIFile, expectedContent);\r\n        });\r\n\r\n        it('should save frontmatter with extra properties', async () => {\r\n            const frontmatter = { key: 'value' };\r\n            const extraProperties = ['extra1: value1', 'extra2: value2'];\r\n            \r\n            await file.saveFrontmatter(frontmatter, extraProperties);\r\n            \r\n            expect(mockApp.writeFile).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should filter out empty extra properties', async () => {\r\n            const frontmatter = { key: 'value' };\r\n            const extraProperties = ['extra1: value1', '', '   ', 'extra2: value2'];\r\n            \r\n            await file.saveFrontmatter(frontmatter, extraProperties);\r\n            \r\n            expect(mockApp.writeFile).toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('Extract frontmatter', () => {\r\n        it('should extract frontmatter and body correctly', () => {\r\n            const content = `---\r\nkey: value\r\nnested:\r\n  prop: data\r\n---\r\n# Title\r\nBody content here`;\r\n            \r\n            const result = file.extractFrontmatter(content);\r\n            \r\n            expect(result.existingFrontmatter).toBe(`key: value\r\nnested:\r\n  prop: data`);\r\n            expect(result.body).toBe(`# Title\r\nBody content here`);\r\n        });\r\n\r\n        it('should handle content without frontmatter', () => {\r\n            const content = `# Title\r\nJust body content`;\r\n            \r\n            const result = file.extractFrontmatter(content);\r\n            \r\n            expect(result.existingFrontmatter).toBe('');\r\n            expect(result.body).toBe(content);\r\n        });\r\n\r\n        it('should handle empty content', () => {\r\n            const result = file.extractFrontmatter('');\r\n            \r\n            expect(result.existingFrontmatter).toBe('');\r\n            expect(result.body).toBe('');\r\n        });\r\n\r\n        it('should handle malformed frontmatter', () => {\r\n            const content = `---\r\nincomplete frontmatter\r\n# Title\r\nContent`;\r\n            \r\n            const result = file.extractFrontmatter(content);\r\n            \r\n            expect(result.existingFrontmatter).toBe('');\r\n            expect(result.body).toBe(content);\r\n        });\r\n    });\r\n\r\n    describe('Format frontmatter', () => {\r\n        it('should format frontmatter using js-yaml', () => {\r\n            const frontmatter = { key: 'value', nested: { prop: 'data' } };\r\n            \r\n            const result = file.formatFrontmatter(frontmatter);\r\n            \r\n            expect(mockJsYaml.dump).toHaveBeenCalledWith(frontmatter);\r\n            expect(result).toBe('testKey: testValue\\n');\r\n        });\r\n    });\r\n\r\n    describe('Sort frontmatter', () => {\r\n        it('should sort frontmatter according to order', () => {\r\n            const frontmatter = { prop3: 'c', prop1: 'a', prop2: 'b', extra: 'x' };\r\n            const order = ['prop1', 'prop2', 'prop3'];\r\n            \r\n            const result = file.sortFrontmatter(frontmatter, order);\r\n            \r\n            expect(result.sortedFrontmatter).toEqual({\r\n                prop1: 'a',\r\n                prop2: 'b',\r\n                prop3: 'c'\r\n            });\r\n            expect(result.extraProperties).toEqual([\r\n                'extra: \"x\"'\r\n            ]);\r\n        });\r\n\r\n        it('should handle missing properties in frontmatter', () => {\r\n            const frontmatter = { prop1: 'a' };\r\n            const order = ['prop1', 'prop2', 'prop3'];\r\n            \r\n            const result = file.sortFrontmatter(frontmatter, order);\r\n            \r\n            expect(result.sortedFrontmatter).toEqual({\r\n                prop1: 'a',\r\n                prop2: null,\r\n                prop3: null\r\n            });\r\n            expect(result.extraProperties).toEqual([]);\r\n        });\r\n\r\n        it('should handle empty frontmatter', () => {\r\n            const result = file.sortFrontmatter({}, ['prop1', 'prop2']);\r\n            \r\n            expect(result.sortedFrontmatter).toEqual({\r\n                prop1: null,\r\n                prop2: null\r\n            });\r\n            expect(result.extraProperties).toEqual([]);\r\n        });\r\n    });\r\n\r\n    describe('External references', () => {\r\n        it('should get from link through vault', () => {\r\n            const expectedResult = { path: 'linked/file.md' };\r\n            mockVault.getFromLink.mockReturnValue(expectedResult);\r\n            \r\n            const result = file.getFromLink('[[linked/file]]');\r\n            \r\n            expect(mockVault.getFromLink).toHaveBeenCalledWith('[[linked/file]]');\r\n            expect(result).toBe(expectedResult);\r\n        });\r\n    });\r\n\r\n    describe('Error handling and edge cases', () => {\r\n        it('should handle concurrent metadata updates', async () => {\r\n            file['lock'] = false;\r\n            \r\n            // Start two concurrent updates\r\n            const update1 = file.updateMetadata('key1', 'value1');\r\n            const update2 = file.updateMetadata('key2', 'value2');\r\n            \r\n            await Promise.all([update1, update2]);\r\n            \r\n            // Both should complete without throwing\r\n            expect(mockApp.writeFile).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should handle very long file paths', () => {\r\n            const longPath = 'a/'.repeat(100) + 'file.md';\r\n            const longFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                path: longPath\r\n            });\r\n            \r\n            expect(longFile.getPath()).toBe(longPath);\r\n        });\r\n\r\n        it('should handle special characters in file names', () => {\r\n            const specialFile = new File(mockVault, {\r\n                ...mockIFile,\r\n                name: 'test@#$%^&*()_+{}|:<>?.md',\r\n                path: 'folder/test@#$%^&*()_+{}|:<>?.md'\r\n            });\r\n            \r\n            expect(specialFile.getName()).toBe('test@#$%^&*()_+{}|:<>?.md');\r\n            expect(specialFile.getName(false)).toBe('test@#$%^&*()_+{}|:<>?');\r\n        });\r\n    });\r\n});"],"version":3}