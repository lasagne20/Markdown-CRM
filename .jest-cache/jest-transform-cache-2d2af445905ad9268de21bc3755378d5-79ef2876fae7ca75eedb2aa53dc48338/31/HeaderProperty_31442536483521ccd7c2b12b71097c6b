a29161b55027c65ceec2269138e2520b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HearderProperty = void 0;
const Property_1 = require("./Property");
class HearderProperty extends Property_1.Property {
    constructor(name, args = {}) {
        super(name, args);
        this.type = "header";
    }
    fillDisplay(vault, value, update, args = { size: "2em" }) {
        this.vault = vault;
        const field = this.createFieldContainer();
        const fieldContainer = this.createFieldContainerContent(update, value);
        if (fieldContainer && args.size) {
            const link = fieldContainer.querySelector('.field-headerlink');
            const input = fieldContainer.querySelector('.field-header');
            input.style.fontSize = args.size;
            link.style.fontSize = args.size;
        }
        field.appendChild(fieldContainer);
        return field;
    }
    createFieldInput(value) {
        const input = document.createElement("input");
        input.type = "text";
        input.value = value || "";
        input.classList.add("field-header");
        return input;
    }
    createFieldContainer() {
        const field = document.createElement("div");
        field.classList.add("metadata-headerfield");
        return field;
    }
    createFieldLink(value) {
        const link = document.createElement("h2");
        link.innerHTML = value || "";
        link.classList.add("field-headerlink");
        link.style.cursor = this.static ? "default" : "text";
        if (!this.static) {
            link.addEventListener("click", (event) => this.modifyField(event));
        }
        return link;
    }
    modifyField(event) {
        const link = event.target.closest('.metadata-headerfield')?.querySelector('.field-headerlink');
        const input = event.target.closest('.metadata-headerfield')?.querySelector('.field-header');
        if (link && input) {
            link.style.display = "none";
            input.style.display = "block";
            input.focus();
        }
    }
    handleFieldInput(update, input, link) {
        input.addEventListener("blur", async () => {
            await this.updateField(update, input, link);
            return;
        });
        input.addEventListener("keydown", async (event) => {
            if (event.key === "Escape" || event.key === "Enter") {
                event.preventDefault();
                await this.updateField(update, input, link);
            }
        });
    }
}
exports.HearderProperty = HearderProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEhlYWRlclByb3BlcnR5LnRzIiwibWFwcGluZ3MiOiI7OztBQUNBLHlDQUFzQztBQVF0QyxNQUFhLGVBQWdCLFNBQVEsbUJBQVE7SUFHM0MsWUFBWSxJQUFZLEVBQUUsSUFBSSxHQUFHLEVBQUU7UUFDakMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUhKLFNBQUksR0FBVyxRQUFRLENBQUM7SUFJeEMsQ0FBQztJQUVRLFdBQVcsQ0FBQyxLQUFXLEVBQUUsS0FBVSxFQUFFLE1BQXFDLEVBQUUsT0FBMEIsRUFBQyxJQUFJLEVBQUcsS0FBSyxFQUFDO1FBQ3ZILElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1FBQzFDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFdkUsSUFBSSxjQUFjLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzlCLE1BQU0sSUFBSSxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQWdCLENBQUM7WUFDOUUsTUFBTSxLQUFLLEdBQUcsY0FBYyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQXFCLENBQUM7WUFDaEYsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3BDLENBQUM7UUFFRCxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sS0FBSyxDQUFDO0lB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IFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxwcm9wZXJ0aWVzXFxIZWFkZXJQcm9wZXJ0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaW5rUHJvcGVydHkgfSBmcm9tIFwiLi9MaW5rUHJvcGVydHlcIjtcclxuaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tIFwiLi9Qcm9wZXJ0eVwiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBzZXRJY29uIH0gZnJvbSBcIi4uL3ZhdWx0L1V0aWxzXCI7XHJcblxyXG4vLyBUZW1wb3JhcnkgdHlwZSBkZWNsYXJhdGlvbnMgZm9yIG1pc3NpbmcgaW1wb3J0c1xyXG5kZWNsYXJlIGNvbnN0IE5vdGljZTogYW55O1xyXG5kZWNsYXJlIGNvbnN0IFRGaWxlOiBhbnk7XHJcblxyXG5leHBvcnQgY2xhc3MgSGVhcmRlclByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHkge1xyXG4gIHB1YmxpYyBvdmVycmlkZSB0eXBlOiBzdHJpbmcgPSBcImhlYWRlclwiO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3MgPSB7fSkge1xyXG4gICAgc3VwZXIobmFtZSwgYXJncyk7XHJcbiAgfVxyXG5cclxuICBvdmVycmlkZSBmaWxsRGlzcGxheSh2YXVsdCA6IGFueSwgdmFsdWU6IGFueSwgdXBkYXRlOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPiwgYXJncyA6IHtzaXplID86IHN0cmluZ30gPSB7c2l6ZSA6IFwiMmVtXCJ9KSB7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5jcmVhdGVGaWVsZENvbnRhaW5lcigpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkQ29udGFpbmVyID0gdGhpcy5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQodXBkYXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZpZWxkQ29udGFpbmVyICYmIGFyZ3Muc2l6ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZmllbGRDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpZWxkLWhlYWRlcmxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBmaWVsZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmllbGQtaGVhZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaW5wdXQuc3R5bGUuZm9udFNpemUgPSBhcmdzLnNpemU7XHJcbiAgICAgICAgICAgIGxpbmsuc3R5bGUuZm9udFNpemUgPSBhcmdzLnNpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaWVsZC5hcHBlbmRDaGlsZChmaWVsZENvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgfVxyXG5cclxuICBvdmVycmlkZSBjcmVhdGVGaWVsZElucHV0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSB8fCBcIlwiO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZChcImZpZWxkLWhlYWRlclwiKTtcclxuICAgIFxyXG5cclxuICAgIHJldHVybiBpbnB1dDtcclxuICB9XHJcblxyXG4gIG92ZXJyaWRlIGNyZWF0ZUZpZWxkQ29udGFpbmVyKCkge1xyXG4gICAgY29uc3QgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZmllbGQuY2xhc3NMaXN0LmFkZChcIm1ldGFkYXRhLWhlYWRlcmZpZWxkXCIpO1xyXG4gICAgcmV0dXJuIGZpZWxkO1xyXG4gIH1cclxuXHJcbiAgb3ZlcnJpZGUgY3JlYXRlRmllbGRMaW5rKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgICBsaW5rLmlubmVySFRNTCA9IHZhbHVlIHx8IFwiXCI7XHJcbiAgICBsaW5rLmNsYXNzTGlzdC5hZGQoXCJmaWVsZC1oZWFkZXJsaW5rXCIpO1xyXG4gICAgbGluay5zdHlsZS5jdXJzb3IgPSB0aGlzLnN0YXRpYyA/IFwiZGVmYXVsdFwiIDogXCJ0ZXh0XCI7XHJcbiAgICBcclxuICAgIGlmICghdGhpcy5zdGF0aWMpIHtcclxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB0aGlzLm1vZGlmeUZpZWxkKGV2ZW50KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluaztcclxuICB9XHJcblxyXG4gIG92ZXJyaWRlIG1vZGlmeUZpZWxkKGV2ZW50OiBFdmVudCkge1xyXG4gICAgY29uc3QgbGluayA9IChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5tZXRhZGF0YS1oZWFkZXJmaWVsZCcpPy5xdWVyeVNlbGVjdG9yKCcuZmllbGQtaGVhZGVybGluaycpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgaW5wdXQgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcubWV0YWRhdGEtaGVhZGVyZmllbGQnKT8ucXVlcnlTZWxlY3RvcignLmZpZWxkLWhlYWRlcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBpZiAobGluayAmJiBpbnB1dCkge1xyXG4gICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG92ZXJyaWRlIGhhbmRsZUZpZWxkSW5wdXQodXBkYXRlOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiwgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50LCBsaW5rOiBIVE1MRWxlbWVudCkge1xyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRmllbGQodXBkYXRlLCBpbnB1dCwgbGluayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKChldmVudCBhcyBLZXlib2FyZEV2ZW50KS5rZXkgPT09IFwiRXNjYXBlXCIgfHwgKGV2ZW50IGFzIEtleWJvYXJkRXZlbnQpLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGaWVsZCh1cGRhdGUsIGlucHV0LCBsaW5rKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sInZlcnNpb24iOjN9