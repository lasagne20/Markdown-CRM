55393a6f56d62761927ce28043754d03
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock des dÃ©pendances
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn((element, icon) => {
        const svg = document.createElement('svg');
        svg.setAttribute('data-icon', icon);
        element.appendChild(svg);
    })
}));
const RatingProperty_1 = require("../../src/properties/RatingProperty");
const { setIcon } = require('../../src/vault/Utils');
describe('RatingProperty', () => {
    let ratingProperty;
    let mockUpdate;
    let mockVault;
    beforeEach(() => {
        mockUpdate = jest.fn();
        mockVault = {
            app: {
                setIcon: jest.fn((element, iconName) => {
                    element.setAttribute('data-icon', iconName);
                })
            },
            vault: {
                adapter: {
                    fs: {}
                }
            }
        };
        // Clear all mocks
        jest.clearAllMocks();
    });
    describe('Constructor', () => {
        test('should create instance with default icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
            expect(ratingProperty.name).toBe('rating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('star');
        });
        test('should create instance with custom icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('customRating', mockVault, { icon: 'heart' });
            expect(ratingProperty.name).toBe('customRating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('heart');
        });
        test('should use star as default when empty args provided', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('test', mockVault, {});
            expect(ratingProperty.icon).toBe('align-left'); // Parent class default when args is empty object
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should create display with correct structure', () => {
            const result = ratingProperty.fillDisplay(mockVault, '+++', mockUpdate);
            expect(result.classList.contains('metadata-field')).toBe(true);
            const columnContainer = result.querySelector('.field-container-column');
            expect(columnContainer).toBeTruthy();
            const header = columnContainer?.querySelector('.metadata-header');
            expect(header?.textContent).toBe('rating');
            const starRating = columnContainer?.querySelector('.star-rating');
            expect(starRating).toBeTruthy();
        });
        test('should set vault property', () => {
            ratingProperty.fillDisplay(mockVault, '++', mockUpdate);
            expect(ratingProperty.vault).toBe(mockVault);
        });
    });
    describe('createStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should create container with correct class and 5 stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container.classList.contains('star-rating')).toBe(true);
            const stars = container.querySelectorAll('.star');
            expect(stars.length).toBe(5);
        });
        test('should set correct data-value attributes', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                expect(star.getAttribute('data-value')).toBe((index + 1).toString());
            });
        });
        test('should call setIcon for each star', () => {
            ratingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5);
        });
        test('should use custom icon when provided', () => {
            const customRatingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, { icon: 'heart' });
            customRatingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5); // Verify called for all 5 stars
        });
        test('should add event listeners to stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const star = container.querySelector('.star');
            // Mock the methods that will be called
            ratingProperty.previewStars = jest.fn();
            ratingProperty.updateStarRating = jest.fn();
            // Test mouseover event
            star.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 1);
        });
        test('should handle click event and call update with correct plus signs', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.updateStarRating = jest.fn();
            // Click the third star
            thirdStar.click();
            // Wait for async operations
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++');
        });
        test('should handle different star clicks correctly', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click first star
            stars[0].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+');
            // Click last star
            stars[4].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++++');
        });
    });
    describe('updateStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should call updateStarRating method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'updateStarRating');
            ratingProperty.updateStarRating(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various rating values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.updateStarRating(container, 0);
                ratingProperty.updateStarRating(container, 3);
                ratingProperty.updateStarRating(container, 5);
                ratingProperty.updateStarRating(container, 10); // Over limit
            }).not.toThrow();
        });
    });
    describe('previewStars', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should call previewStars method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'previewStars');
            ratingProperty.previewStars(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various preview values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.previewStars(container, 0);
                ratingProperty.previewStars(container, 3);
                ratingProperty.previewStars(container, 5);
                ratingProperty.previewStars(container, -1); // Negative
            }).not.toThrow();
        });
    });
    describe('Value handling', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should handle empty value', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle single plus value', () => {
            const container = ratingProperty.createStarRating('+', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle multiple plus values', () => {
            const container = ratingProperty.createStarRating('+++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle maximum rating', () => {
            const container = ratingProperty.createStarRating('+++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle over-maximum rating', () => {
            const container = ratingProperty.createStarRating('++++++++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
    });
    describe('Integration tests', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should work with complete workflow', async () => {
            // Create full display
            const display = ratingProperty.fillDisplay(mockVault, '++', mockUpdate);
            const starContainer = display.querySelector('.star-rating');
            expect(starContainer).toBeTruthy();
            // Simulate clicking the 4th star
            const fourthStar = starContainer.querySelectorAll('.star')[3];
            fourthStar.click();
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have called update with 4 plus signs
            expect(mockUpdate).toHaveBeenCalledWith('++++');
        });
        test('should maintain state during multiple interactions', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click multiple stars in sequence
            stars[2].click(); // 3 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[0].click(); // 1 star
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[4].click(); // 5 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have been called with correct values
            expect(mockUpdate).toHaveBeenCalledTimes(3);
            expect(mockUpdate).toHaveBeenNthCalledWith(1, '+++');
            expect(mockUpdate).toHaveBeenNthCalledWith(2, '+');
            expect(mockUpdate).toHaveBeenNthCalledWith(3, '+++++');
        });
        test('should handle mouseover and mouseleave events', () => {
            const container = ratingProperty.createStarRating('++', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.previewStars = jest.fn();
            // Test mouseover
            thirdStar.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 3);
            // Test mouseleave
            thirdStar.dispatchEvent(new Event('mouseleave'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 2); // Should restore to current rating
        });
    });
    describe('Edge cases', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault);
        });
        test('should handle undefined vault', () => {
            expect(() => {
                ratingProperty.fillDisplay(undefined, '+++', mockUpdate);
            }).not.toThrow();
        });
        test('should handle null update function', () => {
            expect(() => {
                ratingProperty.createStarRating('+++', null);
            }).not.toThrow();
        });
        test('should handle invalid value format', () => {
            expect(() => {
                ratingProperty.createStarRating('invalid', mockUpdate);
            }).not.toThrow();
        });
        test('should handle special characters in value', () => {
            expect(() => {
                ratingProperty.createStarRating('+++abc+++', mockUpdate);
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhdGluZ1Byb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFFQSx1QkFBdUI7QUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBZ0IsRUFBRSxJQUFZLEVBQUUsRUFBRTtRQUNoRCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFUSix3RUFBcUU7QUFXckUsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBRXJELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxjQUE4QixDQUFDO0lBQ25DLElBQUksVUFBcUIsQ0FBQztJQUMxQixJQUFJLFNBQWMsQ0FBQztJQUVuQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUN2QixTQUFTLEdBQUc7WUFDUixHQUFHLEVBQUU7Z0JBQ0QsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFvQixFQUFFLFFBQWdCLEVBQUUsRUFBRTtvQkFDeEQsT0FBTyxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ2hELENB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SCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1lBQ25ELE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM3RCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxSYXRpbmdQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJhdGluZ1Byb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvUmF0aW5nUHJvcGVydHknO1xyXG5cclxuLy8gTW9jayBkZXMgZMOpcGVuZGFuY2VzXHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3ZhdWx0L1V0aWxzJywgKCkgPT4gKHtcclxuICAgIHNldEljb246IGplc3QuZm4oKGVsZW1lbnQ6IEVsZW1lbnQsIGljb246IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicsIGljb24pO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnKTtcclxuICAgIH0pXHJcbn0pKTtcclxuXHJcbmNvbnN0IHsgc2V0SWNvbiB9ID0gcmVxdWlyZSgnLi4vLi4vc3JjL3ZhdWx0L1V0aWxzJyk7XHJcblxyXG5kZXNjcmliZSgnUmF0aW5nUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgcmF0aW5nUHJvcGVydHk6IFJhdGluZ1Byb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tVcGRhdGU6IGplc3QuTW9jaztcclxuICAgIGxldCBtb2NrVmF1bHQ6IGFueTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgIG1vY2tWYXVsdCA9IHtcclxuICAgICAgICAgICAgYXBwOiB7XHJcbiAgICAgICAgICAgICAgICBzZXRJY29uOiBqZXN0LmZuKChlbGVtZW50OiBIVE1MRWxlbWVudCwgaWNvbk5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCBpY29uTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2YXVsdDoge1xyXG4gICAgICAgICAgICAgICAgYWRhcHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZzOiB7fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDbGVhciBhbGwgbW9ja3NcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdDb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGluc3RhbmNlIHdpdGggZGVmYXVsdCBpY29uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5uYW1lKS50b0JlKCdyYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnR5cGUpLnRvQmUoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkuaWNvbikudG9CZSgnc3RhcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGluc3RhbmNlIHdpdGggY3VzdG9tIGljb24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdjdXN0b21SYXRpbmcnLCBtb2NrVmF1bHQsIHsgaWNvbjogJ2hlYXJ0JyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5uYW1lKS50b0JlKCdjdXN0b21SYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnR5cGUpLnRvQmUoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkuaWNvbikudG9CZSgnaGVhcnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVzZSBzdGFyIGFzIGRlZmF1bHQgd2hlbiBlbXB0eSBhcmdzIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgndGVzdCcsIG1vY2tWYXVsdCwge30pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5Lmljb24pLnRvQmUoJ2FsaWduLWxlZnQnKTsgLy8gUGFyZW50IGNsYXNzIGRlZmF1bHQgd2hlbiBhcmdzIGlzIGVtcHR5IG9iamVjdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbGxEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBkaXNwbGF5IHdpdGggY29ycmVjdCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgJysrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb2x1bW5Db250YWluZXIgPSByZXN1bHQucXVlcnlTZWxlY3RvcignLmZpZWxkLWNvbnRhaW5lci1jb2x1bW4nKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbHVtbkNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gY29sdW1uQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXI/LnRleHRDb250ZW50KS50b0JlKCdyYXRpbmcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJSYXRpbmcgPSBjb2x1bW5Db250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5zdGFyLXJhdGluZycpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RhclJhdGluZykudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2V0IHZhdWx0IHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsICcrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnZhdWx0KS50b0JlKG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlU3RhclJhdGluZycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29udGFpbmVyIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgNSBzdGFycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc3Rhci1yYXRpbmcnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdGFycy5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgY29ycmVjdCBkYXRhLXZhbHVlIGF0dHJpYnV0ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChzdGFyLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpKS50b0JlKChpbmRleCArIDEpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNhbGwgc2V0SWNvbiBmb3IgZWFjaCBzdGFyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgY3VzdG9tIGljb24gd2hlbiBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tUmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycsIG1vY2tWYXVsdCwgeyBpY29uOiAnaGVhcnQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY3VzdG9tUmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2V0SWNvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDUpOyAvLyBWZXJpZnkgY2FsbGVkIGZvciBhbGwgNSBzdGFyc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgYWRkIGV2ZW50IGxpc3RlbmVycyB0byBzdGFycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnN0YXInKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIE1vY2sgdGhlIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IG1vdXNlb3ZlciBldmVudFxyXG4gICAgICAgICAgICBzdGFyLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZW92ZXInKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvbnRhaW5lciwgMSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY2xpY2sgZXZlbnQgYW5kIGNhbGwgdXBkYXRlIHdpdGggY29ycmVjdCBwbHVzIHNpZ25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgdGhpcmRTdGFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJylbMl0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS51cGRhdGVTdGFyUmF0aW5nID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2xpY2sgdGhlIHRoaXJkIHN0YXJcclxuICAgICAgICAgICAgdGhpcmRTdGFyLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBhc3luYyBvcGVyYXRpb25zXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJysrKycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBzdGFyIGNsaWNrcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2xpY2sgZmlyc3Qgc3RhclxyXG4gICAgICAgICAgICAoc3RhcnNbMF0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnKycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2xpY2sgbGFzdCBzdGFyXHJcbiAgICAgICAgICAgIChzdGFyc1s0XSBhcyBIVE1MRWxlbWVudCkuY2xpY2soKTtcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcrKysrKycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZVN0YXJSYXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsbCB1cGRhdGVTdGFyUmF0aW5nIG1ldGhvZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTcHkgb24gdGhlIG1ldGhvZFxyXG4gICAgICAgICAgICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKHJhdGluZ1Byb3BlcnR5LCAndXBkYXRlU3RhclJhdGluZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXJpb3VzIHJhdGluZyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGF0IG1ldGhvZCBleGlzdHMgYW5kIGNhbiBiZSBjYWxsZWRcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAwKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAzKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCA1KTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAxMCk7IC8vIE92ZXIgbGltaXRcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcmV2aWV3U3RhcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsbCBwcmV2aWV3U3RhcnMgbWV0aG9kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNweSBvbiB0aGUgbWV0aG9kXHJcbiAgICAgICAgICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24ocmF0aW5nUHJvcGVydHksICdwcmV2aWV3U3RhcnMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXJpb3VzIHByZXZpZXcgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRlc3QgdGhhdCBtZXRob2QgZXhpc3RzIGFuZCBjYW4gYmUgY2FsbGVkXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMoY29udGFpbmVyLCAwKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKGNvbnRhaW5lciwgNSk7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMoY29udGFpbmVyLCAtMSk7IC8vIE5lZ2F0aXZlXHJcbiAgICAgICAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnVmFsdWUgaGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpLmxlbmd0aCkudG9CZSg1KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzaW5nbGUgcGx1cyB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJykubGVuZ3RoKS50b0JlKDUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHBsdXMgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpLmxlbmd0aCkudG9CZSg1KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtYXhpbXVtIHJhdGluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpLmxlbmd0aCkudG9CZSg1KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBvdmVyLW1heGltdW0gcmF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKysrKysrKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnSW50ZWdyYXRpb24gdGVzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgd29yayB3aXRoIGNvbXBsZXRlIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgZnVsbCBkaXNwbGF5XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSByYXRpbmdQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsICcrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFyQ29udGFpbmVyID0gZGlzcGxheS5xdWVyeVNlbGVjdG9yKCcuc3Rhci1yYXRpbmcnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzdGFyQ29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBjbGlja2luZyB0aGUgNHRoIHN0YXJcclxuICAgICAgICAgICAgY29uc3QgZm91cnRoU3RhciA9IHN0YXJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKVszXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgZm91cnRoU3Rhci5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBoYXZlIGNhbGxlZCB1cGRhdGUgd2l0aCA0IHBsdXMgc2lnbnNcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcrKysrJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBtYWludGFpbiBzdGF0ZSBkdXJpbmcgbXVsdGlwbGUgaW50ZXJhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIG11bHRpcGxlIHN0YXJzIGluIHNlcXVlbmNlXHJcbiAgICAgICAgICAgIChzdGFyc1syXSBhcyBIVE1MRWxlbWVudCkuY2xpY2soKTsgLy8gMyBzdGFyc1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgKHN0YXJzWzBdIGFzIEhUTUxFbGVtZW50KS5jbGljaygpOyAvLyAxIHN0YXJcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIChzdGFyc1s0XSBhcyBIVE1MRWxlbWVudCkuY2xpY2soKTsgLy8gNSBzdGFyc1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2hvdWxkIGhhdmUgYmVlbiBjYWxsZWQgd2l0aCBjb3JyZWN0IHZhbHVlc1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMSwgJysrKycpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMiwgJysnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoKDMsICcrKysrKycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1vdXNlb3ZlciBhbmQgbW91c2VsZWF2ZSBldmVudHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXJkU3RhciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpWzJdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCBtb3VzZW92ZXJcclxuICAgICAgICAgICAgdGhpcmRTdGFyLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZW92ZXInKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvbnRhaW5lciwgMyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IG1vdXNlbGVhdmVcclxuICAgICAgICAgICAgdGhpcmRTdGFyLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZWxlYXZlJykpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDIpOyAvLyBTaG91bGQgcmVzdG9yZSB0byBjdXJyZW50IHJhdGluZ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0VkZ2UgY2FzZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCB2YXVsdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KHVuZGVmaW5lZCBhcyBhbnksICcrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHVwZGF0ZSBmdW5jdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrKycsIG51bGwgYXMgYW55KTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHZhbHVlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJ2ludmFsaWQnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKythYmMrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9