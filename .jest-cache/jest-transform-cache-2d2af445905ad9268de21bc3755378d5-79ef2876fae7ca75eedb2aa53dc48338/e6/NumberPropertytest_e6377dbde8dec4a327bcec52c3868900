004328bd227f1aa10e288e28b8863802
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock fs module
jest.mock('fs', () => ({
    cp: jest.fn()
}));
// Mock App module
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn((element, iconName) => {
        element.setAttribute('data-icon', iconName);
    })
}));
// Mock Vault
jest.mock('../../src/vault/Vault', () => ({
    Vault: jest.fn()
}));
// Mock FormulaProperty
jest.mock('../../src/properties/FormulaProperty', () => ({
    FormulaProperty: jest.fn().mockImplementation((name, formula, args) => ({
        name,
        formula,
        args,
        read: jest.fn(() => '42'),
        type: 'formula'
    }))
}));
const NumberProperty_1 = require("../../src/properties/NumberProperty");
describe('NumberProperty', () => {
    let numberProperty;
    let mockVault;
    let mockFile;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Mock vault
        mockVault = {
            app: {
                vault: { getFiles: jest.fn(() => []) },
                setIcon: jest.fn((element, iconName) => {
                    element.setAttribute('data-icon', iconName);
                    element.textContent = `[${iconName}]`;
                })
            }
        };
        // Mock file
        mockFile = {
            getMetadata: jest.fn(() => ({ testNumber: '123' })),
            getMetadataValue: jest.fn((key) => key === 'testNumber' ? '123' : undefined),
            updateMetadata: jest.fn(),
            vault: mockVault
        };
        numberProperty = new NumberProperty_1.NumberProperty('testNumber', mockVault, 'kg');
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('constructor', () => {
        it('should create NumberProperty with default values', () => {
            const prop = new NumberProperty_1.NumberProperty('test', mockVault);
            expect(prop.name).toBe('test');
            expect(prop.type).toBe('number');
            expect(prop.unit).toBe('');
            expect(prop.formulaProperty).toBeNull();
        });
        it('should create NumberProperty with unit', () => {
            const prop = new NumberProperty_1.NumberProperty('weight', mockVault, 'kg');
            expect(prop.name).toBe('weight');
            expect(prop.unit).toBe('kg');
            expect(prop.type).toBe('number');
        });
        it('should create NumberProperty with formula', () => {
            const args = { icon: 'calculator', static: false, formula: 'a + b' };
            const prop = new NumberProperty_1.NumberProperty('calculated', mockVault, 'units', args);
            expect(prop.name).toBe('calculated');
            expect(prop.unit).toBe('units');
            expect(prop.formulaProperty).toBeTruthy();
        });
        it('should create NumberProperty without formula when not provided', () => {
            const args = { icon: 'hash', static: true };
            const prop = new NumberProperty_1.NumberProperty('simple', mockVault, 'cm', args);
            expect(prop.formulaProperty).toBeNull();
        });
    });
    describe('validate', () => {
        it('should validate valid numbers', () => {
            expect(numberProperty.validate('123')).toBe('123');
            expect(numberProperty.validate('123.45')).toBe('123.45');
            expect(numberProperty.validate('0')).toBe('0');
            expect(numberProperty.validate('-50')).toBe('-50');
            expect(numberProperty.validate('3.14159')).toBe('3.14159');
        });
        it('should handle invalid numbers', () => {
            expect(numberProperty.validate('abc')).toBe('');
            expect(numberProperty.validate('12abc')).toBe('');
            expect(numberProperty.validate('')).toBe('');
            expect(numberProperty.validate('   ')).toBe('');
            expect(numberProperty.validate('NaN')).toBe('');
        });
        it('should handle edge cases', () => {
            expect(numberProperty.validate('Infinity')).toBe('Infinity');
            expect(numberProperty.validate('-Infinity')).toBe('-Infinity');
            expect(numberProperty.validate('1e10')).toBe('10000000000');
            expect(numberProperty.validate('1.23e-4')).toBe('0.000123');
        });
    });
    describe('createFieldInput', () => {
        it('should create number input element', () => {
            const input = numberProperty.createFieldInput('123');
            expect(input.tagName).toBe('INPUT');
            expect(input.type).toBe('number');
            expect(input.value).toBe('123');
            expect(input.classList.contains('field-input')).toBe(true);
        });
        it('should handle empty value', () => {
            const input = numberProperty.createFieldInput('');
            expect(input.value).toBe('');
        });
    });
    describe('createFieldLink', () => {
        it('should create link with value and unit', () => {
            const link = numberProperty.createFieldLink('123');
            expect(link.tagName).toBe('DIV');
            expect(link.textContent).toBe('123 kg');
            expect(link.classList.contains('field-link')).toBe(true);
        });
        it('should create link without unit when unit is empty', () => {
            const propWithoutUnit = new NumberProperty_1.NumberProperty('test', mockVault, mockVault);
            const link = propWithoutUnit.createFieldLink('123');
            expect(link.textContent).toBe('123 ');
        });
        it('should handle empty value', () => {
            const link = numberProperty.createFieldLink('');
            expect(link.textContent).toBe('');
        });
        it('should have correct cursor style based on static property', () => {
            numberProperty.static = false;
            const link = numberProperty.createFieldLink('123');
            expect(link.style.cursor).toBe('text');
            numberProperty.static = true;
            const linkStatic = numberProperty.createFieldLink('123');
            expect(linkStatic.style.cursor).toBe('default');
        });
        it('should add click listener for non-static properties', () => {
            numberProperty.static = false;
            const link = numberProperty.createFieldLink('123');
            // Setup DOM structure for modifyField
            const field = document.createElement('div');
            field.classList.add('metadata-field');
            const input = document.createElement('input');
            input.classList.add('field-input');
            field.appendChild(link);
            field.appendChild(input);
            document.body.appendChild(field);
            link.click();
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
    });
    describe('createFieldContainerContent', () => {
        it('should create field container with input and link', () => {
            const updateFn = jest.fn();
            const container = numberProperty.createFieldContainerContent(updateFn, '123');
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('field-container')).toBe(true);
            const link = container.querySelector('.field-link');
            const input = container.querySelector('.field-input');
            expect(link).toBeTruthy();
            expect(input).toBeTruthy();
        });
        it('should show link when static property is true', () => {
            numberProperty.static = true;
            const updateFn = jest.fn();
            const container = numberProperty.createFieldContainerContent(updateFn, '123');
            const link = container.querySelector('.field-link');
            const input = container.querySelector('.field-input');
            expect(link.style.display).toBe('block');
            expect(input.style.display).toBe('none');
        });
        it('should show appropriate field based on value validity for non-static', () => {
            numberProperty.static = false;
            const updateFn = jest.fn();
            // Valid value - should show link
            const containerValid = numberProperty.createFieldContainerContent(updateFn, '123');
            const linkValid = containerValid.querySelector('.field-link');
            const inputValid = containerValid.querySelector('.field-input');
            expect(linkValid.style.display).toBe('block');
            expect(inputValid.style.display).toBe('none');
            // Invalid value - should show input
            const containerInvalid = numberProperty.createFieldContainerContent(updateFn, 'abc');
            const linkInvalid = containerInvalid.querySelector('.field-link');
            const inputInvalid = containerInvalid.querySelector('.field-input');
            expect(linkInvalid.style.display).toBe('none');
            expect(inputInvalid.style.display).toBe('block');
        });
    });
    describe('updateField', () => {
        it('should update field with valid value', async () => {
            const updateFn = jest.fn();
            const input = document.createElement('input');
            const link = document.createElement('div');
            input.value = '456';
            await numberProperty.updateField(updateFn, input, link);
            expect(updateFn).toHaveBeenCalledWith('456');
            expect(input.style.display).toBe('none');
            expect(link.textContent).toBe('456 kg');
            expect(link.style.display).toBe('block');
        });
        it('should update field with empty value', async () => {
            const updateFn = jest.fn();
            const input = document.createElement('input');
            const link = document.createElement('div');
            input.value = '';
            await numberProperty.updateField(updateFn, input, link);
            expect(updateFn).toHaveBeenCalledWith('');
        });
        it('should handle units correctly in display', async () => {
            const updateFn = jest.fn();
            const input = document.createElement('input');
            const link = document.createElement('div');
            // Test with unit
            input.value = '100';
            await numberProperty.updateField(updateFn, input, link);
            expect(link.textContent).toBe('100 kg');
            // Test without unit
            const propWithoutUnit = new NumberProperty_1.NumberProperty('test', mockVault, mockVault);
            input.value = '200';
            await propWithoutUnit.updateField(updateFn, input, link);
            expect(link.textContent).toBe('200 ');
        });
    });
    describe('getDisplay', () => {
        it('should use regular value when available', () => {
            numberProperty.read = jest.fn(() => '123');
            numberProperty.fillDisplay = jest.fn(() => document.createElement('div'));
            const result = numberProperty.getDisplay(mockFile, { staticMode: true, title: 'Test Number' });
            expect(numberProperty.static).toBe(true);
            expect(numberProperty.title).toBe('Test Number');
            expect(numberProperty.read).toHaveBeenCalledWith(mockFile);
            expect(numberProperty.fillDisplay).toHaveBeenCalledWith(mockFile.vault, '123', expect.any(Function));
        });
        it('should use formula value when regular value not available', () => {
            const mockFormulaProperty = {
                read: jest.fn(() => '42')
            };
            numberProperty.formulaProperty = mockFormulaProperty;
            numberProperty.read = jest.fn(() => null);
            numberProperty.fillDisplay = jest.fn(() => document.createElement('div'));
            const result = numberProperty.getDisplay(mockFile);
            expect(numberProperty.read).toHaveBeenCalledWith(mockFile);
            expect(mockFormulaProperty.read).toHaveBeenCalledWith(mockFile);
            expect(numberProperty.fillDisplay).toHaveBeenCalledWith(mockFile.vault, '42', // Mock formula result
            expect.any(Function));
        });
        it('should use regular value when both regular and formula available', () => {
            const mockFormulaProperty = {
                read: jest.fn(() => '42')
            };
            numberProperty.formulaProperty = mockFormulaProperty;
            numberProperty.read = jest.fn(() => '999');
            numberProperty.fillDisplay = jest.fn(() => document.createElement('div'));
            const result = numberProperty.getDisplay(mockFile);
            expect(numberProperty.read).toHaveBeenCalledWith(mockFile);
            expect(mockFormulaProperty.read).not.toHaveBeenCalled();
            expect(numberProperty.fillDisplay).toHaveBeenCalledWith(mockFile.vault, '999', expect.any(Function));
        });
    });
    describe('fillDisplay', () => {
        it('should create complete display with title', () => {
            numberProperty.title = 'Weight';
            const updateFn = jest.fn();
            const result = numberProperty.fillDisplay(mockVault, '150', updateFn);
            expect(numberProperty.vault).toBe(mockVault);
            expect(result.querySelector('.metadata-title')).toBeTruthy();
            expect(result.querySelector('.metadata-title')?.textContent).toBe('Weight');
            expect(result.querySelector('.icon-container')).toBeTruthy();
            expect(result.querySelector('.field-container')).toBeTruthy();
        });
        it('should create display without title when title is empty', () => {
            numberProperty.title = '';
            const updateFn = jest.fn();
            const result = numberProperty.fillDisplay(mockVault, '150', updateFn);
            expect(result.querySelector('.metadata-title')).toBeFalsy();
        });
    });
    describe('integration with Property base class', () => {
        it('should inherit all base functionality', () => {
            expect(numberProperty.name).toBe('testNumber');
            expect(numberProperty.type).toBe('number');
            expect(numberProperty).toBeInstanceOf(NumberProperty_1.NumberProperty);
        });
        it('should override createFieldInput to use number input', () => {
            const input = numberProperty.createFieldInput('123');
            expect(input.type).toBe('number');
        });
        it('should work with base class methods', () => {
            expect(typeof numberProperty.read).toBe('function');
            expect(typeof numberProperty.getPretty).toBe('function');
            expect(typeof numberProperty.getLink).toBe('function');
        });
    });
    describe('edge cases and error handling', () => {
        it('should handle null and undefined values', () => {
            expect(numberProperty.validate(null)).toBe('');
            expect(numberProperty.validate(undefined)).toBe('');
        });
        it('should handle very large numbers', () => {
            const largeNumber = '999999999999999999999';
            const result = numberProperty.validate(largeNumber);
            expect(result).toBe('1e+21');
        });
        it('should handle very small numbers', () => {
            const smallNumber = '0.000000000000000001';
            const result = numberProperty.validate(smallNumber);
            expect(result).toBe('1e-18');
        });
        it('should handle whitespace in input', () => {
            expect(numberProperty.validate('  123  ')).toBe('123');
            expect(numberProperty.validate('\t456\n')).toBe('456');
        });
        it('should create field link with falsy values', () => {
            const link1 = numberProperty.createFieldLink('0');
            expect(link1.textContent).toBe('0 kg');
            const link2 = numberProperty.createFieldLink(null);
            expect(link2.textContent).toBe('');
            const link3 = numberProperty.createFieldLink(undefined);
            expect(link3.textContent).toBe('');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXE51bWJlclByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUlILGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25CLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBRUosa0JBQWtCO0FBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN0QyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQW9CLEVBQUUsUUFBZ0IsRUFBRSxFQUFFO1FBQ3hELE9BQU8sQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELENBQUMsQ0FBQztDQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUosYUFBYTtBQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN0QyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNuQixDQUFDLENBQUMsQ0FBQztBQUVKLHVCQUF1QjtBQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDckQsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3BFLElBQUk7UUFDSixPQUFPO1FBQ1AsSUFBSTtRQUNKLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxD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QUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNwRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUN6QyxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxLQUFLLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUV2QyxNQUFNLEtBQUssR0FBRyxjQUFjLENBQUMsZUFBZSxDQUFDLElBQVcsQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRW5DLE1BQU0sS0FBSyxHQUFHLGNBQWMsQ0FBQyxlQUFlLENBQUMsU0FBZ0IsQ0FBQyxDQUFDO1lBQy9ELE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcTnVtYmVyUHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cclxuICovXHJcblxyXG5pbXBvcnQgeyBOdW1iZXJQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL051bWJlclByb3BlcnR5JztcclxuXHJcbi8vIE1vY2sgZnMgbW9kdWxlXHJcbmplc3QubW9jaygnZnMnLCAoKSA9PiAoe1xyXG4gICAgY3A6IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG4vLyBNb2NrIEFwcCBtb2R1bGVcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvdmF1bHQvVXRpbHMnLCAoKSA9PiAoe1xyXG4gICAgc2V0SWNvbjogamVzdC5mbigoZWxlbWVudDogSFRNTEVsZW1lbnQsIGljb25OYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1pY29uJywgaWNvbk5hbWUpO1xyXG4gICAgfSlcclxufSkpO1xyXG5cclxuLy8gTW9jayBWYXVsdFxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9WYXVsdCcsICgpID0+ICh7XHJcbiAgICBWYXVsdDogamVzdC5mbigpXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgRm9ybXVsYVByb3BlcnR5XHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3Byb3BlcnRpZXMvRm9ybXVsYVByb3BlcnR5JywgKCkgPT4gKHtcclxuICAgIEZvcm11bGFQcm9wZXJ0eTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigobmFtZSwgZm9ybXVsYSwgYXJncykgPT4gKHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGZvcm11bGEsXHJcbiAgICAgICAgYXJncyxcclxuICAgICAgICByZWFkOiBqZXN0LmZuKCgpID0+ICc0MicpLFxyXG4gICAgICAgIHR5cGU6ICdmb3JtdWxhJ1xyXG4gICAgfSkpXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdOdW1iZXJQcm9wZXJ0eScsICgpID0+IHtcclxuICAgIGxldCBudW1iZXJQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcbiAgICBsZXQgbW9ja1ZhdWx0OiBhbnk7XHJcbiAgICBsZXQgbW9ja0ZpbGU6IGFueTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAvLyBSZXNldCBET01cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1vY2sgdmF1bHRcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIGFwcDoge1xyXG4gICAgICAgICAgICAgICAgdmF1bHQ6IHsgZ2V0RmlsZXM6IGplc3QuZm4oKCkgPT4gW10pIH0sXHJcbiAgICAgICAgICAgICAgICBzZXRJY29uOiBqZXN0LmZuKChlbGVtZW50OiBIVE1MRWxlbWVudCwgaWNvbk5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCBpY29uTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGBbJHtpY29uTmFtZX1dYDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBNb2NrIGZpbGVcclxuICAgICAgICBtb2NrRmlsZSA9IHtcclxuICAgICAgICAgICAgZ2V0TWV0YWRhdGE6IGplc3QuZm4oKCkgPT4gKHsgdGVzdE51bWJlcjogJzEyMycgfSkpLFxyXG4gICAgICAgICAgICBnZXRNZXRhZGF0YVZhbHVlOiBqZXN0LmZuKChrZXk6IHN0cmluZykgPT4ga2V5ID09PSAndGVzdE51bWJlcicgPyAnMTIzJyA6IHVuZGVmaW5lZCksXHJcbiAgICAgICAgICAgIHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIHZhdWx0OiBtb2NrVmF1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBudW1iZXJQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSgndGVzdE51bWJlcicsIG1vY2tWYXVsdCwgJ2tnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIE51bWJlclByb3BlcnR5IHdpdGggZGVmYXVsdCB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBuZXcgTnVtYmVyUHJvcGVydHkoJ3Rlc3QnLCBtb2NrVmF1bHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AubmFtZSkudG9CZSgndGVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC50eXBlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AudW5pdCkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLmZvcm11bGFQcm9wZXJ0eSkudG9CZU51bGwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgTnVtYmVyUHJvcGVydHkgd2l0aCB1bml0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wID0gbmV3IE51bWJlclByb3BlcnR5KCd3ZWlnaHQnLCBtb2NrVmF1bHQsICdrZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AubmFtZSkudG9CZSgnd2VpZ2h0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLnVuaXQpLnRvQmUoJ2tnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLnR5cGUpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBOdW1iZXJQcm9wZXJ0eSB3aXRoIGZvcm11bGEnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB7IGljb246ICdjYWxjdWxhdG9yJywgc3RhdGljOiBmYWxzZSwgZm9ybXVsYTogJ2EgKyBiJyB9O1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wID0gbmV3IE51bWJlclByb3BlcnR5KCdjYWxjdWxhdGVkJywgbW9ja1ZhdWx0LCAndW5pdHMnLCBhcmdzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLm5hbWUpLnRvQmUoJ2NhbGN1bGF0ZWQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AudW5pdCkudG9CZSgndW5pdHMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AuZm9ybXVsYVByb3BlcnR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIE51bWJlclByb3BlcnR5IHdpdGhvdXQgZm9ybXVsYSB3aGVuIG5vdCBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHsgaWNvbjogJ2hhc2gnLCBzdGF0aWM6IHRydWUgfTtcclxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IG5ldyBOdW1iZXJQcm9wZXJ0eSgnc2ltcGxlJywgbW9ja1ZhdWx0LCAnY20nLCBhcmdzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLmZvcm11bGFQcm9wZXJ0eSkudG9CZU51bGwoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHZhbGlkIG51bWJlcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnMTIzJykpLnRvQmUoJzEyMycpO1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudmFsaWRhdGUoJzEyMy40NScpKS50b0JlKCcxMjMuNDUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKCcwJykpLnRvQmUoJzAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKCctNTAnKSkudG9CZSgnLTUwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnMy4xNDE1OScpKS50b0JlKCczLjE0MTU5Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgbnVtYmVycycsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKCdhYmMnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnMTJhYmMnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnJykpLnRvQmUoJycpO1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudmFsaWRhdGUoJyAgICcpKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKCdOYU4nKSkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVkZ2UgY2FzZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnSW5maW5pdHknKSkudG9CZSgnSW5maW5pdHknKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKCctSW5maW5pdHknKSkudG9CZSgnLUluZmluaXR5Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnMWUxMCcpKS50b0JlKCcxMDAwMDAwMDAwMCcpO1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudmFsaWRhdGUoJzEuMjNlLTQnKSkudG9CZSgnMC4wMDAxMjMnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVGaWVsZElucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIG51bWJlciBpbnB1dCBlbGVtZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IG51bWJlclByb3BlcnR5LmNyZWF0ZUZpZWxkSW5wdXQoJzEyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnRhZ05hbWUpLnRvQmUoJ0lOUFVUJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpLnRvQmUoJzEyMycpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1pbnB1dCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBudW1iZXJQcm9wZXJ0eS5jcmVhdGVGaWVsZElucHV0KCcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkTGluaycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBsaW5rIHdpdGggdmFsdWUgYW5kIHVuaXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBudW1iZXJQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzEyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGFnTmFtZSkudG9CZSgnRElWJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b0JlKCcxMjMga2cnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGxpbmsgd2l0aG91dCB1bml0IHdoZW4gdW5pdCBpcyBlbXB0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcFdpdGhvdXRVbml0ID0gbmV3IE51bWJlclByb3BlcnR5KCd0ZXN0JywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcHJvcFdpdGhvdXRVbml0LmNyZWF0ZUZpZWxkTGluaygnMTIzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnMTIzICcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IG51bWJlclByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGF2ZSBjb3JyZWN0IGN1cnNvciBzdHlsZSBiYXNlZCBvbiBzdGF0aWMgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG51bWJlclByb3BlcnR5LnN0YXRpYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcxMjMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuY3Vyc29yKS50b0JlKCd0ZXh0Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBudW1iZXJQcm9wZXJ0eS5zdGF0aWMgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rU3RhdGljID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcxMjMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmtTdGF0aWMuc3R5bGUuY3Vyc29yKS50b0JlKCdkZWZhdWx0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBub24tc3RhdGljIHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG51bWJlclByb3BlcnR5LnN0YXRpYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcxMjMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldHVwIERPTSBzdHJ1Y3R1cmUgZm9yIG1vZGlmeUZpZWxkXHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGZpZWxkLmNsYXNzTGlzdC5hZGQoJ21ldGFkYXRhLWZpZWxkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZmllbGQtaW5wdXQnKTtcclxuICAgICAgICAgICAgZmllbGQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICAgICAgICAgIGZpZWxkLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmaWVsZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCcsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBmaWVsZCBjb250YWluZXIgd2l0aCBpbnB1dCBhbmQgbGluaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG51bWJlclByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCh1cGRhdGVGbiwgJzEyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmllbGQtbGluaycpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmllbGQtaW5wdXQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dCkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNob3cgbGluayB3aGVuIHN0YXRpYyBwcm9wZXJ0eSBpcyB0cnVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBudW1iZXJQcm9wZXJ0eS5zdGF0aWMgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KHVwZGF0ZUZuLCAnMTIzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1saW5rJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1pbnB1dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnN0eWxlLmRpc3BsYXkpLnRvQmUoJ25vbmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGFwcHJvcHJpYXRlIGZpZWxkIGJhc2VkIG9uIHZhbHVlIHZhbGlkaXR5IGZvciBub24tc3RhdGljJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBudW1iZXJQcm9wZXJ0eS5zdGF0aWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWYWxpZCB2YWx1ZSAtIHNob3VsZCBzaG93IGxpbmtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyVmFsaWQgPSBudW1iZXJQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQodXBkYXRlRm4sICcxMjMnKTtcclxuICAgICAgICAgICAgY29uc3QgbGlua1ZhbGlkID0gY29udGFpbmVyVmFsaWQucXVlcnlTZWxlY3RvcignLmZpZWxkLWxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRWYWxpZCA9IGNvbnRhaW5lclZhbGlkLnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1pbnB1dCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmtWYWxpZC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXRWYWxpZC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJbnZhbGlkIHZhbHVlIC0gc2hvdWxkIHNob3cgaW5wdXRcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVySW52YWxpZCA9IG51bWJlclByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCh1cGRhdGVGbiwgJ2FiYycpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rSW52YWxpZCA9IGNvbnRhaW5lckludmFsaWQucXVlcnlTZWxlY3RvcignLmZpZWxkLWxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRJbnZhbGlkID0gY29udGFpbmVySW52YWxpZC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtaW5wdXQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rSW52YWxpZC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dEludmFsaWQuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd1cGRhdGVGaWVsZCcsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBmaWVsZCB3aXRoIHZhbGlkIHZhbHVlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzQ1Nic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBudW1iZXJQcm9wZXJ0eS51cGRhdGVGaWVsZCh1cGRhdGVGbiwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnNDU2Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b0JlKCc0NTYga2cnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgZmllbGQgd2l0aCBlbXB0eSB2YWx1ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbnVtYmVyUHJvcGVydHkudXBkYXRlRmllbGQodXBkYXRlRm4sIGlucHV0LCBsaW5rKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bml0cyBjb3JyZWN0bHkgaW4gZGlzcGxheScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IHdpdGggdW5pdFxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcxMDAnO1xyXG4gICAgICAgICAgICBhd2FpdCBudW1iZXJQcm9wZXJ0eS51cGRhdGVGaWVsZCh1cGRhdGVGbiwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnMTAwIGtnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IHdpdGhvdXQgdW5pdFxyXG4gICAgICAgICAgICBjb25zdCBwcm9wV2l0aG91dFVuaXQgPSBuZXcgTnVtYmVyUHJvcGVydHkoJ3Rlc3QnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzIwMCc7XHJcbiAgICAgICAgICAgIGF3YWl0IHByb3BXaXRob3V0VW5pdC51cGRhdGVGaWVsZCh1cGRhdGVGbiwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnMjAwICcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldERpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1c2UgcmVndWxhciB2YWx1ZSB3aGVuIGF2YWlsYWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgbnVtYmVyUHJvcGVydHkucmVhZCA9IGplc3QuZm4oKCkgPT4gJzEyMycpO1xyXG4gICAgICAgICAgICBudW1iZXJQcm9wZXJ0eS5maWxsRGlzcGxheSA9IGplc3QuZm4oKCkgPT4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyUHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSwgeyBzdGF0aWNNb2RlOiB0cnVlLCB0aXRsZTogJ1Rlc3QgTnVtYmVyJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS5zdGF0aWMpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS50aXRsZSkudG9CZSgnVGVzdCBOdW1iZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnJlYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIG1vY2tGaWxlLnZhdWx0LFxyXG4gICAgICAgICAgICAgICAgJzEyMycsXHJcbiAgICAgICAgICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVzZSBmb3JtdWxhIHZhbHVlIHdoZW4gcmVndWxhciB2YWx1ZSBub3QgYXZhaWxhYmxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRm9ybXVsYVByb3BlcnR5ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVhZDogamVzdC5mbigoKSA9PiAnNDInKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbnVtYmVyUHJvcGVydHkuZm9ybXVsYVByb3BlcnR5ID0gbW9ja0Zvcm11bGFQcm9wZXJ0eSBhcyBhbnk7XHJcbiAgICAgICAgICAgIG51bWJlclByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCgpID0+IG51bGwpO1xyXG4gICAgICAgICAgICBudW1iZXJQcm9wZXJ0eS5maWxsRGlzcGxheSA9IGplc3QuZm4oKCkgPT4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyUHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkucmVhZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja0Zvcm11bGFQcm9wZXJ0eS5yZWFkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrRmlsZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS5maWxsRGlzcGxheSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgICAgICAgICBtb2NrRmlsZS52YXVsdCxcclxuICAgICAgICAgICAgICAgICc0MicsIC8vIE1vY2sgZm9ybXVsYSByZXN1bHRcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXNlIHJlZ3VsYXIgdmFsdWUgd2hlbiBib3RoIHJlZ3VsYXIgYW5kIGZvcm11bGEgYXZhaWxhYmxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRm9ybXVsYVByb3BlcnR5ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVhZDogamVzdC5mbigoKSA9PiAnNDInKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbnVtYmVyUHJvcGVydHkuZm9ybXVsYVByb3BlcnR5ID0gbW9ja0Zvcm11bGFQcm9wZXJ0eSBhcyBhbnk7XHJcbiAgICAgICAgICAgIG51bWJlclByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCgpID0+ICc5OTknKTtcclxuICAgICAgICAgICAgbnVtYmVyUHJvcGVydHkuZmlsbERpc3BsYXkgPSBqZXN0LmZuKCgpID0+IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG51bWJlclByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnJlYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tGb3JtdWxhUHJvcGVydHkucmVhZCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIG1vY2tGaWxlLnZhdWx0LFxyXG4gICAgICAgICAgICAgICAgJzk5OScsXHJcbiAgICAgICAgICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbGxEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvbXBsZXRlIGRpc3BsYXkgd2l0aCB0aXRsZScsICgpID0+IHtcclxuICAgICAgICAgICAgbnVtYmVyUHJvcGVydHkudGl0bGUgPSAnV2VpZ2h0JztcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBudW1iZXJQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsICcxNTAnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtdGl0bGUnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS10aXRsZScpPy50ZXh0Q29udGVudCkudG9CZSgnV2VpZ2h0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQucXVlcnlTZWxlY3RvcignLmljb24tY29udGFpbmVyJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtY29udGFpbmVyJykpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzcGxheSB3aXRob3V0IHRpdGxlIHdoZW4gdGl0bGUgaXMgZW1wdHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG51bWJlclByb3BlcnR5LnRpdGxlID0gJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCAnMTUwJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtdGl0bGUnKSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnaW50ZWdyYXRpb24gd2l0aCBQcm9wZXJ0eSBiYXNlIGNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaW5oZXJpdCBhbGwgYmFzZSBmdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkubmFtZSkudG9CZSgndGVzdE51bWJlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudHlwZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoTnVtYmVyUHJvcGVydHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG92ZXJyaWRlIGNyZWF0ZUZpZWxkSW5wdXQgdG8gdXNlIG51bWJlciBpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBudW1iZXJQcm9wZXJ0eS5jcmVhdGVGaWVsZElucHV0KCcxMjMnKTtcclxuICAgICAgICAgICAgZXhwZWN0KChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggYmFzZSBjbGFzcyBtZXRob2RzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIG51bWJlclByb3BlcnR5LnJlYWQpLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0eXBlb2YgbnVtYmVyUHJvcGVydHkuZ2V0UHJldHR5KS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIG51bWJlclByb3BlcnR5LmdldExpbmspLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZWRnZSBjYXNlcyBhbmQgZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KG51bWJlclByb3BlcnR5LnZhbGlkYXRlKG51bGwgYXMgYW55KSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSh1bmRlZmluZWQgYXMgYW55KSkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHZlcnkgbGFyZ2UgbnVtYmVycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGFyZ2VOdW1iZXIgPSAnOTk5OTk5OTk5OTk5OTk5OTk5OTk5JztcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyUHJvcGVydHkudmFsaWRhdGUobGFyZ2VOdW1iZXIpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcxZSsyMScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IHNtYWxsIG51bWJlcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNtYWxsTnVtYmVyID0gJzAuMDAwMDAwMDAwMDAwMDAwMDAxJztcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyUHJvcGVydHkudmFsaWRhdGUoc21hbGxOdW1iZXIpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcxZS0xOCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB3aGl0ZXNwYWNlIGluIGlucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QobnVtYmVyUHJvcGVydHkudmFsaWRhdGUoJyAgMTIzICAnKSkudG9CZSgnMTIzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChudW1iZXJQcm9wZXJ0eS52YWxpZGF0ZSgnXFx0NDU2XFxuJykpLnRvQmUoJzQ1NicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBmaWVsZCBsaW5rIHdpdGggZmFsc3kgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rMSA9IG51bWJlclByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnMCcpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluazEudGV4dENvbnRlbnQpLnRvQmUoJzAga2cnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsyID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKG51bGwgYXMgYW55KTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsyLnRleHRDb250ZW50KS50b0JlKCcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmszID0gbnVtYmVyUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKHVuZGVmaW5lZCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluazMudGV4dENvbnRlbnQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=