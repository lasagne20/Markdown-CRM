{"version":3,"names":["cov_1xbi1y7ih","actualCoverage","s","ObjectProperty_1","require","FileProperty_1","MultiFileProperty","ObjectProperty","constructor","name","vault","classes","args","b","f","type","flexSpan","property","FileProperty","getClasses","formatParentValue","value","fillDisplay","values","update","container","document","createElement","classList","add","toLowerCase","createObjects","addButton","createAddButton","appendChild","forEach","objects","index","row","createObjectRow","deleteButton","createDeleteButton","propertyContainer","updateObject","app","setIcon","onclick","removeProperty","addProperty","newFiles","selectMultipleFile","hint","join","length","file","push","getLink","reloadObjects","enableDragAndDrop","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiFileProperty.ts"],"sourcesContent":["\r\nimport { ObjectProperty } from \"./ObjectProperty\";\r\nimport { FileProperty } from \"./FileProperty\";\r\nimport { File } from \"../vault/File\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\nexport class MultiFileProperty extends ObjectProperty {\r\n\r\n    public override type : string = \"multiFile\";\r\n    public classes: string[];\r\n    public property : FileProperty;\r\n    public override flexSpan = 2;\r\n\r\n\r\n    constructor(name: string, vault: Vault, classes : string[], args = {}){\r\n        super(name, vault, {}, args);\r\n        this.classes = classes;\r\n        this.property = new FileProperty(name, vault, classes, args);\r\n    }\r\n\r\n    override getClasses(): string[] {\r\n        return this.classes;\r\n    }\r\n\r\n    override formatParentValue(value : string){\r\n        return [value]\r\n    }\r\n\r\n    // Méthode principale pour obtenir l'affichage\r\n    override fillDisplay(values: any, update: (value: any) => Promise<void>) {\r\n        const container = document.createElement(\"div\");\r\n        container.classList.add(\"metadata-multiFiles-container-\"+this.name.toLowerCase());\r\n        container.classList.add(\"metadata-multiFiles-container\");\r\n\r\n        // Créer les lignes d'objet\r\n        this.createObjects(values, update, container);\r\n\r\n        const addButton = this.createAddButton(values, update, container);\r\n        container.appendChild(addButton);\r\n\r\n        return container;\r\n    }\r\n\r\n    override createObjects(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        if (!values) return;\r\n        values.forEach((objects: any, index: number) => {\r\n            const row = this.createObjectRow(values, update, objects, index, container);\r\n            container.appendChild(row);\r\n        });\r\n    }\r\n\r\n    override createObjectRow(values: any, update: (value: any) => Promise<void>, value: any, index: number, container: HTMLDivElement): HTMLDivElement {\r\n        const row = document.createElement(\"div\");\r\n        row.classList.add(\"metadata-multiFiles-row-inline\");\r\n\r\n        // Ajouter le bouton de suppression\r\n        const deleteButton = this.createDeleteButton(values, update, index, container);\r\n        row.appendChild(deleteButton);\r\n\r\n\r\n \r\n        let propertyContainer = document.createElement(\"div\");\r\n        propertyContainer.classList.add(\"metadata-multiFiles-property-inline\");\r\n        propertyContainer.appendChild(this.property.fillDisplay(this.vault, value, async (value : any) => await this.updateObject(values, update, index, this.property, value)));\r\n        row.appendChild(propertyContainer);\r\n\r\n        return row;\r\n    }\r\n\r\n    override createDeleteButton(values: any, update: (value: any) => Promise<void>, index: number, container: HTMLDivElement): HTMLButtonElement {\r\n        const deleteButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(deleteButton, \"minus\");\r\n        deleteButton.classList.add(\"metadata-delete-button-inline-small\");\r\n        deleteButton.onclick = async () => await this.removeProperty(values, update, index, container);\r\n        return deleteButton;\r\n    }\r\n\r\n    override async addProperty(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        const newFiles = await this.vault.app.selectMultipleFile(this.vault, this.classes, { hint: \"Choisissez des fichiers \" + this.getClasses().join(\" ou \") });\r\n        if (newFiles && newFiles.length > 0) {\r\n            if (!values) { values = []; }\r\n            newFiles.forEach((file: File) => {\r\n                values.push(file.getLink());\r\n            });\r\n            await update(values);\r\n            await this.reloadObjects(values, update);\r\n        }\r\n    }\r\n\r\n    override createAddButton(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement): HTMLButtonElement {\r\n        const addButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(addButton, \"plus\");\r\n        addButton.classList.add(\"metadata-add-button-inline-small\");\r\n        addButton.onclick = async () => await this.addProperty(values, update, container);\r\n        return addButton;\r\n    }\r\n\r\n    override enableDragAndDrop() {\r\n        // Disable drag and drop\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBK;IAAAA,aAAA,YAAAA,CAAA;MAA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","ignoreList":[]}