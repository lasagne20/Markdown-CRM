167e71f3f4e9a3f59f88310a801bdcde
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Data_1 = require("../../src/vault/Data");
// Test implementation of Data class
class TestData extends Data_1.Data {
    constructor(name) {
        super(name);
    }
    getClasse() {
        return 'TestDataClass';
    }
    static getClasse() {
        return 'TestDataClass';
    }
    getList(className) {
        if (className === 'TestData') {
            return [
                { id: 1, name: 'Item 1' },
                { id: 2, name: 'Item 2' },
                { id: 3, name: 'Item 3' }
            ];
        }
        return [];
    }
}
TestData.className = 'TestData';
// Another test implementation
class AnotherTestData extends Data_1.Data {
    constructor(name) {
        super(name);
        this.generativeData = {
            type: 'generated',
            timestamp: Date.now()
        };
    }
    getClasse() {
        return 'AnotherTestDataClass';
    }
    static getClasse() {
        return 'AnotherTestDataClass';
    }
}
AnotherTestData.className = 'AnotherTestData';
describe('Data', () => {
    let testData;
    let anotherTestData;
    beforeEach(() => {
        testData = new TestData('TestItem');
        anotherTestData = new AnotherTestData('AnotherTestItem');
    });
    describe('Constructor', () => {
        it('should create a Data instance with name', () => {
            expect(testData).toBeInstanceOf(Data_1.Data);
            expect(testData.name).toBe('TestItem');
        });
        it('should initialize empty generativeData object', () => {
            const data = new Data_1.Data('EmptyData');
            expect(data.generativeData).toEqual({});
        });
        it('should allow custom properties through indexer', () => {
            testData['customProperty'] = 'customValue';
            expect(testData['customProperty']).toBe('customValue');
        });
    });
    describe('getName method', () => {
        it('should return the name', () => {
            expect(testData.getName()).toBe('TestItem');
        });
        it('should return correct name for different instances', () => {
            expect(anotherTestData.getName()).toBe('AnotherTestItem');
        });
    });
    describe('getClasse methods', () => {
        it('should implement getClasse instance method in subclass', () => {
            expect(testData.getClasse()).toBe('TestDataClass');
            expect(anotherTestData.getClasse()).toBe('AnotherTestDataClass');
        });
        it('should implement getClasse static method in subclass', () => {
            expect(TestData.getClasse()).toBe('TestDataClass');
            expect(AnotherTestData.getClasse()).toBe('AnotherTestDataClass');
        });
        it('should throw error for base Data class getClasse instance method', () => {
            const baseData = new Data_1.Data('BaseData');
            expect(() => baseData.getClasse()).toThrow('Need to be impleted in the subClasses');
        });
        it('should throw error for base Data class getClasse static method', () => {
            expect(() => Data_1.Data.getClasse()).toThrow('Need to be impleted in the subClasses');
        });
    });
    describe('getList method', () => {
        it('should return list for known class name', () => {
            const list = testData.getList('TestData');
            expect(list).toHaveLength(3);
            expect(list[0]).toEqual({ id: 1, name: 'Item 1' });
            expect(list[1]).toEqual({ id: 2, name: 'Item 2' });
            expect(list[2]).toEqual({ id: 3, name: 'Item 3' });
        });
        it('should return empty array for unknown class name', () => {
            const list = testData.getList('UnknownClass');
            expect(list).toEqual([]);
        });
        it('should return empty array for base Data class', () => {
            const baseData = new Data_1.Data('BaseData');
            const list = baseData.getList('AnyClass');
            expect(list).toEqual([]);
        });
    });
    describe('Static className property', () => {
        it('should have className property in subclasses', () => {
            expect(TestData.className).toBe('TestData');
            expect(AnotherTestData.className).toBe('AnotherTestData');
        });
        it('should be undefined in base Data class', () => {
            expect(Data_1.Data.className).toBeUndefined();
        });
    });
    describe('Generative data', () => {
        it('should initialize empty generativeData by default', () => {
            expect(testData.generativeData).toEqual({});
        });
        it('should allow setting generativeData in constructor', () => {
            expect(anotherTestData.generativeData).toHaveProperty('type', 'generated');
            expect(anotherTestData.generativeData).toHaveProperty('timestamp');
            expect(typeof anotherTestData.generativeData.timestamp).toBe('number');
        });
        it('should allow modifying generativeData after construction', () => {
            testData.generativeData['newProperty'] = 'newValue';
            expect(testData.generativeData['newProperty']).toBe('newValue');
        });
        it('should allow complex objects in generativeData', () => {
            testData.generativeData = {
                config: {
                    enabled: true,
                    options: ['option1', 'option2']
                },
                metadata: {
                    version: '1.0.0'
                }
            };
            expect(testData.generativeData.config.enabled).toBe(true);
            expect(testData.generativeData.config.options).toHaveLength(2);
            expect(testData.generativeData.metadata.version).toBe('1.0.0');
        });
    });
    describe('Dynamic properties', () => {
        it('should allow setting and getting dynamic properties', () => {
            testData['dynamicProp1'] = 'value1';
            testData['dynamicProp2'] = { nested: 'object' };
            testData['dynamicProp3'] = [1, 2, 3];
            expect(testData['dynamicProp1']).toBe('value1');
            expect(testData['dynamicProp2']).toEqual({ nested: 'object' });
            expect(testData['dynamicProp3']).toEqual([1, 2, 3]);
        });
        it('should handle undefined dynamic properties', () => {
            expect(testData['nonExistentProp']).toBeUndefined();
        });
        it('should allow overwriting dynamic properties', () => {
            testData['prop'] = 'original';
            expect(testData['prop']).toBe('original');
            testData['prop'] = 'updated';
            expect(testData['prop']).toBe('updated');
        });
    });
    describe('Edge cases', () => {
        it('should handle empty name', () => {
            const emptyNameData = new TestData('');
            expect(emptyNameData.getName()).toBe('');
        });
        it('should handle name with special characters', () => {
            const specialNameData = new TestData('Test@#$%^&*()_+{}|:<>?');
            expect(specialNameData.getName()).toBe('Test@#$%^&*()_+{}|:<>?');
        });
        it('should handle very long names', () => {
            const longName = 'a'.repeat(1000);
            const longNameData = new TestData(longName);
            expect(longNameData.getName()).toBe(longName);
        });
        it('should handle null/undefined in generativeData', () => {
            testData.generativeData['nullProp'] = null;
            testData.generativeData['undefinedProp'] = undefined;
            expect(testData.generativeData['nullProp']).toBeNull();
            expect(testData.generativeData['undefinedProp']).toBeUndefined();
        });
    });
    describe('Type compatibility', () => {
        it('should be assignable to Data type', () => {
            const dataArray = [testData, anotherTestData];
            expect(dataArray).toHaveLength(2);
        });
        it('should maintain polymorphic behavior', () => {
            const dataArray = [testData, anotherTestData];
            expect(dataArray[0].getName()).toBe('TestItem');
            expect(dataArray[1].getName()).toBe('AnotherTestItem');
            expect(dataArray[0].getClasse()).toBe('TestDataClass');
            expect(dataArray[1].getClasse()).toBe('AnotherTestDataClass');
        });
    });
    describe('Memory and performance', () => {
        it('should handle large amounts of dynamic properties', () => {
            for (let i = 0; i < 1000; i++) {
                testData[`prop${i}`] = `value${i}`;
            }
            expect(testData['prop0']).toBe('value0');
            expect(testData['prop999']).toBe('value999');
        });
        it('should handle complex nested objects', () => {
            const complexObject = {
                level1: {
                    level2: {
                        level3: {
                            data: 'deep nested value'
                        }
                    }
                }
            };
            testData['complex'] = complexObject;
            expect(testData['complex'].level1.level2.level3.data).toBe('deep nested value');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXHZhdWx0XFxEYXRhLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBNEM7QUFFNUMsb0NBQW9DO0FBQ3BDLE1BQU0sUUFBUyxTQUFRLFdBQUk7SUFHdkIsWUFBWSxJQUFZO1FBQ3BCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQixDQUFDO0lBRUQsU0FBUztRQUNMLE9BQU8sZUFBZSxDQUFDO0lBQzNCLENBQUM7SUFFRCxNQUFNLENBQUMsU0FBUztRQUNaLE9BQU8sZUFBZSxDQUFDO0lBQzNCLENBQUM7SUFFTSxPQUFPLENBQUMsU0FBaUI7UUFDNUIsSUFBSSxTQUFTLEtBQUssVUFBVSxFQUFFLENBQUM7WUFDM0IsT0FBTztnQkFDSCxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRTtnQkFDekIsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUU7Z0JBQ3pCLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO2FBQzVCLENBQUM7UUFDTixDQUFDO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDOztBQXZCYSxrQkFBUyxHQUFHLFVBQVUsQ0FBQztBQTBCekMsOEJBQThCO0FBQzlCLE1BQU0sZUFBZ0IsU0FBUSxXQUFJO0lBRzlCLFlBQVksSUFBWTtRQUNwQixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDWixJQUFJLENBQUMsY0FBYyxHQUFHO1lBQ2xCLElBQUksRUFBRSxXQUFXO1lBQ2pCLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1NBQ3hCLENBQUM7SUFDTixDQUFDO0lBRUQsU0FBUztRQUNMLE9BQU8sc0JBQXNCLENBQUM7SUFDbEMsQ0FBQztJQUVELE1BQU0sQ0FBQyxTQUFTO1FBQ1osT0FBTyxzQkFBc0IsQ0FBQztJQUNsQyxDQUFDOztBQWhCYSx5QkFBUyxHQUFHLGlCQUFpQixDQUFDO0FBbUJoRCxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtJQUNsQixJQUFJLFFBQWtCLENBQUM7SUFDdkIsSUFBSSxlQUFnQyxDQUFDO0lBRXJDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDWixRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDcEMsZUFBZSxHQUFHLElBQUksZUFBZSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtRQUN6QixFQUFFLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxjQUFjLENBQUMsV0FBSSxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3JELE1BQU0sSUFBSSxHQUFHLElBQUksV0FBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRTtZQUN0RCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxhQUFhLENBQUM7WUFDM0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzVCLEVBQUUsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7WUFDOUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxvREFBb0QsRUFBRSxHQUFHLEVBQUU7WUFDMUQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQy9CLEVBQUUsQ0FBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7WUFDOUQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsZUFBZSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0RBQXNELEVBQUUsR0FBRyxFQUFFO1lBQzVELE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ3JFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGtFQUFrRSxFQUFFLEdBQUcsRUFBRTtZQUN4RSxNQUFNLFFBQVEsR0FBRyxJQUFJLFdBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7UUFDeEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQ3RFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxXQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsdUNBQXVDLENBQUMsQ0FBQztRQUNwRixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtRQUM1QixFQUFFLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUN2RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDeEQsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUNyRCxNQUFNLFFBQVEsR0FBRyxJQUFJLFdBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN0QyxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7UUFDdkMsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLENBQUMsV0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQzdCLEVBQUUsQ0FBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7WUFDekQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztZQUMzRSxNQUFNLENBQUMsZUFBZSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNuRSxNQUFNLENBQUMsT0FBTyxlQUFlLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwREFBMEQsRUFBRSxHQUFHLEVBQUU7WUFDaEUsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsR0FBRyxVQUFVLENBQUM7WUFDcEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQ3RELFFBQVEsQ0FBQyxjQUFjLEdBQUc7Z0JBQ3RCLE1BQU0sRUFBRTtvQkFDSixPQUFPLEVBQUUsSUFBSTtvQkFDYixPQUFPLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDO2lCQUNsQztnQkFDRCxRQUFRLEVBQUU7b0JBQ04sT0FBTyxFQUFFLE9BQU87aUJBQ25CO2FBQ0osQ0FBQztZQUVGLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLEVBQUUsQ0FBQyxxREFBcUQsRUFBRSxHQUFHLEVBQUU7WUFDM0QsUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUNwQyxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7WUFDaEQsUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVyQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQztZQUM5QixNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBRTFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxTQUFTLENBQUM7WUFDN0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7UUFDeEIsRUFBRSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtZQUNoQyxNQUFNLGFBQWEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLGVBQWUsR0FBRyxJQUFJLFFBQVEsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1lBQy9ELE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUNyRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7WUFDckMsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLFlBQVksR0FBRyxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRTtZQUN0RCxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUMzQyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLFNBQVMsQ0FBQztZQUVyRCxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7UUFDaEMsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUN6QyxNQUFNLFNBQVMsR0FBVyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLFNBQVMsR0FBVyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsQ0FBQztZQUV0RCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUV2RCxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtRQUNwQyxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1lBQ3pELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDNUIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ3ZDLENBQUM7WUFFRCxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sYUFBYSxHQUFHO2dCQUNsQixNQUFNLEVBQUU7b0JBQ0osTUFBTSxFQUFFO3dCQUNKLE1BQU0sRUFBRTs0QkFDSixJQUFJLEVBQUUsbUJBQW1CO3lCQUM1QjtxQkFDSjtpQkFDSjthQUNKLENBQUM7WUFFRixRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsYUFBYSxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDcEYsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFx2YXVsdFxcRGF0YS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGEgfSBmcm9tICcuLi8uLi9zcmMvdmF1bHQvRGF0YSc7XHJcblxyXG4vLyBUZXN0IGltcGxlbWVudGF0aW9uIG9mIERhdGEgY2xhc3NcclxuY2xhc3MgVGVzdERhdGEgZXh0ZW5kcyBEYXRhIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3NOYW1lID0gJ1Rlc3REYXRhJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDbGFzc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuICdUZXN0RGF0YUNsYXNzJztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0Q2xhc3NlKCkge1xyXG4gICAgICAgIHJldHVybiAnVGVzdERhdGFDbGFzcyc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldExpc3QoY2xhc3NOYW1lOiBzdHJpbmcpOiBhbnlbXSB7XHJcbiAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gJ1Rlc3REYXRhJykge1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgeyBpZDogMSwgbmFtZTogJ0l0ZW0gMScgfSxcclxuICAgICAgICAgICAgICAgIHsgaWQ6IDIsIG5hbWU6ICdJdGVtIDInIH0sXHJcbiAgICAgICAgICAgICAgICB7IGlkOiAzLCBuYW1lOiAnSXRlbSAzJyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gQW5vdGhlciB0ZXN0IGltcGxlbWVudGF0aW9uXHJcbmNsYXNzIEFub3RoZXJUZXN0RGF0YSBleHRlbmRzIERhdGEge1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzc05hbWUgPSAnQW5vdGhlclRlc3REYXRhJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihuYW1lKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRpdmVEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJhdGVkJyxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDbGFzc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuICdBbm90aGVyVGVzdERhdGFDbGFzcyc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldENsYXNzZSgpIHtcclxuICAgICAgICByZXR1cm4gJ0Fub3RoZXJUZXN0RGF0YUNsYXNzJztcclxuICAgIH1cclxufVxyXG5cclxuZGVzY3JpYmUoJ0RhdGEnLCAoKSA9PiB7XHJcbiAgICBsZXQgdGVzdERhdGE6IFRlc3REYXRhO1xyXG4gICAgbGV0IGFub3RoZXJUZXN0RGF0YTogQW5vdGhlclRlc3REYXRhO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIHRlc3REYXRhID0gbmV3IFRlc3REYXRhKCdUZXN0SXRlbScpO1xyXG4gICAgICAgIGFub3RoZXJUZXN0RGF0YSA9IG5ldyBBbm90aGVyVGVzdERhdGEoJ0Fub3RoZXJUZXN0SXRlbScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgRGF0YSBpbnN0YW5jZSB3aXRoIG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YSkudG9CZUluc3RhbmNlT2YoRGF0YSk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YS5uYW1lKS50b0JlKCdUZXN0SXRlbScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgZW1wdHkgZ2VuZXJhdGl2ZURhdGEgb2JqZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IERhdGEoJ0VtcHR5RGF0YScpO1xyXG4gICAgICAgICAgICBleHBlY3QoZGF0YS5nZW5lcmF0aXZlRGF0YSkudG9FcXVhbCh7fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgY3VzdG9tIHByb3BlcnRpZXMgdGhyb3VnaCBpbmRleGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0ZXN0RGF0YVsnY3VzdG9tUHJvcGVydHknXSA9ICdjdXN0b21WYWx1ZSc7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YVsnY3VzdG9tUHJvcGVydHknXSkudG9CZSgnY3VzdG9tVmFsdWUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXROYW1lIG1ldGhvZCcsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgbmFtZScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhLmdldE5hbWUoKSkudG9CZSgnVGVzdEl0ZW0nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBuYW1lIGZvciBkaWZmZXJlbnQgaW5zdGFuY2VzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoYW5vdGhlclRlc3REYXRhLmdldE5hbWUoKSkudG9CZSgnQW5vdGhlclRlc3RJdGVtJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0Q2xhc3NlIG1ldGhvZHMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbXBsZW1lbnQgZ2V0Q2xhc3NlIGluc3RhbmNlIG1ldGhvZCBpbiBzdWJjbGFzcycsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhLmdldENsYXNzZSgpKS50b0JlKCdUZXN0RGF0YUNsYXNzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhbm90aGVyVGVzdERhdGEuZ2V0Q2xhc3NlKCkpLnRvQmUoJ0Fub3RoZXJUZXN0RGF0YUNsYXNzJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW1wbGVtZW50IGdldENsYXNzZSBzdGF0aWMgbWV0aG9kIGluIHN1YmNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoVGVzdERhdGEuZ2V0Q2xhc3NlKCkpLnRvQmUoJ1Rlc3REYXRhQ2xhc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KEFub3RoZXJUZXN0RGF0YS5nZXRDbGFzc2UoKSkudG9CZSgnQW5vdGhlclRlc3REYXRhQ2xhc3MnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgYmFzZSBEYXRhIGNsYXNzIGdldENsYXNzZSBpbnN0YW5jZSBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VEYXRhID0gbmV3IERhdGEoJ0Jhc2VEYXRhJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBiYXNlRGF0YS5nZXRDbGFzc2UoKSkudG9UaHJvdygnTmVlZCB0byBiZSBpbXBsZXRlZCBpbiB0aGUgc3ViQ2xhc3NlcycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBiYXNlIERhdGEgY2xhc3MgZ2V0Q2xhc3NlIHN0YXRpYyBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBEYXRhLmdldENsYXNzZSgpKS50b1Rocm93KCdOZWVkIHRvIGJlIGltcGxldGVkIGluIHRoZSBzdWJDbGFzc2VzJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0TGlzdCBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gbGlzdCBmb3Iga25vd24gY2xhc3MgbmFtZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IHRlc3REYXRhLmdldExpc3QoJ1Rlc3REYXRhJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaXN0KS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaXN0WzBdKS50b0VxdWFsKHsgaWQ6IDEsIG5hbWU6ICdJdGVtIDEnIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QobGlzdFsxXSkudG9FcXVhbCh7IGlkOiAyLCBuYW1lOiAnSXRlbSAyJyB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpc3RbMl0pLnRvRXF1YWwoeyBpZDogMywgbmFtZTogJ0l0ZW0gMycgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciB1bmtub3duIGNsYXNzIG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSB0ZXN0RGF0YS5nZXRMaXN0KCdVbmtub3duQ2xhc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpc3QpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgYmFzZSBEYXRhIGNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlRGF0YSA9IG5ldyBEYXRhKCdCYXNlRGF0YScpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gYmFzZURhdGEuZ2V0TGlzdCgnQW55Q2xhc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpc3QpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1N0YXRpYyBjbGFzc05hbWUgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYXZlIGNsYXNzTmFtZSBwcm9wZXJ0eSBpbiBzdWJjbGFzc2VzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoVGVzdERhdGEuY2xhc3NOYW1lKS50b0JlKCdUZXN0RGF0YScpO1xyXG4gICAgICAgICAgICBleHBlY3QoQW5vdGhlclRlc3REYXRhLmNsYXNzTmFtZSkudG9CZSgnQW5vdGhlclRlc3REYXRhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgdW5kZWZpbmVkIGluIGJhc2UgRGF0YSBjbGFzcycsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KERhdGEuY2xhc3NOYW1lKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnR2VuZXJhdGl2ZSBkYXRhJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSBlbXB0eSBnZW5lcmF0aXZlRGF0YSBieSBkZWZhdWx0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGEuZ2VuZXJhdGl2ZURhdGEpLnRvRXF1YWwoe30pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IHNldHRpbmcgZ2VuZXJhdGl2ZURhdGEgaW4gY29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChhbm90aGVyVGVzdERhdGEuZ2VuZXJhdGl2ZURhdGEpLnRvSGF2ZVByb3BlcnR5KCd0eXBlJywgJ2dlbmVyYXRlZCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoYW5vdGhlclRlc3REYXRhLmdlbmVyYXRpdmVEYXRhKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0eXBlb2YgYW5vdGhlclRlc3REYXRhLmdlbmVyYXRpdmVEYXRhLnRpbWVzdGFtcCkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgbW9kaWZ5aW5nIGdlbmVyYXRpdmVEYXRhIGFmdGVyIGNvbnN0cnVjdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgdGVzdERhdGEuZ2VuZXJhdGl2ZURhdGFbJ25ld1Byb3BlcnR5J10gPSAnbmV3VmFsdWUnO1xyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGEuZ2VuZXJhdGl2ZURhdGFbJ25ld1Byb3BlcnR5J10pLnRvQmUoJ25ld1ZhbHVlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgY29tcGxleCBvYmplY3RzIGluIGdlbmVyYXRpdmVEYXRhJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0ZXN0RGF0YS5nZW5lcmF0aXZlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogWydvcHRpb24xJywgJ29wdGlvbjInXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhLmdlbmVyYXRpdmVEYXRhLmNvbmZpZy5lbmFibGVkKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGEuZ2VuZXJhdGl2ZURhdGEuY29uZmlnLm9wdGlvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhLmdlbmVyYXRpdmVEYXRhLm1ldGFkYXRhLnZlcnNpb24pLnRvQmUoJzEuMC4wJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnRHluYW1pYyBwcm9wZXJ0aWVzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgc2V0dGluZyBhbmQgZ2V0dGluZyBkeW5hbWljIHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRlc3REYXRhWydkeW5hbWljUHJvcDEnXSA9ICd2YWx1ZTEnO1xyXG4gICAgICAgICAgICB0ZXN0RGF0YVsnZHluYW1pY1Byb3AyJ10gPSB7IG5lc3RlZDogJ29iamVjdCcgfTtcclxuICAgICAgICAgICAgdGVzdERhdGFbJ2R5bmFtaWNQcm9wMyddID0gWzEsIDIsIDNdO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhWydkeW5hbWljUHJvcDEnXSkudG9CZSgndmFsdWUxJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YVsnZHluYW1pY1Byb3AyJ10pLnRvRXF1YWwoeyBuZXN0ZWQ6ICdvYmplY3QnIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGFbJ2R5bmFtaWNQcm9wMyddKS50b0VxdWFsKFsxLCAyLCAzXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCBkeW5hbWljIHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YVsnbm9uRXhpc3RlbnRQcm9wJ10pLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyBvdmVyd3JpdGluZyBkeW5hbWljIHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRlc3REYXRhWydwcm9wJ10gPSAnb3JpZ2luYWwnO1xyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGFbJ3Byb3AnXSkudG9CZSgnb3JpZ2luYWwnKTtcclxuXHJcbiAgICAgICAgICAgIHRlc3REYXRhWydwcm9wJ10gPSAndXBkYXRlZCc7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YVsncHJvcCddKS50b0JlKCd1cGRhdGVkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnRWRnZSBjYXNlcycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBuYW1lJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbXB0eU5hbWVEYXRhID0gbmV3IFRlc3REYXRhKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGVtcHR5TmFtZURhdGEuZ2V0TmFtZSgpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmFtZSB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc3BlY2lhbE5hbWVEYXRhID0gbmV3IFRlc3REYXRhKCdUZXN0QCMkJV4mKigpXyt7fXw6PD4/Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzcGVjaWFsTmFtZURhdGEuZ2V0TmFtZSgpKS50b0JlKCdUZXN0QCMkJV4mKigpXyt7fXw6PD4/Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHZlcnkgbG9uZyBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG9uZ05hbWUgPSAnYScucmVwZWF0KDEwMDApO1xyXG4gICAgICAgICAgICBjb25zdCBsb25nTmFtZURhdGEgPSBuZXcgVGVzdERhdGEobG9uZ05hbWUpO1xyXG4gICAgICAgICAgICBleHBlY3QobG9uZ05hbWVEYXRhLmdldE5hbWUoKSkudG9CZShsb25nTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwvdW5kZWZpbmVkIGluIGdlbmVyYXRpdmVEYXRhJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0ZXN0RGF0YS5nZW5lcmF0aXZlRGF0YVsnbnVsbFByb3AnXSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRlc3REYXRhLmdlbmVyYXRpdmVEYXRhWyd1bmRlZmluZWRQcm9wJ10gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QodGVzdERhdGEuZ2VuZXJhdGl2ZURhdGFbJ251bGxQcm9wJ10pLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0ZXN0RGF0YS5nZW5lcmF0aXZlRGF0YVsndW5kZWZpbmVkUHJvcCddKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnVHlwZSBjb21wYXRpYmlsaXR5JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgYXNzaWduYWJsZSB0byBEYXRhIHR5cGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnJheTogRGF0YVtdID0gW3Rlc3REYXRhLCBhbm90aGVyVGVzdERhdGFdO1xyXG4gICAgICAgICAgICBleHBlY3QoZGF0YUFycmF5KS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gcG9seW1vcnBoaWMgYmVoYXZpb3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnJheTogRGF0YVtdID0gW3Rlc3REYXRhLCBhbm90aGVyVGVzdERhdGFdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGRhdGFBcnJheVswXS5nZXROYW1lKCkpLnRvQmUoJ1Rlc3RJdGVtJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChkYXRhQXJyYXlbMV0uZ2V0TmFtZSgpKS50b0JlKCdBbm90aGVyVGVzdEl0ZW0nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChkYXRhQXJyYXlbMF0uZ2V0Q2xhc3NlKCkpLnRvQmUoJ1Rlc3REYXRhQ2xhc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGRhdGFBcnJheVsxXS5nZXRDbGFzc2UoKSkudG9CZSgnQW5vdGhlclRlc3REYXRhQ2xhc3MnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdNZW1vcnkgYW5kIHBlcmZvcm1hbmNlJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIGFtb3VudHMgb2YgZHluYW1pYyBwcm9wZXJ0aWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGVzdERhdGFbYHByb3Ake2l9YF0gPSBgdmFsdWUke2l9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhWydwcm9wMCddKS50b0JlKCd2YWx1ZTAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhWydwcm9wOTk5J10pLnRvQmUoJ3ZhbHVlOTk5Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggbmVzdGVkIG9iamVjdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXhPYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICBsZXZlbDE6IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbDI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAnZGVlcCBuZXN0ZWQgdmFsdWUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0ZXN0RGF0YVsnY29tcGxleCddID0gY29tcGxleE9iamVjdDtcclxuICAgICAgICAgICAgZXhwZWN0KHRlc3REYXRhWydjb21wbGV4J10ubGV2ZWwxLmxldmVsMi5sZXZlbDMuZGF0YSkudG9CZSgnZGVlcCBuZXN0ZWQgdmFsdWUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiXSwidmVyc2lvbiI6M30=