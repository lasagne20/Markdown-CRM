{"version":3,"names":["cov_1qs6sl04co","actualCoverage","s","MultiFileProperty_1","require","MediaProperty_1","MultiMediaProperty","MultiFileProperty","constructor","name","vault","args","b","f","type","flexSpan","property","MediaProperty","fillDisplay","values","update","container","document","createElement","classList","add","toLowerCase","createObjects","addButton","createAddButton","appendChild","Array","isArray","length","forEach","objects","index","row","createObjectRow","value","deleteButton","createDeleteButton","propertyContainer","updateObject","app","setIcon","onclick","removeProperty","addProperty","newFile","globalThis","selectMedia","push","path","reloadObjects","enableDragAndDrop","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiMediaProperty.ts"],"sourcesContent":["\r\nimport { ObjectProperty } from \"./ObjectProperty\";\r\nimport { FileProperty } from \"./FileProperty\";\r\nimport { File } from \"../vault/File\";\r\nimport { MultiFileProperty } from \"./MultiFileProperty\";\r\nimport { MediaProperty } from \"./MediaProperty\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\n// Declare selectMedia as external function for TypeScript\r\ndeclare global {\r\n    var selectMedia: (vault: any, title: string) => Promise<any>;\r\n}\r\n\r\n\r\nexport class MultiMediaProperty extends MultiFileProperty {\r\n\r\n    public override type : string = \"multiMedia\";\r\n    public override property : MediaProperty;\r\n    public override flexSpan = 2;\r\n\r\n\r\n    constructor(name: string, vault : Vault, args = {}){\r\n        super(name, vault, [], args);\r\n        this.property = new MediaProperty(name, vault, args);\r\n    }\r\n\r\n    // Méthode principale pour obtenir l'affichage\r\n    override fillDisplay(values: any, update: (value: any) => Promise<void>) {\r\n        const container = document.createElement(\"div\");\r\n        container.classList.add(\"metadata-multiFiles-container-\"+this.name.toLowerCase());\r\n        container.classList.add(\"metadata-multiFiles-container\");\r\n\r\n        // Créer les lignes d'objet\r\n        this.createObjects(values, update, container);\r\n\r\n        const addButton = this.createAddButton(values, update, container);\r\n        container.appendChild(addButton);\r\n\r\n        return container;\r\n    }\r\n\r\n    override createObjects(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        if (!Array.isArray(values) || values.length === 0) return;\r\n        values.forEach((objects: any, index: number) => {\r\n            const row = this.createObjectRow(values, update, objects, index, container);\r\n            container.appendChild(row);\r\n        });\r\n    }\r\n\r\n    override createObjectRow(values: any, update: (value: any) => Promise<void>, value: any, index: number, container: HTMLDivElement): HTMLDivElement {\r\n        const row = document.createElement(\"div\");\r\n        row.classList.add(\"metadata-multiFiles-row-inline\");\r\n\r\n        // Ajouter le bouton de suppression\r\n        const deleteButton = this.createDeleteButton(values, update, index, container);\r\n        row.appendChild(deleteButton);\r\n\r\n\r\n \r\n        let propertyContainer = document.createElement(\"div\");\r\n        propertyContainer.classList.add(\"metadata-multiFiles-property-inline\");\r\n        propertyContainer.appendChild(this.property.fillDisplay(value, async (value : any) => await this.updateObject(values, update, index, this.property, value)));\r\n        row.appendChild(propertyContainer);\r\n\r\n        return row;\r\n    }\r\n\r\n    override createDeleteButton(values: any, update: (value: any) => Promise<void>, index: number, container: HTMLDivElement): HTMLButtonElement {\r\n        const deleteButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(deleteButton, \"minus\");\r\n        deleteButton.classList.add(\"metadata-delete-button-inline-small\");\r\n        deleteButton.onclick = async () => await this.removeProperty(values, update, index, container);\r\n        return deleteButton;\r\n    }\r\n\r\n    override async addProperty(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        let newFile = await globalThis.selectMedia(this.vault, \"Choisissez un media \");\r\n        if (newFile) {\r\n            if (!values){values = []}\r\n            values.push(`[[${newFile.path}|${newFile.name}]]`);\r\n            await update(values);\r\n            await this.reloadObjects(values, update)\r\n        }\r\n    }\r\n\r\n    override createAddButton(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement): HTMLButtonElement {\r\n        const addButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(addButton, \"plus\");\r\n        addButton.classList.add(\"metadata-add-button-inline-small\");\r\n        addButton.onclick = async () => await this.addProperty(values, update, container);\r\n        return addButton;\r\n    }\r\n\r\n    override enableDragAndDrop() {\r\n        // Disable drag and drop\r\n    }\r\n}"],"mappings":"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","ignoreList":[]}