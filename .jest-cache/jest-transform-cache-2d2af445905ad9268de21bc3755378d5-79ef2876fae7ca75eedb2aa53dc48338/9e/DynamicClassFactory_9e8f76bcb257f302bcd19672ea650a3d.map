{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\Config\\DynamicClassFactory.ts","mappings":";;;AAEA,6DAA0D;AAE1D,MAAa,mBAAmB;IAI5B,YAAY,UAAkB,EAAE,KAAY;QAFpC,kBAAa,GAA+B,IAAI,GAAG,EAAE,CAAC;QAG1D,IAAI,CAAC,aAAa,GAAG,IAAI,uCAAkB,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IACnE,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,QAAQ,CAAC,SAAiB;QAC5B,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAE,CAAC;QAC9C,CAAC;QAED,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QAC7E,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QAChD,OAAO,YAAY,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,cAAc,CAAC,SAAiB,EAAE,GAAQ,EAAE,KAAY,EAAE,IAAS;QACrE,MAAM,gBAAgB,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACxD,MAAM,QAAQ,GAAG,IAAI,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAEnD,qDAAqD;QACrD,IAAI,CAAC;YACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YAClE,QAAQ,CAAC,aAAa,GAAG,MAAM,CAAC;QACpC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,OAAO,CAAC,IAAI,CAAC,qCAAqC,SAAS,GAAG,EAAE,KAAK,CAAC,CAAC;QAC3E,CAAC;QAED,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,mBAAmB;QACrB,OAAO,MAAM,IAAI,CAAC,aAAa,CAAC,mBAAmB,EAAE,CAAC;IAC1D,CAAC;IAED;;OAEG;IACH,UAAU;QACN,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC/B,CAAC;CAEJ;AAtDD,kDAsDC","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\Config\\DynamicClassFactory.ts"],"sourcesContent":["import { Classe } from '../vault/Classe';\r\nimport { Vault } from '../vault/Vault';\r\nimport { ClassConfigManager } from './ClassConfigManager';\r\n\r\nexport class DynamicClassFactory {\r\n    private configManager: ClassConfigManager;\r\n    private classRegistry: Map<string, typeof Classe> = new Map();\r\n\r\n    constructor(configPath: string, vault: Vault) {\r\n        this.configManager = new ClassConfigManager(configPath, vault);\r\n    }\r\n\r\n    /**\r\n     * Get or create a dynamic class by name\r\n     */\r\n    async getClass(className: string): Promise<typeof Classe> {\r\n        if (this.classRegistry.has(className)) {\r\n            return this.classRegistry.get(className)!;\r\n        }\r\n\r\n        const dynamicClass = await this.configManager.createDynamicClasse(className);\r\n        this.classRegistry.set(className, dynamicClass);\r\n        return dynamicClass;\r\n    }\r\n\r\n    /**\r\n     * Create an instance of a class from a file\r\n     */\r\n    async createInstance(className: string, app: any, vault: Vault, file: any): Promise<Classe> {\r\n        const ClassConstructor = await this.getClass(className);\r\n        const instance = new ClassConstructor(vault, file);\r\n        \r\n        // Attacher la configuration d'affichage Ã  l'instance\r\n        try {\r\n            const config = await this.configManager.getClassConfig(className);\r\n            instance.displayConfig = config;\r\n        } catch (error) {\r\n            console.warn(`Could not load display config for ${className}:`, error);\r\n        }\r\n        \r\n        return instance;\r\n    }\r\n\r\n    /**\r\n     * Get all available class names\r\n     */\r\n    async getAvailableClasses(): Promise<string[]> {\r\n        return await this.configManager.getAvailableClasses();\r\n    }\r\n\r\n    /**\r\n     * Clear cache and reload configurations\r\n     */\r\n    clearCache(): void {\r\n        this.configManager.clearCache();\r\n        this.classRegistry.clear();\r\n    }\r\n\r\n}"],"version":3}