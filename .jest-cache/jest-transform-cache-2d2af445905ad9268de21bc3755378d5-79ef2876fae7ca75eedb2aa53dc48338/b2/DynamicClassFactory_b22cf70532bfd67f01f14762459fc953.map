{"version":3,"names":["cov_1gu6w3v7ws","actualCoverage","s","ClassConfigManager_1","require","DynamicClassFactory","constructor","configPath","app","f","classRegistry","Map","configManager","ClassConfigManager","getClass","className","has","b","get","dynamicClass","createDynamicClasse","set","createInstance","vault","file","ClassConstructor","instance","config","getClassConfig","displayConfig","error","console","warn","getAvailableClasses","clearCache","clear","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\Config\\DynamicClassFactory.ts"],"sourcesContent":["import { Classe } from '../vault/Classe';\r\nimport { Vault } from '../vault/Vault';\r\nimport { ClassConfigManager } from './ClassConfigManager';\r\n\r\nexport class DynamicClassFactory {\r\n    private configManager: ClassConfigManager;\r\n    private classRegistry: Map<string, typeof Classe> = new Map();\r\n\r\n    constructor(configPath: string, app?: any) {\r\n        this.configManager = new ClassConfigManager(configPath, app);\r\n    }\r\n\r\n    /**\r\n     * Get or create a dynamic class by name\r\n     */\r\n    async getClass(className: string): Promise<typeof Classe> {\r\n        if (this.classRegistry.has(className)) {\r\n            return this.classRegistry.get(className)!;\r\n        }\r\n\r\n        const dynamicClass = await this.configManager.createDynamicClasse(className);\r\n        this.classRegistry.set(className, dynamicClass);\r\n        return dynamicClass;\r\n    }\r\n\r\n    /**\r\n     * Create an instance of a class from a file\r\n     */\r\n    async createInstance(className: string, app: any, vault: Vault, file: any): Promise<Classe> {\r\n        const ClassConstructor = await this.getClass(className);\r\n        const instance = new ClassConstructor(vault, file);\r\n        \r\n        // Attacher la configuration d'affichage Ã  l'instance\r\n        try {\r\n            const config = await this.configManager.getClassConfig(className);\r\n            instance.displayConfig = config;\r\n        } catch (error) {\r\n            console.warn(`Could not load display config for ${className}:`, error);\r\n        }\r\n        \r\n        return instance;\r\n    }\r\n\r\n    /**\r\n     * Get all available class names\r\n     */\r\n    async getAvailableClasses(): Promise<string[]> {\r\n        return await this.configManager.getAvailableClasses();\r\n    }\r\n\r\n    /**\r\n     * Clear cache and reload configurations\r\n     */\r\n    clearCache(): void {\r\n        this.configManager.clearCache();\r\n        this.classRegistry.clear();\r\n    }\r\n\r\n}"],"mappings":"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","ignoreList":[]}