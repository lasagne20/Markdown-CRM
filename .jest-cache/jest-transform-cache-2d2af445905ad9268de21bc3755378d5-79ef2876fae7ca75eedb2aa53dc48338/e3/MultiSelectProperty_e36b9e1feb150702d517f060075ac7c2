9b955f6a571169d7a8ff1c51c8f62917
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MultiSelectProperty = void 0;
const Property_1 = require("./Property");
class MultiSelectProperty extends Property_1.Property {
    constructor(name, vault, options, args = {}) {
        super(name, vault, args);
        this.type = "multiSelect";
        this.options = options;
    }
    fillDisplay(vault, value, update) {
        this.vault = vault;
        const field = this.createFieldContainer();
        const fieldContainer = document.createElement("div");
        fieldContainer.classList.add("field-container-column");
        const header = document.createElement("div");
        header.classList.add("metadata-header");
        header.textContent = this.name;
        fieldContainer.appendChild(header);
        const buttonContainer = this.createButtonGroup(value, update);
        fieldContainer.appendChild(buttonContainer);
        field.appendChild(fieldContainer);
        return field;
    }
    getDefaultValue() {
        for (let index in this.default) {
            if (this.default[index] == "personalName") {
                this.default[index] = this.vault.getPersonalName();
            }
        }
        return this.default;
    }
    // Crée le conteneur des boutons avec les options
    createButtonGroup(value, update) {
        const buttonContainer = document.createElement("div");
        buttonContainer.classList.add("multi-select-container");
        const selectedValues = new Set(value);
        this.options.forEach(option => {
            const button = document.createElement("button");
            button.classList.add("multi-select-button");
            button.textContent = option.name;
            if (selectedValues.has(option.name)) {
                button.classList.add("selected");
            }
            button.onclick = async () => {
                if (selectedValues.has(option.name)) {
                    selectedValues.delete(option.name);
                }
                else {
                    selectedValues.add(option.name);
                }
                await update([...selectedValues]);
                this.updateButtonState(buttonContainer, selectedValues);
            };
            buttonContainer.appendChild(button);
        });
        return buttonContainer;
    }
    // Met à jour l'affichage des boutons après sélection
    updateButtonState(container, selectedValues) {
        const buttons = container.querySelectorAll(".multi-select-button");
        buttons.forEach(button => {
            if (selectedValues.has(button.textContent || "")) {
                button.classList.add("selected");
            }
            else {
                button.classList.remove("selected");
            }
        });
    }
}
exports.MultiSelectProperty = MultiSelectProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXE11bHRpU2VsZWN0UHJvcGVydHkudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEseUNBQXNDO0FBSXRDLE1BQWEsbUJBQW9CLFNBQVEsbUJBQVE7SUFJN0MsWUFBWSxJQUFZLEVBQUUsS0FBYSxFQUFFLE9BQTBDLEVBQUUsSUFBSSxHQUFHLEVBQUU7UUFDMUYsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFIYixTQUFJLEdBQVksYUFBYSxDQUFDO1FBSTFDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0lBQzNCLENBQUM7SUFFUSxXQUFXLENBQUMsS0FBVSxFQUFFLEtBQVcsRUFBRSxNQUEwQztRQUNwRixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztRQUMxQyxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JELGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFFdkQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQTtRQUM5QixjQUFjLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRW5DLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDOUQs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dVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXE11bHRpU2VsZWN0UHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tIFwiLi9Qcm9wZXJ0eVwiO1xyXG5pbXBvcnQgeyBGaWxlIH0gZnJvbSBcIi4uL3ZhdWx0L0ZpbGVcIjtcclxuaW1wb3J0IHsgVmF1bHQgfSBmcm9tIFwiLi4vdmF1bHQvVmF1bHRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHkge1xyXG4gICAgcHVibGljIG9wdGlvbnM6IHtuYW1lIDogc3RyaW5nLCBjb2xvciA6IHN0cmluZ31bXTtcclxuICAgIHB1YmxpYyBvdmVycmlkZSB0eXBlIDogc3RyaW5nID0gXCJtdWx0aVNlbGVjdFwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmF1bHQgOiBWYXVsdCwgb3B0aW9uczoge25hbWUgOiBzdHJpbmcsIGNvbG9yIDogc3RyaW5nfVtdLCBhcmdzID0ge30pIHtcclxuICAgICAgICBzdXBlcihuYW1lLCB2YXVsdCwgYXJncyk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBvdmVycmlkZSBmaWxsRGlzcGxheSh2YXVsdDogYW55LCB2YWx1ZSA6IGFueSwgdXBkYXRlOiAodmFsdWU6IHN0cmluZ1tdKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5jcmVhdGVGaWVsZENvbnRhaW5lcigpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBmaWVsZENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZmllbGQtY29udGFpbmVyLWNvbHVtblwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcIm1ldGFkYXRhLWhlYWRlclwiKTtcclxuICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSB0aGlzLm5hbWVcclxuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLmNyZWF0ZUJ1dHRvbkdyb3VwKHZhbHVlLCB1cGRhdGUpO1xyXG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgZmllbGQuYXBwZW5kQ2hpbGQoZmllbGRDb250YWluZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgZ2V0RGVmYXVsdFZhbHVlKCl7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gdGhpcy5kZWZhdWx0KXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFtpbmRleF0gPT0gXCJwZXJzb25hbE5hbWVcIil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRbaW5kZXhdID0gdGhpcy52YXVsdC5nZXRQZXJzb25hbE5hbWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyw6llIGxlIGNvbnRlbmV1ciBkZXMgYm91dG9ucyBhdmVjIGxlcyBvcHRpb25zXHJcbiAgICBjcmVhdGVCdXR0b25Hcm91cCh2YWx1ZTogc3RyaW5nW10sIHVwZGF0ZTogKHZhbHVlOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTx2b2lkPik6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibXVsdGktc2VsZWN0LWNvbnRhaW5lclwiKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZXMgPSBuZXcgU2V0KHZhbHVlKTsgXHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibXVsdGktc2VsZWN0LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gb3B0aW9uLm5hbWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaGFzKG9wdGlvbi5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaGFzKG9wdGlvbi5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVzLmRlbGV0ZShvcHRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVzLmFkZChvcHRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlKFsuLi5zZWxlY3RlZFZhbHVlc10pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZShidXR0b25Db250YWluZXIsIHNlbGVjdGVkVmFsdWVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYnV0dG9uQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1ldCDDoCBqb3VyIGwnYWZmaWNoYWdlIGRlcyBib3V0b25zIGFwcsOocyBzw6lsZWN0aW9uXHJcbiAgICB1cGRhdGVCdXR0b25TdGF0ZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBzZWxlY3RlZFZhbHVlczogU2V0PHN0cmluZz4pIHtcclxuICAgICAgICBjb25zdCBidXR0b25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubXVsdGktc2VsZWN0LWJ1dHRvblwiKTtcclxuICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzLmhhcyhidXR0b24udGV4dENvbnRlbnQgfHwgXCJcIikpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sInZlcnNpb24iOjN9