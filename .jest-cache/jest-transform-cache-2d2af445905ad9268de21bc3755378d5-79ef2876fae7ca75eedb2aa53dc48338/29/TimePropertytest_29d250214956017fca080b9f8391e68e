a9b6bde006434665d3bc251ba74e0c9a
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock flatpickr
jest.mock('flatpickr', () => {
    return jest.fn().mockImplementation((element, options) => {
        // Simuler l'initialization flatpickr
        element.setAttribute('data-flatpickr', 'true');
        // Simuler le trigger des événements flatpickr
        if (options?.onChange) {
            element._flatpickrOnChange = options.onChange;
        }
        if (options?.onClose) {
            element._flatpickrOnClose = options.onClose;
        }
        return {
            destroy: jest.fn(),
            clear: jest.fn(),
            setDate: jest.fn()
        };
    });
});
// Mock French locale
jest.mock('flatpickr/dist/l10n/fr.js', () => ({
    French: {}
}), { virtual: true });
const TimeProperty_1 = require("../../properties/TimeProperty");
describe('TimeProperty', () => {
    let timeProperty;
    beforeEach(() => {
        // Reset DOM mocks
        document.body.innerHTML = '';
        jest.clearAllMocks();
        // Mock focus pour tous les éléments HTML
        HTMLElement.prototype.focus = jest.fn();
    });
    describe('constructor', () => {
        it('should create TimeProperty with default format', () => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
            expect(timeProperty.name).toBe('testTime');
            expect(timeProperty.type).toBe('time');
            expect(timeProperty['format']).toBe('HH:mm'); // format par défaut
        });
        it('should create TimeProperty with custom format', () => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime', { format: 'HH:mm:ss', icon: 'clock' });
            expect(timeProperty.name).toBe('testTime');
            expect(timeProperty.type).toBe('time');
            expect(timeProperty['format']).toBe('HH:mm:ss');
            expect(timeProperty.icon).toBe('clock');
        });
    });
    describe('validate', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should validate correct time format HH:mm', () => {
            expect(timeProperty.validate('14:30')).toBe('14:30');
            expect(timeProperty.validate('09:15')).toBe('09:15');
            expect(timeProperty.validate('00:00')).toBe('00:00');
            expect(timeProperty.validate('23:59')).toBe('23:59');
        });
        it('should return empty string for invalid time format', () => {
            expect(timeProperty.validate('25:00')).toBe('25:00'); // Format valide même si heure invalide
            expect(timeProperty.validate('14:70')).toBe('14:70'); // Format valide même si minutes invalides
            expect(timeProperty.validate('14')).toBe(''); // Format incomplet
            expect(timeProperty.validate('14:3')).toBe(''); // Format incorrect (pas 2 digits)
            expect(timeProperty.validate('abc')).toBe(''); // Texte invalide
            expect(timeProperty.validate('')).toBe(''); // Chaîne vide
        });
    });
    describe('formatTimeForDisplay', () => {
        it('should format time for HH:mm format', () => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime', { format: 'HH:mm' });
            expect(timeProperty.formatTimeForDisplay('14:30')).toBe('14:30');
            expect(timeProperty.formatTimeForDisplay('09:15')).toBe('09:15');
            expect(timeProperty.formatTimeForDisplay('')).toBe('Aucune heure sélectionnée');
        });
        it('should format time for custom format with units', () => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime', { format: 'custom' });
            expect(timeProperty.formatTimeForDisplay('14:30')).toBe('14h 30 min');
            expect(timeProperty.formatTimeForDisplay('09:00')).toBe('9h');
            expect(timeProperty.formatTimeForDisplay('00:15')).toBe('15 min');
            expect(timeProperty.formatTimeForDisplay('00:00')).toBe('0 min');
            expect(timeProperty.formatTimeForDisplay('')).toBe('');
        });
        it('should handle time with seconds', () => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime', { format: 'custom' });
            expect(timeProperty.formatTimeForDisplay('14:30:45')).toBe('14h 30 min 45s');
            expect(timeProperty.formatTimeForDisplay('00:00:30')).toBe('30s');
        });
    });
    describe('formatTimeForStorage', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should format Date to HH:mm string', () => {
            const date1 = new Date('2024-01-01T14:30:00');
            const date2 = new Date('2024-01-01T09:15:00');
            expect(timeProperty.formatTimeForStorage(date1)).toBe('14:30');
            expect(timeProperty.formatTimeForStorage(date2)).toBe('09:15');
        });
    });
    describe('createFieldLink', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should create link element with time value', () => {
            const link = timeProperty.createFieldLink('14:30');
            expect(link.tagName).toBe('DIV');
            expect(link.textContent).toBe('14:30');
            expect(link.classList.contains('time-field-link')).toBe(true);
            expect(link.classList.contains('field-link')).toBe(true);
            expect(link.style.cursor).toBe('pointer');
        });
        it('should create link with default text when no value', () => {
            const link = timeProperty.createFieldLink('');
            expect(link.textContent).toBe('Aucune heure sélectionnée');
        });
        it('should handle click event to trigger modifyField', () => {
            const spy = jest.spyOn(timeProperty, 'modifyField');
            const link = timeProperty.createFieldLink('14:30');
            link.click();
            expect(spy).toHaveBeenCalledWith(expect.objectContaining({
                type: 'click',
                currentTarget: link
            }));
        });
    });
    describe('createFieldTime', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should create input element with flatpickr', () => {
            const mockUpdate = jest.fn();
            const mockLink = document.createElement('div');
            const input = timeProperty.createFieldTime('14:30', mockUpdate, mockLink);
            expect(input.tagName).toBe('INPUT');
            expect(input.type).toBe('text');
            expect(input.value).toBe('14:30');
            expect(input.classList.contains('field-input')).toBe(true);
            expect(input.hasAttribute('data-flatpickr')).toBe(true);
        });
        it('should create input with empty value when no initial value', () => {
            const mockUpdate = jest.fn();
            const mockLink = document.createElement('div');
            const input = timeProperty.createFieldTime('', mockUpdate, mockLink);
            expect(input.value).toBe('');
        });
        it('should handle flatpickr onChange event', async () => {
            const mockUpdate = jest.fn().mockResolvedValue(undefined);
            const mockLink = document.createElement('div');
            const spy = jest.spyOn(timeProperty, 'updateField').mockResolvedValue(undefined);
            const input = timeProperty.createFieldTime('', mockUpdate, mockLink);
            // Simuler le changement flatpickr
            const mockDate = new Date('2024-01-01T15:45:00');
            if (input._flatpickrOnChange) {
                await input._flatpickrOnChange([mockDate]);
            }
            expect(input.value).toBe('15:45');
            expect(spy).toHaveBeenCalledWith(mockUpdate, input, mockLink);
        });
        it('should handle flatpickr onClose event', async () => {
            const mockUpdate = jest.fn().mockResolvedValue(undefined);
            const mockLink = document.createElement('div');
            const spy = jest.spyOn(timeProperty, 'updateField').mockResolvedValue(undefined);
            const input = timeProperty.createFieldTime('invalid', mockUpdate, mockLink);
            // Simuler la fermeture flatpickr
            if (input._flatpickrOnClose) {
                await input._flatpickrOnClose();
            }
            expect(input.value).toBe(''); // Valeur invalide effacée
            expect(spy).toHaveBeenCalledWith(mockUpdate, input, mockLink);
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should create container with link and input for valid value', () => {
            const mockUpdate = jest.fn();
            const container = timeProperty.fillDisplay({}, '14:30', mockUpdate);
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('field-container')).toBe(true);
            const link = container.querySelector('.time-field-link');
            const input = container.querySelector('input');
            expect(link).toBeTruthy();
            expect(input).toBeTruthy();
            expect(link?.style.display).toBe('block');
            // L'input est initialisé par flatpickr, donc on vérifie qu'il existe mais pas nécessairement qu'il soit caché
            expect(input).toBeTruthy();
        });
        it('should show input for invalid value', () => {
            const mockUpdate = jest.fn();
            const container = timeProperty.fillDisplay({}, 'invalid', mockUpdate);
            const link = container.querySelector('.time-field-link');
            const input = container.querySelector('input');
            expect(input?.style.display).toBe('block');
            expect(link?.style.display).toBe('none');
        });
        it('should show input for empty value', () => {
            const mockUpdate = jest.fn();
            const container = timeProperty.fillDisplay({}, '', mockUpdate);
            const link = container.querySelector('.time-field-link');
            const input = container.querySelector('input');
            expect(input?.style.display).toBe('block');
            expect(link?.style.display).toBe('none');
        });
    });
    describe('updateField', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should update field with valid value', async () => {
            const mockUpdate = jest.fn().mockResolvedValue(undefined);
            const input = document.createElement('input');
            input.value = '14:30';
            const link = document.createElement('div');
            await timeProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('14:30');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toBe('14:30');
        });
        it('should handle invalid value', async () => {
            const mockUpdate = jest.fn().mockResolvedValue(undefined);
            const input = document.createElement('input');
            input.value = 'invalid';
            const link = document.createElement('div');
            await timeProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('');
            expect(link.textContent).toBe('Aucune heure sélectionnée');
        });
    });
    describe('modifyField', () => {
        beforeEach(() => {
            timeProperty = new TimeProperty_1.TimeProperty('testTime');
        });
        it('should call modifyField without throwing errors', () => {
            // Test que modifyField peut être appelé sans erreur
            const container = document.createElement('div');
            const link = document.createElement('div');
            const input = document.createElement('input');
            container.appendChild(link);
            container.appendChild(input);
            const event = { currentTarget: link };
            // Vérifier que modifyField ne lance pas d'erreur
            expect(() => timeProperty.modifyField(event)).not.toThrow();
        });
        it('should handle missing container', () => {
            const link = document.createElement('div'); // Pas de parent
            const event = { currentTarget: link };
            // Ne devrait pas lever d'erreur
            expect(() => timeProperty.modifyField(event)).not.toThrow();
        });
        it('should handle missing input in container', () => {
            const container = document.createElement('div');
            const link = document.createElement('div');
            container.appendChild(link); // Pas d'input
            const event = { currentTarget: link };
            // Ne devrait pas lever d'erreur
            expect(() => timeProperty.modifyField(event)).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcVGltZVByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUlILGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDeEIsT0FBTyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUU7UUFDckQscUNBQXFDO1FBQ3JDLE9BQU8sQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFL0MsOENBQThDO1FBQzlDLElBQUksT0FBTyxFQUFFLFFBQVEsRUFBRSxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xELENBQUM7UUFDRCxJQUFJLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQztZQUNuQixPQUFPLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNoRCxDQUFDO1FBRUQsT0FBTztZQUNILE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3JCLENBQUM7SUFDTixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDO0FBRUgscUJBQXFCO0FBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUMxQyxNQUFNLEVBQUUsRUFBRTtDQUNiLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FB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LEVBQUUsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2hFLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXHNyY1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxUaW1lUHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cclxuICovXHJcblxyXG5pbXBvcnQgeyBUaW1lUHJvcGVydHkgfSBmcm9tICcuLi8uLi9wcm9wZXJ0aWVzL1RpbWVQcm9wZXJ0eSc7XHJcblxyXG4vLyBNb2NrIGZsYXRwaWNrclxyXG5qZXN0Lm1vY2soJ2ZsYXRwaWNrcicsICgpID0+IHtcclxuICAgIHJldHVybiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChlbGVtZW50LCBvcHRpb25zKSA9PiB7XHJcbiAgICAgICAgLy8gU2ltdWxlciBsJ2luaXRpYWxpemF0aW9uIGZsYXRwaWNrclxyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWZsYXRwaWNrcicsICd0cnVlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2ltdWxlciBsZSB0cmlnZ2VyIGRlcyDDqXbDqW5lbWVudHMgZmxhdHBpY2tyXHJcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuX2ZsYXRwaWNrck9uQ2hhbmdlID0gb3B0aW9ucy5vbkNoYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm9uQ2xvc2UpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5fZmxhdHBpY2tyT25DbG9zZSA9IG9wdGlvbnMub25DbG9zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGVzdHJveTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBjbGVhcjogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBzZXREYXRlOiBqZXN0LmZuKClcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gTW9jayBGcmVuY2ggbG9jYWxlXHJcbmplc3QubW9jaygnZmxhdHBpY2tyL2Rpc3QvbDEwbi9mci5qcycsICgpID0+ICh7XHJcbiAgICBGcmVuY2g6IHt9XHJcbn0pLCB7IHZpcnR1YWw6IHRydWUgfSk7XHJcblxyXG5kZXNjcmliZSgnVGltZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHRpbWVQcm9wZXJ0eTogVGltZVByb3BlcnR5O1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IERPTSBtb2Nrc1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTW9jayBmb2N1cyBwb3VyIHRvdXMgbGVzIMOpbMOpbWVudHMgSFRNTFxyXG4gICAgICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5mb2N1cyA9IGplc3QuZm4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBUaW1lUHJvcGVydHkgd2l0aCBkZWZhdWx0IGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGltZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eSgndGVzdFRpbWUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHkubmFtZSkudG9CZSgndGVzdFRpbWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS50eXBlKS50b0JlKCd0aW1lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHlbJ2Zvcm1hdCddKS50b0JlKCdISDptbScpOyAvLyBmb3JtYXQgcGFyIGTDqWZhdXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgVGltZVByb3BlcnR5IHdpdGggY3VzdG9tIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGltZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eSgndGVzdFRpbWUnLCB7IGZvcm1hdDogJ0hIOm1tOnNzJywgaWNvbjogJ2Nsb2NrJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHkubmFtZSkudG9CZSgndGVzdFRpbWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS50eXBlKS50b0JlKCd0aW1lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHlbJ2Zvcm1hdCddKS50b0JlKCdISDptbTpzcycpO1xyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5Lmljb24pLnRvQmUoJ2Nsb2NrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgndmFsaWRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWVQcm9wZXJ0eSA9IG5ldyBUaW1lUHJvcGVydHkoJ3Rlc3RUaW1lJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29ycmVjdCB0aW1lIGZvcm1hdCBISDptbScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMTQ6MzAnKSkudG9CZSgnMTQ6MzAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMDk6MTUnKSkudG9CZSgnMDk6MTUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMDA6MDAnKSkudG9CZSgnMDA6MDAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMjM6NTknKSkudG9CZSgnMjM6NTknKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIHRpbWUgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LnZhbGlkYXRlKCcyNTowMCcpKS50b0JlKCcyNTowMCcpOyAvLyBGb3JtYXQgdmFsaWRlIG3Dqm1lIHNpIGhldXJlIGludmFsaWRlXHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHkudmFsaWRhdGUoJzE0OjcwJykpLnRvQmUoJzE0OjcwJyk7IC8vIEZvcm1hdCB2YWxpZGUgbcOqbWUgc2kgbWludXRlcyBpbnZhbGlkZXNcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMTQnKSkudG9CZSgnJyk7IC8vIEZvcm1hdCBpbmNvbXBsZXRcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS52YWxpZGF0ZSgnMTQ6MycpKS50b0JlKCcnKTsgLy8gRm9ybWF0IGluY29ycmVjdCAocGFzIDIgZGlnaXRzKVxyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LnZhbGlkYXRlKCdhYmMnKSkudG9CZSgnJyk7IC8vIFRleHRlIGludmFsaWRlXHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHkudmFsaWRhdGUoJycpKS50b0JlKCcnKTsgLy8gQ2hhw65uZSB2aWRlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZm9ybWF0VGltZUZvckRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgdGltZSBmb3IgSEg6bW0gZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lUHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KCd0ZXN0VGltZScsIHsgZm9ybWF0OiAnSEg6bW0nIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnMTQ6MzAnKSkudG9CZSgnMTQ6MzAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnMDk6MTUnKSkudG9CZSgnMDk6MTUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnJykpLnRvQmUoJ0F1Y3VuZSBoZXVyZSBzw6lsZWN0aW9ubsOpZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCB0aW1lIGZvciBjdXN0b20gZm9ybWF0IHdpdGggdW5pdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWVQcm9wZXJ0eSA9IG5ldyBUaW1lUHJvcGVydHkoJ3Rlc3RUaW1lJywgeyBmb3JtYXQ6ICdjdXN0b20nIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnMTQ6MzAnKSkudG9CZSgnMTRoIDMwIG1pbicpO1xyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LmZvcm1hdFRpbWVGb3JEaXNwbGF5KCcwOTowMCcpKS50b0JlKCc5aCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LmZvcm1hdFRpbWVGb3JEaXNwbGF5KCcwMDoxNScpKS50b0JlKCcxNSBtaW4nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnMDA6MDAnKSkudG9CZSgnMCBtaW4nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yRGlzcGxheSgnJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB0aW1lIHdpdGggc2Vjb25kcycsICgpID0+IHtcclxuICAgICAgICAgICAgdGltZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eSgndGVzdFRpbWUnLCB7IGZvcm1hdDogJ2N1c3RvbScgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LmZvcm1hdFRpbWVGb3JEaXNwbGF5KCcxNDozMDo0NScpKS50b0JlKCcxNGggMzAgbWluIDQ1cycpO1xyXG4gICAgICAgICAgICBleHBlY3QodGltZVByb3BlcnR5LmZvcm1hdFRpbWVGb3JEaXNwbGF5KCcwMDowMDozMCcpKS50b0JlKCczMHMnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmb3JtYXRUaW1lRm9yU3RvcmFnZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgdGltZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eSgndGVzdFRpbWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgRGF0ZSB0byBISDptbSBzdHJpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUxID0gbmV3IERhdGUoJzIwMjQtMDEtMDFUMTQ6MzA6MDAnKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZTIgPSBuZXcgRGF0ZSgnMjAyNC0wMS0wMVQwOToxNTowMCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHRpbWVQcm9wZXJ0eS5mb3JtYXRUaW1lRm9yU3RvcmFnZShkYXRlMSkpLnRvQmUoJzE0OjMwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0aW1lUHJvcGVydHkuZm9ybWF0VGltZUZvclN0b3JhZ2UoZGF0ZTIpKS50b0JlKCcwOToxNScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkTGluaycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgdGltZVByb3BlcnR5ID0gbmV3IFRpbWVQcm9wZXJ0eSgndGVzdFRpbWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgbGluayBlbGVtZW50IHdpdGggdGltZSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHRpbWVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzE0OjMwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvQmUoJzE0OjMwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLmNsYXNzTGlzdC5jb250YWlucygndGltZS1maWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZmllbGQtbGluaycpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5jdXJzb3IpLnRvQmUoJ3BvaW50ZXInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgbGluayB3aXRoIGRlZmF1bHQgdGV4dCB3aGVuIG5vIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gdGltZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnQXVjdW5lIGhldXJlIHPDqWxlY3Rpb25uw6llJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNsaWNrIGV2ZW50IHRvIHRyaWdnZXIgbW9kaWZ5RmllbGQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24odGltZVByb3BlcnR5LCAnbW9kaWZ5RmllbGQnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHRpbWVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzE0OjMwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogbGlua1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRmllbGRUaW1lJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lUHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KCd0ZXN0VGltZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBpbnB1dCBlbGVtZW50IHdpdGggZmxhdHBpY2tyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aW1lUHJvcGVydHkuY3JlYXRlRmllbGRUaW1lKCcxNDozMCcsIG1vY2tVcGRhdGUsIG1vY2tMaW5rKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC50YWdOYW1lKS50b0JlKCdJTlBVVCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudHlwZSkudG9CZSgndGV4dCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJzE0OjMwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWlucHV0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZmxhdHBpY2tyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGlucHV0IHdpdGggZW1wdHkgdmFsdWUgd2hlbiBubyBpbml0aWFsIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aW1lUHJvcGVydHkuY3JlYXRlRmllbGRUaW1lKCcnLCBtb2NrVXBkYXRlLCBtb2NrTGluayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBmbGF0cGlja3Igb25DaGFuZ2UgZXZlbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3Qgc3B5ID0gamVzdC5zcHlPbih0aW1lUHJvcGVydHksICd1cGRhdGVGaWVsZCcpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHRpbWVQcm9wZXJ0eS5jcmVhdGVGaWVsZFRpbWUoJycsIG1vY2tVcGRhdGUsIG1vY2tMaW5rKSBhcyBhbnk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGVyIGxlIGNoYW5nZW1lbnQgZmxhdHBpY2tyXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYXRlID0gbmV3IERhdGUoJzIwMjQtMDEtMDFUMTU6NDU6MDAnKTtcclxuICAgICAgICAgICAgaWYgKGlucHV0Ll9mbGF0cGlja3JPbkNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgaW5wdXQuX2ZsYXRwaWNrck9uQ2hhbmdlKFttb2NrRGF0ZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJzE1OjQ1Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tVcGRhdGUsIGlucHV0LCBtb2NrTGluayk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGZsYXRwaWNrciBvbkNsb3NlIGV2ZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24odGltZVByb3BlcnR5LCAndXBkYXRlRmllbGQnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aW1lUHJvcGVydHkuY3JlYXRlRmllbGRUaW1lKCdpbnZhbGlkJywgbW9ja1VwZGF0ZSwgbW9ja0xpbmspIGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsZXIgbGEgZmVybWV0dXJlIGZsYXRwaWNrclxyXG4gICAgICAgICAgICBpZiAoaW5wdXQuX2ZsYXRwaWNrck9uQ2xvc2UpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGlucHV0Ll9mbGF0cGlja3JPbkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnJyk7IC8vIFZhbGV1ciBpbnZhbGlkZSBlZmZhY8OpZVxyXG4gICAgICAgICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrVXBkYXRlLCBpbnB1dCwgbW9ja0xpbmspO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbGxEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lUHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KCd0ZXN0VGltZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjb250YWluZXIgd2l0aCBsaW5rIGFuZCBpbnB1dCBmb3IgdmFsaWQgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRpbWVQcm9wZXJ0eS5maWxsRGlzcGxheSh7fSwgJzE0OjMwJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnRhZ05hbWUpLnRvQmUoJ0RJVicpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnZmllbGQtY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aW1lLWZpZWxkLWxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmspLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rPy5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICAvLyBMJ2lucHV0IGVzdCBpbml0aWFsaXPDqSBwYXIgZmxhdHBpY2tyLCBkb25jIG9uIHbDqXJpZmllIHF1J2lsIGV4aXN0ZSBtYWlzIHBhcyBuw6ljZXNzYWlyZW1lbnQgcXUnaWwgc29pdCBjYWNow6lcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBpbnB1dCBmb3IgaW52YWxpZCB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGltZVByb3BlcnR5LmZpbGxEaXNwbGF5KHt9LCAnaW52YWxpZCcsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGltZS1maWVsZC1saW5rJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dD8uc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbms/LnN0eWxlLmRpc3BsYXkpLnRvQmUoJ25vbmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGlucHV0IGZvciBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGltZVByb3BlcnR5LmZpbGxEaXNwbGF5KHt9LCAnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50aW1lLWZpZWxkLWxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0Py5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluaz8uc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZUZpZWxkJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lUHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KCd0ZXN0VGltZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBmaWVsZCB3aXRoIHZhbGlkIHZhbHVlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnMTQ6MzAnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCB0aW1lUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxNDozMCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnMTQ6MzAnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCB2YWx1ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJ2ludmFsaWQnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCB0aW1lUHJvcGVydHkudXBkYXRlRmllbGQobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvQmUoJ0F1Y3VuZSBoZXVyZSBzw6lsZWN0aW9ubsOpZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ21vZGlmeUZpZWxkJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lUHJvcGVydHkgPSBuZXcgVGltZVByb3BlcnR5KCd0ZXN0VGltZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNhbGwgbW9kaWZ5RmllbGQgd2l0aG91dCB0aHJvd2luZyBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRlc3QgcXVlIG1vZGlmeUZpZWxkIHBldXQgw6p0cmUgYXBwZWzDqSBzYW5zIGVycmV1clxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHsgY3VycmVudFRhcmdldDogbGluayB9IGFzIHVua25vd24gYXMgRXZlbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWw6lyaWZpZXIgcXVlIG1vZGlmeUZpZWxkIG5lIGxhbmNlIHBhcyBkJ2VycmV1clxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gdGltZVByb3BlcnR5Lm1vZGlmeUZpZWxkKGV2ZW50KSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBjb250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgLy8gUGFzIGRlIHBhcmVudFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7IGN1cnJlbnRUYXJnZXQ6IGxpbmsgfSBhcyB1bmtub3duIGFzIEV2ZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTmUgZGV2cmFpdCBwYXMgbGV2ZXIgZCdlcnJldXJcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHRpbWVQcm9wZXJ0eS5tb2RpZnlGaWVsZChldmVudCkpLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgaW5wdXQgaW4gY29udGFpbmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGluayk7IC8vIFBhcyBkJ2lucHV0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHsgY3VycmVudFRhcmdldDogbGluayB9IGFzIHVua25vd24gYXMgRXZlbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBOZSBkZXZyYWl0IHBhcyBsZXZlciBkJ2VycmV1clxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gdGltZVByb3BlcnR5Lm1vZGlmeUZpZWxkKGV2ZW50KSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiXSwidmVyc2lvbiI6M30=