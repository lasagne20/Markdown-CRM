{"version":3,"names":["cov_2izgr2tmzm","actualCoverage","s","Property_1","require","MultiSelectProperty","Property","constructor","name","vault","options","args","b","f","type","fillDisplay","value","update","field","createFieldContainer","fieldContainer","document","createElement","classList","add","header","textContent","appendChild","buttonContainer","createButtonGroup","getDefaultValue","index","default","getPersonalName","selectedValues","Set","forEach","option","button","has","onclick","delete","updateButtonState","container","buttons","querySelectorAll","remove","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiSelectProperty.ts"],"sourcesContent":["import { Property } from \"./Property\";\r\nimport { File } from \"../vault/File\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\nexport class MultiSelectProperty extends Property {\r\n    public options: {name : string, color : string}[];\r\n    public override type : string = \"multiSelect\";\r\n\r\n    constructor(name: string, vault : Vault, options: {name : string, color : string}[], args = {}) {\r\n        super(name, vault, args);\r\n        this.options = options;\r\n    }\r\n\r\n    override fillDisplay(vault: any, value : any, update: (value: string[]) => Promise<void>) {\r\n        this.vault = vault;\r\n        const field = this.createFieldContainer();\r\n        const fieldContainer = document.createElement(\"div\");\r\n        fieldContainer.classList.add(\"field-container-column\");\r\n\r\n        const header = document.createElement(\"div\");\r\n        header.classList.add(\"metadata-header\");\r\n        header.textContent = this.name\r\n        fieldContainer.appendChild(header);\r\n\r\n        const buttonContainer = this.createButtonGroup(value, update);\r\n        fieldContainer.appendChild(buttonContainer);\r\n        field.appendChild(fieldContainer);\r\n\r\n        return field;\r\n    }\r\n\r\n    override getDefaultValue(){\r\n        for (let index in this.default){\r\n            if (this.default[index] == \"personalName\"){\r\n                this.default[index] = this.vault.getPersonalName();\r\n            }\r\n        }\r\n        \r\n        return this.default;\r\n    }\r\n\r\n    // Crée le conteneur des boutons avec les options\r\n    createButtonGroup(value: string[], update: (value: string[]) => Promise<void>): HTMLDivElement {\r\n        const buttonContainer = document.createElement(\"div\");\r\n        buttonContainer.classList.add(\"multi-select-container\");\r\n\r\n        const selectedValues = new Set(value); \r\n\r\n        this.options.forEach(option => {\r\n            const button = document.createElement(\"button\");\r\n            button.classList.add(\"multi-select-button\");\r\n            button.textContent = option.name;\r\n\r\n            if (selectedValues.has(option.name)) {\r\n                button.classList.add(\"selected\");\r\n            }\r\n\r\n            button.onclick = async () => {\r\n                if (selectedValues.has(option.name)) {\r\n                    selectedValues.delete(option.name);\r\n                } else {\r\n                    selectedValues.add(option.name);\r\n                }\r\n\r\n                await update([...selectedValues]);\r\n                this.updateButtonState(buttonContainer, selectedValues);\r\n            };\r\n\r\n            buttonContainer.appendChild(button);\r\n        });\r\n\r\n        return buttonContainer;\r\n    }\r\n\r\n    // Met à jour l'affichage des boutons après sélection\r\n    updateButtonState(container: HTMLElement, selectedValues: Set<string>) {\r\n        const buttons = container.querySelectorAll(\".multi-select-button\");\r\n        buttons.forEach(button => {\r\n            if (selectedValues.has(button.textContent || \"\")) {\r\n                button.classList.add(\"selected\");\r\n            } else {\r\n                button.classList.remove(\"selected\");\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]}