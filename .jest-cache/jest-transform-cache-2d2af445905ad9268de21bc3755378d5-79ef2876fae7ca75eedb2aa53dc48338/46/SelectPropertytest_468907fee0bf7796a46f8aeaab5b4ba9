e5067605b745e9bbb0eaf59f91192644
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock App module
jest.mock('../src/vault/Utils', () => ({
    setIcon: jest.fn((element, iconName) => {
        element.setAttribute('data-icon', iconName);
    }),
    sendNotice: jest.fn(),
    Notice: jest.fn()
}));
// Mock MyVault
jest.mock('../src/vault/MyVault', () => ({
    MyVault: jest.fn()
}));
const Property_1 = require("../src/properties/Property");
const SelectProperty_1 = require("../src/properties/SelectProperty");
describe('SelectProperty', () => {
    let selectProperty;
    let mockVault;
    let mockFile;
    let options;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Mock vault
        mockVault = {
            app: {
                vault: { getFiles: jest.fn(() => []) }
            }
        };
        // Mock file
        mockFile = {
            getMetadata: jest.fn(() => ({ status: 'in-progress' })),
            getMetadataValue: jest.fn((key) => key === 'status' ? 'in-progress' : undefined),
            updateMetadata: jest.fn(),
            vault: mockVault
        };
        // Create test options
        options = [
            { name: 'todo', color: '#ffcccc' },
            { name: 'in-progress', color: '#ccffcc' },
            { name: 'done', color: '#ccccff' },
            { name: 'blocked', color: '#ffccff' }
        ];
        selectProperty = new SelectProperty_1.SelectProperty('status', options);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('constructor', () => {
        it('should create SelectProperty with correct type and options', () => {
            const prop = new SelectProperty_1.SelectProperty('test', options);
            expect(prop.name).toBe('test');
            expect(prop.type).toBe('select');
            expect(prop.options).toBe(options);
            expect(prop.options.length).toBe(4);
        });
        it('should inherit from Property', () => {
            expect(selectProperty).toBeInstanceOf(Property_1.Property);
            expect(selectProperty).toBeInstanceOf(SelectProperty_1.SelectProperty);
        });
        it('should accept custom arguments', () => {
            const args = { icon: 'custom-select', staticProperty: true };
            const prop = new SelectProperty_1.SelectProperty('custom', options, args);
            expect(prop.name).toBe('custom');
            expect(prop.static).toBe(true);
            expect(prop.icon).toBe('custom-select');
            expect(prop.options).toBe(options);
        });
        it('should handle empty options array', () => {
            const prop = new SelectProperty_1.SelectProperty('empty', []);
            expect(prop.options).toEqual([]);
            expect(prop.options.length).toBe(0);
        });
    });
    describe('fillDisplay', () => {
        it('should create complete display structure', () => {
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay(mockVault, 'in-progress', updateFn);
            expect(display).toBeTruthy();
            expect(display.classList.contains('metadata-field')).toBe(true);
            const fieldContainer = display.querySelector('.field-container-column');
            expect(fieldContainer).toBeTruthy();
            const selectElement = display.querySelector('select');
            expect(selectElement).toBeTruthy();
        });
        it('should create header when title is provided', () => {
            selectProperty.title = 'Project Status';
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay(mockVault, 'todo', updateFn);
            const header = display.querySelector('.metadata-header');
            expect(header).toBeTruthy();
            expect(header?.textContent).toBe('Project Status');
        });
        it('should not create header when title is not provided', () => {
            selectProperty.title = undefined;
            const updateFn = jest.fn();
            const display = selectProperty.fillDisplay(mockVault, 'todo', updateFn);
            const header = display.querySelector('.metadata-header');
            expect(header).toBeFalsy();
        });
        it('should set vault property', () => {
            const updateFn = jest.fn();
            selectProperty.fillDisplay(mockVault, 'done', updateFn);
            expect(selectProperty.vault).toBe(mockVault);
        });
    });
    describe('createSelectWidget', () => {
        it('should create select element with all options', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('in-progress', updateFn);
            expect(selectElement.tagName).toBe('SELECT');
            expect(selectElement.classList.contains('select-dropdown')).toBe(true);
            const optionElements = selectElement.querySelectorAll('option');
            expect(optionElements.length).toBe(4);
            optionElements.forEach((optionEl, index) => {
                expect(optionEl.value).toBe(options[index].name);
                expect(optionEl.textContent).toBe(options[index].name);
                // Browser converts hex colors to rgb format, so we check the style attribute directly
                expect(optionEl.style.backgroundColor).toBeTruthy();
                expect(optionEl.classList.contains('select-dropdown-option')).toBe(true);
            });
        });
        it('should set selected option correctly', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('done', updateFn);
            const selectedOption = Array.from(selectElement.options).find(opt => opt.selected);
            expect(selectedOption?.value).toBe('done');
            expect(selectedOption?.textContent).toBe('done');
        });
        it('should apply background color of selected option', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('blocked', updateFn);
            // Check that a background color was set (browser converts hex to rgb)
            expect(selectElement.style.backgroundColor).toBeTruthy();
        });
        it('should handle no initial value by selecting first option', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('', updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // First option color set
            expect(updateFn).toHaveBeenCalledWith('todo'); // First option name
        });
        it('should handle empty value by selecting first option', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget(null, updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // First option color set
            expect(updateFn).toHaveBeenCalledWith('todo'); // First option name
        });
        it('should handle empty options array gracefully', () => {
            const emptyProperty = new SelectProperty_1.SelectProperty('empty', []);
            const updateFn = jest.fn();
            const selectElement = emptyProperty.createSelectWidget('any-value', updateFn);
            expect(selectElement.options.length).toBe(0);
            expect(selectElement.style.backgroundColor).toBe(''); // No color set
            expect(updateFn).not.toHaveBeenCalled();
        });
        it('should disable select when static is true', () => {
            selectProperty.static = true;
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            expect(selectElement.disabled).toBe(true);
        });
        it('should not disable select when static is false', () => {
            selectProperty.static = false;
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            expect(selectElement.disabled).toBe(false);
        });
    });
    describe('change event handling', () => {
        it('should handle option change events', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            // Change to 'done' option
            selectElement.value = 'done';
            const changeEvent = new Event('change');
            selectElement.dispatchEvent(changeEvent);
            // Wait for async update
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(updateFn).toHaveBeenCalledWith('done');
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Color should be set
        });
        it('should update background color on change', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            const initialColor = selectElement.style.backgroundColor;
            expect(initialColor).toBeTruthy(); // todo color set
            // Change to 'in-progress'
            selectElement.value = 'in-progress';
            selectElement.dispatchEvent(new Event('change'));
            // Wait for event processing
            await new Promise(resolve => setTimeout(resolve, 0));
            const newColor = selectElement.style.backgroundColor;
            expect(newColor).toBeTruthy(); // in-progress color set
            expect(newColor).not.toBe(initialColor); // Color should change
        });
        it('should handle change to non-existent option gracefully', async () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('todo', updateFn);
            // Since select elements only allow values that exist as options,
            // setting a non-existent value will actually result in an empty string
            selectElement.value = 'non-existent'; // This gets normalized to ''
            selectElement.dispatchEvent(new Event('change'));
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(updateFn).toHaveBeenCalledWith(''); // Empty string for invalid value
            // Background color should remain unchanged since option not found
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Original color still set
        });
    });
    describe('integration with base Property class', () => {
        it('should work with getDisplay method', () => {
            selectProperty.read = jest.fn(() => 'in-progress');
            const display = selectProperty.getDisplay(mockFile);
            expect(display).toBeTruthy();
            expect(display.classList.contains('metadata-field')).toBe(true);
        });
        it('should inherit all base functionality', () => {
            expect(selectProperty.name).toBe('status');
            expect(selectProperty.type).toBe('select');
            expect(typeof selectProperty.read).toBe('function');
            expect(typeof selectProperty.createFieldContainer).toBe('function');
        });
        it('should use correct field container', () => {
            const container = selectProperty.createFieldContainer();
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('metadata-field')).toBe(true);
        });
    });
    describe('option management', () => {
        it('should handle options with different colors', () => {
            const colorfulOptions = [
                { name: 'red', color: 'red' },
                { name: 'green', color: 'green' },
                { name: 'blue', color: 'blue' },
                { name: 'yellow', color: '#ffff00' },
                { name: 'transparent', color: 'transparent' }
            ];
            const colorProperty = new SelectProperty_1.SelectProperty('colors', colorfulOptions);
            const updateFn = jest.fn();
            const selectElement = colorProperty.createSelectWidget('blue', updateFn);
            expect(selectElement.style.backgroundColor).toBeTruthy(); // Blue color set
            const options = selectElement.querySelectorAll('option');
            expect(options[0].style.backgroundColor).toBeTruthy(); // Red set
            expect(options[1].style.backgroundColor).toBeTruthy(); // Green set
            expect(options[2].style.backgroundColor).toBeTruthy(); // Blue set
            expect(options[3].style.backgroundColor).toBeTruthy(); // Yellow set
            expect(options[4].style.backgroundColor).toBeTruthy(); // Transparent set
        });
        it('should handle options with special characters in names', () => {
            const specialOptions = [
                { name: 'option-with-dashes', color: 'red' },
                { name: 'option_with_underscores', color: 'green' },
                { name: 'option with spaces', color: 'blue' },
                { name: 'option.with.dots', color: 'yellow' },
                { name: 'option/with/slashes', color: 'purple' }
            ];
            const specialProperty = new SelectProperty_1.SelectProperty('special', specialOptions);
            const updateFn = jest.fn();
            const selectElement = specialProperty.createSelectWidget('option with spaces', updateFn);
            const selectedOption = Array.from(selectElement.options).find(opt => opt.selected);
            expect(selectedOption?.value).toBe('option with spaces');
            expect(selectedOption?.textContent).toBe('option with spaces');
        });
        it('should handle long option names', () => {
            const longOptions = [
                { name: 'Very long option name that might cause display issues', color: 'red' },
                { name: 'Another extremely long option name for testing purposes', color: 'green' }
            ];
            const longProperty = new SelectProperty_1.SelectProperty('long', longOptions);
            const updateFn = jest.fn();
            const selectElement = longProperty.createSelectWidget(longOptions[0].name, updateFn);
            const options = selectElement.querySelectorAll('option');
            expect(options[0].textContent).toBe(longOptions[0].name);
            expect(options[1].textContent).toBe(longOptions[1].name);
        });
    });
    describe('edge cases and error handling', () => {
        it('should handle undefined colors', () => {
            const undefinedColorOptions = [
                { name: 'no-color', color: undefined },
                { name: 'empty-color', color: '' },
                { name: 'null-color', color: null }
            ];
            const undefinedProperty = new SelectProperty_1.SelectProperty('undefined', undefinedColorOptions);
            const updateFn = jest.fn();
            const selectElement = undefinedProperty.createSelectWidget('no-color', updateFn);
            // Should not crash and create options anyway
            expect(selectElement.options.length).toBe(3);
        });
        it('should handle duplicate option names', () => {
            const duplicateOptions = [
                { name: 'duplicate', color: 'red' },
                { name: 'unique', color: 'green' },
                { name: 'duplicate', color: 'blue' }
            ];
            const duplicateProperty = new SelectProperty_1.SelectProperty('duplicate', duplicateOptions);
            const updateFn = jest.fn();
            const selectElement = duplicateProperty.createSelectWidget('duplicate', updateFn);
            // Should create all options, even duplicates
            expect(selectElement.options.length).toBe(3);
            // Last duplicate with same name should be selected (browser behavior)
            const selectedOptions = Array.from(selectElement.options).filter(opt => opt.selected);
            expect(selectedOptions.length).toBe(1);
            expect(selectedOptions[0].style.backgroundColor).toBeTruthy(); // Color should be set (last duplicate)
        });
        it('should handle case sensitivity in option selection', () => {
            const updateFn = jest.fn();
            const selectElement = selectProperty.createSelectWidget('TODO', updateFn); // Wrong case
            // Value 'TODO' doesn't match any option (case sensitive), so no styling applied
            expect(selectElement.style.backgroundColor).toBe(''); // No color set for non-matching value
            expect(updateFn).not.toHaveBeenCalled(); // No update called for non-matching value
            // But the select element should still contain all options
            expect(selectElement.options.length).toBe(4);
        });
        it('should handle null/undefined values in widget creation', () => {
            const updateFn = jest.fn();
            // Should not crash with null/undefined
            expect(() => {
                selectProperty.createSelectWidget(null, updateFn);
            }).not.toThrow();
            expect(() => {
                selectProperty.createSelectWidget(undefined, updateFn);
            }).not.toThrow();
        });
    });
    describe('complete workflow', () => {
        it('should handle complete selection workflow', async () => {
            const updateFn = jest.fn();
            // Create display
            const display = selectProperty.fillDisplay(mockVault, 'todo', updateFn);
            const selectElement = display.querySelector('select');
            // Verify initial state
            expect(selectElement.value).toBe('todo');
            const initialColor = selectElement.style.backgroundColor;
            expect(initialColor).toBeTruthy();
            // Change selection
            selectElement.value = 'done';
            selectElement.dispatchEvent(new Event('change'));
            await new Promise(resolve => setTimeout(resolve, 0));
            // Verify update
            expect(updateFn).toHaveBeenCalledWith('done');
            const newColor = selectElement.style.backgroundColor;
            expect(newColor).toBeTruthy();
            expect(newColor).not.toBe(initialColor);
        });
        it('should work with property read/write cycle', () => {
            // Mock the read method
            selectProperty.read = jest.fn(() => 'blocked');
            const display = selectProperty.getDisplay(mockFile);
            const selectElement = display.querySelector('select');
            expect(selectElement).toBeTruthy();
            // The value should be set based on what read returns
            expect(selectElement.style.backgroundColor).toBeTruthy(); // blocked color set
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFNlbGVjdFByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUtILGtCQUFrQjtBQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFvQixFQUFFLFFBQWdCLEVBQUUsRUFBRTtRQUN4RCxPQUFPLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUM7SUFDRixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNyQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNwQixDQUFDLENBQUMsQ0FBQztBQUVKLGVBQWU7QUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDckMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDckIsQ0FBQyxDQUFDLENBQUM7QUFmSix5REFBc0Q7QUFDdEQscUVBQWtFO0FBZ0JsRSxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksY0FBOEIsQ0FBQztJQUNuQyxJQUFJLFNBQWMsQ0FBQztJQUNuQixJQUFJLFFBQWEsQ0FBQztJQUNsQixJQUFJLE9BQXdDLENBQUM7SUFFN0MsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLFlBQVk7UUFDWixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFN0IsYUFBYTtRQUNiLFNBQVMsR0FBRztZQUNSLEdBQUcsRUFBRTtnQkFDRCxLQUFLLEVBQUUs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QUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzlDLE1BQU0sUUFBUSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDO1lBQ3JELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUM5QixNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM1QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsdUJBQXVCO1lBQ3ZCLGNBQWMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUUvQyxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BELE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFzQixDQUFDO1lBRTNFLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNuQyxxREFBcUQ7WUFDckQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxvQkFBb0I7UUFDbEYsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxTZWxlY3RQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSAnLi4vc3JjL3Byb3BlcnRpZXMvUHJvcGVydHknO1xyXG5pbXBvcnQgeyBTZWxlY3RQcm9wZXJ0eSB9IGZyb20gJy4uL3NyYy9wcm9wZXJ0aWVzL1NlbGVjdFByb3BlcnR5JztcclxuXHJcbi8vIE1vY2sgQXBwIG1vZHVsZVxyXG5qZXN0Lm1vY2soJy4uL3NyYy92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKChlbGVtZW50OiBIVE1MRWxlbWVudCwgaWNvbk5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCBpY29uTmFtZSk7XHJcbiAgICB9KSxcclxuICAgIHNlbmROb3RpY2U6IGplc3QuZm4oKSxcclxuICAgIE5vdGljZTogamVzdC5mbigpXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgTXlWYXVsdFxyXG5qZXN0Lm1vY2soJy4uL3NyYy92YXVsdC9NeVZhdWx0JywgKCkgPT4gKHtcclxuICAgIE15VmF1bHQ6IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG5kZXNjcmliZSgnU2VsZWN0UHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgc2VsZWN0UHJvcGVydHk6IFNlbGVjdFByb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tWYXVsdDogYW55O1xyXG4gICAgbGV0IG1vY2tGaWxlOiBhbnk7XHJcbiAgICBsZXQgb3B0aW9uczoge25hbWU6IHN0cmluZywgY29sb3I6IHN0cmluZ31bXTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAvLyBSZXNldCBET01cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1vY2sgdmF1bHRcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIGFwcDoge1xyXG4gICAgICAgICAgICAgICAgdmF1bHQ6IHsgZ2V0RmlsZXM6IGplc3QuZm4oKCkgPT4gW10pIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE1vY2sgZmlsZVxyXG4gICAgICAgIG1vY2tGaWxlID0ge1xyXG4gICAgICAgICAgICBnZXRNZXRhZGF0YTogamVzdC5mbigoKSA9PiAoeyBzdGF0dXM6ICdpbi1wcm9ncmVzcycgfSkpLFxyXG4gICAgICAgICAgICBnZXRNZXRhZGF0YVZhbHVlOiBqZXN0LmZuKChrZXk6IHN0cmluZykgPT4ga2V5ID09PSAnc3RhdHVzJyA/ICdpbi1wcm9ncmVzcycgOiB1bmRlZmluZWQpLFxyXG4gICAgICAgICAgICB1cGRhdGVNZXRhZGF0YTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICB2YXVsdDogbW9ja1ZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHRlc3Qgb3B0aW9uc1xyXG4gICAgICAgIG9wdGlvbnMgPSBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3RvZG8nLCBjb2xvcjogJyNmZmNjY2MnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ2luLXByb2dyZXNzJywgY29sb3I6ICcjY2NmZmNjJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdkb25lJywgY29sb3I6ICcjY2NjY2ZmJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdibG9ja2VkJywgY29sb3I6ICcjZmZjY2ZmJyB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgc2VsZWN0UHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ3N0YXR1cycsIG9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBTZWxlY3RQcm9wZXJ0eSB3aXRoIGNvcnJlY3QgdHlwZSBhbmQgb3B0aW9ucycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgndGVzdCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHByb3AubmFtZSkudG9CZSgndGVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC50eXBlKS50b0JlKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3Aub3B0aW9ucykudG9CZShvcHRpb25zKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3Aub3B0aW9ucy5sZW5ndGgpLnRvQmUoNCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5oZXJpdCBmcm9tIFByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0UHJvcGVydHkpLnRvQmVJbnN0YW5jZU9mKFByb3BlcnR5KTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdFByb3BlcnR5KS50b0JlSW5zdGFuY2VPZihTZWxlY3RQcm9wZXJ0eSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYWNjZXB0IGN1c3RvbSBhcmd1bWVudHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB7IGljb246ICdjdXN0b20tc2VsZWN0Jywgc3RhdGljUHJvcGVydHk6IHRydWUgfTtcclxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgnY3VzdG9tJywgb3B0aW9ucywgYXJncyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5uYW1lKS50b0JlKCdjdXN0b20nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3Auc3RhdGljKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcC5pY29uKS50b0JlKCdjdXN0b20tc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLm9wdGlvbnMpLnRvQmUob3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IG9wdGlvbnMgYXJyYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ2VtcHR5JywgW10pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHByb3Aub3B0aW9ucykudG9FcXVhbChbXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wLm9wdGlvbnMubGVuZ3RoKS50b0JlKDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbGxEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvbXBsZXRlIGRpc3BsYXkgc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHNlbGVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgJ2luLXByb2dyZXNzJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGRpc3BsYXkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGRpc3BsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1maWVsZCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZmllbGRDb250YWluZXIgPSBkaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1jb250YWluZXItY29sdW1uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWVsZENvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRpc3BsYXkucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGhlYWRlciB3aGVuIHRpdGxlIGlzIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS50aXRsZSA9ICdQcm9qZWN0IFN0YXR1cyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gc2VsZWN0UHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCAndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRpc3BsYXkucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXI/LnRleHRDb250ZW50KS50b0JlKCdQcm9qZWN0IFN0YXR1cycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBjcmVhdGUgaGVhZGVyIHdoZW4gdGl0bGUgaXMgbm90IHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS50aXRsZSA9IHVuZGVmaW5lZCBhcyBhbnk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gc2VsZWN0UHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCAndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRpc3BsYXkucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVyKS50b0JlRmFsc3koKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgdmF1bHQgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsICdkb25lJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdFByb3BlcnR5LnZhdWx0KS50b0JlKG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlU2VsZWN0V2lkZ2V0JywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHNlbGVjdCBlbGVtZW50IHdpdGggYWxsIG9wdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdpbi1wcm9ncmVzcycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnRhZ05hbWUpLnRvQmUoJ1NFTEVDVCcpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdC1kcm9wZG93bicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudHMgPSBzZWxlY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBleHBlY3Qob3B0aW9uRWxlbWVudHMubGVuZ3RoKS50b0JlKDQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb3B0aW9uRWxlbWVudHMuZm9yRWFjaCgob3B0aW9uRWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3B0aW9uRWwudmFsdWUpLnRvQmUob3B0aW9uc1tpbmRleF0ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3B0aW9uRWwudGV4dENvbnRlbnQpLnRvQmUob3B0aW9uc1tpbmRleF0ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBCcm93c2VyIGNvbnZlcnRzIGhleCBjb2xvcnMgdG8gcmdiIGZvcm1hdCwgc28gd2UgY2hlY2sgdGhlIHN0eWxlIGF0dHJpYnV0ZSBkaXJlY3RseVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG9wdGlvbkVsLnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG9wdGlvbkVsLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LWRyb3Bkb3duLW9wdGlvbicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgc2VsZWN0ZWQgb3B0aW9uIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ2RvbmUnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IEFycmF5LmZyb20oc2VsZWN0RWxlbWVudC5vcHRpb25zKS5maW5kKG9wdCA9PiBvcHQuc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0ZWRPcHRpb24/LnZhbHVlKS50b0JlKCdkb25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RlZE9wdGlvbj8udGV4dENvbnRlbnQpLnRvQmUoJ2RvbmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBhcHBseSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHNlbGVjdGVkIG9wdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ2Jsb2NrZWQnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IGEgYmFja2dyb3VuZCBjb2xvciB3YXMgc2V0IChicm93c2VyIGNvbnZlcnRzIGhleCB0byByZ2IpXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBubyBpbml0aWFsIHZhbHVlIGJ5IHNlbGVjdGluZyBmaXJzdCBvcHRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCcnLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gRmlyc3Qgb3B0aW9uIGNvbG9yIHNldFxyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0b2RvJyk7IC8vIEZpcnN0IG9wdGlvbiBuYW1lXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlIGJ5IHNlbGVjdGluZyBmaXJzdCBvcHRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KG51bGwgYXMgYW55LCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gRmlyc3Qgb3B0aW9uIGNvbG9yIHNldFxyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0b2RvJyk7IC8vIEZpcnN0IG9wdGlvbiBuYW1lXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IG9wdGlvbnMgYXJyYXkgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZW1wdHlQcm9wZXJ0eSA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgnZW1wdHknLCBbXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZW1wdHlQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ2FueS12YWx1ZScsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50Lm9wdGlvbnMubGVuZ3RoKS50b0JlKDApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmUoJycpOyAvLyBObyBjb2xvciBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZuKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGRpc2FibGUgc2VsZWN0IHdoZW4gc3RhdGljIGlzIHRydWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdFByb3BlcnR5LnN0YXRpYyA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCd0b2RvJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuZGlzYWJsZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbm90IGRpc2FibGUgc2VsZWN0IHdoZW4gc3RhdGljIGlzIGZhbHNlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5zdGF0aWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5kaXNhYmxlZCkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY2hhbmdlIGV2ZW50IGhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG9wdGlvbiBjaGFuZ2UgZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSB0byAnZG9uZScgb3B0aW9uXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsdWUgPSAnZG9uZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBhc3luYyB1cGRhdGVcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2RvbmUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIENvbG9yIHNob3VsZCBiZSBzZXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgYmFja2dyb3VuZCBjb2xvciBvbiBjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCd0b2RvJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvbG9yID0gc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbml0aWFsQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gdG9kbyBjb2xvciBzZXRcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSB0byAnaW4tcHJvZ3Jlc3MnXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsdWUgPSAnaW4tcHJvZ3Jlc3MnO1xyXG4gICAgICAgICAgICBzZWxlY3RFbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBldmVudCBwcm9jZXNzaW5nXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBuZXdDb2xvciA9IHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBleHBlY3QobmV3Q29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gaW4tcHJvZ3Jlc3MgY29sb3Igc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdChuZXdDb2xvcikubm90LnRvQmUoaW5pdGlhbENvbG9yKTsgLy8gQ29sb3Igc2hvdWxkIGNoYW5nZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjaGFuZ2UgdG8gbm9uLWV4aXN0ZW50IG9wdGlvbiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgndG9kbycsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHNlbGVjdCBlbGVtZW50cyBvbmx5IGFsbG93IHZhbHVlcyB0aGF0IGV4aXN0IGFzIG9wdGlvbnMsXHJcbiAgICAgICAgICAgIC8vIHNldHRpbmcgYSBub24tZXhpc3RlbnQgdmFsdWUgd2lsbCBhY3R1YWxseSByZXN1bHQgaW4gYW4gZW1wdHkgc3RyaW5nXHJcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQudmFsdWUgPSAnbm9uLWV4aXN0ZW50JzsgLy8gVGhpcyBnZXRzIG5vcm1hbGl6ZWQgdG8gJydcclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJycpOyAvLyBFbXB0eSBzdHJpbmcgZm9yIGludmFsaWQgdmFsdWVcclxuICAgICAgICAgICAgLy8gQmFja2dyb3VuZCBjb2xvciBzaG91bGQgcmVtYWluIHVuY2hhbmdlZCBzaW5jZSBvcHRpb24gbm90IGZvdW5kXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBPcmlnaW5hbCBjb2xvciBzdGlsbCBzZXRcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdpbnRlZ3JhdGlvbiB3aXRoIGJhc2UgUHJvcGVydHkgY2xhc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggZ2V0RGlzcGxheSBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdFByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCgpID0+ICdpbi1wcm9ncmVzcycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHNlbGVjdFByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGRpc3BsYXkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGRpc3BsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1maWVsZCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGluaGVyaXQgYWxsIGJhc2UgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdFByb3BlcnR5Lm5hbWUpLnRvQmUoJ3N0YXR1cycpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0UHJvcGVydHkudHlwZSkudG9CZSgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0eXBlb2Ygc2VsZWN0UHJvcGVydHkucmVhZCkudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lcikudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1c2UgY29ycmVjdCBmaWVsZCBjb250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHNlbGVjdFByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnRhZ05hbWUpLnRvQmUoJ0RJVicpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdvcHRpb24gbWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcHRpb25zIHdpdGggZGlmZmVyZW50IGNvbG9ycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sb3JmdWxPcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAncmVkJywgY29sb3I6ICdyZWQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdncmVlbicsIGNvbG9yOiAnZ3JlZW4nIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdibHVlJywgY29sb3I6ICdibHVlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAneWVsbG93JywgY29sb3I6ICcjZmZmZjAwJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndHJhbnNwYXJlbnQnLCBjb2xvcjogJ3RyYW5zcGFyZW50JyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb2xvclByb3BlcnR5ID0gbmV3IFNlbGVjdFByb3BlcnR5KCdjb2xvcnMnLCBjb2xvcmZ1bE9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGNvbG9yUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCdibHVlJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIEJsdWUgY29sb3Igc2V0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gc2VsZWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFJlZCBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMV0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIEdyZWVuIHNldFxyXG4gICAgICAgICAgICBleHBlY3Qob3B0aW9uc1syXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gQmx1ZSBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbM10uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFllbGxvdyBzZXRcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbNF0uc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0JlVHJ1dGh5KCk7IC8vIFRyYW5zcGFyZW50IHNldFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcHRpb25zIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzIGluIG5hbWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ29wdGlvbi13aXRoLWRhc2hlcycsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uX3dpdGhfdW5kZXJzY29yZXMnLCBjb2xvcjogJ2dyZWVuJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uIHdpdGggc3BhY2VzJywgY29sb3I6ICdibHVlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uLndpdGguZG90cycsIGNvbG9yOiAneWVsbG93JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnb3B0aW9uL3dpdGgvc2xhc2hlcycsIGNvbG9yOiAncHVycGxlJyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsUHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ3NwZWNpYWwnLCBzcGVjaWFsT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gc3BlY2lhbFByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgnb3B0aW9uIHdpdGggc3BhY2VzJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBBcnJheS5mcm9tKHNlbGVjdEVsZW1lbnQub3B0aW9ucykuZmluZChvcHQgPT4gb3B0LnNlbGVjdGVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdGVkT3B0aW9uPy52YWx1ZSkudG9CZSgnb3B0aW9uIHdpdGggc3BhY2VzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RlZE9wdGlvbj8udGV4dENvbnRlbnQpLnRvQmUoJ29wdGlvbiB3aXRoIHNwYWNlcycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb25nIG9wdGlvbiBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG9uZ09wdGlvbnMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdWZXJ5IGxvbmcgb3B0aW9uIG5hbWUgdGhhdCBtaWdodCBjYXVzZSBkaXNwbGF5IGlzc3VlcycsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQW5vdGhlciBleHRyZW1lbHkgbG9uZyBvcHRpb24gbmFtZSBmb3IgdGVzdGluZyBwdXJwb3NlcycsIGNvbG9yOiAnZ3JlZW4nIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGxvbmdQcm9wZXJ0eSA9IG5ldyBTZWxlY3RQcm9wZXJ0eSgnbG9uZycsIGxvbmdPcHRpb25zKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBsb25nUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KGxvbmdPcHRpb25zWzBdLm5hbWUsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzZWxlY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBleHBlY3Qob3B0aW9uc1swXS50ZXh0Q29udGVudCkudG9CZShsb25nT3B0aW9uc1swXS5uYW1lKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9wdGlvbnNbMV0udGV4dENvbnRlbnQpLnRvQmUobG9uZ09wdGlvbnNbMV0ubmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZWRnZSBjYXNlcyBhbmQgZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIGNvbG9ycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdW5kZWZpbmVkQ29sb3JPcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnbm8tY29sb3InLCBjb2xvcjogdW5kZWZpbmVkIGFzIGFueSB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnZW1wdHktY29sb3InLCBjb2xvcjogJycgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ251bGwtY29sb3InLCBjb2xvcjogbnVsbCBhcyBhbnkgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdW5kZWZpbmVkUHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ3VuZGVmaW5lZCcsIHVuZGVmaW5lZENvbG9yT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gdW5kZWZpbmVkUHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KCduby1jb2xvcicsIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBub3QgY3Jhc2ggYW5kIGNyZWF0ZSBvcHRpb25zIGFueXdheVxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCkudG9CZSgzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZHVwbGljYXRlIG9wdGlvbiBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2R1cGxpY2F0ZScsIGNvbG9yOiAncmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndW5pcXVlJywgY29sb3I6ICdncmVlbicgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ2R1cGxpY2F0ZScsIGNvbG9yOiAnYmx1ZScgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlUHJvcGVydHkgPSBuZXcgU2VsZWN0UHJvcGVydHkoJ2R1cGxpY2F0ZScsIGR1cGxpY2F0ZU9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGR1cGxpY2F0ZVByb3BlcnR5LmNyZWF0ZVNlbGVjdFdpZGdldCgnZHVwbGljYXRlJywgdXBkYXRlRm4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2hvdWxkIGNyZWF0ZSBhbGwgb3B0aW9ucywgZXZlbiBkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50Lm9wdGlvbnMubGVuZ3RoKS50b0JlKDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTGFzdCBkdXBsaWNhdGUgd2l0aCBzYW1lIG5hbWUgc2hvdWxkIGJlIHNlbGVjdGVkIChicm93c2VyIGJlaGF2aW9yKVxyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBBcnJheS5mcm9tKHNlbGVjdEVsZW1lbnQub3B0aW9ucykuZmlsdGVyKG9wdCA9PiBvcHQuc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCkudG9CZSgxKTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdGVkT3B0aW9uc1swXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLnRvQmVUcnV0aHkoKTsgLy8gQ29sb3Igc2hvdWxkIGJlIHNldCAobGFzdCBkdXBsaWNhdGUpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNhc2Ugc2Vuc2l0aXZpdHkgaW4gb3B0aW9uIHNlbGVjdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRm4gPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBzZWxlY3RQcm9wZXJ0eS5jcmVhdGVTZWxlY3RXaWRnZXQoJ1RPRE8nLCB1cGRhdGVGbik7IC8vIFdyb25nIGNhc2VcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZhbHVlICdUT0RPJyBkb2Vzbid0IG1hdGNoIGFueSBvcHRpb24gKGNhc2Ugc2Vuc2l0aXZlKSwgc28gbm8gc3R5bGluZyBhcHBsaWVkXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZSgnJyk7IC8vIE5vIGNvbG9yIHNldCBmb3Igbm9uLW1hdGNoaW5nIHZhbHVlXHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVGbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTsgLy8gTm8gdXBkYXRlIGNhbGxlZCBmb3Igbm9uLW1hdGNoaW5nIHZhbHVlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBCdXQgdGhlIHNlbGVjdCBlbGVtZW50IHNob3VsZCBzdGlsbCBjb250YWluIGFsbCBvcHRpb25zXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50Lm9wdGlvbnMubGVuZ3RoKS50b0JlKDQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsL3VuZGVmaW5lZCB2YWx1ZXMgaW4gd2lkZ2V0IGNyZWF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGbiA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBub3QgY3Jhc2ggd2l0aCBudWxsL3VuZGVmaW5lZFxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KG51bGwgYXMgYW55LCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0UHJvcGVydHkuY3JlYXRlU2VsZWN0V2lkZ2V0KHVuZGVmaW5lZCBhcyBhbnksIHVwZGF0ZUZuKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb21wbGV0ZSB3b3JrZmxvdycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBzZWxlY3Rpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZuID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRpc3BsYXlcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHNlbGVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgJ3RvZG8nLCB1cGRhdGVGbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmVyaWZ5IGluaXRpYWwgc3RhdGVcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdEVsZW1lbnQudmFsdWUpLnRvQmUoJ3RvZG8nKTtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvbG9yID0gc2VsZWN0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbml0aWFsQ29sb3IpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC52YWx1ZSA9ICdkb25lJztcclxuICAgICAgICAgICAgc2VsZWN0RWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSB1cGRhdGVcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZUZuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZG9uZScpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDb2xvciA9IHNlbGVjdEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBleHBlY3QobmV3Q29sb3IpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG5ld0NvbG9yKS5ub3QudG9CZShpbml0aWFsQ29sb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBwcm9wZXJ0eSByZWFkL3dyaXRlIGN5Y2xlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSByZWFkIG1ldGhvZFxyXG4gICAgICAgICAgICBzZWxlY3RQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigoKSA9PiAnYmxvY2tlZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHNlbGVjdFByb3BlcnR5LmdldERpc3BsYXkobW9ja0ZpbGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZGlzcGxheS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIC8vIFRoZSB2YWx1ZSBzaG91bGQgYmUgc2V0IGJhc2VkIG9uIHdoYXQgcmVhZCByZXR1cm5zXHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcikudG9CZVRydXRoeSgpOyAvLyBibG9ja2VkIGNvbG9yIHNldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=