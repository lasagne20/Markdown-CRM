ec1f6db6bf0826f403caeef00c848490
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock flatpickr
jest.mock('flatpickr', () => {
    const mockFlatpickr = jest.fn();
    return mockFlatpickr;
});
jest.mock('flatpickr/dist/l10n/fr.js', () => ({}));
// Mock setIcon
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn()
}));
const DateProperty_1 = require("../../src/properties/DateProperty");
const RangeDateProperty_1 = require("../../src/properties/RangeDateProperty");
// Get the mocked flatpickr function
const flatpickr = jest.requireMock('flatpickr');
describe('RangeDateProperty', () => {
    let rangeDateProperty;
    let mockUpdate;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Reset all mocks
        jest.clearAllMocks();
        mockUpdate = jest.fn().mockResolvedValue(undefined);
        // Reset flatpickr mock
        flatpickr.mockImplementation((element, options) => {
            // Store options on element for testing
            element._flatpickrOptions = options;
            return {
                destroy: jest.fn(),
                clear: jest.fn(),
                setDate: jest.fn()
            };
        });
    });
    describe('Constructor', () => {
        test('should create RangeDateProperty with correct type', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.type).toBe('dateRange');
        });
        test('should inherit from DateProperty', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
        });
        test('should handle custom arguments', () => {
            const args = { icon: 'calendar', defaultValue: '2023-01-01 to 2023-01-31' };
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, args);
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.icon).toBe('calendar');
        });
    });
    describe('validate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should validate single date format', () => {
            const result = rangeDateProperty.validate('2023-01-15');
            expect(result).toBe('2023-01-15');
        });
        test('should validate date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 to 2023-01-31');
            expect(result).toBe('2023-01-15 to 2023-01-31');
        });
        test('should reject invalid date format', () => {
            const result = rangeDateProperty.validate('2023/01/15');
            expect(result).toBe('');
        });
        test('should reject invalid date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 - 2023-01-31');
            expect(result).toBe('');
        });
        test('should reject malformed dates', () => {
            expect(rangeDateProperty.validate('invalid-date')).toBe('');
            // Note: La validation actuelle est basée sur regex, pas sur la validité de la date
            // Elle accepte donc des dates comme 2023-13-45 si elles suivent le format YYYY-MM-DD
            expect(rangeDateProperty.validate('15-01-2023')).toBe('');
        });
        test('should handle empty value', () => {
            expect(rangeDateProperty.validate('')).toBe('');
            expect(rangeDateProperty.validate(' ')).toBe('');
        });
    });
    describe('formatDateRangeForDisplay', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should format single date for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26');
            expect(result).toMatch(/dimanche 26 février 2023/);
        });
        test('should format date range for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26 to 2023-02-28');
            expect(result).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle invalid date gracefully', () => {
            // This might throw or return a default - let's test the behavior
            expect(() => {
                rangeDateProperty.formatDateRangeForDisplay('invalid-date');
            }).not.toThrow();
        });
    });
    describe('createFieldLink', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should create link with formatted date display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            expect(link.tagName).toBe('DIV');
            expect(link.classList.contains('date-field-link')).toBe(true);
            expect(link.classList.contains('field-link')).toBe(true);
            expect(link.style.cursor).toBe('pointer');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should create link with range display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should show default text for empty value', () => {
            const link = rangeDateProperty.createFieldLink('');
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should show default text for null value', () => {
            const link = rangeDateProperty.createFieldLink(null);
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should have click event listener', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            // Mock the modifyField method
            rangeDateProperty.modifyField = jest.fn();
            // Simulate click
            link.click();
            expect(rangeDateProperty.modifyField).toHaveBeenCalled();
        });
    });
    describe('createFieldDate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should create input with correct attributes', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(input.tagName).toBe('INPUT');
            expect(input.type).toBe('text');
            expect(input.value).toBe('2023-02-26');
            expect(input.classList.contains('field-input')).toBe(true);
        });
        test('should initialize flatpickr with correct options', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                dateFormat: 'Y-m-d',
                defaultDate: '2023-02-26',
                locale: 'fr',
                mode: 'range'
            }));
        });
        test('should handle empty value', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            expect(input.value).toBe('');
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                defaultDate: ''
            }));
        });
        test('should configure onChange callback for single date selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting same start and end date
            const sameDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([sameDate, sameDate]);
            expect(input.value).toBe('2023-02-26');
        });
        test('should configure onChange callback for date range selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting date range
            const startDate = new Date('2023-02-26');
            const endDate = new Date('2023-02-28');
            await flatpickrOptions.onChange([startDate, endDate]);
            expect(input.value).toBe('2023-02-26 to 2023-02-28');
        });
        test('should handle onChange with incomplete selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting only one date
            const startDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([startDate]);
            expect(rangeDateProperty.updateField).not.toHaveBeenCalled();
        });
        test('should configure onClose callback', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            await flatpickrOptions.onClose();
            expect(rangeDateProperty.updateField).toHaveBeenCalledWith(mockUpdate, input, link);
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should create container with correct structure', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('field-container')).toBe(true);
            expect(container.classList.contains('metadata-field')).toBe(true);
            expect(container.children.length).toBe(2); // link and input
        });
        test('should show link and hide input for valid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('block');
            expect(input.style.display).toBe('none');
        });
        test('should hide link and show input for invalid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, 'invalid-date');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
        test('should hide link and show input for empty value', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
    });
    describe('updateField', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
        });
        test('should update with valid date and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should update with valid date range and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26 to 2023-02-28';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should update with invalid date without changing display', async () => {
            const input = document.createElement('input');
            input.value = 'invalid-date';
            const link = document.createElement('div');
            // Set initial display states
            input.style.display = 'block';
            link.style.display = 'none';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('invalid-date');
            expect(input.style.display).toBe('block'); // Should remain unchanged
            expect(link.style.display).toBe('none'); // Should remain unchanged
        });
        test('should handle update errors gracefully', async () => {
            mockUpdate.mockRejectedValue(new Error('Update failed'));
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await expect(rangeDateProperty.updateField(mockUpdate, input, link)).rejects.toThrow('Update failed');
        });
    });
    describe('extractFirstDate static method', () => {
        test('should extract date from French formatted string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1); // February is month 1 (0-indexed)
            expect(result?.getDate()).toBe(26);
        });
        test('should extract first date from range string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023 au mardi 28 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1);
            expect(result?.getDate()).toBe(26);
        });
        test('should handle different months', () => {
            const testCases = [
                { input: '15 janvier 2023', expected: { year: 2023, month: 0, day: 15 } },
                { input: '10 mars 2023', expected: { year: 2023, month: 2, day: 10 } },
                { input: '25 novembre 2023', expected: { year: 2023, month: 10, day: 25 } } // éviter décembre à cause du bug d'accent
            ];
            testCases.forEach(({ input, expected }) => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result?.getFullYear()).toBe(expected.year);
                expect(result?.getMonth()).toBe(expected.month);
                expect(result?.getDate()).toBe(expected.day);
            });
        });
        test('should handle accented characters', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('15 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getMonth()).toBe(1); // février = February
        });
        test('should return null for invalid format', () => {
            const testCases = [
                'invalid date string',
                '2023-02-26',
                'February 26, 2023',
                '../../src/2023',
                ''
            ];
            testCases.forEach(input => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result).toBeNull();
            });
        });
        test('should return null for invalid month names', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('26 invalidmonth 2023');
            expect(result).toBeNull();
        });
    });
    describe('Integration tests', () => {
        test('should work with complete workflow', async () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
            // Create complete container
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const input = container.querySelector('input');
            const link = container.querySelector('.date-field-link');
            // Simulate user input
            input.value = '2023-02-26 to 2023-02-28';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle flatpickr integration', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalled();
            expect(input._flatpickrOptions).toBeDefined();
            expect(input._flatpickrOptions.mode).toBe('range');
            expect(input._flatpickrOptions.locale).toBe('fr');
        });
        test('should maintain proper inheritance', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', mockVault, mockVault, mockVault);
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
            expect(rangeDateProperty.type).toBe('dateRange');
            expect(typeof rangeDateProperty.formatDateForStorage).toBe('function');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhbmdlRGF0ZVByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUtILGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDeEIsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQ2hDLE9BQU8sYUFBYSxDQUFDO0FBQ3pCLENBQUMsQ0FBQyxDQUFDO0FBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFFbkQsZUFBZTtBQUNmLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN0QyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNyQixDQUFDLENBQUMsQ0FBQztBQWJKLG9FQUFpRTtBQUNqRSw4RUFBMkU7QUFjM0Usb0NBQW9DO0FBQ3BDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7QUFFaEQsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksVUFBOEMsQ0FBQztJQUVuRCxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osWUFBWTtRQUNaLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUM3QixrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsU0FB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M0UsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxSYW5nZURhdGVQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERhdGVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL0RhdGVQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IFJhbmdlRGF0ZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvUmFuZ2VEYXRlUHJvcGVydHknO1xyXG5cclxuLy8gTW9jayBmbGF0cGlja3JcclxuamVzdC5tb2NrKCdmbGF0cGlja3InLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrRmxhdHBpY2tyID0gamVzdC5mbigpO1xyXG4gICAgcmV0dXJuIG1vY2tGbGF0cGlja3I7XHJcbn0pO1xyXG5qZXN0Lm1vY2soJ2ZsYXRwaWNrci9kaXN0L2wxMG4vZnIuanMnLCAoKSA9PiAoe30pKTtcclxuXHJcbi8vIE1vY2sgc2V0SWNvblxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuLy8gR2V0IHRoZSBtb2NrZWQgZmxhdHBpY2tyIGZ1bmN0aW9uXHJcbmNvbnN0IGZsYXRwaWNrciA9IGplc3QucmVxdWlyZU1vY2soJ2ZsYXRwaWNrcicpO1xyXG5cclxuZGVzY3JpYmUoJ1JhbmdlRGF0ZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHJhbmdlRGF0ZVByb3BlcnR5OiBSYW5nZURhdGVQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVXBkYXRlOiBqZXN0Lk1vY2s8UHJvbWlzZTx2b2lkPiwgW3N0cmluZ10+O1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IERPTVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgLy8gUmVzZXQgYWxsIG1vY2tzXHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcblxyXG4gICAgICAgIG1vY2tVcGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZXNldCBmbGF0cGlja3IgbW9ja1xyXG4gICAgICAgIGZsYXRwaWNrci5tb2NrSW1wbGVtZW50YXRpb24oKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIG9wdGlvbnMgb24gZWxlbWVudCBmb3IgdGVzdGluZ1xyXG4gICAgICAgICAgICAoZWxlbWVudCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3k6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgICAgIGNsZWFyOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBzZXREYXRlOiBqZXN0LmZuKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdDb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIFJhbmdlRGF0ZVByb3BlcnR5IHdpdGggY29ycmVjdCB0eXBlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkubmFtZSkudG9CZSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS50eXBlKS50b0JlKCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGluaGVyaXQgZnJvbSBEYXRlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoRGF0ZVByb3BlcnR5KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjdXN0b20gYXJndW1lbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhcmdzID0geyBpY29uOiAnY2FsZW5kYXInLCBkZWZhdWx0VmFsdWU6ICcyMDIzLTAxLTAxIHRvIDIwMjMtMDEtMzEnIH07XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkubmFtZSkudG9CZSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS5pY29uKS50b0JlKCdjYWxlbmRhcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3ZhbGlkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBzaW5nbGUgZGF0ZSBmb3JtYXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcyMDIzLTAxLTE1Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJzIwMjMtMDEtMTUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGRhdGUgcmFuZ2UgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy0wMS0xNSB0byAyMDIzLTAxLTMxJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJzIwMjMtMDEtMTUgdG8gMjAyMy0wMS0zMScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgZGF0ZSBmb3JtYXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcyMDIzLzAxLzE1Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgZGF0ZSByYW5nZSBmb3JtYXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcyMDIzLTAxLTE1IC0gMjAyMy0wMS0zMScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBtYWxmb3JtZWQgZGF0ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnaW52YWxpZC1kYXRlJykpLnRvQmUoJycpO1xyXG4gICAgICAgICAgICAvLyBOb3RlOiBMYSB2YWxpZGF0aW9uIGFjdHVlbGxlIGVzdCBiYXPDqWUgc3VyIHJlZ2V4LCBwYXMgc3VyIGxhIHZhbGlkaXTDqSBkZSBsYSBkYXRlXHJcbiAgICAgICAgICAgIC8vIEVsbGUgYWNjZXB0ZSBkb25jIGRlcyBkYXRlcyBjb21tZSAyMDIzLTEzLTQ1IHNpIGVsbGVzIHN1aXZlbnQgbGUgZm9ybWF0IFlZWVktTU0tRERcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcxNS0wMS0yMDIzJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudmFsaWRhdGUoJycpKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcgJykpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Zvcm1hdERhdGVSYW5nZUZvckRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZvcm1hdCBzaW5nbGUgZGF0ZSBmb3IgZGlzcGxheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmFuZ2VEYXRlUHJvcGVydHkuZm9ybWF0RGF0ZVJhbmdlRm9yRGlzcGxheSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgZm9ybWF0IGRhdGUgcmFuZ2UgZm9yIGRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LmZvcm1hdERhdGVSYW5nZUZvckRpc3BsYXkoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBkYXRlIGdyYWNlZnVsbHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdGhyb3cgb3IgcmV0dXJuIGEgZGVmYXVsdCAtIGxldCdzIHRlc3QgdGhlIGJlaGF2aW9yXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS5mb3JtYXREYXRlUmFuZ2VGb3JEaXNwbGF5KCdpbnZhbGlkLWRhdGUnKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVGaWVsZExpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBsaW5rIHdpdGggZm9ybWF0dGVkIGRhdGUgZGlzcGxheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnMjAyMy0wMi0yNicpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGFnTmFtZSkudG9CZSgnRElWJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZGF0ZS1maWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZmllbGQtbGluaycpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5jdXJzb3IpLnRvQmUoJ3BvaW50ZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBsaW5rIHdpdGggcmFuZ2UgZGlzcGxheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluaygnMjAyMy0wMi0yNiB0byAyMDIzLTAyLTI4Jyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzaG93IGRlZmF1bHQgdGV4dCBmb3IgZW1wdHkgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJycpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvQmUoJ0F1Y3VuZSBkYXRlIHPDqWxlY3Rpb25uw6llJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzaG93IGRlZmF1bHQgdGV4dCBmb3IgbnVsbCB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkTGluayhudWxsIGFzIGFueSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9CZSgnQXVjdW5lIGRhdGUgc8OpbGVjdGlvbm7DqWUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhdmUgY2xpY2sgZXZlbnQgbGlzdGVuZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIE1vY2sgdGhlIG1vZGlmeUZpZWxkIG1ldGhvZFxyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS5tb2RpZnlGaWVsZCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGNsaWNrXHJcbiAgICAgICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS5tb2RpZnlGaWVsZCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkRGF0ZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGlucHV0IHdpdGggY29ycmVjdCBhdHRyaWJ1dGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcyMDIzLTAyLTI2JywgbW9ja1VwZGF0ZSwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudGFnTmFtZSkudG9CZSgnSU5QVVQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnR5cGUpLnRvQmUoJ3RleHQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnZhbHVlKS50b0JlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWlucHV0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBpbml0aWFsaXplIGZsYXRwaWNrciB3aXRoIGNvcnJlY3Qgb3B0aW9ucycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnMjAyMy0wMi0yNicsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGZsYXRwaWNrcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoaW5wdXQsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ6ICdZLW0tZCcsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0ZTogJzIwMjMtMDItMjYnLFxyXG4gICAgICAgICAgICAgICAgbG9jYWxlOiAnZnInLFxyXG4gICAgICAgICAgICAgICAgbW9kZTogJ3JhbmdlJ1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZERhdGUoJycsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnZhbHVlKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGZsYXRwaWNrcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoaW5wdXQsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHREYXRlOiAnJ1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjb25maWd1cmUgb25DaGFuZ2UgY2FsbGJhY2sgZm9yIHNpbmdsZSBkYXRlIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuICAgICAgICAgICAgY29uc3QgZmxhdHBpY2tyT3B0aW9ucyA9IChpbnB1dCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgc2VsZWN0aW5nIHNhbWUgc3RhcnQgYW5kIGVuZCBkYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHNhbWVEYXRlID0gbmV3IERhdGUoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgYXdhaXQgZmxhdHBpY2tyT3B0aW9ucy5vbkNoYW5nZShbc2FtZURhdGUsIHNhbWVEYXRlXSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNvbmZpZ3VyZSBvbkNoYW5nZSBjYWxsYmFjayBmb3IgZGF0ZSByYW5nZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnJywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGluZyBkYXRlIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgnMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBhd2FpdCBmbGF0cGlja3JPcHRpb25zLm9uQ2hhbmdlKFtzdGFydERhdGUsIGVuZERhdGVdKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnMjAyMy0wMi0yNiB0byAyMDIzLTAyLTI4Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgb25DaGFuZ2Ugd2l0aCBpbmNvbXBsZXRlIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuICAgICAgICAgICAgY29uc3QgZmxhdHBpY2tyT3B0aW9ucyA9IChpbnB1dCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgc2VsZWN0aW5nIG9ubHkgb25lIGRhdGVcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgYXdhaXQgZmxhdHBpY2tyT3B0aW9ucy5vbkNoYW5nZShbc3RhcnREYXRlXSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjb25maWd1cmUgb25DbG9zZSBjYWxsYmFjaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcyMDIzLTAyLTI2JywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IGZsYXRwaWNrck9wdGlvbnMub25DbG9zZSgpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29udGFpbmVyIHdpdGggY29ycmVjdCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnMjAyMy0wMi0yNicpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpLnRvQmUoMik7IC8vIGxpbmsgYW5kIGlucHV0XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzaG93IGxpbmsgYW5kIGhpZGUgaW5wdXQgZm9yIHZhbGlkIGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gY29udGFpbmVyLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoaWRlIGxpbmsgYW5kIHNob3cgaW5wdXQgZm9yIGludmFsaWQgZGF0ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsICdpbnZhbGlkLWRhdGUnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGlkZSBsaW5rIGFuZCBzaG93IGlucHV0IGZvciBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsICcnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZUZpZWxkJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgd2l0aCB2YWxpZCBkYXRlIGFuZCBzaG93IGxpbmsnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnMjAyMy0wMi0yNic7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKG1vY2tVcGRhdGUsIGlucHV0LCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIHdpdGggdmFsaWQgZGF0ZSByYW5nZSBhbmQgc2hvdyBsaW5rJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCc7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKG1vY2tVcGRhdGUsIGlucHV0LCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMjAyMy0wMi0yNiB0byAyMDIzLTAyLTI4Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnN0eWxlLmRpc3BsYXkpLnRvQmUoJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b01hdGNoKC9kaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzIGF1IG1hcmRpIDI4IGbDqXZyaWVyIDIwMjMvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSB3aXRoIGludmFsaWQgZGF0ZSB3aXRob3V0IGNoYW5naW5nIGRpc3BsYXknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnaW52YWxpZC1kYXRlJztcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2V0IGluaXRpYWwgZGlzcGxheSBzdGF0ZXNcclxuICAgICAgICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKG1vY2tVcGRhdGUsIGlucHV0LCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaW52YWxpZC1kYXRlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpOyAvLyBTaG91bGQgcmVtYWluIHVuY2hhbmdlZFxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdub25lJyk7ICAgLy8gU2hvdWxkIHJlbWFpbiB1bmNoYW5nZWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB1cGRhdGUgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tVcGRhdGUubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdVcGRhdGUgZmFpbGVkJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcyMDIzLTAyLTI2JztcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKG1vY2tVcGRhdGUsIGlucHV0LCBsaW5rKSkucmVqZWN0cy50b1Rocm93KCdVcGRhdGUgZmFpbGVkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZXh0cmFjdEZpcnN0RGF0ZSBzdGF0aWMgbWV0aG9kJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBleHRyYWN0IGRhdGUgZnJvbSBGcmVuY2ggZm9ybWF0dGVkIHN0cmluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmFuZ2VEYXRlUHJvcGVydHkuZXh0cmFjdEZpcnN0RGF0ZSgnZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldEZ1bGxZZWFyKCkpLnRvQmUoMjAyMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldE1vbnRoKCkpLnRvQmUoMSk7IC8vIEZlYnJ1YXJ5IGlzIG1vbnRoIDEgKDAtaW5kZXhlZClcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RGF0ZSgpKS50b0JlKDI2KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGV4dHJhY3QgZmlyc3QgZGF0ZSBmcm9tIHJhbmdlIHN0cmluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmFuZ2VEYXRlUHJvcGVydHkuZXh0cmFjdEZpcnN0RGF0ZSgnZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RnVsbFllYXIoKSkudG9CZSgyMDIzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0TW9udGgoKSkudG9CZSgxKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0RGF0ZSgpKS50b0JlKDI2KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgbW9udGhzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGlucHV0OiAnMTUgamFudmllciAyMDIzJywgZXhwZWN0ZWQ6IHsgeWVhcjogMjAyMywgbW9udGg6IDAsIGRheTogMTUgfSB9LFxyXG4gICAgICAgICAgICAgICAgeyBpbnB1dDogJzEwIG1hcnMgMjAyMycsIGV4cGVjdGVkOiB7IHllYXI6IDIwMjMsIG1vbnRoOiAyLCBkYXk6IDEwIH0gfSxcclxuICAgICAgICAgICAgICAgIHsgaW5wdXQ6ICcyNSBub3ZlbWJyZSAyMDIzJywgZXhwZWN0ZWQ6IHsgeWVhcjogMjAyMywgbW9udGg6IDEwLCBkYXk6IDI1IH0gfSAvLyDDqXZpdGVyIGTDqWNlbWJyZSDDoCBjYXVzZSBkdSBidWcgZCdhY2NlbnRcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIHRlc3RDYXNlcy5mb3JFYWNoKCh7IGlucHV0LCBleHBlY3RlZCB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldEZ1bGxZZWFyKCkpLnRvQmUoZXhwZWN0ZWQueWVhcik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRNb250aCgpKS50b0JlKGV4cGVjdGVkLm1vbnRoKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldERhdGUoKSkudG9CZShleHBlY3RlZC5kYXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBhY2NlbnRlZCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKCcxNSBmw6l2cmllciAyMDIzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0TW9udGgoKSkudG9CZSgxKTsgLy8gZsOpdnJpZXIgPSBGZWJydWFyeVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIGludmFsaWQgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAnaW52YWxpZCBkYXRlIHN0cmluZycsXHJcbiAgICAgICAgICAgICAgICAnMjAyMy0wMi0yNicsXHJcbiAgICAgICAgICAgICAgICAnRmVicnVhcnkgMjYsIDIwMjMnLFxyXG4gICAgICAgICAgICAgICAgJy4uLy4uL3NyYy8yMDIzJyxcclxuICAgICAgICAgICAgICAgICcnXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0ZXN0Q2FzZXMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIGludmFsaWQgbW9udGggbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoJzI2IGludmFsaWRtb250aCAyMDIzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnSW50ZWdyYXRpb24gdGVzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHdvcmsgd2l0aCBjb21wbGV0ZSB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbXBsZXRlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRhdGUtZmllbGQtbGluaycpIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgdXNlciBpbnB1dFxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnO1xyXG4gICAgICAgICAgICBhd2FpdCByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZmxhdHBpY2tyIGludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcyMDIzLTAyLTI2JywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmxhdHBpY2tyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucykudG9CZURlZmluZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KChpbnB1dCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zLm1vZGUpLnRvQmUoJ3JhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucy5sb2NhbGUpLnRvQmUoJ2ZyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBtYWludGFpbiBwcm9wZXIgaW5oZXJpdGFuY2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoRGF0ZVByb3BlcnR5KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnR5cGUpLnRvQmUoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIHJhbmdlRGF0ZVByb3BlcnR5LmZvcm1hdERhdGVGb3JTdG9yYWdlKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=