{"version":3,"names":["Property","constructor","name","vault","options","cov_1l9wv4dwnx","b","f","s","title","flexSpan","type","icon","staticProperty","defaultValue","additionalOptions","default","static","Object","assign","getDefaultValue","getPersonalName","read","file","getMetadataValue","validate","value","getLink","getPretty","getDisplay","args","staticMode","fillDisplay","updateMetadata","update","field","createFieldContainer","document","createElement","textContent","classList","add","appendChild","iconContainer","createIconContainer","fieldContainer","createFieldContainerContent","app","setIcon","addEventListener","event","modifyField","link","target","closest","querySelector","input","style","display","focus","currentField","createFieldInput","createFieldLink","handleFieldInput","cursor","updateField","key","preventDefault","href","reloadDynamicContent","newValue","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\Property.ts"],"sourcesContent":["import { File } from \"../vault/File\";\r\nimport { IApp } from \"../interfaces/IApp\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\n/**\r\n * Base class for all properties in the dynamic field system.\r\n * Represents an editable property with a dynamic user interface.\r\n * \r\n * This class provides the base behavior for:\r\n * - Displaying metadata fields\r\n * - Inline editing of values\r\n * - User input validation\r\n * - Vault interaction\r\n */\r\nexport class Property {\r\n    public name: string;\r\n    public icon: string;\r\n    public vault: Vault;\r\n    public static: boolean;\r\n    public title: string = \"\";\r\n    public flexSpan = 0;\r\n    public default: any;\r\n\r\n    public type : string = \"text\";\r\n\r\n    /**\r\n     * Property constructor.\r\n     * Initializes a property with its name, vault, and configuration options.\r\n     * \r\n     * @param name - Unique property name (used to identify the property in metadata)\r\n     * @param vault - Vault instance for data operations\r\n     * @param options - Optional property configuration\r\n     * @param options.icon - Lucide icon to display next to the property (default: \"align-left\")\r\n     * @param options.staticProperty - If true, the property is static and doesn't change (default: false)\r\n     * @param options.flexSpan - Relative width of the property in the display (default: 1)\r\n     * @param options.defaultValue - Default value of the property (default: \"\")\r\n     */\r\n    constructor(name: string, vault: Vault, options: { \r\n        icon?: string, \r\n        staticProperty?: boolean, \r\n        flexSpan?: number, \r\n        defaultValue?: any, \r\n        [key: string]: any \r\n    } = {}) {\r\n        const { icon = \"align-left\", staticProperty = false, flexSpan = 1, defaultValue = \"\", ...additionalOptions } = options;\r\n        this.flexSpan = flexSpan;\r\n        this.name = name;\r\n        this.vault = vault;\r\n        this.icon = icon;\r\n        this.default = defaultValue;\r\n        this.static = staticProperty;\r\n\r\n        // Assign additional options to the instance\r\n        Object.assign(this, additionalOptions);\r\n    }\r\n\r\n    /**\r\n     * Gets the default value of the property.\r\n     * Handles special default values like \"personalName\" that require\r\n     * dynamic resolution via the vault.\r\n     * \r\n     * @returns The resolved default value of the property\r\n     */\r\n    getDefaultValue(){\r\n        // TODO use a dictionary for special default values in vault\r\n        if (this.default == \"personalName\"){\r\n            return this.vault.getPersonalName();\r\n        }\r\n        return this.default;\r\n    }\r\n\r\n    /**\r\n     * Reads the property value from the file's metadata.\r\n     * Supports two file types: those with a getMetadataValue method\r\n     * and those with a direct metadata object.\r\n     * \r\n     * @param file - Obsidian file from which to read the property\r\n     * @returns The property value or undefined if it doesn't exist\r\n     */\r\n    async read(file: File): Promise<any> {\r\n        if (file && typeof file === 'object' && 'readProperty' in file) {\r\n            return await file.getMetadataValue(this.name);\r\n        }\r\n        return await file.getMetadataValue(this.name);\r\n    }\r\n\r\n    /**\r\n     * Validates and normalizes an input value for this property.\r\n     * The base method returns the value unchanged, but can be \r\n     * overridden by derived classes to perform transformations.\r\n     * \r\n     * @param value - Value to validate and normalize\r\n     * @returns The validated and normalized value\r\n     */\r\n    validate(value: string) {\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Generates a link for the property value.\r\n     * Used to create clickable links in the user interface.\r\n     * \r\n     * @param value - Value for which to generate a link\r\n     * @returns The link representation of the value\r\n     */\r\n    getLink(value: string) {\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Formats a value for \"pretty\" display in the interface.\r\n     * Can be overridden for property type-specific formatting.\r\n     * \r\n     * @param value - Value to format for display\r\n     * @returns The formatted value for display\r\n     */\r\n    getPretty(value: string) {\r\n        return value;  \r\n    }\r\n\r\n    /**\r\n     * Generates the complete display of the property for a given file.\r\n     * Configures the display mode (static or editable) and title,\r\n     * then delegates DOM creation to fillDisplay.\r\n     * \r\n     * @param file - File for which to generate the display\r\n     * @param args - Display options\r\n     * @param args.staticMode - If true, displays the property in read-only mode\r\n     * @param args.title - Custom title for the property\r\n     * @returns The DOM element representing the property\r\n     */\r\n    async getDisplay(file: any, args : {staticMode? : boolean, title?: string} = {staticMode : false, title:\"\"}) {\r\n        this.static = args.staticMode ? true : this.static;\r\n        this.title = args.title ? args.title : \"\";\r\n        let value = await this.read(file);\r\n        return this.fillDisplay(value, async (value: any) => await file.updateMetadata(this.name, value), args);\r\n    }\r\n\r\n    /**\r\n     * Fills and builds the complete DOM display of the property.\r\n     * Creates the HTML structure with optional title, icon and editable content.\r\n     * \r\n     * @param value - Current property value to display\r\n     * @param update - Update function called during changes\r\n     * @param args - Additional arguments for configuration\r\n     * @returns The complete DOM element of the property\r\n     */\r\n    fillDisplay(value: any, update: (value: any) => Promise<void>, args? : {}) {\r\n        const field = this.createFieldContainer();\r\n\r\n        if (this.title) {\r\n            const title = document.createElement(\"div\");\r\n            title.textContent = this.title;\r\n            title.classList.add(\"metadata-title\");\r\n            field.appendChild(title);\r\n        }\r\n\r\n        const iconContainer = this.createIconContainer(update);\r\n        const fieldContainer = this.createFieldContainerContent(update, value);\r\n\r\n        field.appendChild(iconContainer);\r\n        field.appendChild(fieldContainer);\r\n\r\n        return field;\r\n    }\r\n\r\n    /**\r\n     * Creates the main container for the property display.\r\n     * Defines the basic HTML structure with appropriate CSS classes.\r\n     * \r\n     * @returns The main container div element of the property\r\n     */\r\n    createFieldContainer() {\r\n        const field = document.createElement(\"div\");\r\n        field.classList.add(\"metadata-field\");\r\n        return field;\r\n    }\r\n\r\n    /**\r\n     * Creates the icon container for the property.\r\n     * Adds a click handler to toggle to edit mode if the property is not static.\r\n     * \r\n     * @param update - Update function to persist changes\r\n     * @returns The icon container element with its events\r\n     */\r\n    createIconContainer(update: (value: string) => Promise<void>) {\r\n        const iconContainer = document.createElement(\"div\");\r\n        iconContainer.classList.add(\"icon-container\");\r\n        if (this.icon) {\r\n            const icon = document.createElement(\"div\");\r\n            this.vault.app.setIcon(icon, this.icon);\r\n            iconContainer.appendChild(icon);\r\n            if (!this.static) {\r\n                iconContainer.addEventListener(\"click\", (event) => this.modifyField(event));\r\n            }\r\n        }\r\n        return iconContainer;\r\n    }\r\n\r\n    /**\r\n     * Handles switching to edit mode when the user clicks on the icon.\r\n     * Hides the read-only display and shows the input field with focus.\r\n     * \r\n     * @param event - Click event on the icon\r\n     */\r\n    modifyField(event: Event) {\r\n        const link = (event.target as HTMLElement).closest('.metadata-field')?.querySelector('.field-link') as HTMLElement;\r\n        const input = (event.target as HTMLElement).closest('.metadata-field')?.querySelector('.field-input') as HTMLInputElement;\r\n        if (link && input) {\r\n            link.style.display = \"none\";\r\n            input.style.display = \"block\";\r\n            input.focus(); \r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates the field container content with input and link elements.\r\n     * Manages the visibility of edit and display modes based on property state.\r\n     * \r\n     * @param update - Update function to persist changes\r\n     * @param value - Current value to display\r\n     * @returns The field container div with input and link elements\r\n     */\r\n    createFieldContainerContent(update: (value: string) => Promise<void>, value: string): HTMLDivElement {\r\n        const fieldContainer = document.createElement(\"div\");\r\n        fieldContainer.classList.add(\"field-container\");\r\n\r\n        const currentField = value;\r\n        const input = this.createFieldInput(currentField);\r\n        const link = this.createFieldLink(currentField);\r\n\r\n        if (this.static) {\r\n            link.style.display = \"block\";\r\n            input.style.display = \"none\";\r\n        } else {\r\n            if (currentField) {\r\n                link.style.display = \"block\";\r\n                input.style.display = \"none\";\r\n            } else {\r\n                input.style.display = \"block\";\r\n                link.style.display = \"none\";\r\n            }\r\n        }\r\n\r\n        fieldContainer.appendChild(link);\r\n        fieldContainer.appendChild(input);\r\n\r\n        if (!this.static) {\r\n            this.handleFieldInput(update, input, link);\r\n        }\r\n\r\n        return fieldContainer;\r\n    }\r\n\r\n    /**\r\n     * Creates a clickable link element for displaying the property value.\r\n     * Configures cursor style and click behavior based on static property.\r\n     * \r\n     * @param value - Value to display in the link\r\n     * @returns The configured link div element\r\n     */\r\n    createFieldLink(value: string) {\r\n        const link = document.createElement(\"div\");\r\n        link.textContent = this.getPretty(value) || \"\";\r\n        link.classList.add(\"field-link\");\r\n        link.style.cursor = this.static ? \"default\" : \"text\";\r\n        if (!this.static) {\r\n            link.addEventListener(\"click\", (event) => this.modifyField(event));\r\n        }\r\n        return link;\r\n    }\r\n\r\n    /**\r\n     * Handles input field events for editing functionality.\r\n     * Sets up blur and keyboard event listeners to save changes.\r\n     * \r\n     * @param update - Update function to persist changes\r\n     * @param input - Input element to handle\r\n     * @param link - Link element to show after editing\r\n     */\r\n    handleFieldInput(update: (value: string) => Promise<void>, input: HTMLInputElement | HTMLTextAreaElement, link: HTMLElement) {\r\n        input.addEventListener(\"blur\", async () => {\r\n            await this.updateField(update, input, link);\r\n        });\r\n\r\n        input.addEventListener(\"keydown\", async (event) => {\r\n            if ((event as KeyboardEvent).key === \"Enter\" || (event as KeyboardEvent).key === \"Escape\") {\r\n                    event.preventDefault();\r\n                    await this.updateField(update, input, link);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates an input field for editing the property value.\r\n     * Base implementation creates a text input, can be overridden for specific input types.\r\n     * \r\n     * @param value - Initial value for the input field\r\n     * @returns The configured input element (input or textarea)\r\n     */\r\n    createFieldInput(value: string) : HTMLInputElement | HTMLTextAreaElement {\r\n        const input = document.createElement(\"input\");\r\n        input.type = \"text\";\r\n        input.value = value || \"\";\r\n        input.classList.add(\"field-input\");\r\n        return input;\r\n    }\r\n\r\n    /**\r\n     * Updates the field value and switches back to display mode.\r\n     * Validates the input, updates the backend, and refreshes the UI.\r\n     * \r\n     * @param update - Update function to persist the changes\r\n     * @param input - Input element containing the new value\r\n     * @param link - Link element to update and show\r\n     */\r\n    async updateField(update: (value: string) => Promise<void>, input: HTMLInputElement | HTMLTextAreaElement, link: HTMLElement) {\r\n        let value = this.validate(input.value);\r\n        if (value) {\r\n            await update(value);\r\n            input.style.display = \"none\";\r\n            link.textContent = value;\r\n            if ((link as HTMLAnchorElement).href){\r\n                (link as HTMLAnchorElement).href = this.getLink(value);\r\n            }\r\n            link.style.display = \"block\";\r\n        } else {\r\n            await update(input.value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reloads the dynamic content of the property field from the file.\r\n     * Updates both the display link and input field with the current file value.\r\n     * \r\n     * @param file - File from which to reload the property value\r\n     */\r\n    async reloadDynamicContent(file: File) {\r\n        const field = document.querySelector('.metadata-field');\r\n        if (field) {\r\n            const newValue = await this.read(file);\r\n            const link = field.querySelector('.field-link') as HTMLElement;\r\n            const input = field.querySelector('.field-input') as HTMLInputElement;\r\n            if (link && input) {\r\n                link.textContent = newValue;\r\n                input.value = newValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}