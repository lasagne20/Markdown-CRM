{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\SelectProperty.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\SelectProperty.ts"],"sourcesContent":["import { File } from \"../vault/File\";\r\nimport { Property } from \"./Property\";\r\nimport { MyVault } from \"../vault/MyVault\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\nexport class SelectProperty extends Property {\r\n    public options: {name : string, color : string}[];\r\n    public override type : string = \"select\";\r\n\r\n    constructor(name: string, vault: Vault, options: {name : string, color : string}[], args = {}) {\r\n        super(name, vault, args);\r\n        this.options = options;\r\n    }\r\n\r\n    override fillDisplay(value : any, update: (value: string) => Promise<void>) {\r\n        const field = this.createFieldContainer();\r\n        const fieldContainer = document.createElement(\"div\");\r\n        fieldContainer.classList.add(\"field-container-column\");\r\n\r\n        if (this.title) {\r\n            const header = document.createElement(\"div\");\r\n            header.classList.add(\"metadata-header\");\r\n            header.textContent = this.title;\r\n            fieldContainer.appendChild(header);\r\n        }\r\n\r\n        const selectElement = this.createSelectWidget(value, update);\r\n        fieldContainer.appendChild(selectElement);\r\n        field.appendChild(fieldContainer);\r\n\r\n        return field;\r\n    }\r\n\r\n    // Crée le widget de sélection avec une liste déroulante\r\n    createSelectWidget(value: string, update: (value: string) => Promise<void>): HTMLSelectElement {\r\n        const selectElement = document.createElement(\"select\");\r\n        selectElement.classList.add(\"select-dropdown\");\r\n        // Appliquer la couleur de l'option sélectionnée\r\n        if (value) {\r\n            const selectedOption = this.options.find(option => option.name === value);\r\n            if (selectedOption) {\r\n            selectElement.style.backgroundColor = selectedOption.color;\r\n            }\r\n        }\r\n        else {\r\n            if (this.options.length > 0) {\r\n                selectElement.style.backgroundColor = this.options[0].color;\r\n                // Met à jour avec la première valeur de la liste\r\n                update(this.options[0].name);\r\n            }\r\n        }\r\n\r\n        // Ajouter les options de la liste\r\n        this.options.forEach(option => {\r\n            const optionElement = document.createElement(\"option\");\r\n            optionElement.classList.add(\"select-dropdown-option\")\r\n            optionElement.value = option.name;\r\n            optionElement.textContent = option.name;\r\n            optionElement.style.backgroundColor = option.color;\r\n\r\n\r\n            // Si la valeur est déjà sélectionnée, l'option sera sélectionnée\r\n            if (option.name === value) {\r\n                optionElement.selected = true;\r\n            }\r\n\r\n            selectElement.appendChild(optionElement);\r\n        });\r\n\r\n\r\n        // Gérer le changement de valeur\r\n        selectElement.onchange = async (event) => {\r\n            const selectedValue = (event.target as HTMLSelectElement).value;\r\n            // Met à jour la couleur de l'option sélectionnée\r\n            const selectedOption = this.options.find(option => option.name === selectedValue);\r\n            if (selectedOption) {\r\n                selectElement.style.backgroundColor = selectedOption.color;\r\n            }\r\n            await update(selectedValue);\r\n        };\r\n\r\n        // Bloquer l'affichage de la liste si this.static est faux\r\n        if (this.static) {\r\n            selectElement.disabled = true;\r\n        }\r\n\r\n        return selectElement;\r\n    }\r\n}\r\n"],"version":3}