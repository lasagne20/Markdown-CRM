{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\Vault.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\Vault.test.ts"],"sourcesContent":["import { Vault, Settings } from '../../src/vault/Vault';\r\nimport { Classe } from '../../src/vault/Classe';\r\nimport { IApp, IFile } from '../../src/interfaces/IApp';\r\nimport { DynamicClassFactory } from '../../src/Config/DynamicClassFactory';\r\n\r\n// Mock DynamicClassFactory\r\njest.mock('../../src/Config/DynamicClassFactory');\r\nconst MockDynamicClassFactory = DynamicClassFactory as jest.MockedClass<typeof DynamicClassFactory>;\r\n\r\n// Test class implementation\r\nclass TestClasse extends Classe {\r\n    static create(vault: Vault): Classe {\r\n        return new TestClasse(vault);\r\n    }\r\n}\r\n\r\n// Mock implementations\r\nconst createMockApp = () => ({\r\n    getFile: jest.fn(),\r\n    getMetadata: jest.fn(),\r\n    listFiles: jest.fn(),\r\n    readFile: jest.fn(),\r\n    writeFile: jest.fn(),\r\n    renameFile: jest.fn(),\r\n    createFolder: jest.fn(),\r\n    updateMetadata: jest.fn(),\r\n    waitForFileMetaDataUpdate: jest.fn(),\r\n    getTemplateContent: jest.fn(),\r\n    createDiv: jest.fn(),\r\n    setIcon: jest.fn(),\r\n    getAbsolutePath: jest.fn(),\r\n    selectMedia: jest.fn(),\r\n    open: jest.fn(),\r\n    sendNotice: jest.fn(),\r\n    getVaultPath: jest.fn().mockReturnValue('/vault/path'),\r\n    getName: jest.fn().mockReturnValue('TestVault'),\r\n    createFile: jest.fn(),\r\n    delete: jest.fn(),\r\n    listFolders: jest.fn(),\r\n    isFolder: jest.fn(),\r\n    isFile: jest.fn(),\r\n    getFolder: jest.fn(),\r\n    getFolderPath: jest.fn(),\r\n    moveFile: jest.fn(),\r\n    copyFile: jest.fn()\r\n});\r\n\r\ndescribe('Vault', () => {\r\n    let mockApp: ReturnType<typeof createMockApp>;\r\n    let vault: Vault;\r\n    let settings: Settings;\r\n    let mockDynamicFactory: jest.Mocked<DynamicClassFactory>;\r\n\r\n    beforeEach(() => {\r\n        jest.clearAllMocks();\r\n        mockApp = createMockApp();\r\n        \r\n        settings = {\r\n            templateFolder: 'templates',\r\n            personalName: 'Test User',\r\n            configPath: './config'\r\n        };\r\n\r\n        // Setup mock dynamic factory\r\n        mockDynamicFactory = {\r\n            getAvailableClasses: jest.fn().mockResolvedValue(['TestClasse']),\r\n            getClass: jest.fn().mockResolvedValue(TestClasse),\r\n            createInstance: jest.fn()\r\n        } as any;\r\n\r\n        MockDynamicClassFactory.mockImplementation(() => mockDynamicFactory);\r\n\r\n        vault = new Vault(mockApp as any, settings);\r\n    });\r\n\r\n    describe('Constructor', () => {\r\n        it('should create Vault instance with correct properties', () => {\r\n            expect(vault).toBeInstanceOf(Vault);\r\n            expect(vault.app).toBe(mockApp);\r\n            expect(vault.settings).toBe(settings);\r\n            expect(vault.files).toEqual({});\r\n        });\r\n\r\n        it('should initialize with default config path when not provided', () => {\r\n            const settingsWithoutConfig = { ...settings };\r\n            delete settingsWithoutConfig.configPath;\r\n            \r\n            new Vault(mockApp as any, settingsWithoutConfig);\r\n            \r\n            expect(MockDynamicClassFactory).toHaveBeenCalledWith('./config', mockApp);\r\n        });\r\n    });\r\n\r\n    describe('Path and name methods', () => {\r\n        it('should get vault path', () => {\r\n            expect(vault.getPath()).toBe('/vault/path');\r\n            expect(mockApp.getVaultPath).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should get vault name', () => {\r\n            expect(vault.getName()).toBe('TestVault');\r\n            expect(mockApp.getName).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should get personal name from settings', () => {\r\n            expect(vault.getPersonalName()).toBe('Test User');\r\n        });\r\n    });\r\n\r\n    describe('Dynamic class factory', () => {\r\n        it('should initialize dynamic class factory', async () => {\r\n            // Wait for the async initialization to complete\r\n            await new Promise(resolve => setTimeout(resolve, 0));\r\n            \r\n            expect(MockDynamicClassFactory).toHaveBeenCalledWith('./config', mockApp);\r\n        });\r\n\r\n        it('should get dynamic class factory instance', () => {\r\n            const factory = vault.getDynamicClassFactory();\r\n            expect(factory).toBeDefined();\r\n        });\r\n\r\n        it('should handle dynamic class factory initialization errors', async () => {\r\n            MockDynamicClassFactory.mockImplementation(() => {\r\n                throw new Error('Factory initialization failed');\r\n            });\r\n            \r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n            \r\n            new Vault(mockApp as any, settings);\r\n            \r\n            // Wait for async initialization\r\n            await new Promise(resolve => setTimeout(resolve, 0));\r\n            \r\n            expect(consoleSpy).toHaveBeenCalledWith('Failed to initialize dynamic classes:', expect.any(Error));\r\n            consoleSpy.mockRestore();\r\n        });\r\n    });\r\n\r\n    describe('Class management', () => {\r\n        it('should get class from name', () => {\r\n            Vault.classes = { TestClasse: TestClasse };\r\n            \r\n            const ClasseFromName = vault.getClasseFromName('TestClasse');\r\n            expect(ClasseFromName).toBe(TestClasse);\r\n        });\r\n\r\n        it('should return undefined for non-existent class', () => {\r\n            Vault.classes = {};\r\n            \r\n            const ClasseFromName = vault.getClasseFromName('NonExistent');\r\n            expect(ClasseFromName).toBeUndefined();\r\n        });\r\n    });\r\n\r\n    describe('Link reading', () => {\r\n        it('should read wikilink file with alias', () => {\r\n            const result = vault.readLinkFile('[[file.md|Display Name]]');\r\n            expect(result).toBe('Display Name');\r\n        });\r\n\r\n        it('should read wikilink file without alias', () => {\r\n            const result = vault.readLinkFile('[[folder/file.md]]');\r\n            expect(result).toBe('file');\r\n        });\r\n\r\n        it('should read wikilink file with path when path=true', () => {\r\n            const result = vault.readLinkFile('[[folder/file]]', true);\r\n            expect(result).toBe('folder/file.md');\r\n        });\r\n\r\n        it('should read wikilink file with extension when path=true', () => {\r\n            const result = vault.readLinkFile('[[folder/file.pdf]]', true);\r\n            expect(result).toBe('folder/file.pdf');\r\n        });\r\n\r\n        it('should handle non-wikilink strings', () => {\r\n            const result = vault.readLinkFile('regular text');\r\n            expect(result).toBe('regular text');\r\n        });\r\n\r\n        it('should handle empty or null strings', () => {\r\n            expect(vault.readLinkFile('')).toBe('');\r\n            expect(vault.readLinkFile(null as any)).toBe('');\r\n            expect(vault.readLinkFile(undefined as any)).toBe('');\r\n        });\r\n\r\n        it('should handle malformed wikilinks', () => {\r\n            const result = vault.readLinkFile('[[incomplete');\r\n            expect(result).toBe('[[incomplete');\r\n        });\r\n    });\r\n\r\n    describe('getFromLink', () => {\r\n        const mockFile: IFile = {\r\n            name: 'test.md',\r\n            path: 'folder/test.md',\r\n            basename: 'test',\r\n            extension: 'md'\r\n        };\r\n\r\n        beforeEach(() => {\r\n            vault.createClasse = jest.fn().mockResolvedValue(new TestClasse(vault));\r\n        });\r\n\r\n        it('should get file by direct path match', async () => {\r\n            mockApp.listFiles.mockResolvedValue([mockFile]);\r\n            \r\n            const result = await vault.getFromLink('[[folder/test.md]]');\r\n            \r\n            expect(result).toBeDefined();\r\n            expect(vault.createClasse).toHaveBeenCalledWith(mockFile);\r\n        });\r\n\r\n        it('should get file from cache if already exists', async () => {\r\n            const cachedClasse = new TestClasse(vault);\r\n            vault.files['folder/test.md'] = cachedClasse;\r\n            mockApp.listFiles.mockResolvedValue([mockFile]);\r\n            \r\n            const result = await vault.getFromLink('[[folder/test.md]]');\r\n            \r\n            expect(result).toBe(cachedClasse);\r\n            expect(vault.createClasse).not.toHaveBeenCalled();\r\n        });\r\n\r\n        it('should find file by name when multiple files exist', async () => {\r\n            const file1 = { ...mockFile, path: 'folder1/test.md' };\r\n            const file2 = { ...mockFile, path: 'folder2/test.md' };\r\n            mockApp.listFiles.mockResolvedValue([file1, file2]);\r\n            \r\n            const result = await vault.getFromLink('[[folder2/test.md]]');\r\n            \r\n            expect(vault.createClasse).toHaveBeenCalledWith(file2);\r\n        });\r\n\r\n        it('should handle file not found', async () => {\r\n            mockApp.listFiles.mockResolvedValue([]);\r\n            \r\n            const result = await vault.getFromLink('[[nonexistent.md]]');\r\n            \r\n            expect(result).toBeNull();\r\n        });\r\n\r\n        it('should handle empty link', async () => {\r\n            const result = await vault.getFromLink('');\r\n            \r\n            expect(result).toBeNull();\r\n        });\r\n\r\n        it('should suppress logging when log=false', async () => {\r\n            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n            mockApp.listFiles.mockResolvedValue([]);\r\n            \r\n            await vault.getFromLink('[[nonexistent.md]]', false);\r\n            \r\n            expect(consoleSpy).not.toHaveBeenCalled();\r\n            consoleSpy.mockRestore();\r\n        });\r\n    });\r\n\r\n    describe('getMediaFromLink', () => {\r\n        const mockMediaFile: IFile = {\r\n            name: 'image.jpg',\r\n            path: 'media/image.jpg',\r\n            basename: 'image',\r\n            extension: 'jpg'\r\n        };\r\n\r\n        it('should get media file by direct path', async () => {\r\n            mockApp.listFiles.mockResolvedValue([mockMediaFile]);\r\n            \r\n            const result = await vault.getMediaFromLink('[[media/image.jpg]]');\r\n            \r\n            expect(result).toBe(mockMediaFile);\r\n        });\r\n\r\n        it('should get media file by name', async () => {\r\n            mockApp.listFiles.mockResolvedValue([mockMediaFile]);\r\n            \r\n            const result = await vault.getMediaFromLink('[[image.jpg]]');\r\n            \r\n            expect(result).toBe(mockMediaFile);\r\n        });\r\n\r\n        it('should return null for non-existent media', async () => {\r\n            mockApp.listFiles.mockResolvedValue([]);\r\n            \r\n            const result = await vault.getMediaFromLink('[[nonexistent.jpg]]');\r\n            \r\n            expect(result).toBeNull();\r\n        });\r\n    });\r\n\r\n    describe('createClasse', () => {\r\n        const mockFile: IFile = {\r\n            name: 'test.md',\r\n            path: 'folder/test.md',\r\n            basename: 'test',\r\n            extension: 'md'\r\n        };\r\n\r\n        beforeEach(() => {\r\n            mockApp.getMetaDataFromPath = jest.fn();\r\n            mockApp.waitForFileMetaDataUpdate = jest.fn().mockImplementation(\r\n                (filePath: string, key: string, callback: () => Promise<void>) => callback()\r\n            );\r\n            Vault.classes = { TestClasse: TestClasse };\r\n        });\r\n\r\n        it('should create classe with dynamic factory', async () => {\r\n            mockApp.getMetaDataFromPath.mockReturnValue({\r\n                frontmatter: { Classe: 'TestClasse' }\r\n            });\r\n\r\n            mockDynamicFactory.getClass.mockResolvedValue(TestClasse);\r\n            \r\n            const result = await vault.createClasse(mockFile);\r\n            \r\n            expect(result).toBeInstanceOf(TestClasse);\r\n            expect(mockDynamicFactory.getClass).toHaveBeenCalledWith('TestClasse');\r\n        });\r\n\r\n        it('should fallback to static classes when dynamic factory fails', async () => {\r\n            mockApp.getMetaDataFromPath.mockReturnValue({\r\n                frontmatter: { Classe: 'TestClasse' }\r\n            });\r\n\r\n            mockDynamicFactory.getClass.mockRejectedValue(new Error('Dynamic class loading failed'));\r\n            \r\n            const result = await vault.createClasse(mockFile);\r\n            \r\n            expect(result).toBeInstanceOf(TestClasse);\r\n        });\r\n\r\n        it('should throw error when no metadata found', async () => {\r\n            mockApp.getMetaDataFromPath.mockReturnValue(null);\r\n            \r\n            await expect(vault.createClasse(mockFile)).rejects.toThrow('Métadonnées non trouvées pour le fichier');\r\n        });\r\n\r\n        it('should throw error when no Classe property found', async () => {\r\n            mockApp.getMetaDataFromPath.mockReturnValue({\r\n                frontmatter: { otherProperty: 'value' }\r\n            });\r\n            \r\n            await expect(vault.createClasse(mockFile)).rejects.toThrow('Propriété Classe non trouvée dans les métadonnées');\r\n        });\r\n\r\n        it('should throw error when class not found', async () => {\r\n            mockApp.getMetaDataFromPath.mockReturnValue({\r\n                frontmatter: { Classe: 'UnknownClasse' }\r\n            });\r\n\r\n            mockDynamicFactory.getClass.mockResolvedValue(null);\r\n            Vault.classes = {};\r\n            \r\n            await expect(vault.createClasse(mockFile)).rejects.toThrow('Classe UnknownClasse non trouvée');\r\n        });\r\n    });\r\n\r\n    describe('Error handling and edge cases', () => {\r\n        it('should handle app methods that throw errors', async () => {\r\n            mockApp.listFiles.mockRejectedValue(new Error('File system error'));\r\n            \r\n            await expect(vault.getFromLink('[[test.md]]')).rejects.toThrow('File system error');\r\n        });\r\n\r\n        it('should handle malformed metadata', async () => {\r\n            const mockFile: IFile = {\r\n                name: 'test.md',\r\n                path: 'test.md',\r\n                basename: 'test',\r\n                extension: 'md'\r\n            };\r\n\r\n            mockApp.getMetaDataFromPath.mockReturnValue({\r\n                frontmatter: null\r\n            });\r\n            \r\n            await expect(vault.createClasse(mockFile)).rejects.toThrow('Propriété Classe non trouvée dans les métadonnées');\r\n        });\r\n\r\n        it('should handle very long file paths', async () => {\r\n            const longPath = 'a/'.repeat(100) + 'file.md';\r\n            const result = vault.readLinkFile(`[[${longPath}]]`, true);\r\n            expect(result).toBe(longPath);\r\n        });\r\n\r\n        it('should handle special characters in file names', async () => {\r\n            const specialName = 'file@#$%^&*()_+{}|:<>?.md';\r\n            const result = vault.readLinkFile(`[[${specialName}]]`, true);\r\n            expect(result).toBe(specialName);\r\n        });\r\n\r\n        it('should handle unicode characters', async () => {\r\n            const unicodeName = '测试文件.md';\r\n            const result = vault.readLinkFile(`[[${unicodeName}]]`, true);\r\n            expect(result).toBe(unicodeName);\r\n        });\r\n    });\r\n\r\n    describe('Static properties', () => {\r\n        it('should have static classes property', () => {\r\n            expect(Vault.classes).toBeDefined();\r\n            expect(typeof Vault.classes).toBe('object');\r\n        });\r\n\r\n        it('should handle static classes being undefined', () => {\r\n            const originalClasses = Vault.classes;\r\n            Vault.classes = undefined as any;\r\n            \r\n            const result = vault.getClasseFromName('TestClasse');\r\n            expect(result).toBeUndefined();\r\n            \r\n            Vault.classes = originalClasses;\r\n        });\r\n    });\r\n\r\n    describe('Performance and memory', () => {\r\n        it('should cache created classes', async () => {\r\n            const mockFile: IFile = {\r\n                name: 'test.md',\r\n                path: 'test.md',\r\n                basename: 'test',\r\n                extension: 'md'\r\n            };\r\n\r\n            mockApp.listFiles.mockResolvedValue([mockFile]);\r\n            vault.createClasse = jest.fn().mockResolvedValue(new TestClasse(vault));\r\n\r\n            // First call should create and cache\r\n            const result1 = await vault.getFromLink('[[test.md]]');\r\n            \r\n            // Second call should use cache\r\n            const result2 = await vault.getFromLink('[[test.md]]');\r\n\r\n            expect(vault.createClasse).toHaveBeenCalledTimes(1);\r\n            expect(result1).toBe(result2);\r\n        });\r\n\r\n        it('should handle large numbers of files efficiently', async () => {\r\n            const manyFiles: IFile[] = [];\r\n            for (let i = 0; i < 1000; i++) {\r\n                manyFiles.push({\r\n                    name: `file${i}.md`,\r\n                    path: `folder/file${i}.md`,\r\n                    basename: `file${i}`,\r\n                    extension: 'md'\r\n                });\r\n            }\r\n\r\n            mockApp.listFiles.mockResolvedValue(manyFiles);\r\n            vault.createClasse = jest.fn().mockResolvedValue(new TestClasse(vault));\r\n\r\n            const result = await vault.getFromLink('[[file500.md]]');\r\n            \r\n            expect(result).toBeDefined();\r\n            expect(vault.createClasse).toHaveBeenCalledWith(manyFiles[500]);\r\n        });\r\n    });\r\n});"],"version":3}