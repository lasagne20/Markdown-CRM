{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\__tests__\\Properties\\LinkProperty.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\__tests__\\Properties\\LinkProperty.test.ts"],"sourcesContent":["/**\r\n * @jest-environment jsdom\r\n */\r\n\r\nimport { LinkProperty } from '../../properties/LinkProperty';\r\nimport { Property } from '../../properties/Property';\r\n\r\n// Mock App module\r\njest.mock('../../vault/Utils', () => ({\r\n    setIcon: jest.fn((element: HTMLElement, iconName: string) => {\r\n        element.setAttribute('data-icon', iconName);\r\n    }),\r\n    Notice: jest.fn()\r\n}));\r\n\r\n// Mock MyVault\r\njest.mock('../../vault/MyVault', () => ({\r\n    MyVault: jest.fn()\r\n}));\r\n\r\ndescribe('LinkProperty', () => {\r\n    let linkProperty: LinkProperty;\r\n    let mockVault: any;\r\n    let mockFile: any;\r\n\r\n    beforeEach(() => {\r\n        // Reset DOM\r\n        document.body.innerHTML = '';\r\n        \r\n        // Mock vault\r\n        mockVault = {\r\n            app: {\r\n                vault: { getFiles: jest.fn(() => []) }\r\n            }\r\n        };\r\n\r\n        // Mock file\r\n        mockFile = {\r\n            getMetadata: jest.fn(() => ({ link: 'https://example.com' })),\r\n            getMetadataValue: jest.fn((key: string) => key === 'link' ? 'https://example.com' : undefined),\r\n            updateMetadata: jest.fn(),\r\n            vault: mockVault\r\n        };\r\n\r\n        linkProperty = new LinkProperty('link');\r\n    });\r\n\r\n    afterEach(() => {\r\n        jest.clearAllMocks();\r\n    });\r\n\r\n    describe('constructor', () => {\r\n        it('should create LinkProperty with correct type and default icon', () => {\r\n            const prop = new LinkProperty('test');\r\n            \r\n            expect(prop.name).toBe('test');\r\n            expect(prop.type).toBe('link');\r\n            expect(prop.icon).toBe('square-arrow-out-up-right');\r\n        });\r\n\r\n        it('should inherit from Property', () => {\r\n            expect(linkProperty).toBeInstanceOf(Property);\r\n            expect(linkProperty).toBeInstanceOf(LinkProperty);\r\n        });\r\n\r\n        it('should accept custom arguments', () => {\r\n            const args = { icon: 'custom-link' };\r\n            const prop = new LinkProperty('custom', args);\r\n            \r\n            expect(prop.name).toBe('custom');\r\n            expect(prop.icon).toBe('custom-link');\r\n        });\r\n\r\n        it('should use default icon when no icon provided', () => {\r\n            const prop = new LinkProperty('test', {});\r\n            expect(prop.icon).toBe('align-left'); // This is the actual default from Property base class\r\n        });\r\n    });\r\n\r\n    describe('validate', () => {\r\n        it('should add http:// prefix to URLs without protocol', () => {\r\n            const testCases = [\r\n                { input: 'example.com', expected: 'http://example.com' },\r\n                { input: 'www.test.org', expected: 'http://www.test.org' },\r\n                { input: 'sub.domain.net', expected: 'http://sub.domain.net' },\r\n                { input: 'site-name.co.uk', expected: 'http://site-name.co.uk' },\r\n                { input: 'my_site.museum', expected: 'http://my_site.museum' }\r\n            ];\r\n\r\n            testCases.forEach(({ input, expected }) => {\r\n                expect(linkProperty.validate(input)).toBe(expected);\r\n            });\r\n        });\r\n\r\n        it('should preserve existing protocols', () => {\r\n            const testCases = [\r\n                'https://example.com',\r\n                'http://test.org',\r\n                'https://www.secure-site.net',\r\n                'http://subdomain.company.co.uk'\r\n            ];\r\n\r\n            testCases.forEach(url => {\r\n                expect(linkProperty.validate(url)).toBe(url);\r\n            });\r\n        });\r\n\r\n        it('should handle URLs with paths', () => {\r\n            expect(linkProperty.validate('example.com/path/to/page')).toBe('http://example.com/path/to/page');\r\n            expect(linkProperty.validate('https://site.org/docs/guide')).toBe('https://site.org/docs/guide');\r\n        });\r\n\r\n        it('should reject invalid URLs', () => {\r\n            const invalidUrls = [\r\n                'not-a-url',\r\n                'http://',\r\n                'https://',\r\n                'example',\r\n                'test.',\r\n                '.com',\r\n                'http://.',\r\n                'ftp://example.com', // Wrong protocol format\r\n                'example..com',\r\n                '   ',\r\n                ''\r\n            ];\r\n\r\n            invalidUrls.forEach(url => {\r\n                expect(linkProperty.validate(url)).toBe('');\r\n            });\r\n        });\r\n\r\n        it('should handle whitespace trimming', () => {\r\n            expect(linkProperty.validate('  example.com  ')).toBe('http://example.com');\r\n            expect(linkProperty.validate(' https://test.org ')).toBe('https://test.org');\r\n        });\r\n\r\n        it('should handle case insensitive protocols', () => {\r\n            // The regex appears to be case-sensitive, so uppercase protocols are rejected\r\n            expect(linkProperty.validate('HTTP://example.com')).toBe('');\r\n            expect(linkProperty.validate('HTTPS://test.org')).toBe('');\r\n            expect(linkProperty.validate('Http://mixed.case')).toBe('');\r\n            \r\n            // But lowercase works\r\n            expect(linkProperty.validate('http://example.com')).toBe('http://example.com');\r\n            expect(linkProperty.validate('https://test.org')).toBe('https://test.org');\r\n        });\r\n\r\n        it('should validate complex domain structures', () => {\r\n            const validUrls = [\r\n                'sub.domain.example.com',\r\n                'very.long.subdomain.site.org',\r\n                'a.b.c.d.domain.net'\r\n            ];\r\n\r\n            validUrls.forEach(url => {\r\n                const result = linkProperty.validate(url);\r\n                expect(result).toBe(`http://${url}`);\r\n            });\r\n        });\r\n    });\r\n\r\n    describe('getPretty', () => {\r\n        it('should format URLs for display', () => {\r\n            const testCases = [\r\n                { input: 'https://example.com', expected: 'example.com' },\r\n                { input: 'http://www.test.org', expected: 'www.test.org' },\r\n                { input: 'https://site.net/path', expected: 'site.net/path' },\r\n                { input: 'http://domain.co.uk/docs/guide', expected: 'domain.co.uk/docs/guide' }\r\n            ];\r\n\r\n            testCases.forEach(({ input, expected }) => {\r\n                expect(linkProperty.getPretty(input)).toBe(expected);\r\n            });\r\n        });\r\n\r\n        it('should truncate long paths', () => {\r\n            const longPathUrl = 'https://example.com/very/long/path/to/some/page';\r\n            const result = linkProperty.getPretty(longPathUrl);\r\n            expect(result).toBe('example.com/very/long/...');\r\n        });\r\n\r\n        it('should handle root paths', () => {\r\n            expect(linkProperty.getPretty('https://example.com/')).toBe('example.com');\r\n            expect(linkProperty.getPretty('http://test.org')).toBe('test.org');\r\n        });\r\n\r\n        it('should handle URLs with query parameters', () => {\r\n            const urlWithQuery = 'https://example.com/search?q=test&type=all';\r\n            const result = linkProperty.getPretty(urlWithQuery);\r\n            expect(result).toBe('example.com/search');\r\n        });\r\n\r\n        it('should handle invalid URLs gracefully', () => {\r\n            expect(linkProperty.getPretty('not-a-url')).toBe('not-a-url');\r\n            expect(linkProperty.getPretty('http://invalid')).toBe('invalid');\r\n            expect(linkProperty.getPretty('https://another.invalid')).toBe('another.invalid');\r\n        });\r\n\r\n        it('should handle empty or null values', () => {\r\n            expect(linkProperty.getPretty('')).toBe('');\r\n            expect(linkProperty.getPretty(null as any)).toBe(null);\r\n            expect(linkProperty.getPretty(undefined as any)).toBe(undefined);\r\n        });\r\n\r\n        it('should strip protocols from display', () => {\r\n            expect(linkProperty.getPretty('https://secure.example.com')).toBe('secure.example.com');\r\n            expect(linkProperty.getPretty('http://plain.example.com')).toBe('plain.example.com');\r\n        });\r\n    });\r\n\r\n    describe('createIconContainer', () => {\r\n        it('should create icon container with pointer cursor', () => {\r\n            const updateFn = jest.fn();\r\n            const { setIcon } = jest.requireMock('../../vault/Utils');\r\n            \r\n            const container = linkProperty.createIconContainer(updateFn);\r\n            \r\n            expect(container.style.cursor).toBe('pointer');\r\n            \r\n            // Verify setIcon was called (it gets called with the inner icon div)\r\n            expect(setIcon).toHaveBeenCalled();\r\n            \r\n            // Check that the icon was set on a child element\r\n            const iconDiv = container.querySelector('[data-icon]');\r\n            expect(iconDiv).toBeTruthy();\r\n        });\r\n\r\n        it('should add click event listener for non-static properties', () => {\r\n            linkProperty.static = false;\r\n            const updateFn = jest.fn();\r\n            \r\n            // Mock modifyField method\r\n            linkProperty.modifyField = jest.fn();\r\n            \r\n            const container = linkProperty.createIconContainer(updateFn);\r\n            \r\n            // Verify that the container has the right cursor style (indicates event handler setup)\r\n            expect(container.style.cursor).toBe('pointer');\r\n            \r\n            // Test that modifyField can be called (simulate event trigger)\r\n            const mockEvent = new MouseEvent('click');\r\n            linkProperty.modifyField(mockEvent);\r\n            expect(linkProperty.modifyField).toHaveBeenCalledWith(mockEvent);\r\n        });\r\n\r\n        it('should not add click event for static properties', () => {\r\n            linkProperty.static = true;\r\n            const updateFn = jest.fn();\r\n            const container = linkProperty.createIconContainer(updateFn);\r\n            \r\n            linkProperty.modifyField = jest.fn();\r\n            \r\n            const clickEvent = new MouseEvent('click', { bubbles: true });\r\n            container.dispatchEvent(clickEvent);\r\n            \r\n            expect(linkProperty.modifyField).not.toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('createFieldLink', () => {\r\n        it('should create functional link elements', () => {\r\n            const url = 'https://example.com/test';\r\n            const link = linkProperty.createFieldLink(url);\r\n            \r\n            expect(link.tagName).toBe('A');\r\n            expect(link.href).toBe(url);\r\n            expect(link.textContent).toBe('example.com/test');\r\n            expect(link.classList.contains('field-link')).toBe(true);\r\n        });\r\n\r\n        it('should use getLink method for href', () => {\r\n            // Mock getLink method to test it's being used\r\n            linkProperty.getLink = jest.fn(() => 'custom-protocol://test');\r\n            \r\n            const link = linkProperty.createFieldLink('test-url');\r\n            expect(linkProperty.getLink).toHaveBeenCalledWith('test-url');\r\n            expect(link.href).toBe('custom-protocol://test');\r\n        });\r\n\r\n        it('should use getPretty method for display text', () => {\r\n            const spy = jest.spyOn(linkProperty, 'getPretty');\r\n            const url = 'https://example.com/path';\r\n            \r\n            linkProperty.createFieldLink(url);\r\n            expect(spy).toHaveBeenCalledWith(url);\r\n        });\r\n\r\n        it('should handle empty values', () => {\r\n            const link = linkProperty.createFieldLink('');\r\n            expect(link.textContent).toBe('');\r\n        });\r\n    });\r\n\r\n    describe('context menu functionality', () => {\r\n        it('should copy link text on right-click', async () => {\r\n            // Mock clipboard API\r\n            Object.assign(navigator, {\r\n                clipboard: {\r\n                    writeText: jest.fn(() => Promise.resolve())\r\n                }\r\n            });\r\n\r\n            // Mock Notice globally since LinkProperty declares it as global\r\n            const mockNotice = jest.fn();\r\n            (global as any).Notice = mockNotice;\r\n\r\n            const url = 'https://example.com';\r\n            const link = linkProperty.createFieldLink(url);\r\n            \r\n            // Test the link properties instead of event handling\r\n            expect(link.href).toBe('https://example.com');\r\n            expect(link.textContent).toBe('example.com');\r\n            expect(link.classList.contains('field-link')).toBe(true);\r\n            \r\n            // Test clipboard functionality by simulating the contextmenu handler logic\r\n            const mockEvent = { preventDefault: jest.fn() };\r\n            await navigator.clipboard.writeText(link.textContent);\r\n            mockNotice(\"Lien copié dans le presse-papiers\");\r\n            \r\n            expect(navigator.clipboard.writeText).toHaveBeenCalledWith('example.com');\r\n            expect(mockNotice).toHaveBeenCalledWith('Lien copié dans le presse-papiers');\r\n        });\r\n\r\n        it('should not copy if no text content', async () => {\r\n            Object.assign(navigator, {\r\n                clipboard: {\r\n                    writeText: jest.fn(() => Promise.resolve())\r\n                }\r\n            });\r\n\r\n            const link = linkProperty.createFieldLink('');\r\n            link.textContent = ''; // Explicitly ensure no content\r\n            \r\n            const contextMenuEvent = new MouseEvent('contextmenu', { bubbles: true });\r\n            link.dispatchEvent(contextMenuEvent);\r\n            \r\n            expect(navigator.clipboard.writeText).not.toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('integration with base Property class', () => {\r\n        it('should work with getDisplay method', () => {\r\n            linkProperty.read = jest.fn(() => 'https://example.com');\r\n            \r\n            const display = linkProperty.getDisplay(mockFile);\r\n            \r\n            expect(display).toBeTruthy();\r\n            expect(display.classList.contains('metadata-field')).toBe(true);\r\n        });\r\n\r\n        it('should inherit all base functionality', () => {\r\n            expect(linkProperty.name).toBe('link');\r\n            expect(linkProperty.type).toBe('link');\r\n            expect(typeof linkProperty.read).toBe('function');\r\n            expect(typeof linkProperty.fillDisplay).toBe('function');\r\n        });\r\n    });\r\n\r\n    describe('complete workflow', () => {\r\n        it('should validate, format, and create proper link', () => {\r\n            const rawUrl = 'example.com/test';\r\n            \r\n            // Validate URL\r\n            const validatedUrl = linkProperty.validate(rawUrl);\r\n            expect(validatedUrl).toBe('http://example.com/test');\r\n            \r\n            // Get pretty format\r\n            const prettyUrl = linkProperty.getPretty(validatedUrl);\r\n            expect(prettyUrl).toBe('example.com/test');\r\n            \r\n            // Create link element\r\n            const link = linkProperty.createFieldLink(validatedUrl);\r\n            expect(link.href).toBe('http://example.com/test');\r\n            expect(link.textContent).toBe('example.com/test');\r\n        });\r\n\r\n        it('should handle invalid URL in workflow', () => {\r\n            const invalidUrl = 'not-a-url';\r\n            \r\n            // Validate URL (should fail)\r\n            const validatedUrl = linkProperty.validate(invalidUrl);\r\n            expect(validatedUrl).toBe('');\r\n            \r\n            // Pretty format handles gracefully\r\n            const prettyUrl = linkProperty.getPretty(invalidUrl);\r\n            expect(prettyUrl).toBe('not-a-url');\r\n        });\r\n    });\r\n\r\n    describe('DOM functionality', () => {\r\n        it('should create complete link field display', () => {\r\n            const updateFn = jest.fn();\r\n            const display = linkProperty.fillDisplay(mockVault, 'https://example.com', updateFn);\r\n            \r\n            expect(linkProperty.vault).toBe(mockVault);\r\n            expect(display).toBeTruthy();\r\n            \r\n            // Should contain link-specific elements\r\n            const link = display.querySelector('a');\r\n            expect(link).toBeTruthy();\r\n            expect(link?.href).toBe('https://example.com/'); // Browsers normalize URLs with trailing slash\r\n        });\r\n    });\r\n\r\n    describe('edge cases and error handling', () => {\r\n        it('should handle malformed URLs in getPretty', () => {\r\n            // These should fallback to removing protocol\r\n            expect(linkProperty.getPretty('http://malformed')).toBe('malformed');\r\n            expect(linkProperty.getPretty('https://another.malformed')).toBe('another.malformed');\r\n            \r\n            // Non-http/https protocols get processed by the fallback regex that strips http/https only\r\n            expect(linkProperty.getPretty('invalid-protocol://test')).toBe('test');\r\n        });\r\n\r\n        it('should handle very long URLs', () => {\r\n            const longUrl = 'https://example.com/very/long/path/with/many/segments/that/should/be/truncated';\r\n            const result = linkProperty.getPretty(longUrl);\r\n            expect(result).toMatch(/example\\.com\\/very\\/long\\/\\.\\.\\./);\r\n        });\r\n\r\n        it('should handle international domains', () => {\r\n            // Basic test for international domains\r\n            const internationalUrl = 'https://example.org/test';\r\n            expect(linkProperty.validate('example.org/test')).toBe('http://example.org/test');\r\n            expect(linkProperty.getPretty(internationalUrl)).toBe('example.org/test');\r\n        });\r\n\r\n        it('should handle URLs with fragments and queries', () => {\r\n            const complexUrl = 'https://example.com/path?query=value#fragment';\r\n            const pretty = linkProperty.getPretty(complexUrl);\r\n            expect(pretty).toBe('example.com/path');\r\n        });\r\n    });\r\n});"],"version":3}