87b440b92163e0d505fb15acf5ca39b1
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock des dÃ©pendances
jest.mock('../src/vault/Utils', () => ({
    setIcon: jest.fn((element, icon) => {
        const svg = document.createElement('svg');
        svg.setAttribute('data-icon', icon);
        element.appendChild(svg);
    })
}));
const RatingProperty_1 = require("../src/properties/RatingProperty");
const { setIcon } = require('../src/vault/Utils');
describe('RatingProperty', () => {
    let ratingProperty;
    let mockUpdate;
    let mockVault;
    beforeEach(() => {
        mockUpdate = jest.fn();
        mockVault = {
            vault: {
                adapter: {
                    fs: {}
                }
            }
        };
        // Clear all mocks
        jest.clearAllMocks();
    });
    describe('Constructor', () => {
        test('should create instance with default icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
            expect(ratingProperty.name).toBe('rating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('star');
        });
        test('should create instance with custom icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('customRating', { icon: 'heart' });
            expect(ratingProperty.name).toBe('customRating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('heart');
        });
        test('should use star as default when empty args provided', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('test', {});
            expect(ratingProperty.icon).toBe('align-left'); // Parent class default when args is empty object
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should create display with correct structure', () => {
            const result = ratingProperty.fillDisplay(mockVault, '+++', mockUpdate);
            expect(result.classList.contains('metadata-field')).toBe(true);
            const columnContainer = result.querySelector('.field-container-column');
            expect(columnContainer).toBeTruthy();
            const header = columnContainer?.querySelector('.metadata-header');
            expect(header?.textContent).toBe('rating');
            const starRating = columnContainer?.querySelector('.star-rating');
            expect(starRating).toBeTruthy();
        });
        test('should set vault property', () => {
            ratingProperty.fillDisplay(mockVault, '++', mockUpdate);
            expect(ratingProperty.vault).toBe(mockVault);
        });
    });
    describe('createStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should create container with correct class and 5 stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container.classList.contains('star-rating')).toBe(true);
            const stars = container.querySelectorAll('.star');
            expect(stars.length).toBe(5);
        });
        test('should set correct data-value attributes', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                expect(star.getAttribute('data-value')).toBe((index + 1).toString());
            });
        });
        test('should call setIcon for each star', () => {
            ratingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5);
        });
        test('should use custom icon when provided', () => {
            const customRatingProperty = new RatingProperty_1.RatingProperty('rating', { icon: 'heart' });
            customRatingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5); // Verify called for all 5 stars
        });
        test('should add event listeners to stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const star = container.querySelector('.star');
            // Mock the methods that will be called
            ratingProperty.previewStars = jest.fn();
            ratingProperty.updateStarRating = jest.fn();
            // Test mouseover event
            star.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 1);
        });
        test('should handle click event and call update with correct plus signs', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.updateStarRating = jest.fn();
            // Click the third star
            thirdStar.click();
            // Wait for async operations
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++');
        });
        test('should handle different star clicks correctly', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click first star
            stars[0].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+');
            // Click last star
            stars[4].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++++');
        });
    });
    describe('updateStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should call updateStarRating method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'updateStarRating');
            ratingProperty.updateStarRating(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various rating values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.updateStarRating(container, 0);
                ratingProperty.updateStarRating(container, 3);
                ratingProperty.updateStarRating(container, 5);
                ratingProperty.updateStarRating(container, 10); // Over limit
            }).not.toThrow();
        });
    });
    describe('previewStars', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should call previewStars method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'previewStars');
            ratingProperty.previewStars(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various preview values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.previewStars(container, 0);
                ratingProperty.previewStars(container, 3);
                ratingProperty.previewStars(container, 5);
                ratingProperty.previewStars(container, -1); // Negative
            }).not.toThrow();
        });
    });
    describe('Value handling', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should handle empty value', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle single plus value', () => {
            const container = ratingProperty.createStarRating('+', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle multiple plus values', () => {
            const container = ratingProperty.createStarRating('+++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle maximum rating', () => {
            const container = ratingProperty.createStarRating('+++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle over-maximum rating', () => {
            const container = ratingProperty.createStarRating('++++++++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
    });
    describe('Integration tests', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should work with complete workflow', async () => {
            // Create full display
            const display = ratingProperty.fillDisplay(mockVault, '++', mockUpdate);
            const starContainer = display.querySelector('.star-rating');
            expect(starContainer).toBeTruthy();
            // Simulate clicking the 4th star
            const fourthStar = starContainer.querySelectorAll('.star')[3];
            fourthStar.click();
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have called update with 4 plus signs
            expect(mockUpdate).toHaveBeenCalledWith('++++');
        });
        test('should maintain state during multiple interactions', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click multiple stars in sequence
            stars[2].click(); // 3 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[0].click(); // 1 star
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[4].click(); // 5 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have been called with correct values
            expect(mockUpdate).toHaveBeenCalledTimes(3);
            expect(mockUpdate).toHaveBeenNthCalledWith(1, '+++');
            expect(mockUpdate).toHaveBeenNthCalledWith(2, '+');
            expect(mockUpdate).toHaveBeenNthCalledWith(3, '+++++');
        });
        test('should handle mouseover and mouseleave events', () => {
            const container = ratingProperty.createStarRating('++', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.previewStars = jest.fn();
            // Test mouseover
            thirdStar.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 3);
            // Test mouseleave
            thirdStar.dispatchEvent(new Event('mouseleave'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 2); // Should restore to current rating
        });
    });
    describe('Edge cases', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating');
        });
        test('should handle undefined vault', () => {
            expect(() => {
                ratingProperty.fillDisplay(undefined, '+++', mockUpdate);
            }).not.toThrow();
        });
        test('should handle null update function', () => {
            expect(() => {
                ratingProperty.createStarRating('+++', null);
            }).not.toThrow();
        });
        test('should handle invalid value format', () => {
            expect(() => {
                ratingProperty.createStarRating('invalid', mockUpdate);
            }).not.toThrow();
        });
        test('should handle special characters in value', () => {
            expect(() => {
                ratingProperty.createStarRating('+++abc+++', mockUpdate);
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhdGluZ1Byb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFFQSx1QkFBdUI7QUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25DLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBZ0IsRUFBRSxJQUFZLEVBQUUsRUFBRTtRQUNoRCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFUSixxRUFBa0U7QUFXbEUsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBRWxELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxjQUE4QixDQUFDO0lBQ25DLElBQUksVUFBcUIsQ0FBQztJQUMxQixJQUFJLFNBQWMsQ0FBQztJQUVuQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUN2QixTQUFTLEdBQUc7WUFDUixLQUFLLEVBQUU7Z0JBQ0gsT0FBTyxFQUFFO29CQUNMLEVBQUUsRUFBRSxFQUFFO2lCQUNUO2FBQ0o7U0FDSixDQUFDO1FBRUYsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUU5QyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx5Q0FBeUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxxREFBcUQsRUFBRSxHQUFHLEVBQUU7WUFDN0QsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxpREFBaUQ7UUFDckcsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQ3pCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUN0RCxNQUFNLE1BQU0sR0FBRyxjQUFjLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFeEUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFL0QsTUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ3hFLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUVyQyxNQUFNLE1BQU0sR0FBRyxlQUFlLEVBQUUsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDbEUsTUFBTSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFM0MsTUFBTSxVQUFVLEdBQUcsZUFBZSxFQUFFLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNsRSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDcEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1lBQ25DLGNBQWMsQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUV4RCxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUM5QixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ1osY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7WUFDaEUsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVsRSxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFL0QsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUVsRCxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUMxQixNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQ3pFLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLG9CQUFvQixHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUU3RSxvQkFBb0IsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFdEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO1FBQzlFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFnQixDQUFDO1lBRTdELHVDQUF1QztZQUN2QyxjQUFjLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUN4QyxjQUFjLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRTVDLHVCQUF1QjtZQUN2QixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0UsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsbUVBQW1FLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDakYsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNsRSxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFnQixDQUFDO1lBRXhFLGNBQWMsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFFNUMsdUJBQXVCO1lBQ3ZCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUVsQiw0QkFBNEI7WUFDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVyRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsK0NBQStDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0QsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNsRSxNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFbEQsbUJBQW1CO1lBQ2xCLEtBQUssQ0FBQyxDQUFDLENBQWlCLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDbEMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFN0Msa0JBQWtCO1lBQ2pCLEtBQUssQ0FBQyxDQUFDLENBQWlCLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDbEMsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbEUsb0JBQW9CO1lBQ3BCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFFM0QsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUU5QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRWxFLDRDQUE0QztZQUM1QyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxhQUFhO1lBQ2pFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDMUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbEUsb0JBQW9CO1lBQ3BCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBRXZELGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1lBQzlDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbEUsNENBQTRDO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxjQUFjLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVc7WUFDM0QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzVCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtZQUNuQyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRWxFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMvQixNQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVuRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFckUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtZQUN0QyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRXZFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMvQixNQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUU1RSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEQsc0JBQXNCO1lBQ3RCLE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUN4RSxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBbUIsQ0FBQztZQUU5RSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFFbkMsaUNBQWlDO1lBQ2pDLE1BQU0sVUFBVSxHQUFHLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUM7WUFDN0UsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBRW5CLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckQsOENBQThDO1lBQzlDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvREFBb0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsRSxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUVsRCxtQ0FBbUM7WUFDbEMsS0FBSyxDQUFDLENBQUMsQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLFVBQVU7WUFDN0MsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVwRCxLQUFLLENBQUMsQ0FBQyxDQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsU0FBUztZQUM1QyxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXBELEtBQUssQ0FBQyxDQUFDLENBQWlCLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxVQUFVO1lBQzdDLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckQsOENBQThDO1lBQzlDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3JELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7WUFDdkQsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNwRSxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFnQixDQUFDO1lBRXhFLGNBQWMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRXhDLGlCQUFpQjtZQUNqQixTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFdkUsa0JBQWtCO1lBQ2xCLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLG1DQUFtQztRQUMvRyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7UUFDeEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLFdBQVcsQ0FBQyxTQUFnQixFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNwRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxJQUFXLENBQUMsQ0FBQztZQUN4RCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1lBQ25ELE1BQU0sQ0FBQyxHQUFHLEVBQUU7Z0JBQ1IsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM3RCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxSYXRpbmdQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJhdGluZ1Byb3BlcnR5IH0gZnJvbSAnLi4vc3JjL3Byb3BlcnRpZXMvUmF0aW5nUHJvcGVydHknO1xyXG5cclxuLy8gTW9jayBkZXMgZMOpcGVuZGFuY2VzXHJcbmplc3QubW9jaygnLi4vc3JjL3ZhdWx0L1V0aWxzJywgKCkgPT4gKHtcclxuICAgIHNldEljb246IGplc3QuZm4oKGVsZW1lbnQ6IEVsZW1lbnQsIGljb246IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicsIGljb24pO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnKTtcclxuICAgIH0pXHJcbn0pKTtcclxuXHJcbmNvbnN0IHsgc2V0SWNvbiB9ID0gcmVxdWlyZSgnLi4vc3JjL3ZhdWx0L1V0aWxzJyk7XHJcblxyXG5kZXNjcmliZSgnUmF0aW5nUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgcmF0aW5nUHJvcGVydHk6IFJhdGluZ1Byb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tVcGRhdGU6IGplc3QuTW9jaztcclxuICAgIGxldCBtb2NrVmF1bHQ6IGFueTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgIG1vY2tWYXVsdCA9IHtcclxuICAgICAgICAgICAgdmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIGFkYXB0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBmczoge31cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2xlYXIgYWxsIG1vY2tzXHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnQ29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5Lm5hbWUpLnRvQmUoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkudHlwZSkudG9CZSgncmF0aW5nJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5pY29uKS50b0JlKCdzdGFyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgaW5zdGFuY2Ugd2l0aCBjdXN0b20gaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ2N1c3RvbVJhdGluZycsIHsgaWNvbjogJ2hlYXJ0JyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5uYW1lKS50b0JlKCdjdXN0b21SYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnR5cGUpLnRvQmUoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkuaWNvbikudG9CZSgnaGVhcnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVzZSBzdGFyIGFzIGRlZmF1bHQgd2hlbiBlbXB0eSBhcmdzIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgndGVzdCcsIHt9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5pY29uKS50b0JlKCdhbGlnbi1sZWZ0Jyk7IC8vIFBhcmVudCBjbGFzcyBkZWZhdWx0IHdoZW4gYXJncyBpcyBlbXB0eSBvYmplY3RcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGRpc3BsYXkgd2l0aCBjb3JyZWN0IHN0cnVjdHVyZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmF0aW5nUHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCAnKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtZmllbGQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbkNvbnRhaW5lciA9IHJlc3VsdC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtY29udGFpbmVyLWNvbHVtbicpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29sdW1uQ29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBjb2x1bW5Db250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1oZWFkZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcj8udGV4dENvbnRlbnQpLnRvQmUoJ3JhdGluZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc3RhclJhdGluZyA9IGNvbHVtbkNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLnN0YXItcmF0aW5nJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdGFyUmF0aW5nKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgdmF1bHQgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgJysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVTdGFyUmF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29udGFpbmVyIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgNSBzdGFycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc3Rhci1yYXRpbmcnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdGFycy5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgY29ycmVjdCBkYXRhLXZhbHVlIGF0dHJpYnV0ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChzdGFyLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpKS50b0JlKChpbmRleCArIDEpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNhbGwgc2V0SWNvbiBmb3IgZWFjaCBzdGFyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgY3VzdG9tIGljb24gd2hlbiBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tUmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycsIHsgaWNvbjogJ2hlYXJ0JyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGN1c3RvbVJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNldEljb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg1KTsgLy8gVmVyaWZ5IGNhbGxlZCBmb3IgYWxsIDUgc3RhcnNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gc3RhcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zdGFyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSBtZXRob2RzIHRoYXQgd2lsbCBiZSBjYWxsZWRcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS51cGRhdGVTdGFyUmF0aW5nID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCBtb3VzZW92ZXIgZXZlbnRcclxuICAgICAgICAgICAgc3Rhci5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VvdmVyJykpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNsaWNrIGV2ZW50IGFuZCBjYWxsIHVwZGF0ZSB3aXRoIGNvcnJlY3QgcGx1cyBzaWducycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXJkU3RhciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpWzJdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIHRoZSB0aGlyZCBzdGFyXHJcbiAgICAgICAgICAgIHRoaXJkU3Rhci5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYXN5bmMgb3BlcmF0aW9uc1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcrKysnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgc3RhciBjbGlja3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIGZpcnN0IHN0YXJcclxuICAgICAgICAgICAgKHN0YXJzWzBdIGFzIEhUTUxFbGVtZW50KS5jbGljaygpO1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJysnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIGxhc3Qgc3RhclxyXG4gICAgICAgICAgICAoc3RhcnNbNF0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnKysrKysnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd1cGRhdGVTdGFyUmF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHVwZGF0ZVN0YXJSYXRpbmcgbWV0aG9kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNweSBvbiB0aGUgbWV0aG9kXHJcbiAgICAgICAgICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24ocmF0aW5nUHJvcGVydHksICd1cGRhdGVTdGFyUmF0aW5nJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS51cGRhdGVTdGFyUmF0aW5nKGNvbnRhaW5lciwgMyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHZhcmlvdXMgcmF0aW5nIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IHRoYXQgbWV0aG9kIGV4aXN0cyBhbmQgY2FuIGJlIGNhbGxlZFxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDApO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDUpO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDEwKTsgLy8gT3ZlciBsaW1pdFxyXG4gICAgICAgICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3ByZXZpZXdTdGFycycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsbCBwcmV2aWV3U3RhcnMgbWV0aG9kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNweSBvbiB0aGUgbWV0aG9kXHJcbiAgICAgICAgICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24ocmF0aW5nUHJvcGVydHksICdwcmV2aWV3U3RhcnMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXJpb3VzIHByZXZpZXcgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRlc3QgdGhhdCBtZXRob2QgZXhpc3RzIGFuZCBjYW4gYmUgY2FsbGVkXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMoY29udGFpbmVyLCAwKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKGNvbnRhaW5lciwgNSk7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMoY29udGFpbmVyLCAtMSk7IC8vIE5lZ2F0aXZlXHJcbiAgICAgICAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnVmFsdWUgaGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIHBsdXMgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpLmxlbmd0aCkudG9CZSg1KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBwbHVzIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWF4aW11bSByYXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgb3Zlci1tYXhpbXVtIHJhdGluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysrKysrKysrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJykubGVuZ3RoKS50b0JlKDUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHRlc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB3b3JrIHdpdGggY29tcGxldGUgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBmdWxsIGRpc3BsYXlcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgJysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJDb250YWluZXIgPSBkaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoJy5zdGFyLXJhdGluZycpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHN0YXJDb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGNsaWNraW5nIHRoZSA0dGggc3RhclxyXG4gICAgICAgICAgICBjb25zdCBmb3VydGhTdGFyID0gc3RhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpWzNdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBmb3VydGhTdGFyLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2hvdWxkIGhhdmUgY2FsbGVkIHVwZGF0ZSB3aXRoIDQgcGx1cyBzaWduc1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJysrKysnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIG1haW50YWluIHN0YXRlIGR1cmluZyBtdWx0aXBsZSBpbnRlcmFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2xpY2sgbXVsdGlwbGUgc3RhcnMgaW4gc2VxdWVuY2VcclxuICAgICAgICAgICAgKHN0YXJzWzJdIGFzIEhUTUxFbGVtZW50KS5jbGljaygpOyAvLyAzIHN0YXJzXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAoc3RhcnNbMF0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7IC8vIDEgc3RhclxyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgKHN0YXJzWzRdIGFzIEhUTUxFbGVtZW50KS5jbGljaygpOyAvLyA1IHN0YXJzXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaG91bGQgaGF2ZSBiZWVuIGNhbGxlZCB3aXRoIGNvcnJlY3QgdmFsdWVzXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgxLCAnKysrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgyLCAnKycpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMywgJysrKysrJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbW91c2VvdmVyIGFuZCBtb3VzZWxlYXZlIGV2ZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgdGhpcmRTdGFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJylbMl0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IG1vdXNlb3ZlclxyXG4gICAgICAgICAgICB0aGlyZFN0YXIuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlb3ZlcicpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRlc3QgbW91c2VsZWF2ZVxyXG4gICAgICAgICAgICB0aGlyZFN0YXIuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlbGVhdmUnKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvbnRhaW5lciwgMik7IC8vIFNob3VsZCByZXN0b3JlIHRvIGN1cnJlbnQgcmF0aW5nXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnRWRnZSBjYXNlcycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCB2YXVsdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KHVuZGVmaW5lZCBhcyBhbnksICcrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHVwZGF0ZSBmdW5jdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrKycsIG51bGwgYXMgYW55KTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHZhbHVlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJ2ludmFsaWQnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKythYmMrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9