{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiFileProperty.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiFileProperty.ts"],"sourcesContent":["\r\nimport { ObjectProperty } from \"./ObjectProperty\";\r\nimport { FileProperty } from \"./FileProperty\";\r\nimport { setIcon } from \"../vault/Utils\";\r\nimport { File } from \"../vault/File\";\r\nimport { MyVault } from \"../vault/MyVault\";\r\n\r\n// Declare selectMultipleFile as external function for TypeScript\r\ndeclare global {\r\n    var selectMultipleFile: (vault: any, classes: string[], options: any) => Promise<any>;\r\n}\r\n\r\n\r\nexport class MultiFileProperty extends ObjectProperty {\r\n\r\n    public override type : string = \"multiFile\";\r\n    public classes: string[];\r\n    public property : FileProperty;\r\n    public override flexSpan = 2;\r\n\r\n\r\n    constructor(name: string, classes : string[], args = {}){\r\n        super(name, {}, args);\r\n        this.classes = classes;\r\n        this.property = new FileProperty(name, classes, args);\r\n    }\r\n\r\n    override getClasses(): string[] {\r\n        return this.classes;\r\n    }\r\n\r\n    override getParentValue(values : any) : File | undefined{\r\n        return this.property.getParentValue(values)\r\n    }\r\n\r\n    override formatParentValue(value : string){\r\n        return [value]\r\n    }\r\n\r\n    // Méthode principale pour obtenir l'affichage\r\n    override fillDisplay(vault : any,values: any, update: (value: any) => Promise<void>) {\r\n        this.vault = vault;\r\n        const container = document.createElement(\"div\");\r\n        container.classList.add(\"metadata-multiFiles-container-\"+this.name.toLowerCase());\r\n        container.classList.add(\"metadata-multiFiles-container\");\r\n\r\n        // Créer les lignes d'objet\r\n        this.createObjects(values, update, container);\r\n\r\n        const addButton = this.createAddButton(values, update, container);\r\n        container.appendChild(addButton);\r\n\r\n        return container;\r\n    }\r\n\r\n    override createObjects(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        if (!values) return;\r\n        values.forEach((objects: any, index: number) => {\r\n            const row = this.createObjectRow(values, update, objects, index, container);\r\n            container.appendChild(row);\r\n        });\r\n    }\r\n\r\n    override createObjectRow(values: any, update: (value: any) => Promise<void>, value: any, index: number, container: HTMLDivElement): HTMLDivElement {\r\n        const row = document.createElement(\"div\");\r\n        row.classList.add(\"metadata-multiFiles-row-inline\");\r\n\r\n        // Ajouter le bouton de suppression\r\n        const deleteButton = this.createDeleteButton(values, update, index, container);\r\n        row.appendChild(deleteButton);\r\n\r\n\r\n \r\n        let propertyContainer = document.createElement(\"div\");\r\n        propertyContainer.classList.add(\"metadata-multiFiles-property-inline\");\r\n        propertyContainer.appendChild(this.property.fillDisplay(this.vault, value, async (value) => await this.updateObject(values, update, index, this.property, value)));\r\n        row.appendChild(propertyContainer);\r\n\r\n        return row;\r\n    }\r\n\r\n    override createDeleteButton(values: any, update: (value: any) => Promise<void>, index: number, container: HTMLDivElement): HTMLButtonElement {\r\n        const deleteButton = document.createElement(\"button\");\r\n        setIcon(deleteButton, \"minus\");\r\n        deleteButton.classList.add(\"metadata-delete-button-inline-small\");\r\n        deleteButton.onclick = async () => await this.removeProperty(values, update, index, container);\r\n        return deleteButton;\r\n    }\r\n\r\n    override async addProperty(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        const newFiles = await globalThis.selectMultipleFile(this.vault, this.classes, { hint: \"Choisissez des fichiers \" + this.getClasses().join(\" ou \") });\r\n        if (newFiles && newFiles.length > 0) {\r\n            if (!values) { values = []; }\r\n            newFiles.forEach((file: File) => {\r\n                values.push(file.getLink());\r\n            });\r\n            await update(values);\r\n            await this.reloadObjects(values, update);\r\n        }\r\n    }\r\n\r\n    override createAddButton(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement): HTMLButtonElement {\r\n        const addButton = document.createElement(\"button\");\r\n        setIcon(addButton, \"plus\");\r\n        addButton.classList.add(\"metadata-add-button-inline-small\");\r\n        addButton.onclick = async () => await this.addProperty(values, update, container);\r\n        return addButton;\r\n    }\r\n\r\n    override enableDragAndDrop() {\r\n        // Disable drag and drop\r\n    }\r\n}\r\n"],"version":3}