{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\DateProperty.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\DateProperty.test.ts"],"sourcesContent":["/**\r\n * @jest-environment jsdom\r\n */\r\n\r\nimport { DateProperty } from './DateProperty';\r\n\r\n// Mock Obsidian modules\r\njest.mock('obsidian', () => ({}), { virtual: true });\r\n\r\n// Mock flatpickr completely\r\njest.mock('flatpickr', () => {\r\n    const mockInstance = {\r\n        destroy: jest.fn(),\r\n        setDate: jest.fn(),\r\n        clear: jest.fn()\r\n    };\r\n    \r\n    const mockFlatpickr = jest.fn((element, options) => {\r\n        (element as any).flatpickrOptions = options;\r\n        (element as any).flatpickrInstance = mockInstance;\r\n        return mockInstance;\r\n    });\r\n    \r\n    return mockFlatpickr;\r\n});\r\n\r\n// Mock French locale\r\njest.mock('flatpickr/dist/l10n/fr.js', () => ({\r\n    French: { locale: 'fr' }\r\n}));\r\n\r\n// Mock all dependencies  \r\njest.mock('../vault/File', () => ({}));\r\njest.mock('../vault/MyVault', () => ({}));\r\njest.mock('../classes/Classe', () => ({}));\r\njest.mock('../vault/Utils', () => ({\r\n    setIcon: jest.fn((element: HTMLElement, iconName: string) => {\r\n        element.setAttribute('data-icon', iconName);\r\n        element.textContent = `[${iconName}]`;\r\n    })\r\n}));\r\n\r\n// Mock Property base class\r\njest.mock('./Property', () => {\r\n    return {\r\n        Property: class MockProperty {\r\n            name: string;\r\n            type: string;\r\n            title: string = '';\r\n            static: boolean = false;\r\n            icon: string = '';\r\n            default: any;\r\n            vault: any;\r\n\r\n            constructor(name: string, type: string, ...args: any[]) {\r\n                this.name = name;\r\n                this.type = type;\r\n                \r\n                if (args.length > 0 && typeof args[0] === 'object') {\r\n                    Object.assign(this, args[0]);\r\n                }\r\n            }\r\n\r\n            read = jest.fn(() => '');\r\n            validate = jest.fn((value: string) => value);\r\n            getPretty = jest.fn(() => '');\r\n            getDisplay = jest.fn(() => document.createElement('div'));\r\n            fillDisplay = jest.fn(() => {\r\n                const div = document.createElement('div');\r\n                div.classList.add('field-container-column');\r\n                const field = document.createElement('div');\r\n                field.classList.add('metadata-field');\r\n                div.appendChild(field);\r\n                return div;\r\n            });\r\n        }\r\n    };\r\n});\r\n\r\ndescribe('DateProperty', () => {\r\n    let dateProperty: DateProperty;\r\n    let mockVault: any;\r\n    let mockFile: any;\r\n\r\n    beforeEach(() => {\r\n        jest.clearAllMocks();\r\n        document.body.innerHTML = '';\r\n        \r\n        mockVault = {\r\n            app: { vault: { getFiles: jest.fn(() => []) } }\r\n        };\r\n\r\n        mockFile = {\r\n            getMetadata: jest.fn(() => ({ eventDate: '2024-03-15' })),\r\n            getMetadataValue: jest.fn((key: string) => key === 'eventDate' ? '2024-03-15' : undefined),\r\n            updateMetadata: jest.fn(),\r\n            vault: mockVault\r\n        };\r\n\r\n        dateProperty = new DateProperty('eventDate', ['today', 'tomorrow', 'next-week']);\r\n        \r\n        jest.useFakeTimers();\r\n        jest.setSystemTime(new Date('2024-03-15T10:00:00Z'));\r\n    });\r\n\r\n    afterEach(() => {\r\n        jest.useRealTimers();\r\n    });\r\n\r\n    describe('constructor', () => {\r\n        it('should create DateProperty with correct properties', () => {\r\n            const quickIcons = ['today', 'tomorrow'];\r\n            const prop = new DateProperty('testDate', quickIcons);\r\n            \r\n            expect(prop.name).toBe('testDate');\r\n            expect(prop.type).toBe('date');\r\n            expect((prop as any).quickSelectIcons).toEqual(quickIcons);\r\n        });\r\n    });\r\n\r\n    describe('formatDateForStorage', () => {\r\n        it('should format date in YYYY-MM-DD format', () => {\r\n            const testDate = new Date('2024-03-15T10:30:00Z');\r\n            const result = dateProperty.formatDateForStorage(testDate);\r\n            expect(result).toBe('2024-03-15');\r\n        });\r\n    });\r\n\r\n    describe('formatDateForDisplay', () => {\r\n        it('should format valid date strings', () => {\r\n            const result = dateProperty.formatDateForDisplay('2024-03-15');\r\n            expect(result).toBeTruthy();\r\n            expect(typeof result).toBe('string');\r\n        });\r\n\r\n        it('should handle invalid dates', () => {\r\n            const result = dateProperty.formatDateForDisplay('invalid-date');\r\n            expect(result).toBe('Date invalide');\r\n        });\r\n    });\r\n\r\n    describe('getDateForOption', () => {\r\n        it('should return correct dates for standard options', () => {\r\n            const today = dateProperty.getDateForOption('today');\r\n            expect(today.getDate()).toBe(15);\r\n            \r\n            const tomorrow = dateProperty.getDateForOption('tomorrow');\r\n            expect(tomorrow.getDate()).toBe(16);\r\n        });\r\n    });\r\n\r\n    describe('createFieldLink', () => {\r\n        it('should create a clickable link element', () => {\r\n            const link = dateProperty.createFieldLink('2024-03-15');\r\n            \r\n            expect(link.tagName).toBe('DIV');\r\n            expect(link.classList.contains('field-link')).toBe(true);\r\n            expect(link.style.cursor).toBe('pointer');\r\n        });\r\n\r\n        it('should show placeholder for empty values', () => {\r\n            const link = dateProperty.createFieldLink('');\r\n            expect(link.textContent).toBe('Aucune date sélectionnée');\r\n        });\r\n    });\r\n\r\n    describe('createFieldDate', () => {\r\n        it('should create input with flatpickr initialization', () => {\r\n            const updateFn = jest.fn();\r\n            const link = document.createElement('div');\r\n            \r\n            const input = dateProperty.createFieldDate('2024-03-15', updateFn, link);\r\n            \r\n            expect(input.tagName).toBe('INPUT');\r\n            expect(input.value).toBe('2024-03-15');\r\n            expect((input as any).flatpickrInstance).toBeDefined();\r\n        });\r\n    });\r\n\r\n    describe('createQuickSelect', () => {\r\n        it('should create buttons for quick select options', () => {\r\n            const updateFn = jest.fn();\r\n            const link = document.createElement('div');\r\n            const input = document.createElement('input') as HTMLInputElement;\r\n            \r\n            const container = dateProperty.createQuickSelect('', updateFn, link, input);\r\n            \r\n            expect(container.tagName).toBe('DIV');\r\n            expect(container.classList.contains('quick-select-container')).toBe(true);\r\n            \r\n            const buttons = container.querySelectorAll('button');\r\n            expect(buttons.length).toBe(3);\r\n        });\r\n    });\r\n\r\n    describe('updateField', () => {\r\n        it('should update field with valid input', async () => {\r\n            const updateFn = jest.fn().mockResolvedValue(undefined);\r\n            const input = document.createElement('input') as HTMLInputElement;\r\n            const link = document.createElement('div');\r\n            \r\n            input.value = '2024-03-20';\r\n            dateProperty.validate = jest.fn(() => '2024-03-20');\r\n            \r\n            await dateProperty.updateField(updateFn, input, link);\r\n            \r\n            expect(updateFn).toHaveBeenCalledWith('2024-03-20');\r\n        });\r\n    });\r\n\r\n    describe('fillDisplay', () => {\r\n        it('should create display structure', () => {\r\n            const updateFn = jest.fn();\r\n            const result = dateProperty.fillDisplay(mockVault, '2024-03-15', updateFn);\r\n            \r\n            expect(result).toBeTruthy();\r\n            expect(result.classList.contains('field-container-column')).toBe(true);\r\n        });\r\n    });\r\n\r\n    describe('edge cases', () => {\r\n        it('should handle null values gracefully', () => {\r\n            expect(() => {\r\n                dateProperty.createFieldLink(null as any);\r\n                dateProperty.formatDateForDisplay('');\r\n            }).not.toThrow();\r\n        });\r\n\r\n        it('should handle empty quick select icons', () => {\r\n            const prop = new DateProperty('test', []);\r\n            const updateFn = jest.fn();\r\n            const link = document.createElement('div');\r\n            const input = document.createElement('input') as HTMLInputElement;\r\n            \r\n            const container = prop.createQuickSelect('', updateFn, link, input);\r\n            const buttons = container.querySelectorAll('button');\r\n            \r\n            expect(buttons.length).toBe(0);\r\n        });\r\n    });\r\n});"],"version":3}