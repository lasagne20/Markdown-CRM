e847d4363f23bd202816583741831783
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock entire modules
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn(),
    Notice: jest.fn(),
    selectFile: jest.fn()
}));
const FileProperty_1 = require("../../src/properties/FileProperty");
const LinkProperty_1 = require("../../src/properties/LinkProperty");
// Mock global functions
global.selectFile = jest.fn();
// Get reference to mocked function
const { selectFile } = require('../../src/vault/Utils');
describe('FileProperty', () => {
    let fileProperty;
    let mockVault;
    beforeEach(() => {
        // Reset DOM mocks
        document.body.innerHTML = '';
        jest.clearAllMocks();
        // Mock vault with necessary methods
        mockVault = {
            readLinkFile: jest.fn(),
            getFromLink: jest.fn(),
            getFromFile: jest.fn(),
            getName: jest.fn().mockReturnValue('TestVault'),
            app: {
                vault: {
                    getName: jest.fn().mockReturnValue('TestVault'),
                    getAbstractFileByPath: jest.fn()
                },
                workspace: {
                    getLeaf: jest.fn().mockReturnValue({
                        openFile: jest.fn()
                    })
                },
                setIcon: jest.fn(),
                selectFile: jest.fn()
            }
        };
    });
    beforeEach(() => {
        fileProperty = new FileProperty_1.FileProperty('testFile', mockVault, ['class1', 'class2']);
    });
    describe('constructor', () => {
        it('should create FileProperty with correct type', () => {
            expect(fileProperty.type).toBe('file');
        });
        it('should inherit from LinkProperty', () => {
            expect(fileProperty).toBeInstanceOf(LinkProperty_1.LinkProperty);
        });
        it('should store classes correctly', () => {
            expect(fileProperty.classes).toEqual(['class1', 'class2']);
        });
        it('should pass args to parent constructor', () => {
            const customArgs = { icon: 'custom-icon' };
            const customProperty = new FileProperty_1.FileProperty('customName', mockVault, ['class1'], customArgs);
            expect(customProperty.name).toBe('customName');
            expect(customProperty.classes).toEqual(['class1']);
        });
        it('should handle empty classes array', () => {
            const emptyClassProperty = new FileProperty_1.FileProperty('empty', mockVault, []);
            expect(emptyClassProperty.classes).toEqual([]);
        });
    });
    describe('getClasses', () => {
        it('should return classes array', () => {
            expect(fileProperty.getClasses()).toEqual(['class1', 'class2']);
        });
        it('should return empty array when no classes', () => {
            const emptyProperty = new FileProperty_1.FileProperty('test', mockVault, []);
            expect(emptyProperty.getClasses()).toEqual([]);
        });
        it('should return same reference to classes array', () => {
            const classes = ['test1', 'test2'];
            const property = new FileProperty_1.FileProperty('test', mockVault, classes);
            expect(property.getClasses()).toBe(classes);
        });
    });
    //     it('should handle object values', () => {
    //         const objectValue = { test: 'value' };
    //         expect(fileProperty.getParentValue(objectValue)).toBe(objectValue);
    //     });
    // });
    describe('getPretty', () => {
        it('should call vault.readLinkFile with value', () => {
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.vault = mockVault;
            const result = fileProperty.getPretty(testValue);
            expect(mockVault.readLinkFile).toHaveBeenCalledWith(testValue);
            expect(result).toBe('TestFile');
        });
        it('should handle empty value', () => {
            mockVault.readLinkFile.mockReturnValue('');
            fileProperty.vault = mockVault;
            const result = fileProperty.getPretty('');
            expect(mockVault.readLinkFile).toHaveBeenCalledWith('');
            expect(result).toBe('');
        });
    });
    describe('getClasse', () => {
        it('should return classe when found', () => {
            const mockClasse = { name: 'TestClass' };
            const mockRead = {};
            const testLink = '[[TestFile]]';
            fileProperty.read = jest.fn().mockReturnValue(testLink);
            mockVault.getFromLink.mockReturnValue(mockClasse);
            fileProperty.vault = mockVault;
            const result = fileProperty.getClasse(mockRead);
            expect(fileProperty.read).toHaveBeenCalledWith(mockRead);
            expect(mockVault.getFromLink).toHaveBeenCalledWith(testLink);
            expect(result).toBe(mockClasse);
        });
        it('should return undefined when no link found', () => {
            const mockRead = {};
            fileProperty.read = jest.fn().mockReturnValue(null);
            fileProperty.vault = mockVault;
            const result = fileProperty.getClasse(mockRead);
            expect(result).toBeUndefined();
        });
        it('should return undefined when classe not found', () => {
            const mockRead = {};
            const testLink = '[[TestFile]]';
            fileProperty.read = jest.fn().mockReturnValue(testLink);
            mockVault.getFromLink.mockReturnValue(null);
            fileProperty.vault = mockVault;
            const result = fileProperty.getClasse(mockRead);
            expect(result).toBeUndefined();
        });
    });
    describe('validate', () => {
        it('should extract and return valid Obsidian link', () => {
            const input = '[[TestFile]]';
            expect(fileProperty.validate(input)).toBe('[[TestFile]]');
        });
        it('should extract link from text with link', () => {
            const input = 'Some text [[TestFile]] more text';
            expect(fileProperty.validate(input)).toBe('[[TestFile]]');
        });
        it('should handle link with alias', () => {
            const input = '[[TestFile|Alias]]';
            expect(fileProperty.validate(input)).toBe('[[TestFile|Alias]]');
        });
        it('should return empty string for invalid format', () => {
            const input = 'Just plain text';
            expect(fileProperty.validate(input)).toBe('');
        });
        it('should return empty string for malformed links', () => {
            const input = '[[TestFile';
            expect(fileProperty.validate(input)).toBe('');
        });
        it('should handle empty string', () => {
            expect(fileProperty.validate('')).toBe('');
        });
        it('should handle multiple links and return first', () => {
            const input = '[[FirstFile]] and [[SecondFile]]';
            expect(fileProperty.validate(input)).toBe('[[FirstFile]]');
        });
    });
    describe('getLink', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should generate obsidian URL with file path when file exists', () => {
            const testValue = '[[TestFile]]';
            const filePath = 'path/to/TestFile.md';
            mockVault.readLinkFile.mockReturnValueOnce(filePath).mockReturnValueOnce('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(true);
            const result = fileProperty.getLink(testValue);
            expect(result).toBe('obsidian://open?vault=TestVault&file=path%2Fto%2FTestFile.md');
        });
        it('should use fallback when file does not exist', () => {
            const testValue = '[[TestFile]]';
            const filePath = 'path/to/TestFile.md';
            mockVault.readLinkFile.mockReturnValueOnce(filePath).mockReturnValueOnce('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            const result = fileProperty.getLink(testValue);
            expect(result).toBe('obsidian://open?vault=TestVault&file=TestFile');
        });
        it('should set vault when provided as parameter', () => {
            const newVault = { ...mockVault };
            fileProperty.vault = null;
            mockVault.readLinkFile.mockReturnValue('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            fileProperty.getLink('[[TestFile]]', newVault);
            expect(fileProperty.vault).toBe(newVault);
        });
        it('should encode special characters in vault name', () => {
            const testValue = '[[TestFile]]';
            mockVault.app.vault.getName.mockReturnValue('My Vault & Stuff');
            mockVault.readLinkFile.mockReturnValue('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            const result = fileProperty.getLink(testValue);
            expect(result).toContain('vault=My%20Vault%20%26%20Stuff');
        });
    });
    describe('createIconContainer', () => {
        it('should create icon container with correct structure', () => {
            const mockUpdate = jest.fn();
            const result = fileProperty.createIconContainer(mockUpdate);
            expect(result.tagName).toBe('DIV');
            expect(result.classList.contains('icon-container')).toBe(true);
            expect(result.children.length).toBe(1);
        });
        it('should set cursor pointer when not static', () => {
            const mockUpdate = jest.fn();
            fileProperty.static = false;
            const result = fileProperty.createIconContainer(mockUpdate);
            const icon = result.children[0];
            expect(icon.style.cursor).toBe('pointer');
        });
        it('should not set cursor pointer when static', () => {
            const mockUpdate = jest.fn();
            fileProperty.static = true;
            const result = fileProperty.createIconContainer(mockUpdate);
            const icon = result.children[0];
            expect(icon.style.cursor).toBe('');
        });
    });
    describe('handleIconClick', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should call selectFile with correct parameters', async () => {
            const mockUpdate = jest.fn();
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(null);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockVault.app.selectFile).toHaveBeenCalledWith(mockVault, ['class1', 'class2'], { hint: "Choisissez un fichier class1 ou class2" });
        });
        it('should update value when file selected', async () => {
            const mockUpdate = jest.fn();
            const mockFile = {
                getLink: jest.fn().mockReturnValue('[[SelectedFile]]')
            };
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(mockFile);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockUpdate).toHaveBeenCalledWith('[[SelectedFile]]');
        });
        it('should not update when no file selected', async () => {
            const mockUpdate = jest.fn();
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(null);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockUpdate).not.toHaveBeenCalled();
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should create field container with correct structure', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            expect(result.tagName).toBe('DIV');
            expect(result.classList.contains('field-container')).toBe(true);
        });
        it('should create link with correct href and text', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = result.querySelector('a');
            expect(link?.href).toBe('obsidian://test');
            expect(link?.textContent).toBe('TestFile');
            expect(link?.classList.contains('field-link')).toBe(true);
        });
        it('should handle empty value', () => {
            const mockUpdate = jest.fn();
            const testValue = '';
            mockVault.readLinkFile.mockReturnValue('');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = result.querySelector('a');
            expect(link?.textContent).toBe('');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXEZpbGVQcm9wZXJ0eS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFLSCxzQkFBc0I7QUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2xCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2pCLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBUkosb0VBQWlFO0FBQ2pFLG9FQUFpRTtBQVNqRSx3QkFBd0I7QUFDdkIsTUFBYyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFFdkMsbUNBQW1DO0FBQ25DLE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQUV4RCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUMxQixJQUFJLFlBQTBCLENBQUM7SUFDL0IsSUFBSSxTQUFjLENBQUM7SUFFbkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGtCQUFrQjtRQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLG9DQUFvQztRQUNwQyxTQUFTLEdBQUc7WUFDUixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixPQUFPLEVBQUUsSUFBSSxD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TUFBTSxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtZQUNqQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDN0IsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBRXJCLFNBQVMsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzNDLFlBQVksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBRXBFLE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQywyQkFBMkIsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDL0UsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUV2QyxNQUFNLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXEZpbGVQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEZpbGVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL0ZpbGVQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IExpbmtQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL0xpbmtQcm9wZXJ0eSc7XHJcblxyXG4vLyBNb2NrIGVudGlyZSBtb2R1bGVzXHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3ZhdWx0L1V0aWxzJywgKCkgPT4gKHtcclxuICAgIHNldEljb246IGplc3QuZm4oKSxcclxuICAgIE5vdGljZTogamVzdC5mbigpLFxyXG4gICAgc2VsZWN0RmlsZTogamVzdC5mbigpXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgZ2xvYmFsIGZ1bmN0aW9uc1xyXG4oZ2xvYmFsIGFzIGFueSkuc2VsZWN0RmlsZSA9IGplc3QuZm4oKTtcclxuXHJcbi8vIEdldCByZWZlcmVuY2UgdG8gbW9ja2VkIGZ1bmN0aW9uXHJcbmNvbnN0IHsgc2VsZWN0RmlsZSB9ID0gcmVxdWlyZSgnLi4vLi4vc3JjL3ZhdWx0L1V0aWxzJyk7XHJcblxyXG5kZXNjcmliZSgnRmlsZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IGZpbGVQcm9wZXJ0eTogRmlsZVByb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tWYXVsdDogYW55O1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IERPTSBtb2Nrc1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTW9jayB2YXVsdCB3aXRoIG5lY2Vzc2FyeSBtZXRob2RzXHJcbiAgICAgICAgbW9ja1ZhdWx0ID0ge1xyXG4gICAgICAgICAgICByZWFkTGlua0ZpbGU6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgZ2V0RnJvbUxpbms6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgZ2V0RnJvbUZpbGU6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgZ2V0TmFtZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnVGVzdFZhdWx0JyksXHJcbiAgICAgICAgICAgIGFwcDoge1xyXG4gICAgICAgICAgICAgICAgdmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBnZXROYW1lOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdUZXN0VmF1bHQnKSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRBYnN0cmFjdEZpbGVCeVBhdGg6IGplc3QuZm4oKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldExlYWY6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuRmlsZTogamVzdC5mbigpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXRJY29uOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RGaWxlOiBqZXN0LmZuKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBmaWxlUHJvcGVydHkgPSBuZXcgRmlsZVByb3BlcnR5KCd0ZXN0RmlsZScsIG1vY2tWYXVsdCwgWydjbGFzczEnLCAnY2xhc3MyJ10pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIEZpbGVQcm9wZXJ0eSB3aXRoIGNvcnJlY3QgdHlwZScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS50eXBlKS50b0JlKCdmaWxlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaW5oZXJpdCBmcm9tIExpbmtQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoTGlua1Byb3BlcnR5KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzdG9yZSBjbGFzc2VzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS5jbGFzc2VzKS50b0VxdWFsKFsnY2xhc3MxJywgJ2NsYXNzMiddKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBwYXNzIGFyZ3MgdG8gcGFyZW50IGNvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21BcmdzID0geyBpY29uOiAnY3VzdG9tLWljb24nIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbVByb3BlcnR5ID0gbmV3IEZpbGVQcm9wZXJ0eSgnY3VzdG9tTmFtZScsIG1vY2tWYXVsdCwgWydjbGFzczEnXSwgY3VzdG9tQXJncyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21Qcm9wZXJ0eS5uYW1lKS50b0JlKCdjdXN0b21OYW1lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21Qcm9wZXJ0eS5jbGFzc2VzKS50b0VxdWFsKFsnY2xhc3MxJ10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjbGFzc2VzIGFycmF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbXB0eUNsYXNzUHJvcGVydHkgPSBuZXcgRmlsZVByb3BlcnR5KCdlbXB0eScsIG1vY2tWYXVsdCwgW10pO1xyXG4gICAgICAgICAgICBleHBlY3QoZW1wdHlDbGFzc1Byb3BlcnR5LmNsYXNzZXMpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldENsYXNzZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gY2xhc3NlcyBhcnJheScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS5nZXRDbGFzc2VzKCkpLnRvRXF1YWwoWydjbGFzczEnLCAnY2xhc3MyJ10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIGNsYXNzZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcHR5UHJvcGVydHkgPSBuZXcgRmlsZVByb3BlcnR5KCd0ZXN0JywgbW9ja1ZhdWx0LCBbXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChlbXB0eVByb3BlcnR5LmdldENsYXNzZXMoKSkudG9FcXVhbChbXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHNhbWUgcmVmZXJlbmNlIHRvIGNsYXNzZXMgYXJyYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBbJ3Rlc3QxJywgJ3Rlc3QyJ107XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gbmV3IEZpbGVQcm9wZXJ0eSgndGVzdCcsIG1vY2tWYXVsdCwgY2xhc3Nlcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wZXJ0eS5nZXRDbGFzc2VzKCkpLnRvQmUoY2xhc3Nlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gICAgIGl0KCdzaG91bGQgaGFuZGxlIG9iamVjdCB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGNvbnN0IG9iamVjdFZhbHVlID0geyB0ZXN0OiAndmFsdWUnIH07XHJcbiAgICAvLyAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkuZ2V0UGFyZW50VmFsdWUob2JqZWN0VmFsdWUpKS50b0JlKG9iamVjdFZhbHVlKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRQcmV0dHknLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjYWxsIHZhdWx0LnJlYWRMaW5rRmlsZSB3aXRoIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0RmlsZV1dJztcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LnJlYWRMaW5rRmlsZS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3RGaWxlJyk7XHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS52YXVsdCA9IG1vY2tWYXVsdDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5nZXRQcmV0dHkodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVmF1bHQucmVhZExpbmtGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdUZXN0RmlsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LnJlYWRMaW5rRmlsZS5tb2NrUmV0dXJuVmFsdWUoJycpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuZ2V0UHJldHR5KCcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVmF1bHQucmVhZExpbmtGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldENsYXNzZScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBjbGFzc2Ugd2hlbiBmb3VuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NsYXNzZSA9IHsgbmFtZTogJ1Rlc3RDbGFzcycgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JlYWQgPSB7fSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RMaW5rID0gJ1tbVGVzdEZpbGVdXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkucmVhZCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodGVzdExpbmspO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0RnJvbUxpbmsubW9ja1JldHVyblZhbHVlKG1vY2tDbGFzc2UpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuZ2V0Q2xhc3NlKG1vY2tSZWFkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkucmVhZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1JlYWQpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1ZhdWx0LmdldEZyb21MaW5rKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0ZXN0TGluayk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUobW9ja0NsYXNzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCB3aGVuIG5vIGxpbmsgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZWFkID0ge30gYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuZ2V0Q2xhc3NlKG1vY2tSZWFkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIHdoZW4gY2xhc3NlIG5vdCBmb3VuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JlYWQgPSB7fSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RMaW5rID0gJ1tbVGVzdEZpbGVdXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkucmVhZCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodGVzdExpbmspO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0RnJvbUxpbmsubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuZ2V0Q2xhc3NlKG1vY2tSZWFkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGV4dHJhY3QgYW5kIHJldHVybiB2YWxpZCBPYnNpZGlhbiBsaW5rJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhbGlkYXRlKGlucHV0KSkudG9CZSgnW1tUZXN0RmlsZV1dJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZXh0cmFjdCBsaW5rIGZyb20gdGV4dCB3aXRoIGxpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1NvbWUgdGV4dCBbW1Rlc3RGaWxlXV0gbW9yZSB0ZXh0JztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJ1tbVGVzdEZpbGVdXScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBsaW5rIHdpdGggYWxpYXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1tbVGVzdEZpbGV8QWxpYXNdXSc7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkudmFsaWRhdGUoaW5wdXQpKS50b0JlKCdbW1Rlc3RGaWxlfEFsaWFzXV0nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSAnSnVzdCBwbGFpbiB0ZXh0JztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgZm9yIG1hbGZvcm1lZCBsaW5rcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSAnW1tUZXN0RmlsZSc7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkudmFsaWRhdGUoaW5wdXQpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3RyaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhbGlkYXRlKCcnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGxpbmtzIGFuZCByZXR1cm4gZmlyc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1tbRmlyc3RGaWxlXV0gYW5kIFtbU2Vjb25kRmlsZV1dJztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJ1tbRmlyc3RGaWxlXV0nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRMaW5rJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgb2JzaWRpYW4gVVJMIHdpdGggZmlsZSBwYXRoIHdoZW4gZmlsZSBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICdwYXRoL3RvL1Rlc3RGaWxlLm1kJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlT25jZShmaWxlUGF0aCkubW9ja1JldHVyblZhbHVlT25jZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ29ic2lkaWFuOi8vb3Blbj92YXVsdD1UZXN0VmF1bHQmZmlsZT1wYXRoJTJGdG8lMkZUZXN0RmlsZS5tZCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVzZSBmYWxsYmFjayB3aGVuIGZpbGUgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICdwYXRoL3RvL1Rlc3RGaWxlLm1kJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlT25jZShmaWxlUGF0aCkubW9ja1JldHVyblZhbHVlT25jZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ29ic2lkaWFuOi8vb3Blbj92YXVsdD1UZXN0VmF1bHQmZmlsZT1UZXN0RmlsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCB2YXVsdCB3aGVuIHByb3ZpZGVkIGFzIHBhcmFtZXRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3VmF1bHQgPSB7IC4uLm1vY2tWYXVsdCB9O1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LnJlYWRMaW5rRmlsZS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3RGaWxlJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5nZXRMaW5rKCdbW1Rlc3RGaWxlXV0nLCBuZXdWYXVsdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhdWx0KS50b0JlKG5ld1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBlbmNvZGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHZhdWx0IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuYXBwLnZhdWx0LmdldE5hbWUubW9ja1JldHVyblZhbHVlKCdNeSBWYXVsdCAmIFN0dWZmJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlKCdUZXN0RmlsZScpO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aC5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuZ2V0TGluayh0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCd2YXVsdD1NeSUyMFZhdWx0JTIwJTI2JTIwU3R1ZmYnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVJY29uQ29udGFpbmVyJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGljb24gY29udGFpbmVyIHdpdGggY29ycmVjdCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuY3JlYXRlSWNvbkNvbnRhaW5lcihtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudGFnTmFtZSkudG9CZSgnRElWJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmNoaWxkcmVuLmxlbmd0aCkudG9CZSgxKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgY3Vyc29yIHBvaW50ZXIgd2hlbiBub3Qgc3RhdGljJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkuc3RhdGljID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuY3JlYXRlSWNvbkNvbnRhaW5lcihtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgaWNvbiA9IHJlc3VsdC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpY29uLnN0eWxlLmN1cnNvcikudG9CZSgncG9pbnRlcicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBzZXQgY3Vyc29yIHBvaW50ZXIgd2hlbiBzdGF0aWMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5zdGF0aWMgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmNyZWF0ZUljb25Db250YWluZXIobW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGljb24gPSByZXN1bHQuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoaWNvbi5zdHlsZS5jdXJzb3IpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2hhbmRsZUljb25DbGljaycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNhbGwgc2VsZWN0RmlsZSB3aXRoIGNvcnJlY3QgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICB9IGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAuc2VsZWN0RmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGVQcm9wZXJ0eS5oYW5kbGVJY29uQ2xpY2sobW9ja1VwZGF0ZSwgbW9ja0V2ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVmF1bHQuYXBwLnNlbGVjdEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgbW9ja1ZhdWx0LFxyXG4gICAgICAgICAgICAgICAgWydjbGFzczEnLCAnY2xhc3MyJ10sXHJcbiAgICAgICAgICAgICAgICB7IGhpbnQ6IFwiQ2hvaXNpc3NleiB1biBmaWNoaWVyIGNsYXNzMSBvdSBjbGFzczJcIiB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXBkYXRlIHZhbHVlIHdoZW4gZmlsZSBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGUgPSB7XHJcbiAgICAgICAgICAgICAgICBnZXRMaW5rOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdbW1NlbGVjdGVkRmlsZV1dJylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICB9IGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAuc2VsZWN0RmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRmlsZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlUHJvcGVydHkuaGFuZGxlSWNvbkNsaWNrKG1vY2tVcGRhdGUsIG1vY2tFdmVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1tbU2VsZWN0ZWRGaWxlXV0nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgdXBkYXRlIHdoZW4gbm8gZmlsZSBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0V2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICB9IGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAuc2VsZWN0RmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGVQcm9wZXJ0eS5oYW5kbGVJY29uQ2xpY2sobW9ja1VwZGF0ZSwgbW9ja0V2ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBmaWVsZCBjb250YWluZXIgd2l0aCBjb3JyZWN0IHN0cnVjdHVyZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEZpbGVdXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtb2NrVmF1bHQucmVhZExpbmtGaWxlLm1vY2tSZXR1cm5WYWx1ZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LmdldExpbmsgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdvYnNpZGlhbjovL3Rlc3QnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudGFnTmFtZSkudG9CZSgnRElWJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1jb250YWluZXInKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgbGluayB3aXRoIGNvcnJlY3QgaHJlZiBhbmQgdGV4dCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ1tbVGVzdEZpbGVdXSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtb2NrVmF1bHQucmVhZExpbmtGaWxlLm1vY2tSZXR1cm5WYWx1ZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LmdldExpbmsgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdvYnNpZGlhbjovL3Rlc3QnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJlc3VsdC5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluaz8uaHJlZikudG9CZSgnb2JzaWRpYW46Ly90ZXN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rPy50ZXh0Q29udGVudCkudG9CZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbms/LmNsYXNzTGlzdC5jb250YWlucygnZmllbGQtbGluaycpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtb2NrVmF1bHQucmVhZExpbmtGaWxlLm1vY2tSZXR1cm5WYWx1ZSgnJyk7XHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5nZXRMaW5rID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnb2JzaWRpYW46Ly90ZXN0Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50KG1vY2tVcGRhdGUsIHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByZXN1bHQucXVlcnlTZWxlY3RvcignYScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGxpbms/LnRleHRDb250ZW50KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9