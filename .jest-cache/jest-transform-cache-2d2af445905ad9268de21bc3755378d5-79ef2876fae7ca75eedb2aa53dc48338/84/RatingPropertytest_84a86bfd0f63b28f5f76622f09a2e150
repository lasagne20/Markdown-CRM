4674198763a7b63f3e6413ff6df106c5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock des dÃ©pendances
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn((element, icon) => {
        const svg = document.createElement('svg');
        svg.setAttribute('data-icon', icon);
        element.appendChild(svg);
    })
}));
const RatingProperty_1 = require("../../src/properties/RatingProperty");
const { setIcon } = require('../../src/vault/Utils');
describe('RatingProperty', () => {
    let ratingProperty;
    let mockUpdate;
    let mockVault;
    beforeEach(() => {
        mockUpdate = jest.fn();
        mockVault = {
            vault: {
                adapter: {
                    fs: {}
                }
            }
        };
        // Clear all mocks
        jest.clearAllMocks();
    });
    describe('Constructor', () => {
        test('should create instance with default icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
            expect(ratingProperty.name).toBe('rating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('star');
        });
        test('should create instance with custom icon', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('customRating', mockVault, { icon: 'heart' });
            expect(ratingProperty.name).toBe('customRating');
            expect(ratingProperty.type).toBe('rating');
            expect(ratingProperty.icon).toBe('heart');
        });
        test('should use star as default when empty args provided', () => {
            ratingProperty = new RatingProperty_1.RatingProperty('test', mockVault, {});
            expect(ratingProperty.icon).toBe('align-left'); // Parent class default when args is empty object
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should create display with correct structure', () => {
            const result = ratingProperty.fillDisplay('+++', mockUpdate);
            expect(result.classList.contains('metadata-field')).toBe(true);
            const columnContainer = result.querySelector('.field-container-column');
            expect(columnContainer).toBeTruthy();
            const header = columnContainer?.querySelector('.metadata-header');
            expect(header?.textContent).toBe('rating');
            const starRating = columnContainer?.querySelector('.star-rating');
            expect(starRating).toBeTruthy();
        });
        test('should set vault property', () => {
            ratingProperty.fillDisplay('++', mockUpdate);
            expect(ratingProperty.vault).toBe(mockVault);
        });
    });
    describe('createStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should create container with correct class and 5 stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container.classList.contains('star-rating')).toBe(true);
            const stars = container.querySelectorAll('.star');
            expect(stars.length).toBe(5);
        });
        test('should set correct data-value attributes', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                expect(star.getAttribute('data-value')).toBe((index + 1).toString());
            });
        });
        test('should call setIcon for each star', () => {
            ratingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5);
        });
        test('should use custom icon when provided', () => {
            const customRatingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, { icon: 'heart' });
            customRatingProperty.createStarRating('', mockUpdate);
            expect(setIcon).toHaveBeenCalledTimes(5); // Verify called for all 5 stars
        });
        test('should add event listeners to stars', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const star = container.querySelector('.star');
            // Mock the methods that will be called
            ratingProperty.previewStars = jest.fn();
            ratingProperty.updateStarRating = jest.fn();
            // Test mouseover event
            star.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 1);
        });
        test('should handle click event and call update with correct plus signs', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.updateStarRating = jest.fn();
            // Click the third star
            thirdStar.click();
            // Wait for async operations
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++');
        });
        test('should handle different star clicks correctly', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click first star
            stars[0].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+');
            // Click last star
            stars[4].click();
            await new Promise(resolve => setTimeout(resolve, 0));
            expect(mockUpdate).toHaveBeenCalledWith('+++++');
        });
    });
    describe('updateStarRating', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should call updateStarRating method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'updateStarRating');
            ratingProperty.updateStarRating(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various rating values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.updateStarRating(container, 0);
                ratingProperty.updateStarRating(container, 3);
                ratingProperty.updateStarRating(container, 5);
                ratingProperty.updateStarRating(container, 10); // Over limit
            }).not.toThrow();
        });
    });
    describe('previewStars', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should call previewStars method', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Spy on the method
            const spy = jest.spyOn(ratingProperty, 'previewStars');
            ratingProperty.previewStars(container, 3);
            expect(spy).toHaveBeenCalledWith(container, 3);
        });
        test('should handle various preview values', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            // Test that method exists and can be called
            expect(() => {
                ratingProperty.previewStars(container, 0);
                ratingProperty.previewStars(container, 3);
                ratingProperty.previewStars(container, 5);
                ratingProperty.previewStars(container, -1); // Negative
            }).not.toThrow();
        });
    });
    describe('Value handling', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should handle empty value', () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle single plus value', () => {
            const container = ratingProperty.createStarRating('+', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle multiple plus values', () => {
            const container = ratingProperty.createStarRating('+++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle maximum rating', () => {
            const container = ratingProperty.createStarRating('+++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
        test('should handle over-maximum rating', () => {
            const container = ratingProperty.createStarRating('++++++++++', mockUpdate);
            expect(container).toBeTruthy();
            expect(container.querySelectorAll('.star').length).toBe(5);
        });
    });
    describe('Integration tests', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should work with complete workflow', async () => {
            // Create full display
            const display = ratingProperty.fillDisplay('++', mockUpdate);
            const starContainer = display.querySelector('.star-rating');
            expect(starContainer).toBeTruthy();
            // Simulate clicking the 4th star
            const fourthStar = starContainer.querySelectorAll('.star')[3];
            fourthStar.click();
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have called update with 4 plus signs
            expect(mockUpdate).toHaveBeenCalledWith('++++');
        });
        test('should maintain state during multiple interactions', async () => {
            const container = ratingProperty.createStarRating('', mockUpdate);
            const stars = container.querySelectorAll('.star');
            // Click multiple stars in sequence
            stars[2].click(); // 3 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[0].click(); // 1 star
            await new Promise(resolve => setTimeout(resolve, 0));
            stars[4].click(); // 5 stars
            await new Promise(resolve => setTimeout(resolve, 0));
            // Should have been called with correct values
            expect(mockUpdate).toHaveBeenCalledTimes(3);
            expect(mockUpdate).toHaveBeenNthCalledWith(1, '+++');
            expect(mockUpdate).toHaveBeenNthCalledWith(2, '+');
            expect(mockUpdate).toHaveBeenNthCalledWith(3, '+++++');
        });
        test('should handle mouseover and mouseleave events', () => {
            const container = ratingProperty.createStarRating('++', mockUpdate);
            const thirdStar = container.querySelectorAll('.star')[2];
            ratingProperty.previewStars = jest.fn();
            // Test mouseover
            thirdStar.dispatchEvent(new Event('mouseover'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 3);
            // Test mouseleave
            thirdStar.dispatchEvent(new Event('mouseleave'));
            expect(ratingProperty.previewStars).toHaveBeenCalledWith(container, 2); // Should restore to current rating
        });
    });
    describe('Edge cases', () => {
        beforeEach(() => {
            ratingProperty = new RatingProperty_1.RatingProperty('rating', mockVault, mockVault);
        });
        test('should handle undefined vault', () => {
            expect(() => {
                ratingProperty.fillDisplay(undefined, '+++', mockUpdate);
            }).not.toThrow();
        });
        test('should handle null update function', () => {
            expect(() => {
                ratingProperty.createStarRating('+++', null);
            }).not.toThrow();
        });
        test('should handle invalid value format', () => {
            expect(() => {
                ratingProperty.createStarRating('invalid', mockUpdate);
            }).not.toThrow();
        });
        test('should handle special characters in value', () => {
            expect(() => {
                ratingProperty.createStarRating('+++abc+++', mockUpdate);
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhdGluZ1Byb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFFQSx1QkFBdUI7QUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBZ0IsRUFBRSxJQUFZLEVBQUUsRUFBRTtRQUNoRCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFUSix3RUFBcUU7QUFXckUsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBRXJELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxjQUE4QixDQUFDO0lBQ25DLElBQUksVUFBcUIsQ0FBQztJQUMxQixJQUFJLFNBQWMsQ0FBQztJQUVuQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUN2QixTQUFTLEdBQUc7WUFDUixLQUFLLEVBQUU7Z0JBQ0gsT0FBTyxFQUFFO29CQUNMLEVBQUUsRUFBRSxFQUFFO2lCQUNUO2FBQ0o7U0FDSixDQUFDO1FBRUYsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBRXBFLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLGNBQWMsRUFBRSxTQUFTLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUVsRixNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxxREFBcUQsRUFBRSxHQUFHLEVBQUU7WUFDN0QsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRTNELE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsaURBQWlEO1FBQ3JHLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtRQUN6QixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ1osY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3hFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUN0RCxNQUFNLE1BQU0sR0FBRyxjQUFjLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztZQUU3RCxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUvRCxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLHlCQUF5QixDQUFDLENBQUM7WUFDeEUsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBRXJDLE1BQU0sTUFBTSxHQUFHLGVBQWUsRUFBRSxhQUFhLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNsRSxNQUFNLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUUzQyxNQUFNLFVBQVUsR0FBRyxlQUFlLEVBQUUsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFN0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7WUFDaEUsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVsRSxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFL0QsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUVsRCxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUMxQixNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQ3pFLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLG9CQUFvQixHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFFeEYsb0JBQW9CLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRXRELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdDQUFnQztRQUM5RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNsRSxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBZ0IsQ0FBQztZQUU3RCx1Q0FBdUM7WUFDdkMsY0FBYyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDeEMsY0FBYyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUU1Qyx1QkFBdUI7WUFDdkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG1FQUFtRSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2pGLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDbEUsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBZ0IsQ0FBQztZQUV4RSxjQUFjLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRTVDLHVCQUF1QjtZQUN2QixTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFbEIsNEJBQTRCO1lBQzVCLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLCtDQUErQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzdELE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDbEUsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRWxELG1CQUFtQjtZQUNsQixLQUFLLENBQUMsQ0FBQyxDQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2xDLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRTdDLGtCQUFrQjtZQUNqQixLQUFLLENBQUMsQ0FBQyxDQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2xDLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbEUsb0JBQW9CO1lBQ3BCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFFM0QsY0FBYyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUU5QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRWxFLDRDQUE0QztZQUM1QyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxhQUFhO1lBQ2pFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDMUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVsRSxvQkFBb0I7WUFDcEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsY0FBYyxDQUFDLENBQUM7WUFFdkQsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFMUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVsRSw0Q0FBNEM7WUFDNUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtnQkFDUixjQUFjLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxjQUFjLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVztZQUMzRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDNUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVsRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbkUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRXJFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMvQixNQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDdEMsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFNUUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO1FBQy9CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEQsc0JBQXNCO1lBQ3RCLE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzdELE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFtQixDQUFDO1lBRTlFLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUVuQyxpQ0FBaUM7WUFDakMsTUFBTSxVQUFVLEdBQUcsYUFBYSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBZ0IsQ0FBQztZQUM3RSxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFbkIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVyRCw4Q0FBOEM7WUFDOUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2xFLE1BQU0sU0FBUyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDbEUsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRWxELG1DQUFtQztZQUNsQyxLQUFLLENBQUMsQ0FBQyxDQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsVUFBVTtZQUM3QyxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXBELEtBQUssQ0FBQyxDQUFDLENBQWlCLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxTQUFTO1lBQzVDLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFcEQsS0FBSyxDQUFDLENBQUMsQ0FBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLFVBQVU7WUFDN0MsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVyRCw4Q0FBOEM7WUFDOUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN2RCxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ3BFLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUM7WUFFeEUsY0FBYyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFFeEMsaUJBQWlCO1lBQ2pCLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUV2RSxrQkFBa0I7WUFDbEIsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsbUNBQW1DO1FBQy9HLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtRQUN4QixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ1osY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3hFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtZQUN2QyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxXQUFXLENBQUMsU0FBZ0IsRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDcEUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsSUFBVyxDQUFDLENBQUM7WUFDeEQsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDM0QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDJDQUEyQyxFQUFFLEdBQUcsRUFBRTtZQUNuRCxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNSLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDN0QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcUmF0aW5nUHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSYXRpbmdQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3NyYy9wcm9wZXJ0aWVzL1JhdGluZ1Byb3BlcnR5JztcclxuXHJcbi8vIE1vY2sgZGVzIGTDqXBlbmRhbmNlc1xyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKChlbGVtZW50OiBFbGVtZW50LCBpY29uOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdmcnKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCBpY29uKTtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHN2Zyk7XHJcbiAgICB9KVxyXG59KSk7XHJcblxyXG5jb25zdCB7IHNldEljb24gfSA9IHJlcXVpcmUoJy4uLy4uL3NyYy92YXVsdC9VdGlscycpO1xyXG5cclxuZGVzY3JpYmUoJ1JhdGluZ1Byb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHJhdGluZ1Byb3BlcnR5OiBSYXRpbmdQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVXBkYXRlOiBqZXN0Lk1vY2s7XHJcbiAgICBsZXQgbW9ja1ZhdWx0OiBhbnk7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIHZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBhZGFwdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnM6IHt9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsZWFyIGFsbCBtb2Nrc1xyXG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IGljb24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkubmFtZSkudG9CZSgncmF0aW5nJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS50eXBlKS50b0JlKCdyYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5Lmljb24pLnRvQmUoJ3N0YXInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBpbnN0YW5jZSB3aXRoIGN1c3RvbSBpY29uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgnY3VzdG9tUmF0aW5nJywgbW9ja1ZhdWx0LCB7IGljb246ICdoZWFydCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkubmFtZSkudG9CZSgnY3VzdG9tUmF0aW5nJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS50eXBlKS50b0JlKCdyYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5Lmljb24pLnRvQmUoJ2hlYXJ0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2Ugc3RhciBhcyBkZWZhdWx0IHdoZW4gZW1wdHkgYXJncyBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3Rlc3QnLCBtb2NrVmF1bHQsIHt9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYXRpbmdQcm9wZXJ0eS5pY29uKS50b0JlKCdhbGlnbi1sZWZ0Jyk7IC8vIFBhcmVudCBjbGFzcyBkZWZhdWx0IHdoZW4gYXJncyBpcyBlbXB0eSBvYmplY3RcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBkaXNwbGF5IHdpdGggY29ycmVjdCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KCcrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1maWVsZCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29sdW1uQ29udGFpbmVyID0gcmVzdWx0LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1jb250YWluZXItY29sdW1uJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb2x1bW5Db250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGNvbHVtbkNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVyPy50ZXh0Q29udGVudCkudG9CZSgncmF0aW5nJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzdGFyUmF0aW5nID0gY29sdW1uQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCcuc3Rhci1yYXRpbmcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0YXJSYXRpbmcpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNldCB2YXVsdCBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkuZmlsbERpc3BsYXkoJysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVTdGFyUmF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGNvbnRhaW5lciB3aXRoIGNvcnJlY3QgY2xhc3MgYW5kIDUgc3RhcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXItcmF0aW5nJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RhcnMubGVuZ3RoKS50b0JlKDUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2V0IGNvcnJlY3QgZGF0YS12YWx1ZSBhdHRyaWJ1dGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN0YXJzLmZvckVhY2goKHN0YXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoc3Rhci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKSkudG9CZSgoaW5kZXggKyAxKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHNldEljb24gZm9yIGVhY2ggc3RhcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc2V0SWNvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXNlIGN1c3RvbSBpY29uIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbVJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQsIHsgaWNvbjogJ2hlYXJ0JyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGN1c3RvbVJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNldEljb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg1KTsgLy8gVmVyaWZ5IGNhbGxlZCBmb3IgYWxsIDUgc3RhcnNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gc3RhcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zdGFyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSBtZXRob2RzIHRoYXQgd2lsbCBiZSBjYWxsZWRcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS51cGRhdGVTdGFyUmF0aW5nID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCBtb3VzZW92ZXIgZXZlbnRcclxuICAgICAgICAgICAgc3Rhci5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VvdmVyJykpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNsaWNrIGV2ZW50IGFuZCBjYWxsIHVwZGF0ZSB3aXRoIGNvcnJlY3QgcGx1cyBzaWducycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXJkU3RhciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpWzJdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIHRoZSB0aGlyZCBzdGFyXHJcbiAgICAgICAgICAgIHRoaXJkU3Rhci5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYXN5bmMgb3BlcmF0aW9uc1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcrKysnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgc3RhciBjbGlja3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIGZpcnN0IHN0YXJcclxuICAgICAgICAgICAgKHN0YXJzWzBdIGFzIEhUTUxFbGVtZW50KS5jbGljaygpO1xyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJysnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsaWNrIGxhc3Qgc3RhclxyXG4gICAgICAgICAgICAoc3RhcnNbNF0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnKysrKysnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd1cGRhdGVTdGFyUmF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsbCB1cGRhdGVTdGFyUmF0aW5nIG1ldGhvZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTcHkgb24gdGhlIG1ldGhvZFxyXG4gICAgICAgICAgICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKHJhdGluZ1Byb3BlcnR5LCAndXBkYXRlU3RhclJhdGluZycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkudXBkYXRlU3RhclJhdGluZyhjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXJpb3VzIHJhdGluZyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGF0IG1ldGhvZCBleGlzdHMgYW5kIGNhbiBiZSBjYWxsZWRcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAwKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAzKTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCA1KTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnVwZGF0ZVN0YXJSYXRpbmcoY29udGFpbmVyLCAxMCk7IC8vIE92ZXIgbGltaXRcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcmV2aWV3U3RhcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5ID0gbmV3IFJhdGluZ1Byb3BlcnR5KCdyYXRpbmcnLCBtb2NrVmF1bHQsIG1vY2tWYXVsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHByZXZpZXdTdGFycyBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU3B5IG9uIHRoZSBtZXRob2RcclxuICAgICAgICAgICAgY29uc3Qgc3B5ID0gamVzdC5zcHlPbihyYXRpbmdQcm9wZXJ0eSwgJ3ByZXZpZXdTdGFycycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKGNvbnRhaW5lciwgMyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHZhcmlvdXMgcHJldmlldyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGF0IG1ldGhvZCBleGlzdHMgYW5kIGNhbiBiZSBjYWxsZWRcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIDApO1xyXG4gICAgICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKGNvbnRhaW5lciwgMyk7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5wcmV2aWV3U3RhcnMoY29udGFpbmVyLCA1KTtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyhjb250YWluZXIsIC0xKTsgLy8gTmVnYXRpdmVcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdWYWx1ZSBoYW5kbGluZycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmF0aW5nUHJvcGVydHkgPSBuZXcgUmF0aW5nUHJvcGVydHkoJ3JhdGluZycsIG1vY2tWYXVsdCwgbW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIHBsdXMgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcicpLmxlbmd0aCkudG9CZSg1KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBwbHVzIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWF4aW11bSByYXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrKysrJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgb3Zlci1tYXhpbXVtIHJhdGluZycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnKysrKysrKysrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJykubGVuZ3RoKS50b0JlKDUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHRlc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgd29yayB3aXRoIGNvbXBsZXRlIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgZnVsbCBkaXNwbGF5XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSByYXRpbmdQcm9wZXJ0eS5maWxsRGlzcGxheSgnKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhckNvbnRhaW5lciA9IGRpc3BsYXkucXVlcnlTZWxlY3RvcignLnN0YXItcmF0aW5nJykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qoc3RhckNvbnRhaW5lcikudG9CZVRydXRoeSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgY2xpY2tpbmcgdGhlIDR0aCBzdGFyXHJcbiAgICAgICAgICAgIGNvbnN0IGZvdXJ0aFN0YXIgPSBzdGFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJylbM10gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGZvdXJ0aFN0YXIuY2xpY2soKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaG91bGQgaGF2ZSBjYWxsZWQgdXBkYXRlIHdpdGggNCBwbHVzIHNpZ25zXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnKysrKycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gc3RhdGUgZHVyaW5nIG11bHRpcGxlIGludGVyYWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmF0aW5nUHJvcGVydHkuY3JlYXRlU3RhclJhdGluZygnJywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFyJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDbGljayBtdWx0aXBsZSBzdGFycyBpbiBzZXF1ZW5jZVxyXG4gICAgICAgICAgICAoc3RhcnNbMl0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7IC8vIDMgc3RhcnNcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIChzdGFyc1swXSBhcyBIVE1MRWxlbWVudCkuY2xpY2soKTsgLy8gMSBzdGFyXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAoc3RhcnNbNF0gYXMgSFRNTEVsZW1lbnQpLmNsaWNrKCk7IC8vIDUgc3RhcnNcclxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBoYXZlIGJlZW4gY2FsbGVkIHdpdGggY29ycmVjdCB2YWx1ZXNcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoKDEsICcrKysnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoKDIsICcrJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgzLCAnKysrKysnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtb3VzZW92ZXIgYW5kIG1vdXNlbGVhdmUgZXZlbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKycsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCB0aGlyZFN0YXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN0YXInKVsyXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRlc3QgbW91c2VvdmVyXHJcbiAgICAgICAgICAgIHRoaXJkU3Rhci5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VvdmVyJykpO1xyXG4gICAgICAgICAgICBleHBlY3QocmF0aW5nUHJvcGVydHkucHJldmlld1N0YXJzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb250YWluZXIsIDMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCBtb3VzZWxlYXZlXHJcbiAgICAgICAgICAgIHRoaXJkU3Rhci5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VsZWF2ZScpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhdGluZ1Byb3BlcnR5LnByZXZpZXdTdGFycykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGFpbmVyLCAyKTsgLy8gU2hvdWxkIHJlc3RvcmUgdG8gY3VycmVudCByYXRpbmdcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdFZGdlIGNhc2VzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYXRpbmdQcm9wZXJ0eSA9IG5ldyBSYXRpbmdQcm9wZXJ0eSgncmF0aW5nJywgbW9ja1ZhdWx0LCBtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCB2YXVsdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmZpbGxEaXNwbGF5KHVuZGVmaW5lZCBhcyBhbnksICcrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHVwZGF0ZSBmdW5jdGlvbicsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJysrKycsIG51bGwgYXMgYW55KTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHZhbHVlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJhdGluZ1Byb3BlcnR5LmNyZWF0ZVN0YXJSYXRpbmcoJ2ludmFsaWQnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByYXRpbmdQcm9wZXJ0eS5jcmVhdGVTdGFyUmF0aW5nKCcrKythYmMrKysnLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9