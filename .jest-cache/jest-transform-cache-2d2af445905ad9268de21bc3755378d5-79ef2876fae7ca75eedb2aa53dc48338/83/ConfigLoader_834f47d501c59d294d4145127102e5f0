f7e6469b451ed69cd79dbd16ade98fb1
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConfigLoader = void 0;
const yaml = __importStar(require("js-yaml"));
const AdressProperty_1 = require("../properties/AdressProperty");
const BooleanProperty_1 = require("../properties/BooleanProperty");
const ClasseProperty_1 = require("../properties/ClasseProperty");
const DateProperty_1 = require("../properties/DateProperty");
const EmailProperty_1 = require("../properties/EmailProperty");
const FileProperty_1 = require("../properties/FileProperty");
const FormulaProperty_1 = require("../properties/FormulaProperty");
const LinkProperty_1 = require("../properties/LinkProperty");
const MediaProperty_1 = require("../properties/MediaProperty");
const MultiFileProperty_1 = require("../properties/MultiFileProperty");
const MultiSelectProperty_1 = require("../properties/MultiSelectProperty");
const NumberProperty_1 = require("../properties/NumberProperty");
const ObjectProperty_1 = require("../properties/ObjectProperty");
const PhoneProperty_1 = require("../properties/PhoneProperty");
const Property_1 = require("../properties/Property");
const RangeDateProperty_1 = require("../properties/RangeDateProperty");
const RatingProperty_1 = require("../properties/RatingProperty");
const SelectProperty_1 = require("../properties/SelectProperty");
const TextProperty_1 = require("../properties/TextProperty");
class ConfigLoader {
    constructor(configPath, vault) {
        this.loadedConfigs = new Map();
        this.configPath = configPath;
        this.vault = vault;
    }
    /**
     * Load a class configuration from YAML file
     */
    async loadClassConfig(className) {
        if (this.loadedConfigs.has(className)) {
            return this.loadedConfigs.get(className);
        }
        try {
            const configFilePath = `${this.configPath}/${className}.yaml`;
            let fileContent;
            let file = await this.vault.app.getFile(configFilePath);
            if (file) {
                // Try to read using vault adapter for plugin files
                try {
                    fileContent = await this.vault.app.readFile(file);
                }
                catch (error) {
                    // Fallback to vault API for files in the vault
                    const file = await this.vault.app.getFile(configFilePath);
                    if (!file || !('extension' in file)) {
                        throw new Error(`Configuration file not found: ${configFilePath}`);
                    }
                    fileContent = await this.vault.app.readFile(file);
                }
            }
            else {
                console.log("Configuration file not found in vault, trying plugin folder:", configFilePath);
                // If not found, create a default config file
                fileContent = yaml.dump({
                    name: className,
                    properties: []
                });
            }
            console.log("YAML content loaded:", fileContent);
            const config = yaml.load(fileContent);
            this.loadedConfigs.set(className, config);
            return config;
        }
        catch (error) {
            console.error(`Failed to load config for class ${className}:`, error);
            throw new Error(`Configuration not found for class: ${className}`);
        }
    }
    /**
     * Create a Property instance from configuration
     */
    createProperty(config) {
        const options = config.icon ? { icon: config.icon } : {};
        switch (config.type) {
            case 'Property':
                return new Property_1.Property(config.name, this.vault, options);
            case 'FileProperty':
                return new FileProperty_1.FileProperty(config.name, this.vault, config.classes || [], options);
            case 'MultiFileProperty':
                return new MultiFileProperty_1.MultiFileProperty(config.name, this.vault, config.classes || [], options);
            case 'SelectProperty':
                const selectOptions = (config.options || []).map(opt => ({
                    name: opt.name,
                    color: opt.color || ''
                }));
                return new SelectProperty_1.SelectProperty(config.name, this.vault, selectOptions, options);
            case 'MultiSelectProperty':
                const multiSelectOptions = (config.options || []).map(opt => ({
                    name: opt.name,
                    color: opt.color || ''
                }));
                return new MultiSelectProperty_1.MultiSelectProperty(config.name, this.vault, multiSelectOptions, options);
            case 'EmailProperty':
                return new EmailProperty_1.EmailProperty(config.name, this.vault, options);
            case 'PhoneProperty':
                return new PhoneProperty_1.PhoneProperty(config.name, this.vault, options);
            case 'LinkProperty':
                return new LinkProperty_1.LinkProperty(config.name, this.vault, options);
            case 'ObjectProperty':
                const objProperties = {};
                if (config.properties) {
                    // Vérifier si c'est un format tableau ou objet
                    if (Array.isArray(config.properties)) {
                        // Format tableau
                        for (const row of config.properties) {
                            const propConfig = this.parseTableRowToPropertyConfig(row);
                            objProperties[row.name] = this.createProperty(propConfig);
                        }
                    }
                    else {
                        // Format objet classique
                        for (const [key, propConfig] of Object.entries(config.properties)) {
                            objProperties[key] = this.createProperty(propConfig);
                        }
                    }
                }
                // Ajouter le mode d'affichage si spécifié
                const objOptions = { ...options };
                if (config.display) {
                    objOptions.display = config.display;
                }
                return new ObjectProperty_1.ObjectProperty(config.name, this.vault, objProperties, objOptions);
            case 'RatingProperty':
                return new RatingProperty_1.RatingProperty(config.name, this.vault, options);
            case 'DateProperty':
                const defaultValues = config.defaultValue ? [config.defaultValue] : [];
                return new DateProperty_1.DateProperty(config.name, this.vault, defaultValues, options);
            case 'RangeDateProperty':
                return new RangeDateProperty_1.RangeDateProperty(config.name, this.vault, options);
            case 'AdressProperty':
                return new AdressProperty_1.AdressProperty(config.name, this.vault, options);
            case 'ClasseProperty':
                return new ClasseProperty_1.ClasseProperty(config.name, this.vault, config.icon || 'box');
            case 'TextProperty':
                return new TextProperty_1.TextProperty(config.name, this.vault, options);
            case 'BooleanProperty':
                return new BooleanProperty_1.BooleanProperty(config.name, this.vault, options);
            case 'NumberProperty':
                return new NumberProperty_1.NumberProperty(config.name, this.vault, '', { icon: config.icon || '', static: true });
            case 'SubClassProperty':
                // This will be handled separately in createSubClassProperty
                return new Property_1.Property(config.name, this.vault, options); // Placeholder
            case 'MediaProperty':
                return new MediaProperty_1.MediaProperty(config.name, this.vault, options);
            case 'FormulaProperty':
                const formula = config.formula || config.defaultValue || '';
                const formulaOptions = config.icon ? { icon: config.icon, static: true, write: true } : { icon: '', static: true, write: true };
                return new FormulaProperty_1.FormulaProperty(config.name, this.vault, formula, formulaOptions);
            default:
                console.warn(`Unknown property type: ${config.type}, falling back to Property`);
                return new Property_1.Property(config.name, this.vault, options);
        }
    }
    /**
     * Create SubClass instances from configuration
     */
    /*
    createSubClasses(config: ClassConfig, parentClass: typeof Classe): SubClass[] {
        if (!config.subClassesProperty) {
            return [];
        }

        const subClasses: SubClass[] = [];
        const configLoader = this; // Reference to the current ConfigLoader instance
        
        for (const subClassConfig of config.subClassesProperty.subClasses) {
            // Create a dynamic SubClass
            class DynamicSubClass extends SubClass {
                public subClassName = subClassConfig.name;
                public subClassIcon = subClassConfig.icon || 'box';
                
                static Properties: { [key: string]: Property } = {};
                
                constructor(classe: typeof Classe, data: any = null) {
                    super(classe, data);
                    
                    // Initialize properties if defined
                    if (subClassConfig.properties && !Object.keys(DynamicSubClass.Properties).length) {
                        for (const [key, propConfig] of Object.entries(subClassConfig.properties)) {
                            DynamicSubClass.Properties[key] = configLoader.createProperty(propConfig);
                        }
                    }
                }

                getConstructor(): typeof DynamicSubClass {
                    return DynamicSubClass;
                }
            }
            
            subClasses.push(new DynamicSubClass(parentClass));
        }
        
        return subClasses;
    }*/
    /**
     * Create SubClassProperty from configuration
     */ /*
   createSubClassProperty(config: ClassConfig, parentClass: typeof Classe): SubClassProperty | undefined {
       if (!config.subClassesProperty) {
           return undefined;
       }

       const subClasses = this.createSubClasses(config, parentClass);
       return new SubClassProperty(config.subClassesProperty.name, subClasses);
   }*/
    /**
     * Get all available class configurations
     */
    async getAllClassNames() {
        // This would scan the config directory for .yaml files
        // For now, return a hardcoded list based on existing classes
        const configFiles = (await this.vault.app.listFiles())
            .filter((file) => file.path.startsWith(this.configPath) && file.extension === 'yaml')
            .map(file => file.basename.replace('.yaml', ''));
        return configFiles;
    }
    /**
     * Parse une ligne de tableau de propriétés en PropertyConfig
     */
    parseTableRowToPropertyConfig(row) {
        const config = {
            type: row.type,
            name: row.name,
            icon: row.icon,
            defaultValue: row.default
        };
        // Parser les classes (string séparé par virgules)
        if (row.classes) {
            config.classes = row.classes.split(',').map(c => c.trim());
        }
        // Parser les options (format "name1:color1,name2:color2")
        if (row.options) {
            config.options = row.options.split(',').map(opt => {
                const [name, color = ''] = opt.split(':').map(s => s.trim());
                return { name, color };
            });
        }
        // Autres attributs
        if (row.formula) {
            config.formula = row.formula;
        }
        if (row.display) {
            config.display = row.display;
        }
        return config;
    }
    /**
     * Set the config path (useful when we need to update it)
     */
    setConfigPath(configPath) {
        this.configPath = configPath;
    }
}
exports.ConfigLoader = ConfigLoader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXENvbmZpZ1xcQ29uZmlnTG9hZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhDQUFnQztBQUdoQyxpRUFBOEQ7QUFDOUQsbUVBQWdFO0FBQ2hFLGlFQUE4RDtBQUM5RCw2REFBMEQ7QUFDMUQsK0RBQTREO0FBQzVELDZEQUEwRDtBQUMxRCxtRUFBZ0U7QUFDaEUsNkRBQTBEO0FBQzFELCtEQUE0RDtBQUM1RCx1RUFBb0U7QUFDcEUsMkVBQXdFO0FBQ3hFLGlFQUE4RDtBQUM5RCxpRUFBOEQ7QUFDOUQsK0RBQTREO0FBQzVELHFEQUFrRDtBQUNsRCx1RUFBb0U7QUFDcEUsaUVBQThEO0FBQzlELGlFQUE4RDtBQUM5RCw2REFBMEQ7QUFLMUQsTUFBYSxZQUFZO0lBS3JCLFlBQVksVUFBa0IsRUFBRSxLQUFZO1FBSHBDLGtCQUFhLEdBQTZCLElBQUksR0FBRyxFQUFFLENBQUM7UUFJeEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDdkIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUFpQjtRQUNuQyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUM7WUFDcEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUUsQ0FBQztRQUM5QyxDQUFDO1FBRUQsSUFBSSxDQUFDO1lBQ0QsTUFBTSxjQUFjLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxJQUFJLFNBQVMsT0FBTyxDQUFDO1lBQzlELElBQUksV0FBbUIsQ0FBQztZQUN4QixJQUFJLElB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QUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7Z0JBQzdELE9BQU8sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUM7WUFDM0IsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBRUQsbUJBQW1CO1FBQ25CLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2QsTUFBTSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNkLE1BQU0sQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUNqQyxDQUFDO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsYUFBYSxDQUFDLFVBQWtCO1FBQzVCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQ2pDLENBQUM7Q0FDSjtBQTlRRCxvQ0E4UUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXENvbmZpZ1xcQ29uZmlnTG9hZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHlhbWwgZnJvbSAnanMteWFtbCc7XHJcbmltcG9ydCB7IENsYXNzZSB9IGZyb20gJy4uL3ZhdWx0L0NsYXNzZSc7XHJcbmltcG9ydCB7IElBcHAsIElGaWxlIH0gZnJvbSAnaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IEFkcmVzc1Byb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9BZHJlc3NQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IEJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJy4uL3Byb3BlcnRpZXMvQm9vbGVhblByb3BlcnR5JztcclxuaW1wb3J0IHsgQ2xhc3NlUHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL0NsYXNzZVByb3BlcnR5JztcclxuaW1wb3J0IHsgRGF0ZVByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9EYXRlUHJvcGVydHknO1xyXG5pbXBvcnQgeyBFbWFpbFByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9FbWFpbFByb3BlcnR5JztcclxuaW1wb3J0IHsgRmlsZVByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9GaWxlUHJvcGVydHknO1xyXG5pbXBvcnQgeyBGb3JtdWxhUHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL0Zvcm11bGFQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IExpbmtQcm9wZXJ0eSB9IGZyb20gJy4uL3Byb3BlcnRpZXMvTGlua1Byb3BlcnR5JztcclxuaW1wb3J0IHsgTWVkaWFQcm9wZXJ0eSB9IGZyb20gJy4uL3Byb3BlcnRpZXMvTWVkaWFQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IE11bHRpRmlsZVByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9NdWx0aUZpbGVQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IE11bHRpU2VsZWN0UHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL011bHRpU2VsZWN0UHJvcGVydHknO1xyXG5pbXBvcnQgeyBOdW1iZXJQcm9wZXJ0eSB9IGZyb20gJy4uL3Byb3BlcnRpZXMvTnVtYmVyUHJvcGVydHknO1xyXG5pbXBvcnQgeyBPYmplY3RQcm9wZXJ0eSB9IGZyb20gJy4uL3Byb3BlcnRpZXMvT2JqZWN0UHJvcGVydHknO1xyXG5pbXBvcnQgeyBQaG9uZVByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9QaG9uZVByb3BlcnR5JztcclxuaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL1Byb3BlcnR5JztcclxuaW1wb3J0IHsgUmFuZ2VEYXRlUHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL1JhbmdlRGF0ZVByb3BlcnR5JztcclxuaW1wb3J0IHsgUmF0aW5nUHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL1JhdGluZ1Byb3BlcnR5JztcclxuaW1wb3J0IHsgU2VsZWN0UHJvcGVydHkgfSBmcm9tICcuLi9wcm9wZXJ0aWVzL1NlbGVjdFByb3BlcnR5JztcclxuaW1wb3J0IHsgVGV4dFByb3BlcnR5IH0gZnJvbSAnLi4vcHJvcGVydGllcy9UZXh0UHJvcGVydHknO1xyXG5pbXBvcnQgeyBWYXVsdCB9IGZyb20gJy4uL3ZhdWx0L1ZhdWx0JztcclxuaW1wb3J0IHsgQ2xhc3NDb25maWcsIFByb3BlcnR5Q29uZmlnLCBQcm9wZXJ0eVRhYmxlUm93IH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnTG9hZGVyIHtcclxuICAgIHByaXZhdGUgY29uZmlnUGF0aDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBsb2FkZWRDb25maWdzOiBNYXA8c3RyaW5nLCBDbGFzc0NvbmZpZz4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdQYXRoOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnUGF0aCA9IGNvbmZpZ1BhdGg7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBhIGNsYXNzIGNvbmZpZ3VyYXRpb24gZnJvbSBZQU1MIGZpbGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZENsYXNzQ29uZmlnKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTxDbGFzc0NvbmZpZz4ge1xyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZENvbmZpZ3MuaGFzKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZGVkQ29uZmlncy5nZXQoY2xhc3NOYW1lKSE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWdGaWxlUGF0aCA9IGAke3RoaXMuY29uZmlnUGF0aH0vJHtjbGFzc05hbWV9LnlhbWxgO1xyXG4gICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLnZhdWx0LmFwcC5nZXRGaWxlKGNvbmZpZ0ZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byByZWFkIHVzaW5nIHZhdWx0IGFkYXB0ZXIgZm9yIHBsdWdpbiBmaWxlc1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQuYXBwLnJlYWRGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byB2YXVsdCBBUEkgZm9yIGZpbGVzIGluIHRoZSB2YXVsdFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnZhdWx0LmFwcC5nZXRGaWxlKGNvbmZpZ0ZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGUgfHwgISgnZXh0ZW5zaW9uJyBpbiBmaWxlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZ3VyYXRpb24gZmlsZSBub3QgZm91bmQ6ICR7Y29uZmlnRmlsZVBhdGh9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5hcHAucmVhZEZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmZpZ3VyYXRpb24gZmlsZSBub3QgZm91bmQgaW4gdmF1bHQsIHRyeWluZyBwbHVnaW4gZm9sZGVyOlwiLCBjb25maWdGaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBub3QgZm91bmQsIGNyZWF0ZSBhIGRlZmF1bHQgY29uZmlnIGZpbGVcclxuICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ID0geWFtbC5kdW1wKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjbGFzc05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogW11cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIllBTUwgY29udGVudCBsb2FkZWQ6XCIsIGZpbGVDb250ZW50KTtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0geWFtbC5sb2FkKGZpbGVDb250ZW50KSBhcyBDbGFzc0NvbmZpZztcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZENvbmZpZ3Muc2V0KGNsYXNzTmFtZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBjb25maWcgZm9yIGNsYXNzICR7Y2xhc3NOYW1lfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlndXJhdGlvbiBub3QgZm91bmQgZm9yIGNsYXNzOiAke2NsYXNzTmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBQcm9wZXJ0eSBpbnN0YW5jZSBmcm9tIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgY3JlYXRlUHJvcGVydHkoY29uZmlnOiBQcm9wZXJ0eUNvbmZpZyk6IFByb3BlcnR5IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gY29uZmlnLmljb24gPyB7IGljb246IGNvbmZpZy5pY29uIH0gOiB7fTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGNvbmZpZy50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1Byb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnRmlsZVByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZVByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBjb25maWcuY2xhc3NlcyB8fCBbXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdNdWx0aUZpbGVQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE11bHRpRmlsZVByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBjb25maWcuY2xhc3NlcyB8fCBbXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdTZWxlY3RQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RPcHRpb25zID0gKGNvbmZpZy5vcHRpb25zIHx8IFtdKS5tYXAob3B0ID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3B0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IG9wdC5jb2xvciB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3RQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgc2VsZWN0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdNdWx0aVNlbGVjdFByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHRpU2VsZWN0T3B0aW9ucyA9IChjb25maWcub3B0aW9ucyB8fCBbXSkubWFwKG9wdCA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9wdC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBvcHQuY29sb3IgfHwgJydcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTXVsdGlTZWxlY3RQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgbXVsdGlTZWxlY3RPcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ0VtYWlsUHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFbWFpbFByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ1Bob25lUHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQaG9uZVByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ0xpbmtQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpbmtQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdPYmplY3RQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmpQcm9wZXJ0aWVzOiB7IFtrZXk6IHN0cmluZ106IFByb3BlcnR5IH0gPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcucHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFbDqXJpZmllciBzaSBjJ2VzdCB1biBmb3JtYXQgdGFibGVhdSBvdSBvYmpldFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmZpZy5wcm9wZXJ0aWVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGFibGVhdVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBjb25maWcucHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcENvbmZpZyA9IHRoaXMucGFyc2VUYWJsZVJvd1RvUHJvcGVydHlDb25maWcocm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialByb3BlcnRpZXNbcm93Lm5hbWVdID0gdGhpcy5jcmVhdGVQcm9wZXJ0eShwcm9wQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBvYmpldCBjbGFzc2lxdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBwcm9wQ29uZmlnXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcucHJvcGVydGllcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialByb3BlcnRpZXNba2V5XSA9IHRoaXMuY3JlYXRlUHJvcGVydHkocHJvcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBBam91dGVyIGxlIG1vZGUgZCdhZmZpY2hhZ2Ugc2kgc3DDqWNpZmnDqVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqT3B0aW9uczogYW55ID0geyAuLi5vcHRpb25zIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmRpc3BsYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpPcHRpb25zLmRpc3BsYXkgPSBjb25maWcuZGlzcGxheTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0UHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9ialByb3BlcnRpZXMsIG9iak9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnUmF0aW5nUHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSYXRpbmdQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdEYXRlUHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlcyA9IGNvbmZpZy5kZWZhdWx0VmFsdWUgPyBbY29uZmlnLmRlZmF1bHRWYWx1ZV0gOiBbXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZVByb3BlcnR5KGNvbmZpZy5uYW1lLCAgdGhpcy52YXVsdCxkZWZhdWx0VmFsdWVzLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ1JhbmdlRGF0ZVByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnQWRyZXNzUHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBZHJlc3NQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdDbGFzc2VQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENsYXNzZVByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBjb25maWcuaWNvbiB8fCAnYm94Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdUZXh0UHJvcGVydHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0UHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnQm9vbGVhblByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm9vbGVhblByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ051bWJlclByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyUHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsICcnLCB7IGljb246IGNvbmZpZy5pY29uIHx8ICcnLCBzdGF0aWM6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdTdWJDbGFzc1Byb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSBoYW5kbGVkIHNlcGFyYXRlbHkgaW4gY3JlYXRlU3ViQ2xhc3NQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShjb25maWcubmFtZSwgdGhpcy52YXVsdCwgb3B0aW9ucyk7IC8vIFBsYWNlaG9sZGVyXHJcblxyXG5cclxuICAgICAgICAgICAgY2FzZSAnTWVkaWFQcm9wZXJ0eSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lZGlhUHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnRm9ybXVsYVByb3BlcnR5JzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm11bGEgPSBjb25maWcuZm9ybXVsYSB8fCBjb25maWcuZGVmYXVsdFZhbHVlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybXVsYU9wdGlvbnMgPSBjb25maWcuaWNvbiA/IHsgaWNvbjogY29uZmlnLmljb24sIHN0YXRpYzogdHJ1ZSwgd3JpdGU6IHRydWUgfSA6IHsgaWNvbjogJycsIHN0YXRpYzogdHJ1ZSwgd3JpdGU6IHRydWUgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybXVsYVByb3BlcnR5KGNvbmZpZy5uYW1lLCB0aGlzLnZhdWx0LCBmb3JtdWxhLCBmb3JtdWxhT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIHByb3BlcnR5IHR5cGU6ICR7Y29uZmlnLnR5cGV9LCBmYWxsaW5nIGJhY2sgdG8gUHJvcGVydHlgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcGVydHkoY29uZmlnLm5hbWUsIHRoaXMudmF1bHQsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBTdWJDbGFzcyBpbnN0YW5jZXMgZnJvbSBjb25maWd1cmF0aW9uXHJcbiAgICAgKi9cclxuICAgIC8qXHJcbiAgICBjcmVhdGVTdWJDbGFzc2VzKGNvbmZpZzogQ2xhc3NDb25maWcsIHBhcmVudENsYXNzOiB0eXBlb2YgQ2xhc3NlKTogU3ViQ2xhc3NbXSB7XHJcbiAgICAgICAgaWYgKCFjb25maWcuc3ViQ2xhc3Nlc1Byb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN1YkNsYXNzZXM6IFN1YkNsYXNzW10gPSBbXTtcclxuICAgICAgICBjb25zdCBjb25maWdMb2FkZXIgPSB0aGlzOyAvLyBSZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgQ29uZmlnTG9hZGVyIGluc3RhbmNlXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBzdWJDbGFzc0NvbmZpZyBvZiBjb25maWcuc3ViQ2xhc3Nlc1Byb3BlcnR5LnN1YkNsYXNzZXMpIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZHluYW1pYyBTdWJDbGFzc1xyXG4gICAgICAgICAgICBjbGFzcyBEeW5hbWljU3ViQ2xhc3MgZXh0ZW5kcyBTdWJDbGFzcyB7XHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgc3ViQ2xhc3NOYW1lID0gc3ViQ2xhc3NDb25maWcubmFtZTtcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBzdWJDbGFzc0ljb24gPSBzdWJDbGFzc0NvbmZpZy5pY29uIHx8ICdib3gnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzdGF0aWMgUHJvcGVydGllczogeyBba2V5OiBzdHJpbmddOiBQcm9wZXJ0eSB9ID0ge307XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGNsYXNzZTogdHlwZW9mIENsYXNzZSwgZGF0YTogYW55ID0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyKGNsYXNzZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBwcm9wZXJ0aWVzIGlmIGRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3ViQ2xhc3NDb25maWcucHJvcGVydGllcyAmJiAhT2JqZWN0LmtleXMoRHluYW1pY1N1YkNsYXNzLlByb3BlcnRpZXMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHByb3BDb25maWddIG9mIE9iamVjdC5lbnRyaWVzKHN1YkNsYXNzQ29uZmlnLnByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEeW5hbWljU3ViQ2xhc3MuUHJvcGVydGllc1trZXldID0gY29uZmlnTG9hZGVyLmNyZWF0ZVByb3BlcnR5KHByb3BDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGdldENvbnN0cnVjdG9yKCk6IHR5cGVvZiBEeW5hbWljU3ViQ2xhc3Mge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEeW5hbWljU3ViQ2xhc3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN1YkNsYXNzZXMucHVzaChuZXcgRHluYW1pY1N1YkNsYXNzKHBhcmVudENsYXNzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzdWJDbGFzc2VzO1xyXG4gICAgfSovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgU3ViQ2xhc3NQcm9wZXJ0eSBmcm9tIGNvbmZpZ3VyYXRpb25cclxuICAgICAqLy8qXHJcbiAgICBjcmVhdGVTdWJDbGFzc1Byb3BlcnR5KGNvbmZpZzogQ2xhc3NDb25maWcsIHBhcmVudENsYXNzOiB0eXBlb2YgQ2xhc3NlKTogU3ViQ2xhc3NQcm9wZXJ0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKCFjb25maWcuc3ViQ2xhc3Nlc1Byb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdWJDbGFzc2VzID0gdGhpcy5jcmVhdGVTdWJDbGFzc2VzKGNvbmZpZywgcGFyZW50Q2xhc3MpO1xyXG4gICAgICAgIHJldHVybiBuZXcgU3ViQ2xhc3NQcm9wZXJ0eShjb25maWcuc3ViQ2xhc3Nlc1Byb3BlcnR5Lm5hbWUsIHN1YkNsYXNzZXMpO1xyXG4gICAgfSovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGF2YWlsYWJsZSBjbGFzcyBjb25maWd1cmF0aW9uc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBbGxDbGFzc05hbWVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICAvLyBUaGlzIHdvdWxkIHNjYW4gdGhlIGNvbmZpZyBkaXJlY3RvcnkgZm9yIC55YW1sIGZpbGVzXHJcbiAgICAgICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgaGFyZGNvZGVkIGxpc3QgYmFzZWQgb24gZXhpc3RpbmcgY2xhc3Nlc1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZ0ZpbGVzID0gKGF3YWl0IHRoaXMudmF1bHQuYXBwLmxpc3RGaWxlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChmaWxlIDogSUZpbGUpID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuY29uZmlnUGF0aCkgJiYgZmlsZS5leHRlbnNpb24gPT09ICd5YW1sJylcclxuICAgICAgICAgICAgLm1hcChmaWxlID0+IGZpbGUuYmFzZW5hbWUucmVwbGFjZSgnLnlhbWwnLCAnJykpO1xyXG4gICAgICAgIHJldHVybiBjb25maWdGaWxlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIHVuZSBsaWduZSBkZSB0YWJsZWF1IGRlIHByb3ByacOpdMOpcyBlbiBQcm9wZXJ0eUNvbmZpZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHBhcnNlVGFibGVSb3dUb1Byb3BlcnR5Q29uZmlnKHJvdzogUHJvcGVydHlUYWJsZVJvdyk6IFByb3BlcnR5Q29uZmlnIHtcclxuICAgICAgICBjb25zdCBjb25maWc6IFByb3BlcnR5Q29uZmlnID0ge1xyXG4gICAgICAgICAgICB0eXBlOiByb3cudHlwZSxcclxuICAgICAgICAgICAgbmFtZTogcm93Lm5hbWUsXHJcbiAgICAgICAgICAgIGljb246IHJvdy5pY29uLFxyXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHJvdy5kZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gUGFyc2VyIGxlcyBjbGFzc2VzIChzdHJpbmcgc8OpcGFyw6kgcGFyIHZpcmd1bGVzKVxyXG4gICAgICAgIGlmIChyb3cuY2xhc3Nlcykge1xyXG4gICAgICAgICAgICBjb25maWcuY2xhc3NlcyA9IHJvdy5jbGFzc2VzLnNwbGl0KCcsJykubWFwKGMgPT4gYy50cmltKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGFyc2VyIGxlcyBvcHRpb25zIChmb3JtYXQgXCJuYW1lMTpjb2xvcjEsbmFtZTI6Y29sb3IyXCIpXHJcbiAgICAgICAgaWYgKHJvdy5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zID0gcm93Lm9wdGlvbnMuc3BsaXQoJywnKS5tYXAob3B0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtuYW1lLCBjb2xvciA9ICcnXSA9IG9wdC5zcGxpdCgnOicpLm1hcChzID0+IHMudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGNvbG9yIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXV0cmVzIGF0dHJpYnV0c1xyXG4gICAgICAgIGlmIChyb3cuZm9ybXVsYSkge1xyXG4gICAgICAgICAgICBjb25maWcuZm9ybXVsYSA9IHJvdy5mb3JtdWxhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocm93LmRpc3BsYXkpIHtcclxuICAgICAgICAgICAgY29uZmlnLmRpc3BsYXkgPSByb3cuZGlzcGxheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNvbmZpZyBwYXRoICh1c2VmdWwgd2hlbiB3ZSBuZWVkIHRvIHVwZGF0ZSBpdClcclxuICAgICAqL1xyXG4gICAgc2V0Q29uZmlnUGF0aChjb25maWdQYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1BhdGggPSBjb25maWdQYXRoO1xyXG4gICAgfVxyXG59Il0sInZlcnNpb24iOjN9