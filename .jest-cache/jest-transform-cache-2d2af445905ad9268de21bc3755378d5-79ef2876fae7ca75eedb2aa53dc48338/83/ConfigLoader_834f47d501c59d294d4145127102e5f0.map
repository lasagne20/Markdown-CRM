{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\Config\\ConfigLoader.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\Config\\ConfigLoader.ts"],"sourcesContent":["import * as yaml from 'js-yaml';\r\nimport { Classe } from '../vault/Classe';\r\nimport { IApp, IFile } from 'interfaces';\r\nimport { AdressProperty } from '../properties/AdressProperty';\r\nimport { BooleanProperty } from '../properties/BooleanProperty';\r\nimport { ClasseProperty } from '../properties/ClasseProperty';\r\nimport { DateProperty } from '../properties/DateProperty';\r\nimport { EmailProperty } from '../properties/EmailProperty';\r\nimport { FileProperty } from '../properties/FileProperty';\r\nimport { FormulaProperty } from '../properties/FormulaProperty';\r\nimport { LinkProperty } from '../properties/LinkProperty';\r\nimport { MediaProperty } from '../properties/MediaProperty';\r\nimport { MultiFileProperty } from '../properties/MultiFileProperty';\r\nimport { MultiSelectProperty } from '../properties/MultiSelectProperty';\r\nimport { NumberProperty } from '../properties/NumberProperty';\r\nimport { ObjectProperty } from '../properties/ObjectProperty';\r\nimport { PhoneProperty } from '../properties/PhoneProperty';\r\nimport { Property } from '../properties/Property';\r\nimport { RangeDateProperty } from '../properties/RangeDateProperty';\r\nimport { RatingProperty } from '../properties/RatingProperty';\r\nimport { SelectProperty } from '../properties/SelectProperty';\r\nimport { TextProperty } from '../properties/TextProperty';\r\nimport { Vault } from '../vault/Vault';\r\nimport { ClassConfig, PropertyConfig, PropertyTableRow } from './interfaces';\r\n\r\n\r\nexport class ConfigLoader {\r\n    private configPath: string;\r\n    private loadedConfigs: Map<string, ClassConfig> = new Map();\r\n    private vault: Vault;\r\n\r\n    constructor(configPath: string, vault: Vault) {\r\n        this.configPath = configPath;\r\n        this.vault = vault;\r\n    }\r\n\r\n    /**\r\n     * Load a class configuration from YAML file\r\n     */\r\n    async loadClassConfig(className: string): Promise<ClassConfig> {\r\n        if (this.loadedConfigs.has(className)) {\r\n            return this.loadedConfigs.get(className)!;\r\n        }\r\n\r\n        try {\r\n            const configFilePath = `${this.configPath}/${className}.yaml`;\r\n            let fileContent: string;\r\n            let file = await this.vault.app.getFile(configFilePath);\r\n            if (file) {\r\n                // Try to read using vault adapter for plugin files\r\n                try {\r\n                    fileContent = await this.vault.app.readFile(file);\r\n                } catch (error) {\r\n                    // Fallback to vault API for files in the vault\r\n                    const file = await this.vault.app.getFile(configFilePath);\r\n                    if (!file || !('extension' in file)) {\r\n                        throw new Error(`Configuration file not found: ${configFilePath}`);\r\n                    }\r\n                    fileContent = await this.vault.app.readFile(file);\r\n                }\r\n            } else {\r\n                console.log(\"Configuration file not found in vault, trying plugin folder:\", configFilePath);\r\n                // If not found, create a default config file\r\n                fileContent = yaml.dump({\r\n                    name: className,\r\n                    properties: []\r\n                });\r\n            }\r\n            \r\n            console.log(\"YAML content loaded:\", fileContent);\r\n            const config = yaml.load(fileContent) as ClassConfig;\r\n\r\n\r\n            this.loadedConfigs.set(className, config);\r\n            return config;\r\n        } catch (error) {\r\n            console.error(`Failed to load config for class ${className}:`, error);\r\n            throw new Error(`Configuration not found for class: ${className}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a Property instance from configuration\r\n     */\r\n    createProperty(config: PropertyConfig): Property {\r\n        const options = config.icon ? { icon: config.icon } : {};\r\n        \r\n        switch (config.type) {\r\n            case 'Property':\r\n                return new Property(config.name, this.vault, options);\r\n            \r\n            case 'FileProperty':\r\n                return new FileProperty(config.name, this.vault, config.classes || [], options);\r\n            \r\n            case 'MultiFileProperty':\r\n                return new MultiFileProperty(config.name, this.vault, config.classes || [], options);\r\n            \r\n            case 'SelectProperty':\r\n                const selectOptions = (config.options || []).map(opt => ({\r\n                    name: opt.name,\r\n                    color: opt.color || ''\r\n                }));\r\n                return new SelectProperty(config.name, this.vault, selectOptions, options);\r\n            \r\n            case 'MultiSelectProperty':\r\n                const multiSelectOptions = (config.options || []).map(opt => ({\r\n                    name: opt.name,\r\n                    color: opt.color || ''\r\n                }));\r\n                return new MultiSelectProperty(config.name, this.vault, multiSelectOptions, options);\r\n            \r\n            case 'EmailProperty':\r\n                return new EmailProperty(config.name, this.vault, options);\r\n            \r\n            case 'PhoneProperty':\r\n                return new PhoneProperty(config.name, this.vault, options);\r\n            \r\n            case 'LinkProperty':\r\n                return new LinkProperty(config.name, this.vault, options);\r\n            \r\n            case 'ObjectProperty':\r\n                const objProperties: { [key: string]: Property } = {};\r\n                if (config.properties) {\r\n                    // Vérifier si c'est un format tableau ou objet\r\n                    if (Array.isArray(config.properties)) {\r\n                        // Format tableau\r\n                        for (const row of config.properties) {\r\n                            const propConfig = this.parseTableRowToPropertyConfig(row);\r\n                            objProperties[row.name] = this.createProperty(propConfig);\r\n                        }\r\n                    } else {\r\n                        // Format objet classique\r\n                        for (const [key, propConfig] of Object.entries(config.properties)) {\r\n                            objProperties[key] = this.createProperty(propConfig);\r\n                        }\r\n                    }\r\n                }\r\n                // Ajouter le mode d'affichage si spécifié\r\n                const objOptions: any = { ...options };\r\n                if (config.display) {\r\n                    objOptions.display = config.display;\r\n                }\r\n                return new ObjectProperty(config.name, this.vault, objProperties, objOptions);\r\n            \r\n            case 'RatingProperty':\r\n                return new RatingProperty(config.name, this.vault, options);\r\n            \r\n            case 'DateProperty':\r\n                const defaultValues = config.defaultValue ? [config.defaultValue] : [];\r\n                return new DateProperty(config.name,  this.vault,defaultValues, options);\r\n            \r\n            case 'RangeDateProperty':\r\n                return new RangeDateProperty(config.name, this.vault, options);\r\n            \r\n            case 'AdressProperty':\r\n                return new AdressProperty(config.name, this.vault, options);\r\n            \r\n            case 'ClasseProperty':\r\n                return new ClasseProperty(config.name, this.vault, config.icon || 'box');\r\n            \r\n            case 'TextProperty':\r\n                return new TextProperty(config.name, this.vault, options);\r\n            \r\n            case 'BooleanProperty':\r\n                return new BooleanProperty(config.name, this.vault, options);\r\n            \r\n            case 'NumberProperty':\r\n                return new NumberProperty(config.name, this.vault, '', { icon: config.icon || '', static: true });\r\n            \r\n            case 'SubClassProperty':\r\n                // This will be handled separately in createSubClassProperty\r\n                return new Property(config.name, this.vault, options); // Placeholder\r\n\r\n\r\n            case 'MediaProperty':\r\n                return new MediaProperty(config.name, this.vault, options);\r\n\r\n            case 'FormulaProperty':\r\n                const formula = config.formula || config.defaultValue || '';\r\n                const formulaOptions = config.icon ? { icon: config.icon, static: true, write: true } : { icon: '', static: true, write: true };\r\n                return new FormulaProperty(config.name, this.vault, formula, formulaOptions);\r\n            \r\n            default:\r\n                console.warn(`Unknown property type: ${config.type}, falling back to Property`);\r\n                return new Property(config.name, this.vault, options);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create SubClass instances from configuration\r\n     */\r\n    /*\r\n    createSubClasses(config: ClassConfig, parentClass: typeof Classe): SubClass[] {\r\n        if (!config.subClassesProperty) {\r\n            return [];\r\n        }\r\n\r\n        const subClasses: SubClass[] = [];\r\n        const configLoader = this; // Reference to the current ConfigLoader instance\r\n        \r\n        for (const subClassConfig of config.subClassesProperty.subClasses) {\r\n            // Create a dynamic SubClass\r\n            class DynamicSubClass extends SubClass {\r\n                public subClassName = subClassConfig.name;\r\n                public subClassIcon = subClassConfig.icon || 'box';\r\n                \r\n                static Properties: { [key: string]: Property } = {};\r\n                \r\n                constructor(classe: typeof Classe, data: any = null) {\r\n                    super(classe, data);\r\n                    \r\n                    // Initialize properties if defined\r\n                    if (subClassConfig.properties && !Object.keys(DynamicSubClass.Properties).length) {\r\n                        for (const [key, propConfig] of Object.entries(subClassConfig.properties)) {\r\n                            DynamicSubClass.Properties[key] = configLoader.createProperty(propConfig);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                getConstructor(): typeof DynamicSubClass {\r\n                    return DynamicSubClass;\r\n                }\r\n            }\r\n            \r\n            subClasses.push(new DynamicSubClass(parentClass));\r\n        }\r\n        \r\n        return subClasses;\r\n    }*/\r\n\r\n    /**\r\n     * Create SubClassProperty from configuration\r\n     *//*\r\n    createSubClassProperty(config: ClassConfig, parentClass: typeof Classe): SubClassProperty | undefined {\r\n        if (!config.subClassesProperty) {\r\n            return undefined;\r\n        }\r\n\r\n        const subClasses = this.createSubClasses(config, parentClass);\r\n        return new SubClassProperty(config.subClassesProperty.name, subClasses);\r\n    }*/\r\n\r\n    /**\r\n     * Get all available class configurations\r\n     */\r\n    async getAllClassNames(): Promise<string[]> {\r\n        // This would scan the config directory for .yaml files\r\n        // For now, return a hardcoded list based on existing classes\r\n        const configFiles = (await this.vault.app.listFiles())\r\n            .filter((file : IFile) => file.path.startsWith(this.configPath) && file.extension === 'yaml')\r\n            .map(file => file.basename.replace('.yaml', ''));\r\n        return configFiles;\r\n    }\r\n\r\n    /**\r\n     * Parse une ligne de tableau de propriétés en PropertyConfig\r\n     */\r\n    private parseTableRowToPropertyConfig(row: PropertyTableRow): PropertyConfig {\r\n        const config: PropertyConfig = {\r\n            type: row.type,\r\n            name: row.name,\r\n            icon: row.icon,\r\n            defaultValue: row.default\r\n        };\r\n\r\n        // Parser les classes (string séparé par virgules)\r\n        if (row.classes) {\r\n            config.classes = row.classes.split(',').map(c => c.trim());\r\n        }\r\n\r\n        // Parser les options (format \"name1:color1,name2:color2\")\r\n        if (row.options) {\r\n            config.options = row.options.split(',').map(opt => {\r\n                const [name, color = ''] = opt.split(':').map(s => s.trim());\r\n                return { name, color };\r\n            });\r\n        }\r\n\r\n        // Autres attributs\r\n        if (row.formula) {\r\n            config.formula = row.formula;\r\n        }\r\n        \r\n        if (row.display) {\r\n            config.display = row.display;\r\n        }\r\n\r\n        return config;\r\n    }\r\n\r\n    /**\r\n     * Set the config path (useful when we need to update it)\r\n     */\r\n    setConfigPath(configPath: string): void {\r\n        this.configPath = configPath;\r\n    }\r\n}"],"version":3}