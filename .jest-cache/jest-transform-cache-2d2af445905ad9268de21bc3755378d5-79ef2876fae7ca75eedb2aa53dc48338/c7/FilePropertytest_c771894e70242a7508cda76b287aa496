2e06a4bc6bf0f707ff9a1ff09bedbae4
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock entire modules
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn(),
    Notice: jest.fn(),
    selectFile: jest.fn()
}));
const FileProperty_1 = require("../../src/properties/FileProperty");
const LinkProperty_1 = require("../../src/properties/LinkProperty");
// Mock global functions
global.selectFile = jest.fn();
// Get reference to mocked function
const { selectFile } = require('../../src/vault/Utils');
describe('FileProperty', () => {
    let fileProperty;
    let mockVault;
    beforeEach(() => {
        // Reset DOM mocks
        document.body.innerHTML = '';
        jest.clearAllMocks();
        // Mock vault with necessary methods
        mockVault = {
            readLinkFile: jest.fn(),
            getFromLink: jest.fn(),
            getFromFile: jest.fn(),
            getName: jest.fn().mockReturnValue('TestVault'),
            app: {
                vault: {
                    getName: jest.fn().mockReturnValue('TestVault'),
                    getAbstractFileByPath: jest.fn()
                },
                workspace: {
                    getLeaf: jest.fn().mockReturnValue({
                        openFile: jest.fn()
                    })
                },
                setIcon: jest.fn(),
                selectFile: jest.fn()
            }
        };
    });
    beforeEach(() => {
        fileProperty = new FileProperty_1.FileProperty('testFile', mockVault, ['class1', 'class2']);
    });
    describe('constructor', () => {
        it('should create FileProperty with correct type', () => {
            expect(fileProperty.type).toBe('file');
        });
        it('should inherit from LinkProperty', () => {
            expect(fileProperty).toBeInstanceOf(LinkProperty_1.LinkProperty);
        });
        it('should store classes correctly', () => {
            expect(fileProperty.classes).toEqual(['class1', 'class2']);
        });
        it('should pass args to parent constructor', () => {
            const customArgs = { icon: 'custom-icon' };
            const customProperty = new FileProperty_1.FileProperty('customName', mockVault, ['class1'], customArgs);
            expect(customProperty.name).toBe('customName');
            expect(customProperty.classes).toEqual(['class1']);
        });
        it('should handle empty classes array', () => {
            const emptyClassProperty = new FileProperty_1.FileProperty('empty', mockVault, []);
            expect(emptyClassProperty.classes).toEqual([]);
        });
    });
    describe('getClasses', () => {
        it('should return classes array', () => {
            expect(fileProperty.getClasses()).toEqual(['class1', 'class2']);
        });
        it('should return empty array when no classes', () => {
            const emptyProperty = new FileProperty_1.FileProperty('test', mockVault, []);
            expect(emptyProperty.getClasses()).toEqual([]);
        });
        it('should return same reference to classes array', () => {
            const classes = ['test1', 'test2'];
            const property = new FileProperty_1.FileProperty('test', mockVault, classes);
            expect(property.getClasses()).toBe(classes);
        });
    });
    //     it('should handle object values', () => {
    //         const objectValue = { test: 'value' };
    //         expect(fileProperty.getParentValue(objectValue)).toBe(objectValue);
    //     });
    // });
    describe('getPretty', () => {
        it('should call vault.readLinkFile with value', () => {
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.vault = mockVault;
            const result = fileProperty.getPretty(testValue);
            expect(mockVault.readLinkFile).toHaveBeenCalledWith(testValue);
            expect(result).toBe('TestFile');
        });
        it('should handle empty value', () => {
            mockVault.readLinkFile.mockReturnValue('');
            fileProperty.vault = mockVault;
            const result = fileProperty.getPretty('');
            expect(mockVault.readLinkFile).toHaveBeenCalledWith('');
            expect(result).toBe('');
        });
    });
    describe('getClasse', () => {
        it('should return classe when found', async () => {
            const mockClasse = { name: 'TestClass' };
            const mockRead = {};
            const testLink = '[[TestFile]]';
            fileProperty.read = jest.fn().mockReturnValue(testLink);
            mockVault.getFromLink.mockResolvedValue(mockClasse);
            fileProperty.vault = mockVault;
            const result = await fileProperty.getClasse(mockRead);
            expect(fileProperty.read).toHaveBeenCalledWith(mockRead);
            expect(mockVault.getFromLink).toHaveBeenCalledWith(testLink);
            expect(result).toBe(mockClasse);
        });
        it('should return undefined when no link found', async () => {
            const mockRead = {};
            fileProperty.read = jest.fn().mockReturnValue(null);
            fileProperty.vault = mockVault;
            const result = await fileProperty.getClasse(mockRead);
            expect(result).toBeUndefined();
        });
        it('should return undefined when classe not found', async () => {
            const mockRead = {};
            const testLink = '[[TestFile]]';
            fileProperty.read = jest.fn().mockReturnValue(testLink);
            mockVault.getFromLink.mockResolvedValue(null);
            fileProperty.vault = mockVault;
            const result = await fileProperty.getClasse(mockRead);
            expect(result).toBeUndefined();
        });
    });
    describe('validate', () => {
        it('should extract and return valid Obsidian link', () => {
            const input = '[[TestFile]]';
            expect(fileProperty.validate(input)).toBe('[[TestFile]]');
        });
        it('should extract link from text with link', () => {
            const input = 'Some text [[TestFile]] more text';
            expect(fileProperty.validate(input)).toBe('[[TestFile]]');
        });
        it('should handle link with alias', () => {
            const input = '[[TestFile|Alias]]';
            expect(fileProperty.validate(input)).toBe('[[TestFile|Alias]]');
        });
        it('should return empty string for invalid format', () => {
            const input = 'Just plain text';
            expect(fileProperty.validate(input)).toBe('');
        });
        it('should return empty string for malformed links', () => {
            const input = '[[TestFile';
            expect(fileProperty.validate(input)).toBe('');
        });
        it('should handle empty string', () => {
            expect(fileProperty.validate('')).toBe('');
        });
        it('should handle multiple links and return first', () => {
            const input = '[[FirstFile]] and [[SecondFile]]';
            expect(fileProperty.validate(input)).toBe('[[FirstFile]]');
        });
    });
    describe('getLink', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should generate obsidian URL with file path when file exists', () => {
            const testValue = '[[TestFile]]';
            const filePath = 'path/to/TestFile.md';
            mockVault.readLinkFile.mockReturnValueOnce(filePath).mockReturnValueOnce('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(true);
            const result = fileProperty.getLink(testValue);
            expect(result).toBe('obsidian://open?vault=TestVault&file=path%2Fto%2FTestFile.md');
        });
        it('should use fallback when file does not exist', () => {
            const testValue = '[[TestFile]]';
            const filePath = 'path/to/TestFile.md';
            mockVault.readLinkFile.mockImplementation((value, withPath) => withPath ? null : 'TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            const result = fileProperty.getLink(testValue);
            expect(result).toBe('obsidian://open?vault=TestVault&file=TestFile');
        });
        it('should set vault when provided as parameter', () => {
            const newVault = { ...mockVault };
            fileProperty.vault = null;
            mockVault.readLinkFile.mockReturnValue('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            fileProperty.getLink('[[TestFile]]', newVault);
            expect(fileProperty.vault).toBe(newVault);
        });
        it('should encode special characters in vault name', () => {
            const testValue = '[[TestFile]]';
            mockVault.getName.mockReturnValue('My Vault & Stuff');
            mockVault.readLinkFile.mockReturnValue('TestFile');
            mockVault.app.vault.getAbstractFileByPath.mockReturnValue(null);
            const result = fileProperty.getLink(testValue);
            expect(result).toContain('vault=My%20Vault%20%26%20Stuff');
        });
    });
    describe('createIconContainer', () => {
        it('should create icon container with correct structure', () => {
            const mockUpdate = jest.fn();
            const result = fileProperty.createIconContainer(mockUpdate);
            expect(result.tagName).toBe('DIV');
            expect(result.classList.contains('icon-container')).toBe(true);
            expect(result.children.length).toBe(1);
        });
        it('should set cursor pointer when not static', () => {
            const mockUpdate = jest.fn();
            fileProperty.static = false;
            const result = fileProperty.createIconContainer(mockUpdate);
            const icon = result.children[0];
            expect(icon.style.cursor).toBe('pointer');
        });
        it('should not set cursor pointer when static', () => {
            const mockUpdate = jest.fn();
            fileProperty.static = true;
            const result = fileProperty.createIconContainer(mockUpdate);
            const icon = result.children[0];
            expect(icon.style.cursor).toBe('');
        });
    });
    describe('handleIconClick', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should call selectFile with correct parameters', async () => {
            const mockUpdate = jest.fn();
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(null);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockVault.app.selectFile).toHaveBeenCalledWith(mockVault, ['class1', 'class2'], { hint: "Choisissez un fichier class1 ou class2" });
        });
        it('should update value when file selected', async () => {
            const mockUpdate = jest.fn();
            const mockFile = {
                getLink: jest.fn().mockReturnValue('[[SelectedFile]]')
            };
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(mockFile);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockUpdate).toHaveBeenCalledWith('[[SelectedFile]]');
        });
        it('should not update when no file selected', async () => {
            const mockUpdate = jest.fn();
            const mockEvent = {
                target: document.createElement('div')
            };
            mockVault.app.selectFile.mockResolvedValue(null);
            await fileProperty.handleIconClick(mockUpdate, mockEvent);
            expect(mockUpdate).not.toHaveBeenCalled();
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            fileProperty.vault = mockVault;
        });
        it('should create field container with correct structure', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            expect(result.tagName).toBe('DIV');
            expect(result.classList.contains('field-container')).toBe(true);
        });
        it('should create link with correct href and text', () => {
            const mockUpdate = jest.fn();
            const testValue = '[[TestFile]]';
            mockVault.readLinkFile.mockReturnValue('TestFile');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = result.querySelector('a');
            expect(link?.href).toBe('obsidian://test');
            expect(link?.textContent).toBe('TestFile');
            expect(link?.classList.contains('field-link')).toBe(true);
        });
        it('should handle empty value', () => {
            const mockUpdate = jest.fn();
            const testValue = '';
            mockVault.readLinkFile.mockReturnValue('');
            fileProperty.getLink = jest.fn().mockReturnValue('obsidian://test');
            const result = fileProperty.createFieldContainerContent(mockUpdate, testValue);
            const link = result.querySelector('a');
            expect(link?.textContent).toBe('');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXEZpbGVQcm9wZXJ0eS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFLSCxzQkFBc0I7QUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2xCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2pCLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBUkosb0VBQWlFO0FBQ2pFLG9FQUFpRTtBQVNqRSx3QkFBd0I7QUFDdkIsTUFBYyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFFdkMsbUNBQW1DO0FBQ25DLE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQUV4RCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUMxQixJQUFJLFlBQTBCLENBQUM7SUFDL0IsSUFBSSxTQUFjLENBQUM7SUFFbkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGtCQUFrQjtRQUNsQixRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLG9DQUFvQztRQUNwQyxTQUFTLEdBQUc7WUFDUixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixPQUFPLEVBQUUsSUFBSSxD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QUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1lBQ2pDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM3QixNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFFckIsU0FBUyxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0MsWUFBWSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFFcEUsTUFBTSxNQUFNLEdBQUcsWUFBWSxDQUFDLDJCQUEyQixDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUMvRSxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXZDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcRmlsZVByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRmlsZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvRmlsZVByb3BlcnR5JztcclxuaW1wb3J0IHsgTGlua1Byb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvTGlua1Byb3BlcnR5JztcclxuXHJcbi8vIE1vY2sgZW50aXJlIG1vZHVsZXNcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvdmF1bHQvVXRpbHMnLCAoKSA9PiAoe1xyXG4gICAgc2V0SWNvbjogamVzdC5mbigpLFxyXG4gICAgTm90aWNlOiBqZXN0LmZuKCksXHJcbiAgICBzZWxlY3RGaWxlOiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuLy8gTW9jayBnbG9iYWwgZnVuY3Rpb25zXHJcbihnbG9iYWwgYXMgYW55KS5zZWxlY3RGaWxlID0gamVzdC5mbigpO1xyXG5cclxuLy8gR2V0IHJlZmVyZW5jZSB0byBtb2NrZWQgZnVuY3Rpb25cclxuY29uc3QgeyBzZWxlY3RGaWxlIH0gPSByZXF1aXJlKCcuLi8uLi9zcmMvdmF1bHQvVXRpbHMnKTtcclxuXHJcbmRlc2NyaWJlKCdGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgZmlsZVByb3BlcnR5OiBGaWxlUHJvcGVydHk7XHJcbiAgICBsZXQgbW9ja1ZhdWx0OiBhbnk7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgRE9NIG1vY2tzXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBNb2NrIHZhdWx0IHdpdGggbmVjZXNzYXJ5IG1ldGhvZHNcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIHJlYWRMaW5rRmlsZTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBnZXRGcm9tTGluazogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBnZXRGcm9tRmlsZTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBnZXROYW1lOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdUZXN0VmF1bHQnKSxcclxuICAgICAgICAgICAgYXBwOiB7XHJcbiAgICAgICAgICAgICAgICB2YXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldE5hbWU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3RWYXVsdCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEFic3RyYWN0RmlsZUJ5UGF0aDogamVzdC5mbigpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0TGVhZjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5GaWxlOiBqZXN0LmZuKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldEljb246IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdEZpbGU6IGplc3QuZm4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIGZpbGVQcm9wZXJ0eSA9IG5ldyBGaWxlUHJvcGVydHkoJ3Rlc3RGaWxlJywgbW9ja1ZhdWx0LCBbJ2NsYXNzMScsICdjbGFzczInXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgRmlsZVByb3BlcnR5IHdpdGggY29ycmVjdCB0eXBlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnR5cGUpLnRvQmUoJ2ZpbGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbmhlcml0IGZyb20gTGlua1Byb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5KS50b0JlSW5zdGFuY2VPZihMaW5rUHJvcGVydHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHN0b3JlIGNsYXNzZXMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LmNsYXNzZXMpLnRvRXF1YWwoWydjbGFzczEnLCAnY2xhc3MyJ10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHBhc3MgYXJncyB0byBwYXJlbnQgY29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUFyZ3MgPSB7IGljb246ICdjdXN0b20taWNvbicgfTtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tUHJvcGVydHkgPSBuZXcgRmlsZVByb3BlcnR5KCdjdXN0b21OYW1lJywgbW9ja1ZhdWx0LCBbJ2NsYXNzMSddLCBjdXN0b21BcmdzKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbVByb3BlcnR5Lm5hbWUpLnRvQmUoJ2N1c3RvbU5hbWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbVByb3BlcnR5LmNsYXNzZXMpLnRvRXF1YWwoWydjbGFzczEnXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGNsYXNzZXMgYXJyYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcHR5Q2xhc3NQcm9wZXJ0eSA9IG5ldyBGaWxlUHJvcGVydHkoJ2VtcHR5JywgbW9ja1ZhdWx0LCBbXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChlbXB0eUNsYXNzUHJvcGVydHkuY2xhc3NlcykudG9FcXVhbChbXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0Q2xhc3NlcycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBjbGFzc2VzIGFycmF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LmdldENsYXNzZXMoKSkudG9FcXVhbChbJ2NsYXNzMScsICdjbGFzczInXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gY2xhc3NlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZW1wdHlQcm9wZXJ0eSA9IG5ldyBGaWxlUHJvcGVydHkoJ3Rlc3QnLCBtb2NrVmF1bHQsIFtdKTtcclxuICAgICAgICAgICAgZXhwZWN0KGVtcHR5UHJvcGVydHkuZ2V0Q2xhc3NlcygpKS50b0VxdWFsKFtdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc2FtZSByZWZlcmVuY2UgdG8gY2xhc3NlcyBhcnJheScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2xhc3NlcyA9IFsndGVzdDEnLCAndGVzdDInXTtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBuZXcgRmlsZVByb3BlcnR5KCd0ZXN0JywgbW9ja1ZhdWx0LCBjbGFzc2VzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3BlcnR5LmdldENsYXNzZXMoKSkudG9CZShjbGFzc2VzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgb2JqZWN0IHZhbHVlcycsICgpID0+IHtcclxuICAgIC8vICAgICAgICAgY29uc3Qgb2JqZWN0VmFsdWUgPSB7IHRlc3Q6ICd2YWx1ZScgfTtcclxuICAgIC8vICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS5nZXRQYXJlbnRWYWx1ZShvYmplY3RWYWx1ZSkpLnRvQmUob2JqZWN0VmFsdWUpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldFByZXR0eScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNhbGwgdmF1bHQucmVhZExpbmtGaWxlIHdpdGggdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQucmVhZExpbmtGaWxlLm1vY2tSZXR1cm5WYWx1ZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmdldFByZXR0eSh0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ1Rlc3RGaWxlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQucmVhZExpbmtGaWxlLm1vY2tSZXR1cm5WYWx1ZSgnJyk7XHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS52YXVsdCA9IG1vY2tWYXVsdDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5nZXRQcmV0dHkoJycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0Q2xhc3NlJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGNsYXNzZSB3aGVuIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ2xhc3NlID0geyBuYW1lOiAnVGVzdENsYXNzJyB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmVhZCA9IHt9IGFzIGFueTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdExpbmsgPSAnW1tUZXN0RmlsZV1dJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0ZXN0TGluayk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRGcm9tTGluay5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xhc3NlKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmlsZVByb3BlcnR5LmdldENsYXNzZShtb2NrUmVhZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnJlYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tSZWFkKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tWYXVsdC5nZXRGcm9tTGluaykudG9IYXZlQmVlbkNhbGxlZFdpdGgodGVzdExpbmspO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tDbGFzc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgd2hlbiBubyBsaW5rIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmVhZCA9IHt9IGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnZhdWx0ID0gbW9ja1ZhdWx0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmlsZVByb3BlcnR5LmdldENsYXNzZShtb2NrUmVhZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCB3aGVuIGNsYXNzZSBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZWFkID0ge30gYXMgYW55O1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0TGluayA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRlc3RMaW5rKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldEZyb21MaW5rLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmaWxlUHJvcGVydHkuZ2V0Q2xhc3NlKG1vY2tSZWFkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGV4dHJhY3QgYW5kIHJldHVybiB2YWxpZCBPYnNpZGlhbiBsaW5rJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhbGlkYXRlKGlucHV0KSkudG9CZSgnW1tUZXN0RmlsZV1dJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZXh0cmFjdCBsaW5rIGZyb20gdGV4dCB3aXRoIGxpbmsnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1NvbWUgdGV4dCBbW1Rlc3RGaWxlXV0gbW9yZSB0ZXh0JztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJ1tbVGVzdEZpbGVdXScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBsaW5rIHdpdGggYWxpYXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1tbVGVzdEZpbGV8QWxpYXNdXSc7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkudmFsaWRhdGUoaW5wdXQpKS50b0JlKCdbW1Rlc3RGaWxlfEFsaWFzXV0nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBpbnZhbGlkIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSAnSnVzdCBwbGFpbiB0ZXh0JztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgZm9yIG1hbGZvcm1lZCBsaW5rcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSAnW1tUZXN0RmlsZSc7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlUHJvcGVydHkudmFsaWRhdGUoaW5wdXQpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3RyaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhbGlkYXRlKCcnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGxpbmtzIGFuZCByZXR1cm4gZmlyc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gJ1tbRmlyc3RGaWxlXV0gYW5kIFtbU2Vjb25kRmlsZV1dJztcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGVQcm9wZXJ0eS52YWxpZGF0ZShpbnB1dCkpLnRvQmUoJ1tbRmlyc3RGaWxlXV0nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRMaW5rJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgb2JzaWRpYW4gVVJMIHdpdGggZmlsZSBwYXRoIHdoZW4gZmlsZSBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICdwYXRoL3RvL1Rlc3RGaWxlLm1kJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlT25jZShmaWxlUGF0aCkubW9ja1JldHVyblZhbHVlT25jZSgnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ29ic2lkaWFuOi8vb3Blbj92YXVsdD1UZXN0VmF1bHQmZmlsZT1wYXRoJTJGdG8lMkZUZXN0RmlsZS5tZCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVzZSBmYWxsYmFjayB3aGVuIGZpbGUgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICdwYXRoL3RvL1Rlc3RGaWxlLm1kJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja0ltcGxlbWVudGF0aW9uKCh2YWx1ZTogYW55LCB3aXRoUGF0aDogYW55KSA9PiB3aXRoUGF0aCA/IG51bGwgOiAnVGVzdEZpbGUnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmdldExpbmsodGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ29ic2lkaWFuOi8vb3Blbj92YXVsdD1UZXN0VmF1bHQmZmlsZT1UZXN0RmlsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCB2YXVsdCB3aGVuIHByb3ZpZGVkIGFzIHBhcmFtZXRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3VmF1bHQgPSB7IC4uLm1vY2tWYXVsdCB9O1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LnJlYWRMaW5rRmlsZS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3RGaWxlJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5nZXRMaW5rKCdbW1Rlc3RGaWxlXV0nLCBuZXdWYXVsdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmlsZVByb3BlcnR5LnZhdWx0KS50b0JlKG5ld1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBlbmNvZGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHZhdWx0IG5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RWYWx1ZSA9ICdbW1Rlc3RGaWxlXV0nO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0TmFtZS5tb2NrUmV0dXJuVmFsdWUoJ015IFZhdWx0ICYgU3R1ZmYnKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LnJlYWRMaW5rRmlsZS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3RGaWxlJyk7XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5nZXRMaW5rKHRlc3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ3ZhdWx0PU15JTIwVmF1bHQlMjAlMjYlMjBTdHVmZicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUljb25Db250YWluZXInLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgaWNvbiBjb250YWluZXIgd2l0aCBjb3JyZWN0IHN0cnVjdHVyZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5jcmVhdGVJY29uQ29udGFpbmVyKG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tY29udGFpbmVyJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuY2hpbGRyZW4ubGVuZ3RoKS50b0JlKDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCBjdXJzb3IgcG9pbnRlciB3aGVuIG5vdCBzdGF0aWMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGZpbGVQcm9wZXJ0eS5zdGF0aWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5jcmVhdGVJY29uQ29udGFpbmVyKG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gcmVzdWx0LmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGljb24uc3R5bGUuY3Vyc29yKS50b0JlKCdwb2ludGVyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHNldCBjdXJzb3IgcG9pbnRlciB3aGVuIHN0YXRpYycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LnN0YXRpYyA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlUHJvcGVydHkuY3JlYXRlSWNvbkNvbnRhaW5lcihtb2NrVXBkYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgaWNvbiA9IHJlc3VsdC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChpY29uLnN0eWxlLmN1cnNvcikudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnaGFuZGxlSWNvbkNsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY2FsbCBzZWxlY3RGaWxlIHdpdGggY29ycmVjdCBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIH0gYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC5zZWxlY3RGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZmlsZVByb3BlcnR5LmhhbmRsZUljb25DbGljayhtb2NrVXBkYXRlLCBtb2NrRXZlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tWYXVsdC5hcHAuc2VsZWN0RmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgICAgICAgICBtb2NrVmF1bHQsXHJcbiAgICAgICAgICAgICAgICBbJ2NsYXNzMScsICdjbGFzczInXSxcclxuICAgICAgICAgICAgICAgIHsgaGludDogXCJDaG9pc2lzc2V6IHVuIGZpY2hpZXIgY2xhc3MxIG91IGNsYXNzMlwiIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgdmFsdWUgd2hlbiBmaWxlIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGdldExpbms6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ1tbU2VsZWN0ZWRGaWxlXV0nKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIH0gYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC5zZWxlY3RGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaWxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGVQcm9wZXJ0eS5oYW5kbGVJY29uQ2xpY2sobW9ja1VwZGF0ZSwgbW9ja0V2ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnW1tTZWxlY3RlZEZpbGVdXScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCB1cGRhdGUgd2hlbiBubyBmaWxlIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIH0gYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmFwcC5zZWxlY3RGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZmlsZVByb3BlcnR5LmhhbmRsZUljb25DbGljayhtb2NrVXBkYXRlLCBtb2NrRXZlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRmllbGRDb250YWluZXJDb250ZW50JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkudmF1bHQgPSBtb2NrVmF1bHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGZpZWxkIGNvbnRhaW5lciB3aXRoIGNvcnJlY3Qgc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0RmlsZV1dJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlKCdUZXN0RmlsZScpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkuZ2V0TGluayA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ29ic2lkaWFuOi8vdGVzdCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCB0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50YWdOYW1lKS50b0JlKCdESVYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWNvbnRhaW5lcicpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBsaW5rIHdpdGggY29ycmVjdCBocmVmIGFuZCB0ZXh0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnW1tUZXN0RmlsZV1dJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlKCdUZXN0RmlsZScpO1xyXG4gICAgICAgICAgICBmaWxlUHJvcGVydHkuZ2V0TGluayA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ29ic2lkaWFuOi8vdGVzdCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCB0ZXN0VmFsdWUpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmVzdWx0LnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rPy5ocmVmKS50b0JlKCdvYnNpZGlhbjovL3Rlc3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbms/LnRleHRDb250ZW50KS50b0JlKCdUZXN0RmlsZScpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluaz8uY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1saW5rJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5yZWFkTGlua0ZpbGUubW9ja1JldHVyblZhbHVlKCcnKTtcclxuICAgICAgICAgICAgZmlsZVByb3BlcnR5LmdldExpbmsgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdvYnNpZGlhbjovL3Rlc3QnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgdGVzdFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHJlc3VsdC5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobGluaz8udGV4dENvbnRlbnQpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=