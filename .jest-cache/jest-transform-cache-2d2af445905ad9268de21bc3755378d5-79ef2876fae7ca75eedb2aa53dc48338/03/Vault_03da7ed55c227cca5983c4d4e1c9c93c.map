{"version":3,"names":["cov_yl9bdwfoq","actualCoverage","s","DynamicClassFactory_1","require","File_1","Vault","constructor","app","settings","f","files","initializeDynamicClasses","getPath","getVaultPath","getName","configPath","b","dynamicClassFactory","DynamicClassFactory","availableClasses","getAvailableClasses","className","dynamicClass","getClass","classes","error","console","getDynamicClassFactory","getPersonalName","personalName","getClasseFromName","name","readLinkFile","link","path","match","fileName","trim","alias","test","split","pop","replace","getFromLink","log","directfile","listFiles","find","Object","keys","createClasse","filter","length","file","segments","candidatePath","join","bestMatch","endsWith","shift","getMediaFromLink","getFromFile","isFolder","filePath","iFile","getFile","undefined","existingClass","classe","createFile","classeType","args","dynamicClasses","selectClasse","selectFile","hint","classeArgs","templatePath","templateFolder","templateFile","newFilePath","includes","templateContent","isFile","readFile","warn","File","Error","writeFile","waitForFileMetaDataUpdate","Promise","resolve","setTimeout","onCreate","onUpdate","refreshAll","watchedFiles","startsWith","push","folder","listFolders","children","delete","sendNotice","fileInstance","metadata","getMetadata","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\vault\\Vault.ts"],"sourcesContent":["import { DynamicClassFactory } from \"Config/DynamicClassFactory\";\r\nimport { Classe } from \"./Classe\";\r\nimport { IApp, IFile } from \"../interfaces/IApp\";\r\nimport { Data } from \"./Data\";\r\nimport { Folder, File } from \"./File\";\r\n\r\nexport interface Settings {\r\n  templateFolder: string;\r\n  personalName : string;\r\n  configPath?: string; // Path to YAML configuration files\r\n}\r\n\r\nexport class Vault {\r\n    /*\r\n    Global Vault, with all informations\r\n    */\r\n    public app: IApp;\r\n    \r\n    public settings: Settings;\r\n    public files: { [key: string]: Classe } = {};\r\n\r\n    public static classes: { [key: string]: typeof Classe };\r\n    private static dynamicClassFactory: DynamicClassFactory | null = null;\r\n\r\n    constructor(app: IApp, settings: Settings) {\r\n        this.app = app;\r\n        this.settings = settings;\r\n        // Initialize the dynamic class factory\r\n        this.initializeDynamicClasses();\r\n    }\r\n\r\n    public getPath(): string {\r\n        return this.app.getVaultPath();\r\n    }\r\n\r\n    public getName(): string {\r\n        return this.app.getName();\r\n    }\r\n\r\n\r\n    private async initializeDynamicClasses() {\r\n        try {\r\n            const configPath = this.settings.configPath || './config';\r\n            Vault.dynamicClassFactory = new DynamicClassFactory(configPath, this.app);\r\n            \r\n            // Load available classes and populate the static classes object\r\n            const availableClasses = await Vault.dynamicClassFactory.getAvailableClasses();\r\n            for (const className of availableClasses) {\r\n                const dynamicClass = await Vault.dynamicClassFactory.getClass(className);\r\n                Vault.classes[className] = dynamicClass;\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to initialize dynamic classes:', error);\r\n        }\r\n    }\r\n\r\n    getDynamicClassFactory(): DynamicClassFactory | null {\r\n        return Vault.dynamicClassFactory;\r\n    }\r\n\r\n    getPersonalName(){\r\n        return this.settings.personalName\r\n    }\r\n\r\n    getClasseFromName(name: string) : typeof Classe{\r\n        return Vault.classes[name]\r\n    }\r\n\r\n    readLinkFile(link: string, path = false): string {\r\n        if (!link || typeof link !== \"string\") return \"\";\r\n        // Match [[file|alias]] or [[file]]\r\n        const match = link.match(/^\\[\\[([^\\|\\]]+?)(?:)?(?:\\|([^\\]]+))?\\]\\]$/);\r\n        if (match) {\r\n            const fileName = match[1]?.trim();\r\n            const alias = match[2]?.trim();\r\n            if (path) {\r\n                return /\\.[^\\/\\\\]+$/.test(fileName) ? fileName : `${fileName}.md`;\r\n            } else {\r\n                return alias ? alias : fileName.split(\"/\").pop()?.replace(\".md\",\"\") || \"\";\r\n            }\r\n        }\r\n        // If not a wikilink, just return the trimmed link\r\n        return link.trim();\r\n    }\r\n\r\n    async getFromLink(name: string, log=true) {\r\n        if (!name) { return null; }\r\n\r\n        // Search with the path\r\n        let path = this.readLinkFile(name, true);\r\n        let directfile = (await this.app.listFiles()).find((f : IFile) => {\r\n            return f.path.trim() === path.trim()\r\n        });\r\n        if (directfile) {\r\n            if (directfile.path in Object.keys(this.files)) {\r\n                return this.files[directfile.path];\r\n            }\r\n            return await this.createClasse(directfile);\r\n        }\r\n\r\n\r\n        let fileName = path.split(\"/\").pop() || \"\";\r\n        const files = (await this.app.listFiles()).filter((f : IFile) => f.name === fileName);\r\n        if (files.length > 0) {\r\n            let file = files[0];\r\n            if (files.length > 1) {\r\n                let path = this.readLinkFile(name, true);\r\n                if (path) {\r\n                    // Try to find the best match by walking up the path segments\r\n                    let segments = path.split(\"/\");\r\n                    while (segments.length > 0) {\r\n                        const candidatePath = segments.join(\"/\");\r\n                        const bestMatch = files.find((f : IFile) => f.path.endsWith(\"/\" + candidatePath) || f.path === candidatePath);\r\n                        if (bestMatch) {\r\n                            file = bestMatch;\r\n                            break;\r\n                        }\r\n                        segments.shift(); // Remove the first segment and try again\r\n                    }\r\n                }\r\n                else {\r\n                    console.error(\"Plusieurs fichiers trouvés pour le lien sans chemin : \" + name, files);\r\n                }\r\n            }\r\n\r\n            if (file.path in Object.keys(this.files)) {\r\n                return this.files[file.path];\r\n            }\r\n            return await this.createClasse(file);\r\n        }\r\n        if (log) {\r\n            console.error(\"Fichier non trouvé : \" + name);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    async getMediaFromLink(link: string) {\r\n        let path = this.readLinkFile(link, true);\r\n        const file = (await this.app.listFiles()).find((f : IFile) => {\r\n            return f.path === path});\r\n        if (file) {\r\n            return file;\r\n        }\r\n\r\n        // try with the file name\r\n        let fileName = this.readLinkFile(link);\r\n        const files = (await this.app.listFiles()).filter((f : IFile) => f.name === fileName);\r\n        if (files.length > 0) {\r\n            let file = files[0];\r\n            if (files.length > 1) {\r\n                console.error(\"Plusieurs fichiers trouvés pour le lien sans chemin : \" + link, files);\r\n            }\r\n            return file;\r\n        }\r\n\r\n        console.error(\"Media non trouvé : \" + link);\r\n        return null;\r\n    }\r\n\r\n    /*\r\n    getFromFolder(folder: Folder) {\r\n        let name = folder.path.split(\"/\")[folder.path.split(\"/\").length - 1];\r\n        for (let file of folder.children || []) {\r\n            if (this.app.isTFile(file) && file.name.includes(name)) {\r\n                return this.getFromFile(file);\r\n            }\r\n        }\r\n        console.error(\"Le dossier n'a pas de fichier classe : \" + folder.path);\r\n    }*/\r\n\r\n    async getFromFile(file: IFile): Promise<Classe | undefined> {\r\n        if (this.app.isFolder(file)) {\r\n            let filePath = file.path + \"/\" + file.name;\r\n            let iFile = await this.app.getFile(filePath)\r\n            if (!iFile) {\r\n                console.error(\"Le dossier n'a pas de fichier classe : \" + file.path);\r\n                return undefined;\r\n            }\r\n        }\r\n\r\n        let existingClass = this.files[file.path];\r\n        if (existingClass) { return existingClass; }\r\n        \r\n        let classe: Classe | undefined;\r\n        \r\n        classe = await this.createClasse(file);\r\n\r\n        return classe;\r\n\r\n    }\r\n\r\n    async createFile(classeType: null | typeof Classe = null, name: string = \"\", args: {parent? : Classe} = {}): Promise<File | undefined> {\r\n        // Create the new file from the className template\r\n        if (!classeType) {\r\n            const dynamicClasses = Object.keys(Vault.classes);\r\n            classeType = await this.app.selectClasse(this, dynamicClasses, \"Quelle classe pour ce fichier ?\");\r\n            if (!classeType) { return; }\r\n        }\r\n        console.log(\"Args ; \",args)\r\n        if (!name) {\r\n            let classe = await this.app.selectFile(this, [classeType.name], {hint:\"Entrer un nom pour ce fichier\", classeArgs: args});\r\n            // Select File call createFile if the file doesn't exist\r\n            // No need to continue\r\n            return classe?.file;\r\n        }\r\n        let templatePath = this.settings.templateFolder + \"/\" + classeType.name + \".md\";\r\n        const templateFile = await this.app.getFile(templatePath);\r\n        const newFilePath = name.includes(\".md\") ? name : `${name}.md`;\r\n        let templateContent = \"---\\nClasse: \" + classeType.name + \"\\n---\\n\";\r\n\r\n        if (templateFile && (await this.app.isFile(templateFile))) {\r\n            templateContent = await this.app.readFile(templateFile);\r\n        } else {\r\n            console.warn(\"Le fichier template n'existe pas :\" + templatePath + \". Un fichier vide sera créé.\");\r\n        }\r\n        let file: File | null = null;\r\n        try {\r\n            file = new File(this, await this.app.createFile(newFilePath, templateContent));\r\n            console.log(\"Nouveau fichier créé : \" + newFilePath);\r\n        } catch (error) {\r\n            // Modifier le fichier s'il existe déjà\r\n            const file = await this.app.getFile(newFilePath);\r\n            if (!file) {\r\n                throw Error(\"Le fichier n'a pas pu être créé ou modifié : \" + newFilePath);\r\n            }\r\n            if (file && this.app.isFile(file)) {\r\n                await this.app.writeFile(file, templateContent);\r\n                console.log(\"Fichier modifié : \" + newFilePath);\r\n            } else {\r\n                throw Error(\"Le fichier n'a pas pu être créé ou modifié : \" + newFilePath);\r\n            }\r\n        }\r\n\r\n        if (!file) {\r\n            throw Error(\"Le fichier n'existe pas : \" + newFilePath);\r\n        }\r\n        \r\n        await this.app.waitForFileMetaDataUpdate(file.path, \"Classe\", async () => {\r\n            await new Promise(resolve => setTimeout(resolve, 200));\r\n            if (!file) { return; }\r\n            let classe = await this.getFromFile(file);\r\n            if (!classe) {\r\n                console.error(\"Classe non trouvée pour le fichier : \" + file.path);\r\n                return;\r\n            }\r\n            await classe.onCreate();\r\n            await classe.onUpdate();\r\n            console.log(\"Classe créée : \" + classe.name);\r\n        });\r\n        return file;\r\n    }\r\n\r\n    async refreshAll() {\r\n        // Move all files \r\n        let watchedFiles: string[] = [];\r\n        for (let file of await this.app.listFiles()) {\r\n            if (watchedFiles.includes(file.name) || file.path.startsWith(\"Outils\")) {\r\n                continue;\r\n            }\r\n            console.log(\"Refresh : \" + file.path);\r\n            const classe = await this.getFromFile(file);\r\n            if (classe) {\r\n                classe.onUpdate();\r\n            }\r\n\r\n            // Remove the duplicates\r\n            /*\r\n            for (let file2 of this.app.vault.getFiles()) {\r\n                // Compare the name\r\n                if (file.name === file2.name && file.path != file2.path && this.getFromFile(file)?.getClasse() === this.getFromFile(file2)?.getClasse()) {\r\n                    console.error(\"Doublon de \\n\" + file.path + \"\\n\" + file2.path);\r\n                    // Keep the first by default\r\n                    await this.app.vault.delete(file2);\r\n                }\r\n            }*/\r\n            watchedFiles.push(file.name);\r\n        }\r\n\r\n        // Remove empty folders \r\n        for (let folder of await this.app.listFolders()) {\r\n            if (folder.children && folder.children.length === 0) {\r\n                await this.app.delete(folder);\r\n            }\r\n        }\r\n\r\n        this.app.sendNotice(\"Vault refresh\");\r\n    }\r\n\r\n    async createClasse(file: IFile) {\r\n        let fileInstance: File;\r\n        if (!(file instanceof File)){\r\n            fileInstance = new File(this, file);\r\n        } else {\r\n            fileInstance = file;\r\n        }\r\n        \r\n        const metadata = await this.app.getMetadata(fileInstance);\r\n        if (!metadata) {\r\n            console.error(\"Pas de metadata\");\r\n            return;\r\n        }\r\n        \r\n        const className = metadata[\"Classe\"];\r\n        if (!className) {\r\n            console.error(\"Pas de classe définie dans les métadonnées\");\r\n            return undefined;\r\n        }\r\n\r\n        try {\r\n            // Use the dynamic class factory to get the constructor\r\n            if (Vault.dynamicClassFactory) {\r\n                const constructor = await Vault.dynamicClassFactory.getClass(className);\r\n                if (constructor) {\r\n                    return new constructor(this, fileInstance);\r\n                }\r\n            }\r\n            \r\n            // Fallback to static classes if dynamic factory is not available\r\n            let constructor = Vault.classes[className];\r\n            if (constructor) {\r\n                return new constructor(this, fileInstance);\r\n            }\r\n            \r\n            console.error(\"Type non connue : \" + className);\r\n            return undefined;\r\n        } catch (error) {\r\n            console.error(\"Erreur lors de la création de la classe : \" + className, error);\r\n            return undefined;\r\n        }\r\n    }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}