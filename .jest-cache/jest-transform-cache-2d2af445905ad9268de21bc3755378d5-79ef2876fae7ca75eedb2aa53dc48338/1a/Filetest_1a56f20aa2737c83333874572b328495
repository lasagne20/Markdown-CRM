ae76e471f50ea0067fe554f5b30bc668
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock UUID
jest.mock('uuid', () => ({
    v4: jest.fn(() => 'mock-uuid-1234')
}));
// Mock js-yaml
jest.mock('js-yaml');
const File_1 = require("../../src/vault/File");
const jsYaml = __importStar(require("js-yaml"));
const mockJsYaml = jsYaml;
// Mock implementations
const mockApp = {
    getFile: jest.fn(),
    readFile: jest.fn(),
    writeFile: jest.fn(),
    renameFile: jest.fn(),
    getMetadata: jest.fn(),
    waitForFileMetaDataUpdate: jest.fn()
};
const mockVault = {
    app: mockApp,
    getFromLink: jest.fn()
};
const mockIFile = {
    name: 'test.md',
    path: 'folder/test.md',
    basename: 'test',
    extension: 'md'
};
describe('Folder', () => {
    it('should create Folder instance', () => {
        const folder = new File_1.Folder();
        expect(folder).toBeInstanceOf(File_1.Folder);
    });
});
describe('File', () => {
    let file;
    beforeEach(() => {
        jest.clearAllMocks();
        file = new File_1.File(mockVault, mockIFile);
        // Reset mock implementations
        mockJsYaml.load.mockReturnValue({ testKey: 'testValue' });
        mockJsYaml.dump.mockReturnValue('testKey: testValue\n');
    });
    describe('Constructor', () => {
        it('should create File instance with correct properties', () => {
            expect(file).toBeInstanceOf(File_1.File);
            expect(file.name).toBe('test.md');
            expect(file.path).toBe('folder/test.md');
            expect(file.basename).toBe('test');
            expect(file.extension).toBe('md');
            expect(file.vault).toBe(mockVault);
        });
        it('should initialize lock as false', () => {
            expect(file['lock']).toBe(false);
        });
        it('should set linkRegex correctly', () => {
            expect(file.linkRegex).toEqual(/^"?\[\[(.*?)\]\]"?$/);
        });
    });
    describe('Path methods', () => {
        it('should get folder path', () => {
            expect(file.getFolderPath()).toBe('folder');
        });
        it('should get folder path for root file', () => {
            const rootFile = new File_1.File(mockVault, { ...mockIFile, path: 'root.md' });
            expect(rootFile.getFolderPath()).toBe('');
        });
        it('should get file object', () => {
            expect(file.getFile()).toBe(mockIFile);
        });
        it('should get path', () => {
            expect(file.getPath()).toBe('folder/test.md');
        });
        it('should get link format', () => {
            expect(file.getLink()).toBe('[[folder/test.md|test]]');
        });
    });
    describe('Name methods', () => {
        it('should get name with extension by default', () => {
            expect(file.getName()).toBe('test.md');
        });
        it('should get name without extension when md=false', () => {
            expect(file.getName(false)).toBe('test');
        });
        it('should get name with extension when md=true', () => {
            expect(file.getName(true)).toBe('test.md');
        });
    });
    describe('Folder file methods', () => {
        it('should detect folder file', () => {
            const folderFile = new File_1.File(mockVault, {
                ...mockIFile,
                name: 'folder.md',
                path: 'parent/folder/folder.md'
            });
            expect(folderFile.isFolderFile()).toBe(true);
        });
        it('should not detect regular file as folder file', () => {
            expect(file.isFolderFile()).toBe(false);
        });
        it('should get folder file path for folder file', () => {
            const folderFile = new File_1.File(mockVault, {
                ...mockIFile,
                name: 'folder.md',
                path: 'parent/folder/folder.md'
            });
            expect(folderFile.getFolderFilePath()).toBe('parent/folder');
        });
        it('should get folder file path for regular file', () => {
            expect(file.getFolderFilePath()).toBe('folder/test');
        });
        it('should get parent folder path for folder file', () => {
            const folderFile = new File_1.File(mockVault, {
                ...mockIFile,
                name: 'folder.md',
                path: 'parent/folder/folder.md'
            });
            expect(folderFile.getParentFolderPath()).toBe('parent');
        });
        it('should get parent folder path for regular file', () => {
            expect(file.getParentFolderPath()).toBe('folder');
        });
    });
    describe('ID management', () => {
        it('should get existing ID from metadata', async () => {
            mockApp.getMetadata.mockResolvedValue({ Id: 'existing-id' });
            const id = await file.getID();
            expect(id).toBe('existing-id');
        });
        it('should generate new ID when not exists', async () => {
            mockApp.getMetadata.mockResolvedValue({});
            file.updateMetadata = jest.fn();
            const id = await file.getID();
            expect(id).toBe('mock-uuid-1234');
            expect(file.updateMetadata).toHaveBeenCalledWith('Id', 'mock-uuid-1234');
        });
        it('should generate new ID when metadata is null', async () => {
            mockApp.getMetadata.mockResolvedValue(null);
            file.updateMetadata = jest.fn();
            const id = await file.getID();
            expect(id).toBe('mock-uuid-1234');
        });
    });
    describe('Move operations', () => {
        beforeEach(() => {
            file['lock'] = false;
        });
        it('should move file to target folder', async () => {
            mockApp.getFile.mockResolvedValue(null); // No existing file
            await file.move('target/folder', 'newname.md');
            expect(mockApp.renameFile).toHaveBeenCalledWith(mockIFile, 'target/folder/newname.md');
        });
        it('should move file with original name when no target name provided', async () => {
            mockApp.getFile.mockResolvedValue(null);
            await file.move('target/folder');
            expect(mockApp.renameFile).toHaveBeenCalledWith(mockIFile, 'target/folder/test.md');
        });
        it('should not move when target file exists', async () => {
            mockApp.getFile.mockResolvedValue({ path: 'target/folder/test.md' });
            await file.move('target/folder');
            expect(mockApp.renameFile).not.toHaveBeenCalled();
        });
        it('should handle move errors gracefully', async () => {
            mockApp.getFile.mockResolvedValue(null);
            mockApp.renameFile.mockRejectedValue(new Error('Move failed'));
            await expect(file.move('target/folder')).resolves.not.toThrow();
        });
        it('should wait for lock to be released', async () => {
            file['lock'] = true;
            // Simulate lock being released after 200ms
            setTimeout(() => {
                file['lock'] = false;
            }, 200);
            mockApp.getFile.mockResolvedValue(null);
            await file.move('target/folder');
            expect(mockApp.renameFile).toHaveBeenCalled();
        });
        it('should move folder file correctly', async () => {
            const folderFile = new File_1.File(mockVault, {
                ...mockIFile,
                name: 'folder.md',
                path: 'parent/folder/folder.md'
            });
            const mockFolder = { path: 'parent/folder' };
            mockApp.getFile
                .mockResolvedValueOnce(null) // No target file exists
                .mockResolvedValueOnce(mockFolder); // Folder exists
            await folderFile.move('target');
            expect(mockApp.renameFile).toHaveBeenCalledWith(mockFolder, 'target/folder');
        });
    });
    describe('Metadata operations', () => {
        it('should get metadata', async () => {
            const expectedMetadata = { key: 'value' };
            mockApp.getMetadata.mockResolvedValue(expectedMetadata);
            const metadata = await file.getMetadata();
            expect(metadata).toBe(expectedMetadata);
            expect(mockApp.getMetadata).toHaveBeenCalledWith(mockIFile);
        });
        it('should get metadata value', async () => {
            mockApp.getMetadata.mockResolvedValue({ testKey: 'testValue' });
            const value = await file.getMetadataValue('testKey');
            expect(value).toBe('testValue');
        });
        it('should return undefined for non-existent metadata key', async () => {
            mockApp.getMetadata.mockResolvedValue({ otherKey: 'value' });
            const value = await file.getMetadataValue('nonExistent');
            expect(value).toBeUndefined();
        });
        it('should return undefined when no metadata', async () => {
            mockApp.getMetadata.mockResolvedValue(null);
            const value = await file.getMetadataValue('anyKey');
            expect(value).toBeUndefined();
        });
        it('should get all properties from metadata', () => {
            file.getMetadata = jest.fn().mockReturnValue({ prop1: 'value1', prop2: 'value2' });
            const properties = file.getAllProperties();
            expect(properties).toEqual({
                prop1: { name: 'prop1' },
                prop2: { name: 'prop2' }
            });
        });
        it('should return empty object when no metadata for getAllProperties', () => {
            file.getMetadata = jest.fn().mockReturnValue(null);
            const properties = file.getAllProperties();
            expect(properties).toEqual({});
        });
    });
    describe('Update metadata', () => {
        const mockContent = `---
existing: value
---
Body content here`;
        beforeEach(() => {
            mockApp.readFile.mockResolvedValue(mockContent);
            file['lock'] = false;
        });
        it('should update metadata successfully', async () => {
            const expectedNewContent = `---
testKey: testValue

---
Body content here`;
            await file.updateMetadata('newKey', 'newValue');
            expect(mockJsYaml.load).toHaveBeenCalledWith('existing: value');
            expect(mockJsYaml.dump).toHaveBeenCalledWith({ existing: 'value', newKey: 'newValue' });
            expect(mockApp.writeFile).toHaveBeenCalledWith(mockIFile, expectedNewContent);
            expect(mockApp.waitForFileMetaDataUpdate).toHaveBeenCalledWith('folder/test.md', 'newKey', expect.any(Function));
        });
        it('should wait for lock before updating', async () => {
            file['lock'] = true;
            // Release lock after 100ms
            setTimeout(() => {
                file['lock'] = false;
            }, 100);
            await file.updateMetadata('key', 'value');
            expect(mockApp.writeFile).toHaveBeenCalled();
        });
        it('should handle yaml parsing errors', async () => {
            mockJsYaml.load.mockImplementation(() => {
                throw new Error('YAML parse error');
            });
            await file.updateMetadata('key', 'value');
            expect(mockApp.writeFile).not.toHaveBeenCalled();
        });
        it('should handle missing frontmatter', async () => {
            file.extractFrontmatter = jest.fn().mockReturnValue({
                existingFrontmatter: null,
                body: 'content'
            });
            await file.updateMetadata('key', 'value');
            expect(mockApp.writeFile).not.toHaveBeenCalled();
        });
        it('should handle null frontmatter from yaml parsing', async () => {
            mockJsYaml.load.mockReturnValue(null);
            await file.updateMetadata('key', 'value');
            expect(mockApp.writeFile).not.toHaveBeenCalled();
        });
    });
    describe('Remove metadata', () => {
        it('should remove metadata key', async () => {
            const mockFrontmatter = { key1: 'value1', key2: 'value2' };
            file.getMetadata = jest.fn().mockResolvedValue(mockFrontmatter);
            file.saveFrontmatter = jest.fn();
            await file.removeMetadata('key1');
            expect(file.saveFrontmatter).toHaveBeenCalledWith({ key2: 'value2' });
        });
        it('should handle removing from null metadata', async () => {
            file.getMetadata = jest.fn().mockResolvedValue(null);
            file.saveFrontmatter = jest.fn();
            await file.removeMetadata('key1');
            expect(file.saveFrontmatter).not.toHaveBeenCalled();
        });
    });
    describe('Reorder metadata', () => {
        it('should reorder metadata according to properties order', async () => {
            const mockFrontmatter = { prop3: 'c', prop1: 'a', prop2: 'b' };
            file.getMetadata = jest.fn().mockReturnValue(mockFrontmatter);
            file.sortFrontmatter = jest.fn().mockReturnValue({
                sortedFrontmatter: { prop1: 'a', prop2: 'b', prop3: 'c', Id: null },
                extraProperties: []
            });
            file.saveFrontmatter = jest.fn();
            await file.reorderMetadata(['prop1', 'prop2', 'prop3']);
            expect(file.saveFrontmatter).toHaveBeenCalled();
        });
        it('should not reorder when order is already correct', async () => {
            const mockFrontmatter = { prop1: 'a', prop2: 'b', Id: 'test-id' };
            file.getMetadata = jest.fn().mockReturnValue(mockFrontmatter);
            file.saveFrontmatter = jest.fn();
            await file.reorderMetadata(['prop1', 'prop2']);
            expect(file.saveFrontmatter).not.toHaveBeenCalled();
        });
        it('should handle null metadata in reorder', async () => {
            file.getMetadata = jest.fn().mockReturnValue(null);
            file.saveFrontmatter = jest.fn();
            await file.reorderMetadata(['prop1', 'prop2']);
            expect(file.saveFrontmatter).not.toHaveBeenCalled();
        });
    });
    describe('Save frontmatter', () => {
        const mockContent = `---
old: content
---
Body content`;
        beforeEach(() => {
            mockApp.readFile.mockResolvedValue(mockContent);
        });
        it('should save frontmatter correctly', async () => {
            const frontmatter = { key: 'value' };
            const expectedContent = `---
testKey: testValue

---
Body content`;
            await file.saveFrontmatter(frontmatter);
            expect(mockJsYaml.dump).toHaveBeenCalledWith(frontmatter);
            expect(mockApp.writeFile).toHaveBeenCalledWith(mockIFile, expectedContent);
        });
        it('should save frontmatter with extra properties', async () => {
            const frontmatter = { key: 'value' };
            const extraProperties = ['extra1: value1', 'extra2: value2'];
            await file.saveFrontmatter(frontmatter, extraProperties);
            expect(mockApp.writeFile).toHaveBeenCalled();
        });
        it('should filter out empty extra properties', async () => {
            const frontmatter = { key: 'value' };
            const extraProperties = ['extra1: value1', '', '   ', 'extra2: value2'];
            await file.saveFrontmatter(frontmatter, extraProperties);
            expect(mockApp.writeFile).toHaveBeenCalled();
        });
    });
    describe('Extract frontmatter', () => {
        it('should extract frontmatter and body correctly', () => {
            const content = `---
key: value
nested:
  prop: data
---
# Title
Body content here`;
            const result = file.extractFrontmatter(content);
            expect(result.existingFrontmatter).toBe(`key: value
nested:
  prop: data`);
            expect(result.body).toBe(`# Title
Body content here`);
        });
        it('should handle content without frontmatter', () => {
            const content = `# Title
Just body content`;
            const result = file.extractFrontmatter(content);
            expect(result.existingFrontmatter).toBe('');
            expect(result.body).toBe(content);
        });
        it('should handle empty content', () => {
            const result = file.extractFrontmatter('');
            expect(result.existingFrontmatter).toBe('');
            expect(result.body).toBe('');
        });
        it('should handle malformed frontmatter', () => {
            const content = `---
incomplete frontmatter
# Title
Content`;
            const result = file.extractFrontmatter(content);
            expect(result.existingFrontmatter).toBe('');
            expect(result.body).toBe(content);
        });
    });
    describe('Format frontmatter', () => {
        it('should format frontmatter using js-yaml', () => {
            const frontmatter = { key: 'value', nested: { prop: 'data' } };
            const result = file.formatFrontmatter(frontmatter);
            expect(mockJsYaml.dump).toHaveBeenCalledWith(frontmatter);
            expect(result).toBe('testKey: testValue\n');
        });
    });
    describe('Sort frontmatter', () => {
        it('should sort frontmatter according to order', () => {
            const frontmatter = { prop3: 'c', prop1: 'a', prop2: 'b', extra: 'x' };
            const order = ['prop1', 'prop2', 'prop3'];
            const result = file.sortFrontmatter(frontmatter, order);
            expect(result.sortedFrontmatter).toEqual({
                prop1: 'a',
                prop2: 'b',
                prop3: 'c'
            });
            expect(result.extraProperties).toEqual([
                'extra: "x"'
            ]);
        });
        it('should handle missing properties in frontmatter', () => {
            const frontmatter = { prop1: 'a' };
            const order = ['prop1', 'prop2', 'prop3'];
            const result = file.sortFrontmatter(frontmatter, order);
            expect(result.sortedFrontmatter).toEqual({
                prop1: 'a',
                prop2: null,
                prop3: null
            });
            expect(result.extraProperties).toEqual([]);
        });
        it('should handle empty frontmatter', () => {
            const result = file.sortFrontmatter({}, ['prop1', 'prop2']);
            expect(result.sortedFrontmatter).toEqual({
                prop1: null,
                prop2: null
            });
            expect(result.extraProperties).toEqual([]);
        });
    });
    describe('External references', () => {
        it('should get from link through vault', () => {
            const expectedResult = { path: 'linked/file.md' };
            mockVault.getFromLink.mockReturnValue(expectedResult);
            const result = file.getFromLink('[[linked/file]]');
            expect(mockVault.getFromLink).toHaveBeenCalledWith('[[linked/file]]');
            expect(result).toBe(expectedResult);
        });
    });
    describe('Error handling and edge cases', () => {
        it('should handle concurrent metadata updates', async () => {
            file['lock'] = false;
            // Start two concurrent updates
            const update1 = file.updateMetadata('key1', 'value1');
            const update2 = file.updateMetadata('key2', 'value2');
            await Promise.all([update1, update2]);
            // Both should complete without throwing
            expect(mockApp.writeFile).toHaveBeenCalled();
        });
        it('should handle very long file paths', () => {
            const longPath = 'a/'.repeat(100) + 'file.md';
            const longFile = new File_1.File(mockVault, {
                ...mockIFile,
                path: longPath
            });
            expect(longFile.getPath()).toBe(longPath);
        });
        it('should handle special characters in file names', () => {
            const specialFile = new File_1.File(mockVault, {
                ...mockIFile,
                name: 'test@#$%^&*()_+{}|:<>?.md',
                path: 'folder/test@#$%^&*()_+{}|:<>?.md'
            });
            expect(specialFile.getName()).toBe('test@#$%^&*()_+{}|:<>?.md');
            expect(specialFile.getName(false)).toBe('test@#$%^&*()_+{}|:<>?');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXHZhdWx0XFxGaWxlLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLQSxZQUFZO0FBQ1osSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNyQixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztDQUN0QyxDQUFDLENBQUMsQ0FBQztBQUVKLGVBQWU7QUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBWHJCLCtDQUFvRDtBQUdwRCxnREFBa0M7QUFTbEMsTUFBTSxVQUFVLEdBQUcsTUFBb0MsQ0FBQztBQUV4RCx1QkFBdUI7QUFDdkIsTUFBTSxPQUFPLEdBQUc7SUFDWixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNsQixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNuQixTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNwQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNyQixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0Qix5QkFBeUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3ZDLENBQUM7QUFFRixNQUFNLFNBQVMsR0FBRztJQUNkLEdBQUcsRUFBRSxPQUFPO0lBQ1osV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDTCxDQUFDO0FBRXRCLE1BQU0sU0FBUyxHQUFVO0lBQ3JCLElBQUksRUFBRSxTQUFTO0lBQ2YsSUFBSSxFQUFFLGdCQUFnQjtJQUN0QixRQUFRLEVBQUUsTUFBTTtJQUNoQixTQUFTLEVB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Q0FBQyxDQUFDO1FBQ3RFLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcdmF1bHRcXEZpbGUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaWxlLCBGb2xkZXIgfSBmcm9tICcuLi8uLi9zcmMvdmF1bHQvRmlsZSc7XHJcbmltcG9ydCB7IFZhdWx0IH0gZnJvbSAnLi4vLi4vc3JjL3ZhdWx0L1ZhdWx0JztcclxuaW1wb3J0IHsgSUZpbGUgfSBmcm9tICcuLi8uLi9zcmMvaW50ZXJmYWNlcy9JQXBwJztcclxuaW1wb3J0ICogYXMganNZYW1sIGZyb20gJ2pzLXlhbWwnO1xyXG5cclxuLy8gTW9jayBVVUlEXHJcbmplc3QubW9jaygndXVpZCcsICgpID0+ICh7XHJcbiAgICB2NDogamVzdC5mbigoKSA9PiAnbW9jay11dWlkLTEyMzQnKVxyXG59KSk7XHJcblxyXG4vLyBNb2NrIGpzLXlhbWxcclxuamVzdC5tb2NrKCdqcy15YW1sJyk7XHJcbmNvbnN0IG1vY2tKc1lhbWwgPSBqc1lhbWwgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGpzWWFtbD47XHJcblxyXG4vLyBNb2NrIGltcGxlbWVudGF0aW9uc1xyXG5jb25zdCBtb2NrQXBwID0ge1xyXG4gICAgZ2V0RmlsZTogamVzdC5mbigpLFxyXG4gICAgcmVhZEZpbGU6IGplc3QuZm4oKSxcclxuICAgIHdyaXRlRmlsZTogamVzdC5mbigpLFxyXG4gICAgcmVuYW1lRmlsZTogamVzdC5mbigpLFxyXG4gICAgZ2V0TWV0YWRhdGE6IGplc3QuZm4oKSxcclxuICAgIHdhaXRGb3JGaWxlTWV0YURhdGFVcGRhdGU6IGplc3QuZm4oKVxyXG59O1xyXG5cclxuY29uc3QgbW9ja1ZhdWx0ID0ge1xyXG4gICAgYXBwOiBtb2NrQXBwLFxyXG4gICAgZ2V0RnJvbUxpbms6IGplc3QuZm4oKVxyXG59IGFzIHVua25vd24gYXMgVmF1bHQ7XHJcblxyXG5jb25zdCBtb2NrSUZpbGU6IElGaWxlID0ge1xyXG4gICAgbmFtZTogJ3Rlc3QubWQnLFxyXG4gICAgcGF0aDogJ2ZvbGRlci90ZXN0Lm1kJyxcclxuICAgIGJhc2VuYW1lOiAndGVzdCcsXHJcbiAgICBleHRlbnNpb246ICdtZCdcclxufTtcclxuXHJcbmRlc2NyaWJlKCdGb2xkZXInLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBGb2xkZXIgaW5zdGFuY2UnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gbmV3IEZvbGRlcigpO1xyXG4gICAgICAgIGV4cGVjdChmb2xkZXIpLnRvQmVJbnN0YW5jZU9mKEZvbGRlcik7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnRmlsZScsICgpID0+IHtcclxuICAgIGxldCBmaWxlOiBGaWxlO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgICAgIGZpbGUgPSBuZXcgRmlsZShtb2NrVmF1bHQsIG1vY2tJRmlsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVzZXQgbW9jayBpbXBsZW1lbnRhdGlvbnNcclxuICAgICAgICBtb2NrSnNZYW1sLmxvYWQubW9ja1JldHVyblZhbHVlKHsgdGVzdEtleTogJ3Rlc3RWYWx1ZScgfSk7XHJcbiAgICAgICAgbW9ja0pzWWFtbC5kdW1wLm1vY2tSZXR1cm5WYWx1ZSgndGVzdEtleTogdGVzdFZhbHVlXFxuJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnQ29uc3RydWN0b3InLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgRmlsZSBpbnN0YW5jZSB3aXRoIGNvcnJlY3QgcHJvcGVydGllcycsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGUpLnRvQmVJbnN0YW5jZU9mKEZpbGUpO1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5uYW1lKS50b0JlKCd0ZXN0Lm1kJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLnBhdGgpLnRvQmUoJ2ZvbGRlci90ZXN0Lm1kJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLmJhc2VuYW1lKS50b0JlKCd0ZXN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLmV4dGVuc2lvbikudG9CZSgnbWQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGUudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIGxvY2sgYXMgZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlWydsb2NrJ10pLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNldCBsaW5rUmVnZXggY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5saW5rUmVnZXgpLnRvRXF1YWwoL15cIj9cXFtcXFsoLio/KVxcXVxcXVwiPyQvKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdQYXRoIG1ldGhvZHMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgZm9sZGVyIHBhdGgnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLmdldEZvbGRlclBhdGgoKSkudG9CZSgnZm9sZGVyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IGZvbGRlciBwYXRoIGZvciByb290IGZpbGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7IC4uLm1vY2tJRmlsZSwgcGF0aDogJ3Jvb3QubWQnIH0pO1xyXG4gICAgICAgICAgICBleHBlY3Qocm9vdEZpbGUuZ2V0Rm9sZGVyUGF0aCgpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgZmlsZSBvYmplY3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLmdldEZpbGUoKSkudG9CZShtb2NrSUZpbGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGdldCBwYXRoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5nZXRQYXRoKCkpLnRvQmUoJ2ZvbGRlci90ZXN0Lm1kJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IGxpbmsgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5nZXRMaW5rKCkpLnRvQmUoJ1tbZm9sZGVyL3Rlc3QubWR8dGVzdF1dJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnTmFtZSBtZXRob2RzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IG5hbWUgd2l0aCBleHRlbnNpb24gYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGUuZ2V0TmFtZSgpKS50b0JlKCd0ZXN0Lm1kJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IG5hbWUgd2l0aG91dCBleHRlbnNpb24gd2hlbiBtZD1mYWxzZScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGUuZ2V0TmFtZShmYWxzZSkpLnRvQmUoJ3Rlc3QnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgbmFtZSB3aXRoIGV4dGVuc2lvbiB3aGVuIG1kPXRydWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLmdldE5hbWUodHJ1ZSkpLnRvQmUoJ3Rlc3QubWQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdGb2xkZXIgZmlsZSBtZXRob2RzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgZGV0ZWN0IGZvbGRlciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrSUZpbGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZm9sZGVyLm1kJyxcclxuICAgICAgICAgICAgICAgIHBhdGg6ICdwYXJlbnQvZm9sZGVyL2ZvbGRlci5tZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmb2xkZXJGaWxlLmlzRm9sZGVyRmlsZSgpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBkZXRlY3QgcmVndWxhciBmaWxlIGFzIGZvbGRlciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5pc0ZvbGRlckZpbGUoKSkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IGZvbGRlciBmaWxlIHBhdGggZm9yIGZvbGRlciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrSUZpbGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZm9sZGVyLm1kJyxcclxuICAgICAgICAgICAgICAgIHBhdGg6ICdwYXJlbnQvZm9sZGVyL2ZvbGRlci5tZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmb2xkZXJGaWxlLmdldEZvbGRlckZpbGVQYXRoKCkpLnRvQmUoJ3BhcmVudC9mb2xkZXInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgZm9sZGVyIGZpbGUgcGF0aCBmb3IgcmVndWxhciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5nZXRGb2xkZXJGaWxlUGF0aCgpKS50b0JlKCdmb2xkZXIvdGVzdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGdldCBwYXJlbnQgZm9sZGVyIHBhdGggZm9yIGZvbGRlciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrSUZpbGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZm9sZGVyLm1kJyxcclxuICAgICAgICAgICAgICAgIHBhdGg6ICdwYXJlbnQvZm9sZGVyL2ZvbGRlci5tZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmb2xkZXJGaWxlLmdldFBhcmVudEZvbGRlclBhdGgoKSkudG9CZSgncGFyZW50Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IHBhcmVudCBmb2xkZXIgcGF0aCBmb3IgcmVndWxhciBmaWxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5nZXRQYXJlbnRGb2xkZXJQYXRoKCkpLnRvQmUoJ2ZvbGRlcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0lEIG1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgZXhpc3RpbmcgSUQgZnJvbSBtZXRhZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja0FwcC5nZXRNZXRhZGF0YS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IElkOiAnZXhpc3RpbmctaWQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBmaWxlLmdldElEKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpZCkudG9CZSgnZXhpc3RpbmctaWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBuZXcgSUQgd2hlbiBub3QgZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldE1ldGFkYXRhLm1vY2tSZXNvbHZlZFZhbHVlKHt9KTtcclxuICAgICAgICAgICAgZmlsZS51cGRhdGVNZXRhZGF0YSA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gYXdhaXQgZmlsZS5nZXRJRCgpO1xyXG4gICAgICAgICAgICBleHBlY3QoaWQpLnRvQmUoJ21vY2stdXVpZC0xMjM0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLnVwZGF0ZU1ldGFkYXRhKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnSWQnLCAnbW9jay11dWlkLTEyMzQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBuZXcgSUQgd2hlbiBtZXRhZGF0YSBpcyBudWxsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldE1ldGFkYXRhLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlLnVwZGF0ZU1ldGFkYXRhID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBmaWxlLmdldElEKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpZCkudG9CZSgnbW9jay11dWlkLTEyMzQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdNb3ZlIG9wZXJhdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGZpbGVbJ2xvY2snXSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG1vdmUgZmlsZSB0byB0YXJnZXQgZm9sZGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldEZpbGUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7IC8vIE5vIGV4aXN0aW5nIGZpbGVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUubW92ZSgndGFyZ2V0L2ZvbGRlcicsICduZXduYW1lLm1kJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC5yZW5hbWVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIG1vY2tJRmlsZSxcclxuICAgICAgICAgICAgICAgICd0YXJnZXQvZm9sZGVyL25ld25hbWUubWQnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbW92ZSBmaWxlIHdpdGggb3JpZ2luYWwgbmFtZSB3aGVuIG5vIHRhcmdldCBuYW1lIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldEZpbGUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLm1vdmUoJ3RhcmdldC9mb2xkZXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLnJlbmFtZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgbW9ja0lGaWxlLFxyXG4gICAgICAgICAgICAgICAgJ3RhcmdldC9mb2xkZXIvdGVzdC5tZCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgbW92ZSB3aGVuIHRhcmdldCBmaWxlIGV4aXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja0FwcC5nZXRGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKHsgcGF0aDogJ3RhcmdldC9mb2xkZXIvdGVzdC5tZCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLm1vdmUoJ3RhcmdldC9mb2xkZXInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLnJlbmFtZUZpbGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG1vdmUgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tBcHAuZ2V0RmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgbW9ja0FwcC5yZW5hbWVGaWxlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTW92ZSBmYWlsZWQnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QoZmlsZS5tb3ZlKCd0YXJnZXQvZm9sZGVyJykpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgd2FpdCBmb3IgbG9jayB0byBiZSByZWxlYXNlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgZmlsZVsnbG9jayddID0gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGxvY2sgYmVpbmcgcmVsZWFzZWQgYWZ0ZXIgMjAwbXNcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmaWxlWydsb2NrJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tBcHAuZ2V0RmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUubW92ZSgndGFyZ2V0L2ZvbGRlcicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAucmVuYW1lRmlsZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIG1vdmUgZm9sZGVyIGZpbGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrSUZpbGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZm9sZGVyLm1kJyxcclxuICAgICAgICAgICAgICAgIHBhdGg6ICdwYXJlbnQvZm9sZGVyL2ZvbGRlci5tZCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRm9sZGVyID0geyBwYXRoOiAncGFyZW50L2ZvbGRlcicgfTtcclxuICAgICAgICAgICAgbW9ja0FwcC5nZXRGaWxlXHJcbiAgICAgICAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG51bGwpIC8vIE5vIHRhcmdldCBmaWxlIGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrRm9sZGVyKTsgLy8gRm9sZGVyIGV4aXN0c1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZm9sZGVyRmlsZS5tb3ZlKCd0YXJnZXQnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLnJlbmFtZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgbW9ja0ZvbGRlcixcclxuICAgICAgICAgICAgICAgICd0YXJnZXQvZm9sZGVyJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ01ldGFkYXRhIG9wZXJhdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgbWV0YWRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkTWV0YWRhdGEgPSB7IGtleTogJ3ZhbHVlJyB9O1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldE1ldGFkYXRhLm1vY2tSZXNvbHZlZFZhbHVlKGV4cGVjdGVkTWV0YWRhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBmaWxlLmdldE1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtZXRhZGF0YSkudG9CZShleHBlY3RlZE1ldGFkYXRhKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAuZ2V0TWV0YWRhdGEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tJRmlsZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IG1ldGFkYXRhIHZhbHVlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLmdldE1ldGFkYXRhLm1vY2tSZXNvbHZlZFZhbHVlKHsgdGVzdEtleTogJ3Rlc3RWYWx1ZScgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGZpbGUuZ2V0TWV0YWRhdGFWYWx1ZSgndGVzdEtleScpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUpLnRvQmUoJ3Rlc3RWYWx1ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIG5vbi1leGlzdGVudCBtZXRhZGF0YSBrZXknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tBcHAuZ2V0TWV0YWRhdGEubW9ja1Jlc29sdmVkVmFsdWUoeyBvdGhlcktleTogJ3ZhbHVlJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgZmlsZS5nZXRNZXRhZGF0YVZhbHVlKCdub25FeGlzdGVudCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIHdoZW4gbm8gbWV0YWRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tBcHAuZ2V0TWV0YWRhdGEubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGZpbGUuZ2V0TWV0YWRhdGFWYWx1ZSgnYW55S2V5Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGdldCBhbGwgcHJvcGVydGllcyBmcm9tIG1ldGFkYXRhJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlLmdldE1ldGFkYXRhID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHByb3AxOiAndmFsdWUxJywgcHJvcDI6ICd2YWx1ZTInIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGZpbGUuZ2V0QWxsUHJvcGVydGllcygpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcGVydGllcykudG9FcXVhbCh7XHJcbiAgICAgICAgICAgICAgICBwcm9wMTogeyBuYW1lOiAncHJvcDEnIH0sXHJcbiAgICAgICAgICAgICAgICBwcm9wMjogeyBuYW1lOiAncHJvcDInIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IG9iamVjdCB3aGVuIG5vIG1ldGFkYXRhIGZvciBnZXRBbGxQcm9wZXJ0aWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlLmdldE1ldGFkYXRhID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBmaWxlLmdldEFsbFByb3BlcnRpZXMoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3BlcnRpZXMpLnRvRXF1YWwoe30pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1VwZGF0ZSBtZXRhZGF0YScsICgpID0+IHtcclxuICAgICAgICBjb25zdCBtb2NrQ29udGVudCA9IGAtLS1cclxuZXhpc3Rpbmc6IHZhbHVlXHJcbi0tLVxyXG5Cb2R5IGNvbnRlbnQgaGVyZWA7XHJcblxyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLnJlYWRGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb250ZW50KTtcclxuICAgICAgICAgICAgZmlsZVsnbG9jayddID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXBkYXRlIG1ldGFkYXRhIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWROZXdDb250ZW50ID0gYC0tLVxyXG50ZXN0S2V5OiB0ZXN0VmFsdWVcclxuXHJcbi0tLVxyXG5Cb2R5IGNvbnRlbnQgaGVyZWA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLnVwZGF0ZU1ldGFkYXRhKCduZXdLZXknLCAnbmV3VmFsdWUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrSnNZYW1sLmxvYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdleGlzdGluZzogdmFsdWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tKc1lhbWwuZHVtcCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBleGlzdGluZzogJ3ZhbHVlJywgbmV3S2V5OiAnbmV3VmFsdWUnIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC53cml0ZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tJRmlsZSwgZXhwZWN0ZWROZXdDb250ZW50KTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAud2FpdEZvckZpbGVNZXRhRGF0YVVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgICAgICAgICAnZm9sZGVyL3Rlc3QubWQnLFxyXG4gICAgICAgICAgICAgICAgJ25ld0tleScsXHJcbiAgICAgICAgICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHdhaXQgZm9yIGxvY2sgYmVmb3JlIHVwZGF0aW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlWydsb2NrJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUmVsZWFzZSBsb2NrIGFmdGVyIDEwMG1zXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmlsZVsnbG9jayddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLnVwZGF0ZU1ldGFkYXRhKCdrZXknLCAndmFsdWUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLndyaXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB5YW1sIHBhcnNpbmcgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrSnNZYW1sLmxvYWQubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWUFNTCBwYXJzZSBlcnJvcicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUudXBkYXRlTWV0YWRhdGEoJ2tleScsICd2YWx1ZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAud3JpdGVGaWxlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGZyb250bWF0dGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlLmV4dHJhY3RGcm9udG1hdHRlciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdGcm9udG1hdHRlcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGJvZHk6ICdjb250ZW50J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUudXBkYXRlTWV0YWRhdGEoJ2tleScsICd2YWx1ZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAud3JpdGVGaWxlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsIGZyb250bWF0dGVyIGZyb20geWFtbCBwYXJzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrSnNZYW1sLmxvYWQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZmlsZS51cGRhdGVNZXRhZGF0YSgna2V5JywgJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC53cml0ZUZpbGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnUmVtb3ZlIG1ldGFkYXRhJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIG1ldGFkYXRhIGtleScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Zyb250bWF0dGVyID0geyBrZXkxOiAndmFsdWUxJywga2V5MjogJ3ZhbHVlMicgfTtcclxuICAgICAgICAgICAgZmlsZS5nZXRNZXRhZGF0YSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRnJvbnRtYXR0ZXIpO1xyXG4gICAgICAgICAgICBmaWxlLnNhdmVGcm9udG1hdHRlciA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUucmVtb3ZlTWV0YWRhdGEoJ2tleTEnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLnNhdmVGcm9udG1hdHRlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBrZXkyOiAndmFsdWUyJyB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVtb3ZpbmcgZnJvbSBudWxsIG1ldGFkYXRhJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBmaWxlLmdldE1ldGFkYXRhID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICBmaWxlLnNhdmVGcm9udG1hdHRlciA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUucmVtb3ZlTWV0YWRhdGEoJ2tleTEnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLnNhdmVGcm9udG1hdHRlcikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdSZW9yZGVyIG1ldGFkYXRhJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmVvcmRlciBtZXRhZGF0YSBhY2NvcmRpbmcgdG8gcHJvcGVydGllcyBvcmRlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Zyb250bWF0dGVyID0geyBwcm9wMzogJ2MnLCBwcm9wMTogJ2EnLCBwcm9wMjogJ2InIH07XHJcbiAgICAgICAgICAgIGZpbGUuZ2V0TWV0YWRhdGEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tGcm9udG1hdHRlcik7XHJcbiAgICAgICAgICAgIGZpbGUuc29ydEZyb250bWF0dGVyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRGcm9udG1hdHRlcjogeyBwcm9wMTogJ2EnLCBwcm9wMjogJ2InLCBwcm9wMzogJ2MnLCBJZDogbnVsbCB9LFxyXG4gICAgICAgICAgICAgICAgZXh0cmFQcm9wZXJ0aWVzOiBbXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmlsZS5zYXZlRnJvbnRtYXR0ZXIgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLnJlb3JkZXJNZXRhZGF0YShbJ3Byb3AxJywgJ3Byb3AyJywgJ3Byb3AzJ10pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGZpbGUuc2F2ZUZyb250bWF0dGVyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHJlb3JkZXIgd2hlbiBvcmRlciBpcyBhbHJlYWR5IGNvcnJlY3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGcm9udG1hdHRlciA9IHsgcHJvcDE6ICdhJywgcHJvcDI6ICdiJywgSWQ6ICd0ZXN0LWlkJyB9O1xyXG4gICAgICAgICAgICBmaWxlLmdldE1ldGFkYXRhID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrRnJvbnRtYXR0ZXIpO1xyXG4gICAgICAgICAgICBmaWxlLnNhdmVGcm9udG1hdHRlciA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUucmVvcmRlck1ldGFkYXRhKFsncHJvcDEnLCAncHJvcDInXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmlsZS5zYXZlRnJvbnRtYXR0ZXIpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgbWV0YWRhdGEgaW4gcmVvcmRlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgZmlsZS5nZXRNZXRhZGF0YSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIGZpbGUuc2F2ZUZyb250bWF0dGVyID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZmlsZS5yZW9yZGVyTWV0YWRhdGEoWydwcm9wMScsICdwcm9wMiddKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChmaWxlLnNhdmVGcm9udG1hdHRlcikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdTYXZlIGZyb250bWF0dGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1vY2tDb250ZW50ID0gYC0tLVxyXG5vbGQ6IGNvbnRlbnRcclxuLS0tXHJcbkJvZHkgY29udGVudGA7XHJcblxyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQXBwLnJlYWRGaWxlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb250ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzYXZlIGZyb250bWF0dGVyIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB7IGtleTogJ3ZhbHVlJyB9O1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZENvbnRlbnQgPSBgLS0tXHJcbnRlc3RLZXk6IHRlc3RWYWx1ZVxyXG5cclxuLS0tXHJcbkJvZHkgY29udGVudGA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBmaWxlLnNhdmVGcm9udG1hdHRlcihmcm9udG1hdHRlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja0pzWWFtbC5kdW1wKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChmcm9udG1hdHRlcik7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLndyaXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja0lGaWxlLCBleHBlY3RlZENvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHNhdmUgZnJvbnRtYXR0ZXIgd2l0aCBleHRyYSBwcm9wZXJ0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IHsga2V5OiAndmFsdWUnIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhUHJvcGVydGllcyA9IFsnZXh0cmExOiB2YWx1ZTEnLCAnZXh0cmEyOiB2YWx1ZTInXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IGZpbGUuc2F2ZUZyb250bWF0dGVyKGZyb250bWF0dGVyLCBleHRyYVByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBcHAud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZmlsdGVyIG91dCBlbXB0eSBleHRyYSBwcm9wZXJ0aWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IHsga2V5OiAndmFsdWUnIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhUHJvcGVydGllcyA9IFsnZXh0cmExOiB2YWx1ZTEnLCAnJywgJyAgICcsICdleHRyYTI6IHZhbHVlMiddO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgZmlsZS5zYXZlRnJvbnRtYXR0ZXIoZnJvbnRtYXR0ZXIsIGV4dHJhUHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC53cml0ZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdFeHRyYWN0IGZyb250bWF0dGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgZXh0cmFjdCBmcm9udG1hdHRlciBhbmQgYm9keSBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXHJcbmtleTogdmFsdWVcclxubmVzdGVkOlxyXG4gIHByb3A6IGRhdGFcclxuLS0tXHJcbiMgVGl0bGVcclxuQm9keSBjb250ZW50IGhlcmVgO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZS5leHRyYWN0RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmV4aXN0aW5nRnJvbnRtYXR0ZXIpLnRvQmUoYGtleTogdmFsdWVcclxubmVzdGVkOlxyXG4gIHByb3A6IGRhdGFgKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5ib2R5KS50b0JlKGAjIFRpdGxlXHJcbkJvZHkgY29udGVudCBoZXJlYCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbnRlbnQgd2l0aG91dCBmcm9udG1hdHRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGAjIFRpdGxlXHJcbkp1c3QgYm9keSBjb250ZW50YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGUuZXh0cmFjdEZyb250bWF0dGVyKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5leGlzdGluZ0Zyb250bWF0dGVyKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5ib2R5KS50b0JlKGNvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjb250ZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlLmV4dHJhY3RGcm9udG1hdHRlcignJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmV4aXN0aW5nRnJvbnRtYXR0ZXIpLnRvQmUoJycpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmJvZHkpLnRvQmUoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgZnJvbnRtYXR0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXHJcbmluY29tcGxldGUgZnJvbnRtYXR0ZXJcclxuIyBUaXRsZVxyXG5Db250ZW50YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGUuZXh0cmFjdEZyb250bWF0dGVyKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5leGlzdGluZ0Zyb250bWF0dGVyKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5ib2R5KS50b0JlKGNvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0Zvcm1hdCBmcm9udG1hdHRlcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBmcm9udG1hdHRlciB1c2luZyBqcy15YW1sJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IHsga2V5OiAndmFsdWUnLCBuZXN0ZWQ6IHsgcHJvcDogJ2RhdGEnIH0gfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGUuZm9ybWF0RnJvbnRtYXR0ZXIoZnJvbnRtYXR0ZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tKc1lhbWwuZHVtcCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZnJvbnRtYXR0ZXIpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCd0ZXN0S2V5OiB0ZXN0VmFsdWVcXG4nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdTb3J0IGZyb250bWF0dGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgc29ydCBmcm9udG1hdHRlciBhY2NvcmRpbmcgdG8gb3JkZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0geyBwcm9wMzogJ2MnLCBwcm9wMTogJ2EnLCBwcm9wMjogJ2InLCBleHRyYTogJ3gnIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gWydwcm9wMScsICdwcm9wMicsICdwcm9wMyddO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZS5zb3J0RnJvbnRtYXR0ZXIoZnJvbnRtYXR0ZXIsIG9yZGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc29ydGVkRnJvbnRtYXR0ZXIpLnRvRXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgcHJvcDE6ICdhJyxcclxuICAgICAgICAgICAgICAgIHByb3AyOiAnYicsXHJcbiAgICAgICAgICAgICAgICBwcm9wMzogJ2MnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmV4dHJhUHJvcGVydGllcykudG9FcXVhbChbXHJcbiAgICAgICAgICAgICAgICAnZXh0cmE6IFwieFwiJ1xyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBwcm9wZXJ0aWVzIGluIGZyb250bWF0dGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IHsgcHJvcDE6ICdhJyB9O1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IFsncHJvcDEnLCAncHJvcDInLCAncHJvcDMnXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGUuc29ydEZyb250bWF0dGVyKGZyb250bWF0dGVyLCBvcmRlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnNvcnRlZEZyb250bWF0dGVyKS50b0VxdWFsKHtcclxuICAgICAgICAgICAgICAgIHByb3AxOiAnYScsXHJcbiAgICAgICAgICAgICAgICBwcm9wMjogbnVsbCxcclxuICAgICAgICAgICAgICAgIHByb3AzOiBudWxsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmV4dHJhUHJvcGVydGllcykudG9FcXVhbChbXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGZyb250bWF0dGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmaWxlLnNvcnRGcm9udG1hdHRlcih7fSwgWydwcm9wMScsICdwcm9wMiddKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc29ydGVkRnJvbnRtYXR0ZXIpLnRvRXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgcHJvcDE6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBwcm9wMjogbnVsbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5leHRyYVByb3BlcnRpZXMpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0V4dGVybmFsIHJlZmVyZW5jZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBnZXQgZnJvbSBsaW5rIHRocm91Z2ggdmF1bHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0geyBwYXRoOiAnbGlua2VkL2ZpbGUubWQnIH07XHJcbiAgICAgICAgICAgIG1vY2tWYXVsdC5nZXRGcm9tTGluay5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRSZXN1bHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZmlsZS5nZXRGcm9tTGluaygnW1tsaW5rZWQvZmlsZV1dJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1ZhdWx0LmdldEZyb21MaW5rKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnW1tsaW5rZWQvZmlsZV1dJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZXhwZWN0ZWRSZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0Vycm9yIGhhbmRsaW5nIGFuZCBlZGdlIGNhc2VzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgbWV0YWRhdGEgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgZmlsZVsnbG9jayddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTdGFydCB0d28gY29uY3VycmVudCB1cGRhdGVzXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZTEgPSBmaWxlLnVwZGF0ZU1ldGFkYXRhKCdrZXkxJywgJ3ZhbHVlMScpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGUyID0gZmlsZS51cGRhdGVNZXRhZGF0YSgna2V5MicsICd2YWx1ZTInKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt1cGRhdGUxLCB1cGRhdGUyXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBCb3RoIHNob3VsZCBjb21wbGV0ZSB3aXRob3V0IHRocm93aW5nXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLndyaXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxvbmcgZmlsZSBwYXRocycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG9uZ1BhdGggPSAnYS8nLnJlcGVhdCgxMDApICsgJ2ZpbGUubWQnO1xyXG4gICAgICAgICAgICBjb25zdCBsb25nRmlsZSA9IG5ldyBGaWxlKG1vY2tWYXVsdCwge1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja0lGaWxlLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogbG9uZ1BhdGhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobG9uZ0ZpbGUuZ2V0UGF0aCgpKS50b0JlKGxvbmdQYXRoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIGZpbGUgbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxGaWxlID0gbmV3IEZpbGUobW9ja1ZhdWx0LCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrSUZpbGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAndGVzdEAjJCVeJiooKV8re318Ojw+Py5tZCcsXHJcbiAgICAgICAgICAgICAgICBwYXRoOiAnZm9sZGVyL3Rlc3RAIyQlXiYqKClfK3t9fDo8Pj8ubWQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHNwZWNpYWxGaWxlLmdldE5hbWUoKSkudG9CZSgndGVzdEAjJCVeJiooKV8re318Ojw+Py5tZCcpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3BlY2lhbEZpbGUuZ2V0TmFtZShmYWxzZSkpLnRvQmUoJ3Rlc3RAIyQlXiYqKClfK3t9fDo8Pj8nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTsiXSwidmVyc2lvbiI6M30=