54bddcba3a448aa3857cfa234ce696c1
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock using the exact path used in the source file
jest.mock('../../vault/Utils', () => ({
    setIcon: jest.fn()
}));
// Mocks
jest.mock('../../properties/FileProperty');
jest.mock('../../properties/TextProperty');
jest.mock('../../properties/MultiFileProperty');
jest.mock('../../vault/File');
jest.mock('../../vault/MyVault');
const FileProperty_1 = require("../../properties/FileProperty");
const MultiFileProperty_1 = require("../../properties/MultiFileProperty");
const ObjectProperty_1 = require("../../properties/ObjectProperty");
const TextProperty_1 = require("../../properties/TextProperty");
// Import the mocked function  
const { setIcon } = jest.requireMock('../../vault/Utils');
describe('ObjectProperty', () => {
    let objectProperty;
    let mockVault;
    let mockFile;
    let mockUpdate;
    let mockFileProperty;
    let mockTextProperty;
    let mockMultiFileProperty;
    let properties;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Reset all mocks
        jest.clearAllMocks();
        // Setup mock properties - make them extend the actual classes for instanceof checks
        mockFileProperty = Object.create(FileProperty_1.FileProperty.prototype);
        Object.assign(mockFileProperty, {
            name: 'file',
            type: 'file',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            getParentValue: jest.fn(),
            getClasses: jest.fn().mockReturnValue(['Document'])
        });
        mockTextProperty = Object.create(TextProperty_1.TextProperty.prototype);
        Object.assign(mockTextProperty, {
            name: 'title',
            type: 'text',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            static: false
        });
        mockMultiFileProperty = Object.create(MultiFileProperty_1.MultiFileProperty.prototype);
        Object.assign(mockMultiFileProperty, {
            name: 'multiFile',
            type: 'multiFile',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            getParentValue: jest.fn(),
            getClasses: jest.fn().mockReturnValue(['Image', 'Video'])
        });
        properties = {
            file: mockFileProperty,
            title: mockTextProperty,
            multiFile: mockMultiFileProperty
        };
        // Setup mocks
        mockVault = {
            getFromLink: jest.fn(),
            getFiles: jest.fn()
        };
        mockFile = {
            updateMetadata: jest.fn(),
            vault: mockVault,
            read: jest.fn()
        };
        mockUpdate = jest.fn();
        // Mock constructors
        FileProperty_1.FileProperty.mockImplementation(() => mockFileProperty);
        TextProperty_1.TextProperty.mockImplementation(() => mockTextProperty);
        MultiFileProperty_1.MultiFileProperty.mockImplementation(() => mockMultiFileProperty);
    });
    describe('Constructor', () => {
        test('should create ObjectProperty with required parameters', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            expect(objectProperty.name).toBe('testObject');
            expect(objectProperty.type).toBe('object');
            expect(objectProperty.properties).toBe(properties);
            expect(objectProperty.flexSpan).toBe(2);
            expect(objectProperty.appendFirst).toBe(false);
            expect(objectProperty.allowMove).toBe(true);
            expect(objectProperty.display).toBe('object');
        });
        test('should handle custom arguments', () => {
            const args = {
                appendFirst: true,
                allowMove: false,
                display: 'table',
                icon: 'object'
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties, args);
            expect(objectProperty.appendFirst).toBe(true);
            expect(objectProperty.allowMove).toBe(false);
            expect(objectProperty.display).toBe('table');
            expect(objectProperty.icon).toBe('object');
        });
        test('should handle empty properties object', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', {});
            expect(objectProperty.properties).toEqual({});
            expect(Object.keys(objectProperty.properties)).toHaveLength(0);
        });
        test('should assign additional arguments', () => {
            const args = {
                customProperty: 'customValue',
                anotherProp: 123
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties, args);
            expect(objectProperty.customProperty).toBe('customValue');
            expect(objectProperty.anotherProp).toBe(123);
        });
    });
    describe('getClasses', () => {
        test('should return classes from FileProperty', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', { file: mockFileProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Document']);
            expect(mockFileProperty.getClasses).toHaveBeenCalled();
        });
        test('should return classes from MultiFileProperty', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', { multiFile: mockMultiFileProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Image', 'Video']);
            expect(mockMultiFileProperty.getClasses).toHaveBeenCalled();
        });
        test('should return classes from ObjectProperty', () => {
            const mockNestedObjectProperty = Object.create(ObjectProperty_1.ObjectProperty.prototype);
            Object.assign(mockNestedObjectProperty, {
                name: 'nested',
                type: 'object',
                getClasses: jest.fn().mockReturnValue(['Nested', 'Object'])
            });
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', { nested: mockNestedObjectProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Nested', 'Object']);
        });
        test('should throw error when no class found', () => {
            const propertiesWithoutClasses = {
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithoutClasses);
            expect(() => objectProperty.getClasses()).toThrow('No class found');
        });
    });
    describe('getParentValue', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
        });
        test('should return parent value from FileProperty', () => {
            const values = [{ file: 'test-file.md', title: 'Test' }];
            const expectedFile = { path: 'test-file.md' };
            mockFileProperty.getParentValue.mockReturnValue(expectedFile);
            const result = objectProperty.getParentValue(values);
            expect(result).toBe(expectedFile);
            expect(mockFileProperty.getParentValue).toHaveBeenCalledWith('test-file.md');
        });
        test('should return parent value from MultiFileProperty', () => {
            const propertiesWithMultiFile = { multiFile: mockMultiFileProperty };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithMultiFile);
            const values = [{ multiFile: ['file1.md', 'file2.md'] }];
            const expectedFile = { path: 'file1.md' };
            mockMultiFileProperty.getParentValue.mockReturnValue(expectedFile);
            const result = objectProperty.getParentValue(values);
            expect(result).toBe(expectedFile);
            expect(mockMultiFileProperty.getParentValue).toHaveBeenCalledWith(['file1.md', 'file2.md']);
        });
        test('should return undefined when no values', () => {
            const result = objectProperty.getParentValue(null);
            expect(result).toBeUndefined();
            const result2 = objectProperty.getParentValue([]);
            expect(result2).toBeUndefined();
        });
        test('should return undefined when no parent property found', () => {
            const propertiesWithoutParent = { title: mockTextProperty };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithoutParent);
            const values = [{ title: 'Test' }];
            const result = objectProperty.getParentValue(values);
            expect(result).toBeUndefined();
        });
    });
    describe('findValue', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            // Mock read method
            objectProperty.read = jest.fn();
        });
        test('should find value in object array', () => {
            const mockValues = [
                { file: 'document1.md', title: 'First Document' },
                { file: 'document2.md', title: 'Second Document' },
                { file: 'image.jpg', title: 'Test Image' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'Test Image', 'file');
            expect(result).toBe('image.jpg');
        });
        test('should find value with partial match', () => {
            const mockValues = [
                { file: 'long-document-name.md', title: 'Document' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'document', 'title');
            expect(result).toBe('Document');
        });
        test('should return null when value not found', () => {
            const mockValues = [
                { file: 'document.md', title: 'Document' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'NonExistent', 'file');
            expect(result).toBeNull();
        });
        test('should return null when no values', () => {
            objectProperty.read.mockReturnValue(null);
            const result = objectProperty.findValue(mockFile, 'test', 'file');
            expect(result).toBeNull();
        });
        test('should return null when empty values', () => {
            objectProperty.read.mockReturnValue([]);
            const result = objectProperty.findValue(mockFile, 'test', 'file');
            expect(result).toBeNull();
        });
    });
    describe('formatParentValue', () => {
        test('should format parent value for FileProperty', () => {
            const propertiesWithFile = {
                file: mockFileProperty,
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithFile);
            const result = objectProperty.formatParentValue('test-file.md');
            expect(result).toEqual([{
                    file: 'test-file.md',
                    title: ''
                }]);
        });
        test('should format parent value for MultiFileProperty', () => {
            const propertiesWithMultiFile = {
                multiFile: mockMultiFileProperty,
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithMultiFile);
            const result = objectProperty.formatParentValue('test-files');
            expect(result).toEqual([{
                    multiFile: 'test-files',
                    title: ''
                }]);
        });
        test('should handle ObjectProperty as parent', () => {
            const mockObjectProperty = Object.create(ObjectProperty_1.ObjectProperty.prototype);
            Object.assign(mockObjectProperty, {
                name: 'object',
                type: 'object'
            });
            const mockTextProp = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProp, { name: 'title', type: 'text' });
            const propertiesWithObject = {
                object: mockObjectProperty,
                title: mockTextProp
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithObject);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    object: 'test-value',
                    title: ''
                }]);
        });
        test('should handle no parent properties', () => {
            const mockTextProperty1 = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProperty1, { name: 'title', type: 'text' });
            const mockTextProperty2 = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProperty2, { name: 'description', type: 'text' });
            const propertiesWithoutParent = {
                title: mockTextProperty1,
                description: mockTextProperty2
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithoutParent);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    title: '',
                    description: ''
                }]);
        });
        test('should only assign value to first parent property', () => {
            const mockFileProperty1 = Object.create(FileProperty_1.FileProperty.prototype);
            Object.assign(mockFileProperty1, { name: 'file1', type: 'file' });
            const mockFileProperty2 = Object.create(FileProperty_1.FileProperty.prototype);
            Object.assign(mockFileProperty2, { name: 'file2', type: 'file' });
            const mockTextProp = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProp, { name: 'title', type: 'text' });
            const propertiesWithMultipleParents = {
                file1: mockFileProperty1,
                file2: mockFileProperty2,
                title: mockTextProp
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', propertiesWithMultipleParents);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    file1: 'test-value',
                    file2: '',
                    title: ''
                }]);
        });
    });
    describe('getDisplay', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            // Mock the parent getDisplay method
            Object.getPrototypeOf(Object.getPrototypeOf(objectProperty)).getDisplay = jest.fn().mockReturnValue(document.createElement('div'));
        });
        test('should use provided display argument', () => {
            const args = { display: 'table' };
            objectProperty.getDisplay(mockFile, args);
            expect(objectProperty.display).toBe('table');
        });
        test('should keep existing display when no argument provided', () => {
            objectProperty.display = 'list';
            objectProperty.getDisplay(mockFile);
            expect(objectProperty.display).toBe('list');
        });
        test('should use default display when no argument and no existing display', () => {
            objectProperty.getDisplay(mockFile, {});
            expect(objectProperty.display).toBe('object'); // default value
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            // Mock methods that will be called
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            objectProperty.createTable = jest.fn();
        });
        test('should create container with correct class', () => {
            const values = [];
            const container = objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(container.classList.contains('metadata-object-container-testobject')).toBe(true);
        });
        test('should set vault property', () => {
            const values = [];
            objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(objectProperty.vault).toBe(mockVault);
        });
        test('should create header', () => {
            const values = [];
            const container = objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(objectProperty.createHeader).toHaveBeenCalledWith(values, mockUpdate, container);
        });
        test('should create table when display is table', () => {
            objectProperty.display = 'table';
            const values = [];
            const container = objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(objectProperty.createTable).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createObjects).not.toHaveBeenCalled();
        });
        test('should create objects when display is not table', () => {
            objectProperty.display = 'object';
            const values = [];
            const container = objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createTable).not.toHaveBeenCalled();
        });
        test('should create objects by default', () => {
            const values = [];
            objectProperty.fillDisplay(mockVault, values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalled();
        });
    });
    describe('getDisplayProperties', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.read = jest.fn();
            // Mock updateObject method
            objectProperty.updateObject = jest.fn();
        });
        test('should return display properties for valid property', () => {
            const mockValues = [
                { file: 'doc1.md', title: 'Document 1' },
                { file: 'doc2.md', title: 'Document 2' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            mockVault.getFromLink.mockImplementation((link) => ({ name: link, path: link }));
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toHaveLength(2);
            expect(result[0].classe.name).toBe('doc1.md');
            expect(result[1].classe.name).toBe('doc2.md');
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledTimes(2);
        });
        test('should set property as static when isStatic is true', () => {
            const mockValues = [{ file: 'doc.md', title: 'Document' }];
            objectProperty.read.mockReturnValue(mockValues);
            objectProperty.getDisplayProperties(mockFile, 'file', 'title', true);
            expect(mockTextProperty.static).toBe(true);
        });
        test('should set property as non-static when isStatic is false', () => {
            const mockValues = [{ file: 'doc.md', title: 'Document' }];
            objectProperty.read.mockReturnValue(mockValues);
            objectProperty.getDisplayProperties(mockFile, 'file', 'title', false);
            expect(mockTextProperty.static).toBe(false);
        });
        test('should throw error when property not found', () => {
            expect(() => {
                objectProperty.getDisplayProperties(mockFile, 'file', 'nonexistent');
            }).toThrow('Property nonexistent not found in ObjectProperty testObject');
        });
        test('should return empty array when no values', () => {
            objectProperty.read.mockReturnValue(null);
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toEqual([]);
        });
        test('should return empty array when empty values', () => {
            objectProperty.read.mockReturnValue([]);
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toEqual([]);
        });
    });
    describe('Integration tests', () => {
        test('should work with complex nested properties', () => {
            const complexProperties = {
                mainFile: mockFileProperty,
                details: {
                    title: mockTextProperty,
                    description: mockTextProperty
                },
                attachments: mockMultiFileProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('complex', complexProperties);
            expect(objectProperty.properties).toBe(complexProperties);
            expect(() => objectProperty.getClasses()).not.toThrow();
        });
        test('should handle real DOM interactions', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            // Mock the methods to avoid calling them
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            const container = objectProperty.fillDisplay(mockVault, [], mockUpdate);
            // Test that the container has the right class
            expect(container.classList.contains('metadata-object-container-testobject')).toBe(true);
            // Test that appendChild was called successfully
            expect(() => document.body.appendChild(container)).not.toThrow();
        });
        test('should maintain property references', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            expect(objectProperty.properties.file).toBe(mockFileProperty);
            expect(objectProperty.properties.title).toBe(mockTextProperty);
            expect(objectProperty.properties.multiFile).toBe(mockMultiFileProperty);
        });
    });
    describe('createHeader', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
        });
        test('should create header row with title', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            const headerRow = mockContainer.querySelector('.metadata-object-header-row');
            expect(headerRow).toBeTruthy();
            const title = mockContainer.querySelector('.metadata-header');
            expect(title?.textContent).toBe('testObject : ');
        });
        test('should use custom title when provided', () => {
            objectProperty.title = 'Custom Title';
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            const title = mockContainer.querySelector('.metadata-header');
            expect(title?.textContent).toBe('Custom Title');
        });
        test('should create add button in header', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            jest.spyOn(objectProperty, 'createAddButton').mockReturnValue(document.createElement('button'));
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            expect(objectProperty.createAddButton).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
    });
    describe('createAddButton', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.addProperty = jest.fn();
        });
        test('should create add button with correct class and icon', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            expect(button.tagName).toBe('BUTTON');
            expect(button.classList.contains('metadata-add-button')).toBe(true);
            expect(setIcon).toHaveBeenCalledWith(button, 'circle-plus');
        });
        test('should handle button click', async () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            // Manually trigger the onclick event since jsdom doesn't automatically execute it
            if (button.onclick) {
                await button.onclick(new MouseEvent('click'));
            }
            expect(objectProperty.addProperty).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
    });
    describe('createObjects', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.createObjectRow = jest.fn().mockReturnValue(document.createElement('div'));
            objectProperty.enableDragAndDrop = jest.fn();
        });
        test('should create object rows for each value', () => {
            const mockContainer = document.createElement('div');
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' }
            ];
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.createObjectRow).toHaveBeenCalledTimes(2);
            expect(objectProperty.createObjectRow).toHaveBeenCalledWith(values, mockUpdate, values[0], 0, mockContainer);
            expect(objectProperty.createObjectRow).toHaveBeenCalledWith(values, mockUpdate, values[1], 1, mockContainer);
        });
        test('should enable drag and drop when allowMove is true', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.allowMove = true;
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.enableDragAndDrop).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
        test('should not enable drag and drop when allowMove is false', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.allowMove = false;
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.enableDragAndDrop).not.toHaveBeenCalled();
        });
        test('should return early when no values', () => {
            const mockContainer = document.createElement('div');
            objectProperty.createObjects(null, mockUpdate, mockContainer);
            expect(objectProperty.createObjectRow).not.toHaveBeenCalled();
        });
    });
    describe('createObjectRow', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.createDeleteButton = jest.fn().mockReturnValue(document.createElement('button'));
        });
        test('should create row with correct classes and structure', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(row.classList.contains('metadata-object-row')).toBe(true);
            expect(row.style.position).toBe('relative');
        });
        test('should set draggable when allowMove is true', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.allowMove = true;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(row.draggable).toBe(true);
            expect(row.dataset.index).toBe('0');
            expect(row.style.cursor).toBe('grab');
        });
        test('should not set draggable when allowMove is false', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.allowMove = false;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            // When allowMove is false, draggable is not explicitly set, so it remains false by default
            expect(row.draggable).toBeFalsy();
            expect(row.dataset.index).toBeUndefined();
            expect(row.style.cursor).not.toBe('grab');
        });
        test('should create property containers for each property', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.updateObject = jest.fn();
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(mockFileProperty.fillDisplay).toHaveBeenCalledWith(objectProperty.vault, 'file1.md', expect.any(Function));
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledWith(objectProperty.vault, 'Title 1', expect.any(Function));
            const propertyContainers = row.querySelectorAll('.metadata-object-property');
            expect(propertyContainers).toHaveLength(3); // file, title, multiFile
        });
        test('should set grid column span for properties with flexSpan', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            mockFileProperty.flexSpan = 2;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            const propertyContainer = row.querySelector('.metadata-object-property');
            expect(propertyContainer?.style.gridColumn).toBe('span 2');
        });
        test('should create delete button', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(objectProperty.createDeleteButton).toHaveBeenCalledWith(values, mockUpdate, index, mockContainer);
        });
    });
    describe('createDeleteButton', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.removeProperty = jest.fn();
        });
        test('should create delete button with correct class and icon', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const index = 0;
            const button = objectProperty.createDeleteButton(values, mockUpdate, index, mockContainer);
            expect(button.tagName).toBe('BUTTON');
            expect(button.classList.contains('metadata-delete-button')).toBe(true);
            expect(setIcon).toHaveBeenCalledWith(button, 'circle-minus');
        });
        test('should handle button click', async () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const index = 0;
            const button = objectProperty.createDeleteButton(values, mockUpdate, index, mockContainer);
            // Manually trigger the onclick event
            if (button.onclick) {
                await button.onclick(new MouseEvent('click'));
            }
            expect(objectProperty.removeProperty).toHaveBeenCalledWith(values, mockUpdate, index, mockContainer);
        });
    });
    describe('createTable', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.createAddButton = jest.fn().mockReturnValue(document.createElement('button'));
            objectProperty.updateObject = jest.fn();
            objectProperty.createDeleteButton = jest.fn().mockReturnValue(document.createElement('button'));
        });
        test('should create table wrapper and table', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const tableWrapper = mockContainer.querySelector('div');
            expect(tableWrapper?.style.position).toBe('relative');
            const table = mockContainer.querySelector('table');
            expect(table?.classList.contains('metadata-object-table')).toBe(true);
        });
        test('should create header row with property names', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const headerRow = mockContainer.querySelector('tr');
            const headers = headerRow?.querySelectorAll('th');
            expect(headers).toHaveLength(4); // file, title, multiFile + delete column
            expect(headers?.[0].textContent).toBe('file');
            expect(headers?.[1].textContent).toBe('title');
            expect(headers?.[2].textContent).toBe('multiFile');
        });
        test('should create rows for each value', () => {
            const mockContainer = document.createElement('div');
            const values = [
                { file: 'file1.md', title: 'Title 1', multiFile: [] },
                { file: 'file2.md', title: 'Title 2', multiFile: [] }
            ];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const rows = mockContainer.querySelectorAll('tr');
            expect(rows).toHaveLength(3); // header + 2 data rows
            expect(mockFileProperty.fillDisplay).toHaveBeenCalledTimes(2);
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledTimes(2);
        });
        test('should position add button absolutely', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const mockAddButton = document.createElement('button');
            jest.spyOn(objectProperty, 'createAddButton').mockReturnValue(mockAddButton);
            objectProperty.createTable(values, mockUpdate, mockContainer);
            expect(mockAddButton.style.position).toBe('absolute');
            expect(mockAddButton.style.top).toBe('0px');
            expect(mockAddButton.style.right).toBe('0px');
        });
    });
    describe('removeProperty', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should remove object at specified index', async () => {
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' },
                { file: 'file3.md', title: 'Title 3' }
            ];
            const mockContainer = document.createElement('div');
            const index = 1;
            await objectProperty.removeProperty(values, mockUpdate, index, mockContainer);
            expect(values).toHaveLength(2);
            expect(values[0]).toEqual({ file: 'file1.md', title: 'Title 1' });
            expect(values[1]).toEqual({ file: 'file3.md', title: 'Title 3' });
        });
        test('should call update and reloadObjects', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const mockContainer = document.createElement('div');
            const index = 0;
            await objectProperty.removeProperty(values, mockUpdate, index, mockContainer);
            expect(mockUpdate).toHaveBeenCalledWith([]);
            expect(objectProperty.reloadObjects).toHaveBeenCalledWith([], mockUpdate);
        });
    });
    describe('addProperty', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should call update and reloadObjects', async () => {
            const values = [];
            const mockContainer = document.createElement('div');
            // Mock the entire addProperty method to avoid complex logic
            const originalAddProperty = objectProperty.addProperty;
            objectProperty.addProperty = jest.fn().mockImplementation(async (vals, upd, cont) => {
                vals.push({ file: '', title: '', multiFile: '' });
                await upd(vals);
                await objectProperty.reloadObjects(vals, upd);
            });
            await objectProperty.addProperty(values, mockUpdate, mockContainer);
            expect(mockUpdate).toHaveBeenCalled();
            expect(objectProperty.reloadObjects).toHaveBeenCalled();
        });
        test('should be called when add button is clicked', () => {
            objectProperty.addProperty = jest.fn();
            const values = [];
            const mockContainer = document.createElement('div');
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            // Check that the onclick handler is set
            expect(button.onclick).toBeTruthy();
        });
    });
    describe('updateObject', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should update specific property at index', async () => {
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' }
            ];
            const index = 1;
            const property = mockTextProperty;
            const newValue = 'Updated Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(values[1].title).toBe('Updated Title');
            expect(values[0]).toEqual({ file: 'file1.md', title: 'Title 1' }); // Unchanged
        });
        test('should create values array if null', async () => {
            let values = null;
            const index = 0;
            const property = mockTextProperty;
            const newValue = 'New Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(mockUpdate).toHaveBeenCalledWith([{ title: 'New Title' }]);
        });
        test('should call update and reloadObjects', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const index = 0;
            const property = mockTextProperty;
            const newValue = 'Updated Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(mockUpdate).toHaveBeenCalledWith(values);
            expect(objectProperty.reloadObjects).toHaveBeenCalledWith(values, mockUpdate);
        });
    });
    describe('reloadObjects', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', properties);
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            objectProperty.createTable = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should clear container and recreate content', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            // Create a container in the DOM with the correct class
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            container.innerHTML = '<div>Old Content</div>';
            document.body.appendChild(container);
            // Mock querySelector to return our container
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(container.innerHTML).toBe('');
            expect(objectProperty.createHeader).toHaveBeenCalledWith(values, mockUpdate, container);
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should recreate objects when display is not table', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.display = 'object';
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            document.body.appendChild(container);
            // Mock querySelector
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createTable).not.toHaveBeenCalled();
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should recreate table when display is table', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.display = 'table';
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            document.body.appendChild(container);
            // Mock querySelector
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(objectProperty.createTable).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createObjects).not.toHaveBeenCalled();
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should handle missing container gracefully', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            // No container in DOM
            await objectProperty.reloadObjects(values, mockUpdate);
            // Should not throw error
            expect(objectProperty.createHeader).not.toHaveBeenCalled();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcT2JqZWN0UHJvcGVydHkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBU0gsb0RBQW9EO0FBQ3BELElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNyQixDQUFDLENBQUMsQ0FBQztBQUVKLFFBQVE7QUFDUixJQUFJLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQzNDLElBQUksQ0FBQyxJQUFJLENBQUMsb0NBQW9DLENBQUMsQ0FBQztBQUNoRCxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBZmpDLGdFQUE2RDtBQUM3RCwwRUFBdUU7QUFDdkUsb0VBQWlFO0FBQ2pFLGdFQUE2RDtBQWM3RCwrQkFBK0I7QUFDL0IsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUUxRCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksY0FBOEIsQ0FBQztJQUNuQyxJQUFJLFNBQStCLENBQUM7SUFDcEMsSUFBSSxRQUEyQixDQUFDO0lBQ2hDLElBQUksVUFBcUIsQ0FBQztJQUMxQixJQUFJLGdCQUEyQyxDQUFDO0lBQ2hELElBQUksZ0JBQTJDLENBQUM7SUFDaEQsSUFBSSxxQkFBcUQsQ0FBQztJQUMxRCxJQUFJLFVBQWtDLENBQUM7SUFF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O1lBQ2pDLFFBQVEsQ0FBQyxhQUFhLEdBQUcscUJBQXFCLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsNENBQTRDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUQsTUFBTSxNQUFNLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7WUFFeEQsc0JBQXNCO1lBQ3RCLE1BQU0sY0FBYyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFdkQseUJBQXlCO1lBQ3pCLE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXE9iamVjdFByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gJy4uLy4uL3ZhdWx0L0ZpbGUnO1xyXG5pbXBvcnQgeyBNeVZhdWx0IH0gZnJvbSAnLi4vLi4vdmF1bHQvTXlWYXVsdCc7XHJcbmltcG9ydCB7IEZpbGVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3Byb3BlcnRpZXMvRmlsZVByb3BlcnR5JztcclxuaW1wb3J0IHsgTXVsdGlGaWxlUHJvcGVydHkgfSBmcm9tICcuLi8uLi9wcm9wZXJ0aWVzL011bHRpRmlsZVByb3BlcnR5JztcclxuaW1wb3J0IHsgT2JqZWN0UHJvcGVydHkgfSBmcm9tICcuLi8uLi9wcm9wZXJ0aWVzL09iamVjdFByb3BlcnR5JztcclxuaW1wb3J0IHsgVGV4dFByb3BlcnR5IH0gZnJvbSAnLi4vLi4vcHJvcGVydGllcy9UZXh0UHJvcGVydHknO1xyXG5cclxuLy8gTW9jayB1c2luZyB0aGUgZXhhY3QgcGF0aCB1c2VkIGluIHRoZSBzb3VyY2UgZmlsZVxyXG5qZXN0Lm1vY2soJy4uLy4uL3ZhdWx0L1V0aWxzJywgKCkgPT4gKHtcclxuICAgIHNldEljb246IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG4vLyBNb2Nrc1xyXG5qZXN0Lm1vY2soJy4uLy4uL3Byb3BlcnRpZXMvRmlsZVByb3BlcnR5Jyk7XHJcbmplc3QubW9jaygnLi4vLi4vcHJvcGVydGllcy9UZXh0UHJvcGVydHknKTtcclxuamVzdC5tb2NrKCcuLi8uLi9wcm9wZXJ0aWVzL011bHRpRmlsZVByb3BlcnR5Jyk7XHJcbmplc3QubW9jaygnLi4vLi4vdmF1bHQvRmlsZScpO1xyXG5qZXN0Lm1vY2soJy4uLy4uL3ZhdWx0L015VmF1bHQnKTtcclxuXHJcbi8vIEltcG9ydCB0aGUgbW9ja2VkIGZ1bmN0aW9uICBcclxuY29uc3QgeyBzZXRJY29uIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi92YXVsdC9VdGlscycpO1xyXG5cclxuZGVzY3JpYmUoJ09iamVjdFByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgbGV0IG9iamVjdFByb3BlcnR5OiBPYmplY3RQcm9wZXJ0eTtcclxuICAgIGxldCBtb2NrVmF1bHQ6IGplc3QuTW9ja2VkPE15VmF1bHQ+O1xyXG4gICAgbGV0IG1vY2tGaWxlOiBqZXN0Lk1vY2tlZDxGaWxlPjtcclxuICAgIGxldCBtb2NrVXBkYXRlOiBqZXN0Lk1vY2s7XHJcbiAgICBsZXQgbW9ja0ZpbGVQcm9wZXJ0eTogamVzdC5Nb2NrZWQ8RmlsZVByb3BlcnR5PjtcclxuICAgIGxldCBtb2NrVGV4dFByb3BlcnR5OiBqZXN0Lk1vY2tlZDxUZXh0UHJvcGVydHk+O1xyXG4gICAgbGV0IG1vY2tNdWx0aUZpbGVQcm9wZXJ0eTogamVzdC5Nb2NrZWQ8TXVsdGlGaWxlUHJvcGVydHk+O1xyXG4gICAgbGV0IHByb3BlcnRpZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH07XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgRE9NXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAvLyBSZXNldCBhbGwgbW9ja3NcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgbW9jayBwcm9wZXJ0aWVzIC0gbWFrZSB0aGVtIGV4dGVuZCB0aGUgYWN0dWFsIGNsYXNzZXMgZm9yIGluc3RhbmNlb2YgY2hlY2tzXHJcbiAgICAgICAgbW9ja0ZpbGVQcm9wZXJ0eSA9IE9iamVjdC5jcmVhdGUoRmlsZVByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrRmlsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmaWxlJyxcclxuICAgICAgICAgICAgdHlwZTogJ2ZpbGUnLFxyXG4gICAgICAgICAgICBmaWxsRGlzcGxheTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXHJcbiAgICAgICAgICAgIGdldFBhcmVudFZhbHVlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIGdldENsYXNzZXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoWydEb2N1bWVudCddKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2NrVGV4dFByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShUZXh0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tUZXh0UHJvcGVydHksIHtcclxuICAgICAgICAgICAgbmFtZTogJ3RpdGxlJyxcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBmaWxsRGlzcGxheTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXHJcbiAgICAgICAgICAgIHN0YXRpYzogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9ja011bHRpRmlsZVByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShNdWx0aUZpbGVQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obW9ja011bHRpRmlsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtdWx0aUZpbGUnLFxyXG4gICAgICAgICAgICB0eXBlOiAnbXVsdGlGaWxlJyxcclxuICAgICAgICAgICAgZmlsbERpc3BsYXk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxyXG4gICAgICAgICAgICBnZXRQYXJlbnRWYWx1ZTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBnZXRDbGFzc2VzOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFsnSW1hZ2UnLCAnVmlkZW8nXSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJvcGVydGllcyA9IHtcclxuICAgICAgICAgICAgZmlsZTogbW9ja0ZpbGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgIG11bHRpRmlsZTogbW9ja011bHRpRmlsZVByb3BlcnR5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgbW9ja3NcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIGdldEZyb21MaW5rOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIGdldEZpbGVzOiBqZXN0LmZuKClcclxuICAgICAgICB9IGFzIGFueTtcclxuXHJcbiAgICAgICAgbW9ja0ZpbGUgPSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIHZhdWx0OiBtb2NrVmF1bHQsXHJcbiAgICAgICAgICAgIHJlYWQ6IGplc3QuZm4oKVxyXG4gICAgICAgIH0gYXMgYW55O1xyXG5cclxuICAgICAgICBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG5cclxuICAgICAgICAvLyBNb2NrIGNvbnN0cnVjdG9yc1xyXG4gICAgICAgIChGaWxlUHJvcGVydHkgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgRmlsZVByb3BlcnR5PikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tGaWxlUHJvcGVydHkpO1xyXG4gICAgICAgIChUZXh0UHJvcGVydHkgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgVGV4dFByb3BlcnR5PikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tUZXh0UHJvcGVydHkpO1xyXG4gICAgICAgIChNdWx0aUZpbGVQcm9wZXJ0eSBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBNdWx0aUZpbGVQcm9wZXJ0eT4pLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrTXVsdGlGaWxlUHJvcGVydHkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgT2JqZWN0UHJvcGVydHkgd2l0aCByZXF1aXJlZCBwYXJhbWV0ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXMpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5Lm5hbWUpLnRvQmUoJ3Rlc3RPYmplY3QnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnR5cGUpLnRvQmUoJ29iamVjdCcpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkucHJvcGVydGllcykudG9CZShwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmZsZXhTcGFuKS50b0JlKDIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuYXBwZW5kRmlyc3QpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuYWxsb3dNb3ZlKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgnb2JqZWN0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIGFyZ3VtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHtcclxuICAgICAgICAgICAgICAgIGFwcGVuZEZpcnN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWxsb3dNb3ZlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICd0YWJsZScsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnb2JqZWN0J1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzLCBhcmdzKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5hcHBlbmRGaXJzdCkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmFsbG93TW92ZSkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5kaXNwbGF5KS50b0JlKCd0YWJsZScpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuaWNvbikudG9CZSgnb2JqZWN0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcHJvcGVydGllcyBvYmplY3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0Jywge30pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnByb3BlcnRpZXMpLnRvRXF1YWwoe30pO1xyXG4gICAgICAgICAgICBleHBlY3QoT2JqZWN0LmtleXMob2JqZWN0UHJvcGVydHkucHJvcGVydGllcykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGFzc2lnbiBhZGRpdGlvbmFsIGFyZ3VtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVByb3BlcnR5OiAnY3VzdG9tVmFsdWUnLFxyXG4gICAgICAgICAgICAgICAgYW5vdGhlclByb3A6IDEyM1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzLCBhcmdzKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCgob2JqZWN0UHJvcGVydHkgYXMgYW55KS5jdXN0b21Qcm9wZXJ0eSkudG9CZSgnY3VzdG9tVmFsdWUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KChvYmplY3RQcm9wZXJ0eSBhcyBhbnkpLmFub3RoZXJQcm9wKS50b0JlKDEyMyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0Q2xhc3NlcycsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNsYXNzZXMgZnJvbSBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgeyBmaWxlOiBtb2NrRmlsZVByb3BlcnR5IH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0Q2xhc3NlcygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbJ0RvY3VtZW50J10pO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja0ZpbGVQcm9wZXJ0eS5nZXRDbGFzc2VzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY2xhc3NlcyBmcm9tIE11bHRpRmlsZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHsgbXVsdGlGaWxlOiBtb2NrTXVsdGlGaWxlUHJvcGVydHkgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXRDbGFzc2VzKCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFsnSW1hZ2UnLCAnVmlkZW8nXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrTXVsdGlGaWxlUHJvcGVydHkuZ2V0Q2xhc3NlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNsYXNzZXMgZnJvbSBPYmplY3RQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja05lc3RlZE9iamVjdFByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShPYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tOZXN0ZWRPYmplY3RQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ25lc3RlZCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcclxuICAgICAgICAgICAgICAgIGdldENsYXNzZXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoWydOZXN0ZWQnLCAnT2JqZWN0J10pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCB7IG5lc3RlZDogbW9ja05lc3RlZE9iamVjdFByb3BlcnR5IH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0Q2xhc3NlcygpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbJ05lc3RlZCcsICdPYmplY3QnXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIG5vIGNsYXNzIGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzV2l0aG91dENsYXNzZXMgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzV2l0aG91dENsYXNzZXMpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IG9iamVjdFByb3BlcnR5LmdldENsYXNzZXMoKSkudG9UaHJvdygnTm8gY2xhc3MgZm91bmQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRQYXJlbnRWYWx1ZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBwYXJlbnQgdmFsdWUgZnJvbSBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICd0ZXN0LWZpbGUubWQnLCB0aXRsZTogJ1Rlc3QnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZEZpbGUgPSB7IHBhdGg6ICd0ZXN0LWZpbGUubWQnIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtb2NrRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZEZpbGUgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldFBhcmVudFZhbHVlKHZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGV4cGVjdGVkRmlsZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVzdC1maWxlLm1kJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gcGFyZW50IHZhbHVlIGZyb20gTXVsdGlGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoTXVsdGlGaWxlID0geyBtdWx0aUZpbGU6IG1vY2tNdWx0aUZpbGVQcm9wZXJ0eSB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXNXaXRoTXVsdGlGaWxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IG11bHRpRmlsZTogWydmaWxlMS5tZCcsICdmaWxlMi5tZCddIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZEZpbGUgPSB7IHBhdGg6ICdmaWxlMS5tZCcgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1vY2tNdWx0aUZpbGVQcm9wZXJ0eS5nZXRQYXJlbnRWYWx1ZS5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRGaWxlIGFzIGFueSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXRQYXJlbnRWYWx1ZSh2YWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShleHBlY3RlZEZpbGUpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja011bHRpRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbJ2ZpbGUxLm1kJywgJ2ZpbGUyLm1kJ10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCB3aGVuIG5vIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0UGFyZW50VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBvYmplY3RQcm9wZXJ0eS5nZXRQYXJlbnRWYWx1ZShbXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQyKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIHdoZW4gbm8gcGFyZW50IHByb3BlcnR5IGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzV2l0aG91dFBhcmVudCA9IHsgdGl0bGU6IG1vY2tUZXh0UHJvcGVydHkgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzV2l0aG91dFBhcmVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyB0aXRsZTogJ1Rlc3QnIH1dO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0UGFyZW50VmFsdWUodmFsdWVzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbmRWYWx1ZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayByZWFkIG1ldGhvZFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgZmluZCB2YWx1ZSBpbiBvYmplY3QgYXJyYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tWYWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdkb2N1bWVudDEubWQnLCB0aXRsZTogJ0ZpcnN0IERvY3VtZW50JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZG9jdW1lbnQyLm1kJywgdGl0bGU6ICdTZWNvbmQgRG9jdW1lbnQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdpbWFnZS5qcGcnLCB0aXRsZTogJ1Rlc3QgSW1hZ2UnIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIChvYmplY3RQcm9wZXJ0eS5yZWFkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZmluZFZhbHVlKG1vY2tGaWxlLCAnVGVzdCBJbWFnZScsICdmaWxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdpbWFnZS5qcGcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZpbmQgdmFsdWUgd2l0aCBwYXJ0aWFsIG1hdGNoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnbG9uZy1kb2N1bWVudC1uYW1lLm1kJywgdGl0bGU6ICdEb2N1bWVudCcgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5maW5kVmFsdWUobW9ja0ZpbGUsICdkb2N1bWVudCcsICd0aXRsZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnRG9jdW1lbnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBudWxsIHdoZW4gdmFsdWUgbm90IGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZG9jdW1lbnQubWQnLCB0aXRsZTogJ0RvY3VtZW50JyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAob2JqZWN0UHJvcGVydHkucmVhZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZpbmRWYWx1ZShtb2NrRmlsZSwgJ05vbkV4aXN0ZW50JywgJ2ZpbGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIG5vIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5maW5kVmFsdWUobW9ja0ZpbGUsICd0ZXN0JywgJ2ZpbGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIGVtcHR5IHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZmluZFZhbHVlKG1vY2tGaWxlLCAndGVzdCcsICdmaWxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Zvcm1hdFBhcmVudFZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBmb3JtYXQgcGFyZW50IHZhbHVlIGZvciBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoRmlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGZpbGU6IG1vY2tGaWxlUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXNXaXRoRmlsZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5mb3JtYXRQYXJlbnRWYWx1ZSgndGVzdC1maWxlLm1kJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFt7XHJcbiAgICAgICAgICAgICAgICBmaWxlOiAndGVzdC1maWxlLm1kJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBmb3JtYXQgcGFyZW50IHZhbHVlIGZvciBNdWx0aUZpbGVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1dpdGhNdWx0aUZpbGUgPSB7XHJcbiAgICAgICAgICAgICAgICBtdWx0aUZpbGU6IG1vY2tNdWx0aUZpbGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBtb2NrVGV4dFByb3BlcnR5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgcHJvcGVydGllc1dpdGhNdWx0aUZpbGUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZm9ybWF0UGFyZW50VmFsdWUoJ3Rlc3QtZmlsZXMnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW3tcclxuICAgICAgICAgICAgICAgIG11bHRpRmlsZTogJ3Rlc3QtZmlsZXMnLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnXHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBPYmplY3RQcm9wZXJ0eSBhcyBwYXJlbnQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tPYmplY3RQcm9wZXJ0eSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrT2JqZWN0UHJvcGVydHksIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVGV4dFByb3AgPSBPYmplY3QuY3JlYXRlKFRleHRQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tUZXh0UHJvcCwgeyBuYW1lOiAndGl0bGUnLCB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzV2l0aE9iamVjdCA9IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdDogbW9ja09iamVjdFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXNXaXRoT2JqZWN0KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZvcm1hdFBhcmVudFZhbHVlKCd0ZXN0LXZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFt7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Q6ICd0ZXN0LXZhbHVlJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbm8gcGFyZW50IHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUZXh0UHJvcGVydHkxID0gT2JqZWN0LmNyZWF0ZShUZXh0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrVGV4dFByb3BlcnR5MSwgeyBuYW1lOiAndGl0bGUnLCB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVGV4dFByb3BlcnR5MiA9IE9iamVjdC5jcmVhdGUoVGV4dFByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obW9ja1RleHRQcm9wZXJ0eTIsIHsgbmFtZTogJ2Rlc2NyaXB0aW9uJywgdHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1dpdGhvdXRQYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eTEsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbW9ja1RleHRQcm9wZXJ0eTJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzV2l0aG91dFBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5mb3JtYXRQYXJlbnRWYWx1ZSgndGVzdC12YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnXHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIG9ubHkgYXNzaWduIHZhbHVlIHRvIGZpcnN0IHBhcmVudCBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGVQcm9wZXJ0eTEgPSBPYmplY3QuY3JlYXRlKEZpbGVQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tGaWxlUHJvcGVydHkxLCB7IG5hbWU6ICdmaWxlMScsIHR5cGU6ICdmaWxlJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGaWxlUHJvcGVydHkyID0gT2JqZWN0LmNyZWF0ZShGaWxlUHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrRmlsZVByb3BlcnR5MiwgeyBuYW1lOiAnZmlsZTInLCB0eXBlOiAnZmlsZScgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVGV4dFByb3AgPSBPYmplY3QuY3JlYXRlKFRleHRQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tUZXh0UHJvcCwgeyBuYW1lOiAndGl0bGUnLCB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzV2l0aE11bHRpcGxlUGFyZW50cyA9IHtcclxuICAgICAgICAgICAgICAgIGZpbGUxOiBtb2NrRmlsZVByb3BlcnR5MSxcclxuICAgICAgICAgICAgICAgIGZpbGUyOiBtb2NrRmlsZVByb3BlcnR5MixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBtb2NrVGV4dFByb3BcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzV2l0aE11bHRpcGxlUGFyZW50cyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5mb3JtYXRQYXJlbnRWYWx1ZSgndGVzdC12YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbe1xyXG4gICAgICAgICAgICAgICAgZmlsZTE6ICd0ZXN0LXZhbHVlJyxcclxuICAgICAgICAgICAgICAgIGZpbGUyOiAnJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0RGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayB0aGUgcGFyZW50IGdldERpc3BsYXkgbWV0aG9kXHJcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0UHJvcGVydHkpKS5nZXREaXNwbGF5ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgcHJvdmlkZWQgZGlzcGxheSBhcmd1bWVudCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHsgZGlzcGxheTogJ3RhYmxlJyB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgndGFibGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGtlZXAgZXhpc3RpbmcgZGlzcGxheSB3aGVuIG5vIGFyZ3VtZW50IHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5kaXNwbGF5ID0gJ2xpc3QnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgnbGlzdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXNlIGRlZmF1bHQgZGlzcGxheSB3aGVuIG5vIGFyZ3VtZW50IGFuZCBubyBleGlzdGluZyBkaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5KG1vY2tGaWxlLCB7fSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgnb2JqZWN0Jyk7IC8vIGRlZmF1bHQgdmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayBtZXRob2RzIHRoYXQgd2lsbCBiZSBjYWxsZWRcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBjb250YWluZXIgd2l0aCBjb3JyZWN0IGNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBvYmplY3RQcm9wZXJ0eS5maWxsRGlzcGxheShtb2NrVmF1bHQsIHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgdmF1bHQgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdmFsdWVzLCBtb2NrVXBkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS52YXVsdCkudG9CZShtb2NrVmF1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGhlYWRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZUhlYWRlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBjb250YWluZXIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHRhYmxlIHdoZW4gZGlzcGxheSBpcyB0YWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZGlzcGxheSA9ICd0YWJsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgdmFsdWVzLCBtb2NrVXBkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBvYmplY3RzIHdoZW4gZGlzcGxheSBpcyBub3QgdGFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmRpc3BsYXkgPSAnb2JqZWN0JztcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIG9iamVjdHMgYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkobW9ja1ZhdWx0LCB2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXREaXNwbGF5UHJvcGVydGllcycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkucmVhZCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgLy8gTW9jayB1cGRhdGVPYmplY3QgbWV0aG9kXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnVwZGF0ZU9iamVjdCA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBkaXNwbGF5IHByb3BlcnRpZXMgZm9yIHZhbGlkIHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZG9jMS5tZCcsIHRpdGxlOiAnRG9jdW1lbnQgMScgfSxcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2RvYzIubWQnLCB0aXRsZTogJ0RvY3VtZW50IDInIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIChvYmplY3RQcm9wZXJ0eS5yZWFkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tWYWx1ZXMpO1xyXG4gICAgICAgICAgICBtb2NrVmF1bHQuZ2V0RnJvbUxpbmsubW9ja0ltcGxlbWVudGF0aW9uKChsaW5rKSA9PiAoeyBuYW1lOiBsaW5rLCBwYXRoOiBsaW5rIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldERpc3BsYXlQcm9wZXJ0aWVzKG1vY2tGaWxlLCAnZmlsZScsICd0aXRsZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0WzBdLmNsYXNzZS5uYW1lKS50b0JlKCdkb2MxLm1kJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMV0uY2xhc3NlLm5hbWUpLnRvQmUoJ2RvYzIubWQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZXh0UHJvcGVydHkuZmlsbERpc3BsYXkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNldCBwcm9wZXJ0eSBhcyBzdGF0aWMgd2hlbiBpc1N0YXRpYyBpcyB0cnVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW3sgZmlsZTogJ2RvYy5tZCcsIHRpdGxlOiAnRG9jdW1lbnQnIH1dO1xyXG4gICAgICAgICAgICAob2JqZWN0UHJvcGVydHkucmVhZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmdldERpc3BsYXlQcm9wZXJ0aWVzKG1vY2tGaWxlLCAnZmlsZScsICd0aXRsZScsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZXh0UHJvcGVydHkuc3RhdGljKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2V0IHByb3BlcnR5IGFzIG5vbi1zdGF0aWMgd2hlbiBpc1N0YXRpYyBpcyBmYWxzZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1ZhbHVlcyA9IFt7IGZpbGU6ICdkb2MubWQnLCB0aXRsZTogJ0RvY3VtZW50JyB9XTtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAndGl0bGUnLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1RleHRQcm9wZXJ0eS5zdGF0aWMpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBwcm9wZXJ0eSBub3QgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAnbm9uZXhpc3RlbnQnKTtcclxuICAgICAgICAgICAgfSkudG9UaHJvdygnUHJvcGVydHkgbm9uZXhpc3RlbnQgbm90IGZvdW5kIGluIE9iamVjdFByb3BlcnR5IHRlc3RPYmplY3QnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAndGl0bGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gZW1wdHkgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAob2JqZWN0UHJvcGVydHkucmVhZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAndGl0bGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHRlc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB3b3JrIHdpdGggY29tcGxleCBuZXN0ZWQgcHJvcGVydGllcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29tcGxleFByb3BlcnRpZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBtYWluRmlsZTogbW9ja0ZpbGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbW9ja1RleHRQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBtb2NrTXVsdGlGaWxlUHJvcGVydHlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCdjb21wbGV4JywgY29tcGxleFByb3BlcnRpZXMgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5wcm9wZXJ0aWVzKS50b0JlKGNvbXBsZXhQcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IG9iamVjdFByb3BlcnR5LmdldENsYXNzZXMoKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSByZWFsIERPTSBpbnRlcmFjdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgcHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIC8vIE1vY2sgdGhlIG1ldGhvZHMgdG8gYXZvaWQgY2FsbGluZyB0aGVtXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZUhlYWRlciA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KG1vY2tWYXVsdCwgW10sIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGF0IHRoZSBjb250YWluZXIgaGFzIHRoZSByaWdodCBjbGFzc1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IHRoYXQgYXBwZW5kQ2hpbGQgd2FzIGNhbGxlZCBzdWNjZXNzZnVsbHlcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIG1haW50YWluIHByb3BlcnR5IHJlZmVyZW5jZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgcHJvcGVydGllcyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkucHJvcGVydGllcy5maWxlKS50b0JlKG1vY2tGaWxlUHJvcGVydHkpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkucHJvcGVydGllcy50aXRsZSkudG9CZShtb2NrVGV4dFByb3BlcnR5KTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnByb3BlcnRpZXMubXVsdGlGaWxlKS50b0JlKG1vY2tNdWx0aUZpbGVQcm9wZXJ0eSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlSGVhZGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGhlYWRlciByb3cgd2l0aCB0aXRsZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLW9iamVjdC1oZWFkZXItcm93Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXJSb3cpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gbW9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0aXRsZT8udGV4dENvbnRlbnQpLnRvQmUoJ3Rlc3RPYmplY3QgOiAnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVzZSBjdXN0b20gdGl0bGUgd2hlbiBwcm92aWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkudGl0bGUgPSAnQ3VzdG9tIFRpdGxlJztcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gbW9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0aXRsZT8udGV4dENvbnRlbnQpLnRvQmUoJ0N1c3RvbSBUaXRsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGFkZCBidXR0b24gaW4gaGVhZGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgamVzdC5zcHlPbihvYmplY3RQcm9wZXJ0eSwgJ2NyZWF0ZUFkZEJ1dHRvbicpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlQWRkQnV0dG9uJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBhZGQgYnV0dG9uIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24udGFnTmFtZSkudG9CZSgnQlVUVE9OJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1hZGQtYnV0dG9uJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChidXR0b24sICdjaXJjbGUtcGx1cycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGJ1dHRvbiBjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIG9uY2xpY2sgZXZlbnQgc2luY2UganNkb20gZG9lc24ndCBhdXRvbWF0aWNhbGx5IGV4ZWN1dGUgaXRcclxuICAgICAgICAgICAgaWYgKGJ1dHRvbi5vbmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBidXR0b24ub25jbGljayhuZXcgTW91c2VFdmVudCgnY2xpY2snKSBhcyBhbnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuYWRkUHJvcGVydHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlT2JqZWN0cycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmVuYWJsZURyYWdBbmREcm9wID0gamVzdC5mbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIG9iamVjdCByb3dzIGZvciBlYWNoIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTIubWQnLCB0aXRsZTogJ1RpdGxlIDInIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHModmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RSb3cpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdykudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCB2YWx1ZXNbMF0sIDAsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIHZhbHVlc1sxXSwgMSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBlbmFibGUgZHJhZyBhbmQgZHJvcCB3aGVuIGFsbG93TW92ZSBpcyB0cnVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmFsbG93TW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZW5hYmxlRHJhZ0FuZERyb3ApLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBub3QgZW5hYmxlIGRyYWcgYW5kIGRyb3Agd2hlbiBhbGxvd01vdmUgaXMgZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuYWxsb3dNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZW5hYmxlRHJhZ0FuZERyb3ApLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZWFybHkgd2hlbiBubyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMobnVsbCwgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZU9iamVjdFJvdycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlRGVsZXRlQnV0dG9uID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgcm93IHdpdGggY29ycmVjdCBjbGFzc2VzIGFuZCBzdHJ1Y3R1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLW9iamVjdC1yb3cnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5zdHlsZS5wb3NpdGlvbikudG9CZSgncmVsYXRpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNldCBkcmFnZ2FibGUgd2hlbiBhbGxvd01vdmUgaXMgdHJ1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3RzID0gdmFsdWVzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmFsbG93TW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByb3cgPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RSb3codmFsdWVzLCBtb2NrVXBkYXRlLCBvYmplY3RzLCBpbmRleCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qocm93LmRyYWdnYWJsZSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5kYXRhc2V0LmluZGV4KS50b0JlKCcwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyb3cuc3R5bGUuY3Vyc29yKS50b0JlKCdncmFiJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBub3Qgc2V0IGRyYWdnYWJsZSB3aGVuIGFsbG93TW92ZSBpcyBmYWxzZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3RzID0gdmFsdWVzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmFsbG93TW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2hlbiBhbGxvd01vdmUgaXMgZmFsc2UsIGRyYWdnYWJsZSBpcyBub3QgZXhwbGljaXRseSBzZXQsIHNvIGl0IHJlbWFpbnMgZmFsc2UgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICBleHBlY3Qocm93LmRyYWdnYWJsZSkudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyb3cuZGF0YXNldC5pbmRleCkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgICAgICBleHBlY3Qocm93LnN0eWxlLmN1cnNvcikubm90LnRvQmUoJ2dyYWInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBwcm9wZXJ0eSBjb250YWluZXJzIGZvciBlYWNoIHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdHMgPSB2YWx1ZXNbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkudXBkYXRlT2JqZWN0ID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tGaWxlUHJvcGVydHkuZmlsbERpc3BsYXkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkudmF1bHQsIFxyXG4gICAgICAgICAgICAgICAgJ2ZpbGUxLm1kJywgXHJcbiAgICAgICAgICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja1RleHRQcm9wZXJ0eS5maWxsRGlzcGxheSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS52YXVsdCwgXHJcbiAgICAgICAgICAgICAgICAnVGl0bGUgMScsIFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmFueShGdW5jdGlvbilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5Q29udGFpbmVycyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcubWV0YWRhdGEtb2JqZWN0LXByb3BlcnR5Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwcm9wZXJ0eUNvbnRhaW5lcnMpLnRvSGF2ZUxlbmd0aCgzKTsgLy8gZmlsZSwgdGl0bGUsIG11bHRpRmlsZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2V0IGdyaWQgY29sdW1uIHNwYW4gZm9yIHByb3BlcnRpZXMgd2l0aCBmbGV4U3BhbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3RzID0gdmFsdWVzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIG1vY2tGaWxlUHJvcGVydHkuZmxleFNwYW4gPSAyO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHlDb250YWluZXIgPSByb3cucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLW9iamVjdC1wcm9wZXJ0eScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcGVydHlDb250YWluZXI/LnN0eWxlLmdyaWRDb2x1bW4pLnRvQmUoJ3NwYW4gMicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGRlbGV0ZSBidXR0b24nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZURlbGV0ZUJ1dHRvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRGVsZXRlQnV0dG9uJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5yZW1vdmVQcm9wZXJ0eSA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBkZWxldGUgYnV0dG9uIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZURlbGV0ZUJ1dHRvbih2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24udGFnTmFtZSkudG9CZSgnQlVUVE9OJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1kZWxldGUtYnV0dG9uJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChidXR0b24sICdjaXJjbGUtbWludXMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBidXR0b24gY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVEZWxldGVCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBvbmNsaWNrIGV2ZW50XHJcbiAgICAgICAgICAgIGlmIChidXR0b24ub25jbGljaykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgYnV0dG9uLm9uY2xpY2sobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykgYXMgYW55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbW92ZVByb3BlcnR5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVUYWJsZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlQWRkQnV0dG9uID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnVwZGF0ZU9iamVjdCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlRGVsZXRlQnV0dG9uID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgdGFibGUgd3JhcHBlciBhbmQgdGFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlVGFibGUodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlV3JhcHBlciA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcignZGl2Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0YWJsZVdyYXBwZXI/LnN0eWxlLnBvc2l0aW9uKS50b0JlKCdyZWxhdGl2ZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdGFibGUgPSBtb2NrQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0YWJsZT8uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1vYmplY3QtdGFibGUnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBoZWFkZXIgcm93IHdpdGggcHJvcGVydHkgbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlVGFibGUodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcigndHInKTtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGhlYWRlclJvdz8ucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXJzKS50b0hhdmVMZW5ndGgoNCk7IC8vIGZpbGUsIHRpdGxlLCBtdWx0aUZpbGUgKyBkZWxldGUgY29sdW1uXHJcbiAgICAgICAgICAgIGV4cGVjdChoZWFkZXJzPy5bMF0udGV4dENvbnRlbnQpLnRvQmUoJ2ZpbGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcnM/LlsxXS50ZXh0Q29udGVudCkudG9CZSgndGl0bGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcnM/LlsyXS50ZXh0Q29udGVudCkudG9CZSgnbXVsdGlGaWxlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgcm93cyBmb3IgZWFjaCB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScsIG11bHRpRmlsZTogW10gfSxcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUyLm1kJywgdGl0bGU6ICdUaXRsZSAyJywgbXVsdGlGaWxlOiBbXSB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJvd3MpLnRvSGF2ZUxlbmd0aCgzKTsgLy8gaGVhZGVyICsgMiBkYXRhIHJvd3NcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZVByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGV4dFByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBwb3NpdGlvbiBhZGQgYnV0dG9uIGFic29sdXRlbHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGplc3Quc3B5T24ob2JqZWN0UHJvcGVydHksICdjcmVhdGVBZGRCdXR0b24nKS5tb2NrUmV0dXJuVmFsdWUobW9ja0FkZEJ1dHRvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBZGRCdXR0b24uc3R5bGUucG9zaXRpb24pLnRvQmUoJ2Fic29sdXRlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQWRkQnV0dG9uLnN0eWxlLnRvcCkudG9CZSgnMHB4Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQWRkQnV0dG9uLnN0eWxlLnJpZ2h0KS50b0JlKCcwcHgnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdyZW1vdmVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgLy8gTW9jayBjb25zb2xlLmxvZyB0byBhdm9pZCBvdXRwdXQgZHVyaW5nIHRlc3RzXHJcbiAgICAgICAgICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZW1vdmUgb2JqZWN0IGF0IHNwZWNpZmllZCBpbmRleCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdmaWxlMi5tZCcsIHRpdGxlOiAnVGl0bGUgMicgfSxcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUzLm1kJywgdGl0bGU6ICdUaXRsZSAzJyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkucmVtb3ZlUHJvcGVydHkodmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QodmFsdWVzKS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZXNbMF0pLnRvRXF1YWwoeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWVzWzFdKS50b0VxdWFsKHsgZmlsZTogJ2ZpbGUzLm1kJywgdGl0bGU6ICdUaXRsZSAzJyB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNhbGwgdXBkYXRlIGFuZCByZWxvYWRPYmplY3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnJlbW92ZVByb3BlcnR5KHZhbHVlcywgbW9ja1VwZGF0ZSwgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFtdKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFtdLCBtb2NrVXBkYXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdhZGRQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgLy8gTW9jayBjb25zb2xlLmxvZyB0byBhdm9pZCBvdXRwdXQgZHVyaW5nIHRlc3RzXHJcbiAgICAgICAgICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHVwZGF0ZSBhbmQgcmVsb2FkT2JqZWN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSBlbnRpcmUgYWRkUHJvcGVydHkgbWV0aG9kIHRvIGF2b2lkIGNvbXBsZXggbG9naWNcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxBZGRQcm9wZXJ0eSA9IG9iamVjdFByb3BlcnR5LmFkZFByb3BlcnR5O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKHZhbHMsIHVwZCwgY29udCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFscy5wdXNoKHsgZmlsZTogJycsIHRpdGxlOiAnJywgbXVsdGlGaWxlOiAnJyB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwZCh2YWxzKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHModmFscywgdXBkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFkZCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuYWRkUHJvcGVydHkgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlQWRkQnV0dG9uKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBvbmNsaWNrIGhhbmRsZXIgaXMgc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24ub25jbGljaykudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZU9iamVjdCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgLy8gTW9jayBjb25zb2xlLmxvZyB0byBhdm9pZCBvdXRwdXQgZHVyaW5nIHRlc3RzXHJcbiAgICAgICAgICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgc3BlY2lmaWMgcHJvcGVydHkgYXQgaW5kZXgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTIubWQnLCB0aXRsZTogJ1RpdGxlIDInIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IG1vY2tUZXh0UHJvcGVydHk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJ1VwZGF0ZWQgVGl0bGUnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkudXBkYXRlT2JqZWN0KHZhbHVlcywgbW9ja1VwZGF0ZSwgaW5kZXgsIHByb3BlcnR5LCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QodmFsdWVzWzFdLnRpdGxlKS50b0JlKCdVcGRhdGVkIFRpdGxlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZXNbMF0pLnRvRXF1YWwoeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH0pOyAvLyBVbmNoYW5nZWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSB2YWx1ZXMgYXJyYXkgaWYgbnVsbCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlczogYW55ID0gbnVsbDtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IG1vY2tUZXh0UHJvcGVydHk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJ05ldyBUaXRsZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS51cGRhdGVPYmplY3QodmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgcHJvcGVydHksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbeyB0aXRsZTogJ05ldyBUaXRsZScgfV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2FsbCB1cGRhdGUgYW5kIHJlbG9hZE9iamVjdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBtb2NrVGV4dFByb3BlcnR5O1xyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9ICdVcGRhdGVkIFRpdGxlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnVwZGF0ZU9iamVjdCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBwcm9wZXJ0eSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3JlbG9hZE9iamVjdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgcHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZUhlYWRlciA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlVGFibGUgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIC8vIE1vY2sgY29uc29sZS5sb2cgdG8gYXZvaWQgb3V0cHV0IGR1cmluZyB0ZXN0c1xyXG4gICAgICAgICAgICBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY2xlYXIgY29udGFpbmVyIGFuZCByZWNyZWF0ZSBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGluIHRoZSBET00gd2l0aCB0aGUgY29ycmVjdCBjbGFzc1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXY+T2xkIENvbnRlbnQ8L2Rpdj4nO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHF1ZXJ5U2VsZWN0b3IgdG8gcmV0dXJuIG91ciBjb250YWluZXJcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxRdWVyeVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHNlbGVjdG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcubWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxRdWVyeVNlbGVjdG9yLmNhbGwoZG9jdW1lbnQsIHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmlubmVySFRNTCkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgcXVlcnlTZWxlY3RvclxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yID0gb3JpZ2luYWxRdWVyeVNlbGVjdG9yO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmVjcmVhdGUgb2JqZWN0cyB3aGVuIGRpc3BsYXkgaXMgbm90IHRhYmxlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5kaXNwbGF5ID0gJ29iamVjdCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxRdWVyeVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHNlbGVjdG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcubWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxRdWVyeVNlbGVjdG9yLmNhbGwoZG9jdW1lbnQsIHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlVGFibGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IG9yaWdpbmFsUXVlcnlTZWxlY3RvcjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlY3JlYXRlIHRhYmxlIHdoZW4gZGlzcGxheSBpcyB0YWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZGlzcGxheSA9ICd0YWJsZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxRdWVyeVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHNlbGVjdG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcubWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxRdWVyeVNlbGVjdG9yLmNhbGwoZG9jdW1lbnQsIHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlVGFibGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IG9yaWdpbmFsUXVlcnlTZWxlY3RvcjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGNvbnRhaW5lciBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTm8gY29udGFpbmVyIGluIERPTVxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaG91bGQgbm90IHRocm93IGVycm9yXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9