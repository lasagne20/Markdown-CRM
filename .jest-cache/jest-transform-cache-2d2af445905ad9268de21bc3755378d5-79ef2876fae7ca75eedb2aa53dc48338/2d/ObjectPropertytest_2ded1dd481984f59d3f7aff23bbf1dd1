6563c4bd0292abcdba222e0d608a8035
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock using the exact path used in the source file
jest.mock('../../src/vault/Utils', () => ({
    setIcon: jest.fn()
}));
// Mocks
jest.mock('../../src/properties/FileProperty');
jest.mock('../../src/properties/TextProperty');
jest.mock('../../src/properties/MultiFileProperty');
jest.mock('../../src/vault/File');
jest.mock('../../src/vault/Vault');
const FileProperty_1 = require("../../src/properties/FileProperty");
const MultiFileProperty_1 = require("../../src/properties/MultiFileProperty");
const ObjectProperty_1 = require("../../src/properties/ObjectProperty");
const TextProperty_1 = require("../../src/properties/TextProperty");
// Import the mocked function  
const { setIcon } = jest.requireMock('../../src/vault/Utils');
describe('ObjectProperty', () => {
    let objectProperty;
    let mockVault;
    let mockFile;
    let mockUpdate;
    let mockFileProperty;
    let mockTextProperty;
    let mockMultiFileProperty;
    let properties;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Reset all mocks
        jest.clearAllMocks();
        // Setup mock properties - make them extend the actual classes for instanceof checks
        mockFileProperty = Object.create(FileProperty_1.FileProperty.prototype);
        Object.assign(mockFileProperty, {
            name: 'file',
            type: 'file',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            getParentValue: jest.fn(),
            getClasses: jest.fn().mockReturnValue(['Document'])
        });
        mockTextProperty = Object.create(TextProperty_1.TextProperty.prototype);
        Object.assign(mockTextProperty, {
            name: 'title',
            type: 'text',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            static: false
        });
        mockMultiFileProperty = Object.create(MultiFileProperty_1.MultiFileProperty.prototype);
        Object.assign(mockMultiFileProperty, {
            name: 'multiFile',
            type: 'multiFile',
            fillDisplay: jest.fn().mockReturnValue(document.createElement('div')),
            getParentValue: jest.fn(),
            getClasses: jest.fn().mockReturnValue(['Image', 'Video'])
        });
        properties = {
            file: mockFileProperty,
            title: mockTextProperty,
            multiFile: mockMultiFileProperty
        };
        // Setup mocks
        mockVault = {
            getFromLink: jest.fn(),
            getFiles: jest.fn()
        };
        mockFile = {
            updateMetadata: jest.fn(),
            vault: mockVault,
            read: jest.fn()
        };
        mockUpdate = jest.fn();
        // Mock constructors
        FileProperty_1.FileProperty.mockImplementation(() => mockFileProperty);
        TextProperty_1.TextProperty.mockImplementation(() => mockTextProperty);
        MultiFileProperty_1.MultiFileProperty.mockImplementation(() => mockMultiFileProperty);
    });
    describe('Constructor', () => {
        test('should create ObjectProperty with required parameters', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            expect(objectProperty.name).toBe('testObject');
            expect(objectProperty.type).toBe('object');
            expect(objectProperty.properties).toBe(properties);
            expect(objectProperty.flexSpan).toBe(2);
            expect(objectProperty.appendFirst).toBe(false);
            expect(objectProperty.allowMove).toBe(true);
            expect(objectProperty.display).toBe('object');
        });
        test('should handle custom arguments', () => {
            const args = {
                appendFirst: true,
                allowMove: false,
                display: 'table',
                icon: 'object'
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties, args);
            expect(objectProperty.appendFirst).toBe(true);
            expect(objectProperty.allowMove).toBe(false);
            expect(objectProperty.display).toBe('table');
            expect(objectProperty.icon).toBe('object');
        });
        test('should handle empty properties object', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, {});
            expect(objectProperty.properties).toEqual({});
            expect(Object.keys(objectProperty.properties)).toHaveLength(0);
        });
        test('should assign additional arguments', () => {
            const args = {
                customProperty: 'customValue',
                anotherProp: 123
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties, args);
            expect(objectProperty.customProperty).toBe('customValue');
            expect(objectProperty.anotherProp).toBe(123);
        });
    });
    describe('getClasses', () => {
        test('should return classes from FileProperty', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, { file: mockFileProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Document']);
            expect(mockFileProperty.getClasses).toHaveBeenCalled();
        });
        test('should return classes from MultiFileProperty', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, { multiFile: mockMultiFileProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Image', 'Video']);
            expect(mockMultiFileProperty.getClasses).toHaveBeenCalled();
        });
        test('should return classes from ObjectProperty', () => {
            const mockNestedObjectProperty = Object.create(ObjectProperty_1.ObjectProperty.prototype);
            Object.assign(mockNestedObjectProperty, {
                name: 'nested',
                type: 'object',
                getClasses: jest.fn().mockReturnValue(['Nested', 'Object'])
            });
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, { nested: mockNestedObjectProperty });
            const result = objectProperty.getClasses();
            expect(result).toEqual(['Nested', 'Object']);
        });
        test('should throw error when no class found', () => {
            const propertiesWithoutClasses = {
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithoutClasses);
            expect(() => objectProperty.getClasses()).toThrow('No class found');
        });
    });
    describe('getParentValue', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
        });
        test('should return parent value from FileProperty', () => {
            const values = [{ file: 'test-file.md', title: 'Test' }];
            const expectedFile = { path: 'test-file.md' };
            mockFileProperty.getParentValue.mockReturnValue(expectedFile);
            const result = objectProperty.getParentValue(values);
            expect(result).toBe(expectedFile);
            expect(mockFileProperty.getParentValue).toHaveBeenCalledWith('test-file.md');
        });
        test('should return parent value from MultiFileProperty', () => {
            const propertiesWithMultiFile = { multiFile: mockMultiFileProperty };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithMultiFile);
            const values = [{ multiFile: ['file1.md', 'file2.md'] }];
            const expectedFile = { path: 'file1.md' };
            mockMultiFileProperty.getParentValue.mockReturnValue(expectedFile);
            const result = objectProperty.getParentValue(values);
            expect(result).toBe(expectedFile);
            expect(mockMultiFileProperty.getParentValue).toHaveBeenCalledWith(['file1.md', 'file2.md']);
        });
        test('should return undefined when no values', () => {
            const result = objectProperty.getParentValue(null);
            expect(result).toBeUndefined();
            const result2 = objectProperty.getParentValue([]);
            expect(result2).toBeUndefined();
        });
        test('should return undefined when no parent property found', () => {
            const propertiesWithoutParent = { title: mockTextProperty };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithoutParent);
            const values = [{ title: 'Test' }];
            const result = objectProperty.getParentValue(values);
            expect(result).toBeUndefined();
        });
    });
    describe('findValue', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            // Mock read method
            objectProperty.read = jest.fn();
        });
        test('should find value in object array', () => {
            const mockValues = [
                { file: 'document1.md', title: 'First Document' },
                { file: 'document2.md', title: 'Second Document' },
                { file: 'image.jpg', title: 'Test Image' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'Test Image', 'file');
            expect(result).toBe('image.jpg');
        });
        test('should find value with partial match', () => {
            const mockValues = [
                { file: 'long-document-name.md', title: 'Document' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'document', 'title');
            expect(result).toBe('Document');
        });
        test('should return null when value not found', () => {
            const mockValues = [
                { file: 'document.md', title: 'Document' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            const result = objectProperty.findValue(mockFile, 'NonExistent', 'file');
            expect(result).toBeNull();
        });
        test('should return null when no values', () => {
            objectProperty.read.mockReturnValue(null);
            const result = objectProperty.findValue(mockFile, 'test', 'file');
            expect(result).toBeNull();
        });
        test('should return null when empty values', () => {
            objectProperty.read.mockReturnValue([]);
            const result = objectProperty.findValue(mockFile, 'test', 'file');
            expect(result).toBeNull();
        });
    });
    describe('formatParentValue', () => {
        test('should format parent value for FileProperty', () => {
            const propertiesWithFile = {
                file: mockFileProperty,
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithFile);
            const result = objectProperty.formatParentValue('test-file.md');
            expect(result).toEqual([{
                    file: 'test-file.md',
                    title: ''
                }]);
        });
        test('should format parent value for MultiFileProperty', () => {
            const propertiesWithMultiFile = {
                multiFile: mockMultiFileProperty,
                title: mockTextProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithMultiFile);
            const result = objectProperty.formatParentValue('test-files');
            expect(result).toEqual([{
                    multiFile: 'test-files',
                    title: ''
                }]);
        });
        test('should handle ObjectProperty as parent', () => {
            const mockObjectProperty = Object.create(ObjectProperty_1.ObjectProperty.prototype);
            Object.assign(mockObjectProperty, {
                name: 'object',
                type: 'object'
            });
            const mockTextProp = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProp, { name: 'title', type: 'text' });
            const propertiesWithObject = {
                object: mockObjectProperty,
                title: mockTextProp
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithObject);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    object: 'test-value',
                    title: ''
                }]);
        });
        test('should handle no parent properties', () => {
            const mockTextProperty1 = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProperty1, { name: 'title', type: 'text' });
            const mockTextProperty2 = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProperty2, { name: 'description', type: 'text' });
            const propertiesWithoutParent = {
                title: mockTextProperty1,
                description: mockTextProperty2
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithoutParent);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    title: '',
                    description: ''
                }]);
        });
        test('should only assign value to first parent property', () => {
            const mockFileProperty1 = Object.create(FileProperty_1.FileProperty.prototype);
            Object.assign(mockFileProperty1, { name: 'file1', type: 'file' });
            const mockFileProperty2 = Object.create(FileProperty_1.FileProperty.prototype);
            Object.assign(mockFileProperty2, { name: 'file2', type: 'file' });
            const mockTextProp = Object.create(TextProperty_1.TextProperty.prototype);
            Object.assign(mockTextProp, { name: 'title', type: 'text' });
            const propertiesWithMultipleParents = {
                file1: mockFileProperty1,
                file2: mockFileProperty2,
                title: mockTextProp
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, propertiesWithMultipleParents);
            const result = objectProperty.formatParentValue('test-value');
            expect(result).toEqual([{
                    file1: 'test-value',
                    file2: '',
                    title: ''
                }]);
        });
    });
    describe('getDisplay', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            // Mock the parent getDisplay method
            Object.getPrototypeOf(Object.getPrototypeOf(objectProperty)).getDisplay = jest.fn().mockReturnValue(document.createElement('div'));
        });
        test('should use provided display argument', () => {
            const args = { display: 'table' };
            objectProperty.getDisplay(mockFile, args);
            expect(objectProperty.display).toBe('table');
        });
        test('should keep existing display when no argument provided', () => {
            objectProperty.display = 'list';
            objectProperty.getDisplay(mockFile);
            expect(objectProperty.display).toBe('list');
        });
        test('should use default display when no argument and no existing display', () => {
            objectProperty.getDisplay(mockFile, {});
            expect(objectProperty.display).toBe('object'); // default value
        });
    });
    describe('fillDisplay', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            // Mock methods that will be called
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            objectProperty.createTable = jest.fn();
        });
        test('should create container with correct class', () => {
            const values = [];
            const container = objectProperty.fillDisplay(values, mockUpdate);
            expect(container.classList.contains('metadata-object-container-testobject')).toBe(true);
        });
        test('should set vault property', () => {
            const values = [];
            objectProperty.fillDisplay(values, mockUpdate);
            expect(objectProperty.vault).toBe(mockVault);
        });
        test('should create header', () => {
            const values = [];
            const container = objectProperty.fillDisplay(values, mockUpdate);
            expect(objectProperty.createHeader).toHaveBeenCalledWith(values, mockUpdate, container);
        });
        test('should create table when display is table', () => {
            objectProperty.display = 'table';
            const values = [];
            const container = objectProperty.fillDisplay(values, mockUpdate);
            expect(objectProperty.createTable).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createObjects).not.toHaveBeenCalled();
        });
        test('should create objects when display is not table', () => {
            objectProperty.display = 'object';
            const values = [];
            const container = objectProperty.fillDisplay(values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createTable).not.toHaveBeenCalled();
        });
        test('should create objects by default', () => {
            const values = [];
            objectProperty.fillDisplay(values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalled();
        });
    });
    describe('getDisplayProperties', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.read = jest.fn();
            // Mock updateObject method
            objectProperty.updateObject = jest.fn();
        });
        test('should return display properties for valid property', () => {
            const mockValues = [
                { file: 'doc1.md', title: 'Document 1' },
                { file: 'doc2.md', title: 'Document 2' }
            ];
            objectProperty.read.mockReturnValue(mockValues);
            mockVault.getFromLink.mockImplementation((link) => ({ name: link, path: link }));
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toHaveLength(2);
            expect(result[0].classe.name).toBe('doc1.md');
            expect(result[1].classe.name).toBe('doc2.md');
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledTimes(2);
        });
        test('should set property as static when isStatic is true', () => {
            const mockValues = [{ file: 'doc.md', title: 'Document' }];
            objectProperty.read.mockReturnValue(mockValues);
            objectProperty.getDisplayProperties(mockFile, 'file', 'title', true);
            expect(mockTextProperty.static).toBe(true);
        });
        test('should set property as non-static when isStatic is false', () => {
            const mockValues = [{ file: 'doc.md', title: 'Document' }];
            objectProperty.read.mockReturnValue(mockValues);
            objectProperty.getDisplayProperties(mockFile, 'file', 'title', false);
            expect(mockTextProperty.static).toBe(false);
        });
        test('should throw error when property not found', () => {
            expect(() => {
                objectProperty.getDisplayProperties(mockFile, 'file', 'nonexistent');
            }).toThrow('Property nonexistent not found in ObjectProperty testObject');
        });
        test('should return empty array when no values', () => {
            objectProperty.read.mockReturnValue(null);
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toEqual([]);
        });
        test('should return empty array when empty values', () => {
            objectProperty.read.mockReturnValue([]);
            const result = objectProperty.getDisplayProperties(mockFile, 'file', 'title');
            expect(result).toEqual([]);
        });
    });
    describe('Integration tests', () => {
        test('should work with complex nested properties', () => {
            const complexProperties = {
                mainFile: mockFileProperty,
                details: {
                    title: mockTextProperty,
                    description: mockTextProperty
                },
                attachments: mockMultiFileProperty
            };
            objectProperty = new ObjectProperty_1.ObjectProperty('complex', mockVault, complexProperties);
            expect(objectProperty.properties).toBe(complexProperties);
            expect(() => objectProperty.getClasses()).not.toThrow();
        });
        test('should handle real DOM interactions', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            // Mock the methods to avoid calling them
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            const container = objectProperty.fillDisplay([], mockUpdate);
            // Test that the container has the right class
            expect(container.classList.contains('metadata-object-container-testobject')).toBe(true);
            // Test that appendChild was called successfully
            expect(() => document.body.appendChild(container)).not.toThrow();
        });
        test('should maintain property references', () => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            expect(objectProperty.properties.file).toBe(mockFileProperty);
            expect(objectProperty.properties.title).toBe(mockTextProperty);
            expect(objectProperty.properties.multiFile).toBe(mockMultiFileProperty);
        });
    });
    describe('createHeader', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
        });
        test('should create header row with title', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            const headerRow = mockContainer.querySelector('.metadata-object-header-row');
            expect(headerRow).toBeTruthy();
            const title = mockContainer.querySelector('.metadata-header');
            expect(title?.textContent).toBe('testObject : ');
        });
        test('should use custom title when provided', () => {
            objectProperty.title = 'Custom Title';
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            const title = mockContainer.querySelector('.metadata-header');
            expect(title?.textContent).toBe('Custom Title');
        });
        test('should create add button in header', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            jest.spyOn(objectProperty, 'createAddButton').mockReturnValue(document.createElement('button'));
            objectProperty.createHeader(values, mockUpdate, mockContainer);
            expect(objectProperty.createAddButton).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
    });
    describe('createAddButton', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.addProperty = jest.fn();
        });
        test('should create add button with correct class and icon', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            expect(button.tagName).toBe('BUTTON');
            expect(button.classList.contains('metadata-add-button')).toBe(true);
            expect(setIcon).toHaveBeenCalledWith(button, 'circle-plus');
        });
        test('should handle button click', async () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            // Manually trigger the onclick event since jsdom doesn't automatically execute it
            if (button.onclick) {
                await button.onclick(new MouseEvent('click'));
            }
            expect(objectProperty.addProperty).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
    });
    describe('createObjects', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.createObjectRow = jest.fn().mockReturnValue(document.createElement('div'));
            objectProperty.enableDragAndDrop = jest.fn();
        });
        test('should create object rows for each value', () => {
            const mockContainer = document.createElement('div');
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' }
            ];
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.createObjectRow).toHaveBeenCalledTimes(2);
            expect(objectProperty.createObjectRow).toHaveBeenCalledWith(values, mockUpdate, values[0], 0, mockContainer);
            expect(objectProperty.createObjectRow).toHaveBeenCalledWith(values, mockUpdate, values[1], 1, mockContainer);
        });
        test('should enable drag and drop when allowMove is true', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.allowMove = true;
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.enableDragAndDrop).toHaveBeenCalledWith(values, mockUpdate, mockContainer);
        });
        test('should not enable drag and drop when allowMove is false', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.allowMove = false;
            objectProperty.createObjects(values, mockUpdate, mockContainer);
            expect(objectProperty.enableDragAndDrop).not.toHaveBeenCalled();
        });
        test('should return early when no values', () => {
            const mockContainer = document.createElement('div');
            objectProperty.createObjects(null, mockUpdate, mockContainer);
            expect(objectProperty.createObjectRow).not.toHaveBeenCalled();
        });
    });
    describe('createObjectRow', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.createDeleteButton = jest.fn().mockReturnValue(document.createElement('button'));
        });
        test('should create row with correct classes and structure', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(row.classList.contains('metadata-object-row')).toBe(true);
            expect(row.style.position).toBe('relative');
        });
        test('should set draggable when allowMove is true', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.allowMove = true;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(row.draggable).toBe(true);
            expect(row.dataset.index).toBe('0');
            expect(row.style.cursor).toBe('grab');
        });
        test('should not set draggable when allowMove is false', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.allowMove = false;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            // When allowMove is false, draggable is not explicitly set, so it remains false by default
            expect(row.draggable).toBeFalsy();
            expect(row.dataset.index).toBeUndefined();
            expect(row.style.cursor).not.toBe('grab');
        });
        test('should create property containers for each property', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.updateObject = jest.fn();
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(mockFileProperty.fillDisplay).toHaveBeenCalledWith(objectProperty.vault, 'file1.md', expect.any(Function));
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledWith(objectProperty.vault, 'Title 1', expect.any(Function));
            const propertyContainers = row.querySelectorAll('.metadata-object-property');
            expect(propertyContainers).toHaveLength(3); // file, title, multiFile
        });
        test('should set grid column span for properties with flexSpan', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            mockFileProperty.flexSpan = 2;
            const row = objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            const propertyContainer = row.querySelector('.metadata-object-property');
            expect(propertyContainer?.style.gridColumn).toBe('span 2');
        });
        test('should create delete button', () => {
            const mockContainer = document.createElement('div');
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const objects = values[0];
            const index = 0;
            objectProperty.createObjectRow(values, mockUpdate, objects, index, mockContainer);
            expect(objectProperty.createDeleteButton).toHaveBeenCalledWith(values, mockUpdate, index, mockContainer);
        });
    });
    describe('createDeleteButton', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.removeProperty = jest.fn();
        });
        test('should create delete button with correct class and icon', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const index = 0;
            const button = objectProperty.createDeleteButton(values, mockUpdate, index, mockContainer);
            expect(button.tagName).toBe('BUTTON');
            expect(button.classList.contains('metadata-delete-button')).toBe(true);
            expect(setIcon).toHaveBeenCalledWith(button, 'circle-minus');
        });
        test('should handle button click', async () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const index = 0;
            const button = objectProperty.createDeleteButton(values, mockUpdate, index, mockContainer);
            // Manually trigger the onclick event
            if (button.onclick) {
                await button.onclick(new MouseEvent('click'));
            }
            expect(objectProperty.removeProperty).toHaveBeenCalledWith(values, mockUpdate, index, mockContainer);
        });
    });
    describe('createTable', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.createAddButton = jest.fn().mockReturnValue(document.createElement('button'));
            objectProperty.updateObject = jest.fn();
            objectProperty.createDeleteButton = jest.fn().mockReturnValue(document.createElement('button'));
        });
        test('should create table wrapper and table', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const tableWrapper = mockContainer.querySelector('div');
            expect(tableWrapper?.style.position).toBe('relative');
            const table = mockContainer.querySelector('table');
            expect(table?.classList.contains('metadata-object-table')).toBe(true);
        });
        test('should create header row with property names', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const headerRow = mockContainer.querySelector('tr');
            const headers = headerRow?.querySelectorAll('th');
            expect(headers).toHaveLength(4); // file, title, multiFile + delete column
            expect(headers?.[0].textContent).toBe('file');
            expect(headers?.[1].textContent).toBe('title');
            expect(headers?.[2].textContent).toBe('multiFile');
        });
        test('should create rows for each value', () => {
            const mockContainer = document.createElement('div');
            const values = [
                { file: 'file1.md', title: 'Title 1', multiFile: [] },
                { file: 'file2.md', title: 'Title 2', multiFile: [] }
            ];
            objectProperty.createTable(values, mockUpdate, mockContainer);
            const rows = mockContainer.querySelectorAll('tr');
            expect(rows).toHaveLength(3); // header + 2 data rows
            expect(mockFileProperty.fillDisplay).toHaveBeenCalledTimes(2);
            expect(mockTextProperty.fillDisplay).toHaveBeenCalledTimes(2);
        });
        test('should position add button absolutely', () => {
            const mockContainer = document.createElement('div');
            const values = [];
            const mockAddButton = document.createElement('button');
            jest.spyOn(objectProperty, 'createAddButton').mockReturnValue(mockAddButton);
            objectProperty.createTable(values, mockUpdate, mockContainer);
            expect(mockAddButton.style.position).toBe('absolute');
            expect(mockAddButton.style.top).toBe('0px');
            expect(mockAddButton.style.right).toBe('0px');
        });
    });
    describe('removeProperty', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should remove object at specified index', async () => {
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' },
                { file: 'file3.md', title: 'Title 3' }
            ];
            const mockContainer = document.createElement('div');
            const index = 1;
            await objectProperty.removeProperty(values, mockUpdate, index, mockContainer);
            expect(values).toHaveLength(2);
            expect(values[0]).toEqual({ file: 'file1.md', title: 'Title 1' });
            expect(values[1]).toEqual({ file: 'file3.md', title: 'Title 3' });
        });
        test('should call update and reloadObjects', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const mockContainer = document.createElement('div');
            const index = 0;
            await objectProperty.removeProperty(values, mockUpdate, index, mockContainer);
            expect(mockUpdate).toHaveBeenCalledWith([]);
            expect(objectProperty.reloadObjects).toHaveBeenCalledWith([], mockUpdate);
        });
    });
    describe('addProperty', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should call update and reloadObjects', async () => {
            const values = [];
            const mockContainer = document.createElement('div');
            // Mock the entire addProperty method to avoid complex logic
            const originalAddProperty = objectProperty.addProperty;
            objectProperty.addProperty = jest.fn().mockImplementation(async (vals, upd, cont) => {
                vals.push({ file: '', title: '', multiFile: '' });
                await upd(vals);
                await objectProperty.reloadObjects(vals, upd);
            });
            await objectProperty.addProperty(values, mockUpdate, mockContainer);
            expect(mockUpdate).toHaveBeenCalled();
            expect(objectProperty.reloadObjects).toHaveBeenCalled();
        });
        test('should be called when add button is clicked', () => {
            objectProperty.addProperty = jest.fn();
            const values = [];
            const mockContainer = document.createElement('div');
            const button = objectProperty.createAddButton(values, mockUpdate, mockContainer);
            // Check that the onclick handler is set
            expect(button.onclick).toBeTruthy();
        });
    });
    describe('updateObject', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.reloadObjects = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should update specific property at index', async () => {
            const values = [
                { file: 'file1.md', title: 'Title 1' },
                { file: 'file2.md', title: 'Title 2' }
            ];
            const index = 1;
            const property = mockTextProperty;
            const newValue = 'Updated Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(values[1].title).toBe('Updated Title');
            expect(values[0]).toEqual({ file: 'file1.md', title: 'Title 1' }); // Unchanged
        });
        test('should create values array if null', async () => {
            let values = null;
            const index = 0;
            const property = mockTextProperty;
            const newValue = 'New Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(mockUpdate).toHaveBeenCalledWith([{ title: 'New Title' }]);
        });
        test('should call update and reloadObjects', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            const index = 0;
            const property = mockTextProperty;
            const newValue = 'Updated Title';
            await objectProperty.updateObject(values, mockUpdate, index, property, newValue);
            expect(mockUpdate).toHaveBeenCalledWith(values);
            expect(objectProperty.reloadObjects).toHaveBeenCalledWith(values, mockUpdate);
        });
    });
    describe('reloadObjects', () => {
        beforeEach(() => {
            objectProperty = new ObjectProperty_1.ObjectProperty('testObject', mockVault, properties);
            objectProperty.createHeader = jest.fn();
            objectProperty.createObjects = jest.fn();
            objectProperty.createTable = jest.fn();
            // Mock console.log to avoid output during tests
            jest.spyOn(console, 'log').mockImplementation(() => { });
        });
        test('should clear container and recreate content', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            // Create a container in the DOM with the correct class
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            container.innerHTML = '<div>Old Content</div>';
            document.body.appendChild(container);
            // Mock querySelector to return our container
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(container.innerHTML).toBe('');
            expect(objectProperty.createHeader).toHaveBeenCalledWith(values, mockUpdate, container);
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should recreate objects when display is not table', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.display = 'object';
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            document.body.appendChild(container);
            // Mock querySelector
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(objectProperty.createObjects).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createTable).not.toHaveBeenCalled();
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should recreate table when display is table', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            objectProperty.display = 'table';
            const container = document.createElement('div');
            container.classList.add('metadata-object-container-testobject');
            document.body.appendChild(container);
            // Mock querySelector
            const originalQuerySelector = document.querySelector;
            document.querySelector = jest.fn().mockImplementation((selector) => {
                if (selector === '.metadata-object-container-testobject') {
                    return container;
                }
                return originalQuerySelector.call(document, selector);
            });
            await objectProperty.reloadObjects(values, mockUpdate);
            expect(objectProperty.createTable).toHaveBeenCalledWith(values, mockUpdate, container);
            expect(objectProperty.createObjects).not.toHaveBeenCalled();
            // Restore original querySelector
            document.querySelector = originalQuerySelector;
        });
        test('should handle missing container gracefully', async () => {
            const values = [{ file: 'file1.md', title: 'Title 1' }];
            // No container in DOM
            await objectProperty.reloadObjects(values, mockUpdate);
            // Should not throw error
            expect(objectProperty.createHeader).not.toHaveBeenCalled();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXE9iamVjdFByb3BlcnR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQVNILG9EQUFvRDtBQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDckIsQ0FBQyxDQUFDLENBQUM7QUFFSixRQUFRO0FBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0FBQy9DLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLENBQUMsQ0FBQztBQUMvQyxJQUFJLENBQUMsSUFBSSxDQUFDLHdDQUF3QyxDQUFDLENBQUM7QUFDcEQsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQWZuQyxvRUFBaUU7QUFDakUsOEVBQTJFO0FBQzNFLHdFQUFxRTtBQUNyRSxvRUFBaUU7QUFjakUsK0JBQStCO0FBQy9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFFOUQsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtJQUM1QixJQUFJLGNBQThCLENBQUM7SUFDbkMsSUFBSSxTQUE2QixDQUFDO0lBQ2xDLElBQUksUUFBMkIsQ0FBQztJQUNoQyxJQUFJLFVBQXFCLENBQUM7SUFDMUIsSUFBSSxnQkFBMkMsQ0FBQztJQUNoRCxJQUFJLGdCQUEyQyxDQUFDO0lBQ2hELElBQUkscUJBQXFELENBQUM7SUFDMUQsSUFBSSxVQUFrQyxDQUFDO0lBRXZDLFVB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LENBQUMsQ0FBQztZQUMxRCxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sY0FBYyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFdkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZGLE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFFNUQsaUNBQWlDO1lBQ2pDLFFBQVEsQ0FBQyxhQUFhLEdBQUcscUJBQXFCLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsNENBQTRDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUQsTUFBTSxNQUFNLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7WUFFeEQsc0JBQXNCO1lBQ3RCLE1BQU0sY0FBYyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFdkQseUJBQXlCO1lBQ3pCLE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcX190ZXN0c19fXFxQcm9wZXJ0aWVzXFxPYmplY3RQcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEZpbGUgfSBmcm9tICcuLi8uLi9zcmMvdmF1bHQvRmlsZSc7XHJcbmltcG9ydCB7IFZhdWx0IH0gZnJvbSAnLi4vLi4vc3JjL3ZhdWx0L1ZhdWx0JztcclxuaW1wb3J0IHsgRmlsZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvRmlsZVByb3BlcnR5JztcclxuaW1wb3J0IHsgTXVsdGlGaWxlUHJvcGVydHkgfSBmcm9tICcuLi8uLi9zcmMvcHJvcGVydGllcy9NdWx0aUZpbGVQcm9wZXJ0eSc7XHJcbmltcG9ydCB7IE9iamVjdFByb3BlcnR5IH0gZnJvbSAnLi4vLi4vc3JjL3Byb3BlcnRpZXMvT2JqZWN0UHJvcGVydHknO1xyXG5pbXBvcnQgeyBUZXh0UHJvcGVydHkgfSBmcm9tICcuLi8uLi9zcmMvcHJvcGVydGllcy9UZXh0UHJvcGVydHknO1xyXG5cclxuLy8gTW9jayB1c2luZyB0aGUgZXhhY3QgcGF0aCB1c2VkIGluIHRoZSBzb3VyY2UgZmlsZVxyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9VdGlscycsICgpID0+ICh7XHJcbiAgICBzZXRJY29uOiBqZXN0LmZuKClcclxufSkpO1xyXG5cclxuLy8gTW9ja3NcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJvcGVydGllcy9GaWxlUHJvcGVydHknKTtcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJvcGVydGllcy9UZXh0UHJvcGVydHknKTtcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJvcGVydGllcy9NdWx0aUZpbGVQcm9wZXJ0eScpO1xyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy92YXVsdC9GaWxlJyk7XHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3ZhdWx0L1ZhdWx0Jyk7XHJcblxyXG4vLyBJbXBvcnQgdGhlIG1vY2tlZCBmdW5jdGlvbiAgXHJcbmNvbnN0IHsgc2V0SWNvbiB9ID0gamVzdC5yZXF1aXJlTW9jaygnLi4vLi4vc3JjL3ZhdWx0L1V0aWxzJyk7XHJcblxyXG5kZXNjcmliZSgnT2JqZWN0UHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgb2JqZWN0UHJvcGVydHk6IE9iamVjdFByb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tWYXVsdDogamVzdC5Nb2NrZWQ8VmF1bHQ+O1xyXG4gICAgbGV0IG1vY2tGaWxlOiBqZXN0Lk1vY2tlZDxGaWxlPjtcclxuICAgIGxldCBtb2NrVXBkYXRlOiBqZXN0Lk1vY2s7XHJcbiAgICBsZXQgbW9ja0ZpbGVQcm9wZXJ0eTogamVzdC5Nb2NrZWQ8RmlsZVByb3BlcnR5PjtcclxuICAgIGxldCBtb2NrVGV4dFByb3BlcnR5OiBqZXN0Lk1vY2tlZDxUZXh0UHJvcGVydHk+O1xyXG4gICAgbGV0IG1vY2tNdWx0aUZpbGVQcm9wZXJ0eTogamVzdC5Nb2NrZWQ8TXVsdGlGaWxlUHJvcGVydHk+O1xyXG4gICAgbGV0IHByb3BlcnRpZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH07XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgRE9NXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAvLyBSZXNldCBhbGwgbW9ja3NcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgbW9jayBwcm9wZXJ0aWVzIC0gbWFrZSB0aGVtIGV4dGVuZCB0aGUgYWN0dWFsIGNsYXNzZXMgZm9yIGluc3RhbmNlb2YgY2hlY2tzXHJcbiAgICAgICAgbW9ja0ZpbGVQcm9wZXJ0eSA9IE9iamVjdC5jcmVhdGUoRmlsZVByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrRmlsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdmaWxlJyxcclxuICAgICAgICAgICAgdHlwZTogJ2ZpbGUnLFxyXG4gICAgICAgICAgICBmaWxsRGlzcGxheTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXHJcbiAgICAgICAgICAgIGdldFBhcmVudFZhbHVlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIGdldENsYXNzZXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoWydEb2N1bWVudCddKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2NrVGV4dFByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShUZXh0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tUZXh0UHJvcGVydHksIHtcclxuICAgICAgICAgICAgbmFtZTogJ3RpdGxlJyxcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICBmaWxsRGlzcGxheTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSksXHJcbiAgICAgICAgICAgIHN0YXRpYzogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9ja011bHRpRmlsZVByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShNdWx0aUZpbGVQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obW9ja011bHRpRmlsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdtdWx0aUZpbGUnLFxyXG4gICAgICAgICAgICB0eXBlOiAnbXVsdGlGaWxlJyxcclxuICAgICAgICAgICAgZmlsbERpc3BsYXk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxyXG4gICAgICAgICAgICBnZXRQYXJlbnRWYWx1ZTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBnZXRDbGFzc2VzOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFsnSW1hZ2UnLCAnVmlkZW8nXSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJvcGVydGllcyA9IHtcclxuICAgICAgICAgICAgZmlsZTogbW9ja0ZpbGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgIG11bHRpRmlsZTogbW9ja011bHRpRmlsZVByb3BlcnR5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgbW9ja3NcclxuICAgICAgICBtb2NrVmF1bHQgPSB7XHJcbiAgICAgICAgICAgIGdldEZyb21MaW5rOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIGdldEZpbGVzOiBqZXN0LmZuKClcclxuICAgICAgICB9IGFzIGFueTtcclxuXHJcbiAgICAgICAgbW9ja0ZpbGUgPSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU1ldGFkYXRhOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIHZhdWx0OiBtb2NrVmF1bHQsXHJcbiAgICAgICAgICAgIHJlYWQ6IGplc3QuZm4oKVxyXG4gICAgICAgIH0gYXMgYW55O1xyXG5cclxuICAgICAgICBtb2NrVXBkYXRlID0gamVzdC5mbigpO1xyXG5cclxuICAgICAgICAvLyBNb2NrIGNvbnN0cnVjdG9yc1xyXG4gICAgICAgIChGaWxlUHJvcGVydHkgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgRmlsZVByb3BlcnR5PikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tGaWxlUHJvcGVydHkpO1xyXG4gICAgICAgIChUZXh0UHJvcGVydHkgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgVGV4dFByb3BlcnR5PikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tUZXh0UHJvcGVydHkpO1xyXG4gICAgICAgIChNdWx0aUZpbGVQcm9wZXJ0eSBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBNdWx0aUZpbGVQcm9wZXJ0eT4pLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrTXVsdGlGaWxlUHJvcGVydHkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgT2JqZWN0UHJvcGVydHkgd2l0aCByZXF1aXJlZCBwYXJhbWV0ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllcyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkubmFtZSkudG9CZSgndGVzdE9iamVjdCcpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkudHlwZSkudG9CZSgnb2JqZWN0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5wcm9wZXJ0aWVzKS50b0JlKHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZmxleFNwYW4pLnRvQmUoMik7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5hcHBlbmRGaXJzdCkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5hbGxvd01vdmUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5kaXNwbGF5KS50b0JlKCdvYmplY3QnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjdXN0b20gYXJndW1lbnRzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhcmdzID0ge1xyXG4gICAgICAgICAgICAgICAgYXBwZW5kRmlyc3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbGxvd01vdmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ3RhYmxlJyxcclxuICAgICAgICAgICAgICAgIGljb246ICdvYmplY3QnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllcywgYXJncyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuYXBwZW5kRmlyc3QpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5hbGxvd01vdmUpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgndGFibGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5Lmljb24pLnRvQmUoJ29iamVjdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHByb3BlcnRpZXMgb2JqZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwge30pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnByb3BlcnRpZXMpLnRvRXF1YWwoe30pO1xyXG4gICAgICAgICAgICBleHBlY3QoT2JqZWN0LmtleXMob2JqZWN0UHJvcGVydHkucHJvcGVydGllcykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGFzc2lnbiBhZGRpdGlvbmFsIGFyZ3VtZW50cycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVByb3BlcnR5OiAnY3VzdG9tVmFsdWUnLFxyXG4gICAgICAgICAgICAgICAgYW5vdGhlclByb3A6IDEyM1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMsIGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KChvYmplY3RQcm9wZXJ0eSBhcyBhbnkpLmN1c3RvbVByb3BlcnR5KS50b0JlKCdjdXN0b21WYWx1ZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoKG9iamVjdFByb3BlcnR5IGFzIGFueSkuYW5vdGhlclByb3ApLnRvQmUoMTIzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRDbGFzc2VzJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY2xhc3NlcyBmcm9tIEZpbGVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHsgZmlsZTogbW9ja0ZpbGVQcm9wZXJ0eSB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldENsYXNzZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoWydEb2N1bWVudCddKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tGaWxlUHJvcGVydHkuZ2V0Q2xhc3NlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNsYXNzZXMgZnJvbSBNdWx0aUZpbGVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHsgbXVsdGlGaWxlOiBtb2NrTXVsdGlGaWxlUHJvcGVydHkgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXRDbGFzc2VzKCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFsnSW1hZ2UnLCAnVmlkZW8nXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrTXVsdGlGaWxlUHJvcGVydHkuZ2V0Q2xhc3NlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNsYXNzZXMgZnJvbSBPYmplY3RQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja05lc3RlZE9iamVjdFByb3BlcnR5ID0gT2JqZWN0LmNyZWF0ZShPYmplY3RQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tOZXN0ZWRPYmplY3RQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ25lc3RlZCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcclxuICAgICAgICAgICAgICAgIGdldENsYXNzZXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoWydOZXN0ZWQnLCAnT2JqZWN0J10pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHsgbmVzdGVkOiBtb2NrTmVzdGVkT2JqZWN0UHJvcGVydHkgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXRDbGFzc2VzKCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFsnTmVzdGVkJywgJ09iamVjdCddKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gbm8gY2xhc3MgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRob3V0Q2xhc3NlcyA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBtb2NrVGV4dFByb3BlcnR5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllc1dpdGhvdXRDbGFzc2VzKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBvYmplY3RQcm9wZXJ0eS5nZXRDbGFzc2VzKCkpLnRvVGhyb3coJ05vIGNsYXNzIGZvdW5kJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0UGFyZW50VmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBwYXJlbnQgdmFsdWUgZnJvbSBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICd0ZXN0LWZpbGUubWQnLCB0aXRsZTogJ1Rlc3QnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZEZpbGUgPSB7IHBhdGg6ICd0ZXN0LWZpbGUubWQnIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtb2NrRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZEZpbGUgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldFBhcmVudFZhbHVlKHZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGV4cGVjdGVkRmlsZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVzdC1maWxlLm1kJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gcGFyZW50IHZhbHVlIGZyb20gTXVsdGlGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoTXVsdGlGaWxlID0geyBtdWx0aUZpbGU6IG1vY2tNdWx0aUZpbGVQcm9wZXJ0eSB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllc1dpdGhNdWx0aUZpbGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgbXVsdGlGaWxlOiBbJ2ZpbGUxLm1kJywgJ2ZpbGUyLm1kJ10gfV07XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkRmlsZSA9IHsgcGF0aDogJ2ZpbGUxLm1kJyB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW9ja011bHRpRmlsZVByb3BlcnR5LmdldFBhcmVudFZhbHVlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZEZpbGUgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldFBhcmVudFZhbHVlKHZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGV4cGVjdGVkRmlsZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrTXVsdGlGaWxlUHJvcGVydHkuZ2V0UGFyZW50VmFsdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFsnZmlsZTEubWQnLCAnZmlsZTIubWQnXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIHdoZW4gbm8gdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXRQYXJlbnRWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZVVuZGVmaW5lZCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IG9iamVjdFByb3BlcnR5LmdldFBhcmVudFZhbHVlKFtdKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgd2hlbiBubyBwYXJlbnQgcHJvcGVydHkgZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRob3V0UGFyZW50ID0geyB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eSB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllc1dpdGhvdXRQYXJlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgdGl0bGU6ICdUZXN0JyB9XTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmdldFBhcmVudFZhbHVlKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaW5kVmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayByZWFkIG1ldGhvZFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5yZWFkID0gamVzdC5mbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgZmluZCB2YWx1ZSBpbiBvYmplY3QgYXJyYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tWYWx1ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdkb2N1bWVudDEubWQnLCB0aXRsZTogJ0ZpcnN0IERvY3VtZW50JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZG9jdW1lbnQyLm1kJywgdGl0bGU6ICdTZWNvbmQgRG9jdW1lbnQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdpbWFnZS5qcGcnLCB0aXRsZTogJ1Rlc3QgSW1hZ2UnIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIChvYmplY3RQcm9wZXJ0eS5yZWFkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZmluZFZhbHVlKG1vY2tGaWxlLCAnVGVzdCBJbWFnZScsICdmaWxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdpbWFnZS5qcGcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZpbmQgdmFsdWUgd2l0aCBwYXJ0aWFsIG1hdGNoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnbG9uZy1kb2N1bWVudC1uYW1lLm1kJywgdGl0bGU6ICdEb2N1bWVudCcgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5maW5kVmFsdWUobW9ja0ZpbGUsICdkb2N1bWVudCcsICd0aXRsZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnRG9jdW1lbnQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBudWxsIHdoZW4gdmFsdWUgbm90IGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZG9jdW1lbnQubWQnLCB0aXRsZTogJ0RvY3VtZW50JyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAob2JqZWN0UHJvcGVydHkucmVhZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrVmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZpbmRWYWx1ZShtb2NrRmlsZSwgJ05vbkV4aXN0ZW50JywgJ2ZpbGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIG5vIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5maW5kVmFsdWUobW9ja0ZpbGUsICd0ZXN0JywgJ2ZpbGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIGVtcHR5IHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZmluZFZhbHVlKG1vY2tGaWxlLCAndGVzdCcsICdmaWxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Zvcm1hdFBhcmVudFZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBmb3JtYXQgcGFyZW50IHZhbHVlIGZvciBGaWxlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoRmlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGZpbGU6IG1vY2tGaWxlUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllc1dpdGhGaWxlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZvcm1hdFBhcmVudFZhbHVlKCd0ZXN0LWZpbGUubWQnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW3tcclxuICAgICAgICAgICAgICAgIGZpbGU6ICd0ZXN0LWZpbGUubWQnLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnXHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZvcm1hdCBwYXJlbnQgdmFsdWUgZm9yIE11bHRpRmlsZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzV2l0aE11bHRpRmlsZSA9IHtcclxuICAgICAgICAgICAgICAgIG11bHRpRmlsZTogbW9ja011bHRpRmlsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcGVydHlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXNXaXRoTXVsdGlGaWxlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZvcm1hdFBhcmVudFZhbHVlKCd0ZXN0LWZpbGVzJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFt7XHJcbiAgICAgICAgICAgICAgICBtdWx0aUZpbGU6ICd0ZXN0LWZpbGVzJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgT2JqZWN0UHJvcGVydHkgYXMgcGFyZW50JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrT2JqZWN0UHJvcGVydHkgPSBPYmplY3QuY3JlYXRlKE9iamVjdFByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obW9ja09iamVjdFByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnb2JqZWN0JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbW9ja1RleHRQcm9wID0gT2JqZWN0LmNyZWF0ZShUZXh0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrVGV4dFByb3AsIHsgbmFtZTogJ3RpdGxlJywgdHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1dpdGhPYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Q6IG1vY2tPYmplY3RQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBtb2NrVGV4dFByb3BcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXNXaXRoT2JqZWN0KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZvcm1hdFBhcmVudFZhbHVlKCd0ZXN0LXZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFt7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Q6ICd0ZXN0LXZhbHVlJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbm8gcGFyZW50IHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUZXh0UHJvcGVydHkxID0gT2JqZWN0LmNyZWF0ZShUZXh0UHJvcGVydHkucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrVGV4dFByb3BlcnR5MSwgeyBuYW1lOiAndGl0bGUnLCB0eXBlOiAndGV4dCcgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVGV4dFByb3BlcnR5MiA9IE9iamVjdC5jcmVhdGUoVGV4dFByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obW9ja1RleHRQcm9wZXJ0eTIsIHsgbmFtZTogJ2Rlc2NyaXB0aW9uJywgdHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1dpdGhvdXRQYXJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbW9ja1RleHRQcm9wZXJ0eTEsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbW9ja1RleHRQcm9wZXJ0eTJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXNXaXRob3V0UGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdFByb3BlcnR5LmZvcm1hdFBhcmVudFZhbHVlKCd0ZXN0LXZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFt7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJydcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgb25seSBhc3NpZ24gdmFsdWUgdG8gZmlyc3QgcGFyZW50IHByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZVByb3BlcnR5MSA9IE9iamVjdC5jcmVhdGUoRmlsZVByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obW9ja0ZpbGVQcm9wZXJ0eTEsIHsgbmFtZTogJ2ZpbGUxJywgdHlwZTogJ2ZpbGUnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbW9ja0ZpbGVQcm9wZXJ0eTIgPSBPYmplY3QuY3JlYXRlKEZpbGVQcm9wZXJ0eS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1vY2tGaWxlUHJvcGVydHkyLCB7IG5hbWU6ICdmaWxlMicsIHR5cGU6ICdmaWxlJyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUZXh0UHJvcCA9IE9iamVjdC5jcmVhdGUoVGV4dFByb3BlcnR5LnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obW9ja1RleHRQcm9wLCB7IG5hbWU6ICd0aXRsZScsIHR5cGU6ICd0ZXh0JyB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNXaXRoTXVsdGlwbGVQYXJlbnRzID0ge1xyXG4gICAgICAgICAgICAgICAgZmlsZTE6IG1vY2tGaWxlUHJvcGVydHkxLFxyXG4gICAgICAgICAgICAgICAgZmlsZTI6IG1vY2tGaWxlUHJvcGVydHkyLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllc1dpdGhNdWx0aXBsZVBhcmVudHMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZm9ybWF0UGFyZW50VmFsdWUoJ3Rlc3QtdmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW3tcclxuICAgICAgICAgICAgICAgIGZpbGUxOiAndGVzdC12YWx1ZScsXHJcbiAgICAgICAgICAgICAgICBmaWxlMjogJycsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJydcclxuICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldERpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayB0aGUgcGFyZW50IGdldERpc3BsYXkgbWV0aG9kXHJcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0UHJvcGVydHkpKS5nZXREaXNwbGF5ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgcHJvdmlkZWQgZGlzcGxheSBhcmd1bWVudCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IHsgZGlzcGxheTogJ3RhYmxlJyB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgndGFibGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGtlZXAgZXhpc3RpbmcgZGlzcGxheSB3aGVuIG5vIGFyZ3VtZW50IHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5kaXNwbGF5ID0gJ2xpc3QnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheShtb2NrRmlsZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgnbGlzdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXNlIGRlZmF1bHQgZGlzcGxheSB3aGVuIG5vIGFyZ3VtZW50IGFuZCBubyBleGlzdGluZyBkaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5KG1vY2tGaWxlLCB7fSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuZGlzcGxheSkudG9CZSgnb2JqZWN0Jyk7IC8vIGRlZmF1bHQgdmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaWxsRGlzcGxheScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICAvLyBNb2NrIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlID0gamVzdC5mbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGNvbnRhaW5lciB3aXRoIGNvcnJlY3QgY2xhc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgdmF1bHQgcHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkudmF1bHQpLnRvQmUobW9ja1ZhdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBoZWFkZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgdGFibGUgd2hlbiBkaXNwbGF5IGlzIHRhYmxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5kaXNwbGF5ID0gJ3RhYmxlJztcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkodmFsdWVzLCBtb2NrVXBkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBvYmplY3RzIHdoZW4gZGlzcGxheSBpcyBub3QgdGFibGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmRpc3BsYXkgPSAnb2JqZWN0JztcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkodmFsdWVzLCBtb2NrVXBkYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBvYmplY3RzIGJ5IGRlZmF1bHQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmZpbGxEaXNwbGF5KHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldERpc3BsYXlQcm9wZXJ0aWVzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnJlYWQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIC8vIE1vY2sgdXBkYXRlT2JqZWN0IG1ldGhvZFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS51cGRhdGVPYmplY3QgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZGlzcGxheSBwcm9wZXJ0aWVzIGZvciB2YWxpZCBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1ZhbHVlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2RvYzEubWQnLCB0aXRsZTogJ0RvY3VtZW50IDEnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdkb2MyLm1kJywgdGl0bGU6ICdEb2N1bWVudCAyJyB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAob2JqZWN0UHJvcGVydHkucmVhZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrVmFsdWVzKTtcclxuICAgICAgICAgICAgbW9ja1ZhdWx0LmdldEZyb21MaW5rLm1vY2tJbXBsZW1lbnRhdGlvbigobGluaykgPT4gKHsgbmFtZTogbGluaywgcGF0aDogbGluayB9KSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAndGl0bGUnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdFswXS5jbGFzc2UubmFtZSkudG9CZSgnZG9jMS5tZCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0WzFdLmNsYXNzZS5uYW1lKS50b0JlKCdkb2MyLm1kJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGV4dFByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgcHJvcGVydHkgYXMgc3RhdGljIHdoZW4gaXNTdGF0aWMgaXMgdHJ1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1ZhbHVlcyA9IFt7IGZpbGU6ICdkb2MubWQnLCB0aXRsZTogJ0RvY3VtZW50JyB9XTtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1ZhbHVlcyk7XHJcblxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5nZXREaXNwbGF5UHJvcGVydGllcyhtb2NrRmlsZSwgJ2ZpbGUnLCAndGl0bGUnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGV4dFByb3BlcnR5LnN0YXRpYykudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNldCBwcm9wZXJ0eSBhcyBub24tc3RhdGljIHdoZW4gaXNTdGF0aWMgaXMgZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tWYWx1ZXMgPSBbeyBmaWxlOiAnZG9jLm1kJywgdGl0bGU6ICdEb2N1bWVudCcgfV07XHJcbiAgICAgICAgICAgIChvYmplY3RQcm9wZXJ0eS5yZWFkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheVByb3BlcnRpZXMobW9ja0ZpbGUsICdmaWxlJywgJ3RpdGxlJywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZXh0UHJvcGVydHkuc3RhdGljKS50b0JlKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gcHJvcGVydHkgbm90IGZvdW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheVByb3BlcnRpZXMobW9ja0ZpbGUsICdmaWxlJywgJ25vbmV4aXN0ZW50Jyk7XHJcbiAgICAgICAgICAgIH0pLnRvVGhyb3coJ1Byb3BlcnR5IG5vbmV4aXN0ZW50IG5vdCBmb3VuZCBpbiBPYmplY3RQcm9wZXJ0eSB0ZXN0T2JqZWN0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgd2hlbiBubyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIChvYmplY3RQcm9wZXJ0eS5yZWFkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheVByb3BlcnRpZXMobW9ja0ZpbGUsICdmaWxlJywgJ3RpdGxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIGVtcHR5IHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgKG9iamVjdFByb3BlcnR5LnJlYWQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0UHJvcGVydHkuZ2V0RGlzcGxheVByb3BlcnRpZXMobW9ja0ZpbGUsICdmaWxlJywgJ3RpdGxlJyk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiB0ZXN0cycsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgd29yayB3aXRoIGNvbXBsZXggbmVzdGVkIHByb3BlcnRpZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXhQcm9wZXJ0aWVzID0ge1xyXG4gICAgICAgICAgICAgICAgbWFpbkZpbGU6IG1vY2tGaWxlUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG1vY2tUZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1vY2tUZXh0UHJvcGVydHlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50czogbW9ja011bHRpRmlsZVByb3BlcnR5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgnY29tcGxleCcsIG1vY2tWYXVsdCwgY29tcGxleFByb3BlcnRpZXMgYXMgYW55KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5wcm9wZXJ0aWVzKS50b0JlKGNvbXBsZXhQcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IG9iamVjdFByb3BlcnR5LmdldENsYXNzZXMoKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSByZWFsIERPTSBpbnRlcmFjdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgLy8gTW9jayB0aGUgbWV0aG9kcyB0byBhdm9pZCBjYWxsaW5nIHRoZW1cclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gb2JqZWN0UHJvcGVydHkuZmlsbERpc3BsYXkoW10sIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGF0IHRoZSBjb250YWluZXIgaGFzIHRoZSByaWdodCBjbGFzc1xyXG4gICAgICAgICAgICBleHBlY3QoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnbWV0YWRhdGEtb2JqZWN0LWNvbnRhaW5lci10ZXN0b2JqZWN0JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZXN0IHRoYXQgYXBwZW5kQ2hpbGQgd2FzIGNhbGxlZCBzdWNjZXNzZnVsbHlcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKSkubm90LnRvVGhyb3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIG1haW50YWluIHByb3BlcnR5IHJlZmVyZW5jZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5wcm9wZXJ0aWVzLmZpbGUpLnRvQmUobW9ja0ZpbGVQcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5wcm9wZXJ0aWVzLnRpdGxlKS50b0JlKG1vY2tUZXh0UHJvcGVydHkpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkucHJvcGVydGllcy5tdWx0aUZpbGUpLnRvQmUobW9ja011bHRpRmlsZVByb3BlcnR5KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVIZWFkZXInLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBoZWFkZXIgcm93IHdpdGggdGl0bGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSBtb2NrQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1vYmplY3QtaGVhZGVyLXJvdycpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVyUm93KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QodGl0bGU/LnRleHRDb250ZW50KS50b0JlKCd0ZXN0T2JqZWN0IDogJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgY3VzdG9tIHRpdGxlIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnRpdGxlID0gJ0N1c3RvbSBUaXRsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLWhlYWRlcicpO1xyXG4gICAgICAgICAgICBleHBlY3QodGl0bGU/LnRleHRDb250ZW50KS50b0JlKCdDdXN0b20gVGl0bGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBhZGQgYnV0dG9uIGluIGhlYWRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGplc3Quc3B5T24ob2JqZWN0UHJvcGVydHksICdjcmVhdGVBZGRCdXR0b24nKS5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlQWRkQnV0dG9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUFkZEJ1dHRvbicsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBhZGQgYnV0dG9uIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24udGFnTmFtZSkudG9CZSgnQlVUVE9OJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1hZGQtYnV0dG9uJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChidXR0b24sICdjaXJjbGUtcGx1cycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGJ1dHRvbiBjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIG9uY2xpY2sgZXZlbnQgc2luY2UganNkb20gZG9lc24ndCBhdXRvbWF0aWNhbGx5IGV4ZWN1dGUgaXRcclxuICAgICAgICAgICAgaWYgKGJ1dHRvbi5vbmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBidXR0b24ub25jbGljayhuZXcgTW91c2VFdmVudCgnY2xpY2snKSBhcyBhbnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuYWRkUHJvcGVydHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlT2JqZWN0cycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RSb3cgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZW5hYmxlRHJhZ0FuZERyb3AgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgb2JqZWN0IHJvd3MgZm9yIGVhY2ggdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdmaWxlMi5tZCcsIHRpdGxlOiAnVGl0bGUgMicgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIHZhbHVlc1swXSwgMCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RSb3cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgdmFsdWVzWzFdLCAxLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGVuYWJsZSBkcmFnIGFuZCBkcm9wIHdoZW4gYWxsb3dNb3ZlIGlzIHRydWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuYWxsb3dNb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHModmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5lbmFibGVEcmFnQW5kRHJvcCkudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIG5vdCBlbmFibGUgZHJhZyBhbmQgZHJvcCB3aGVuIGFsbG93TW92ZSBpcyBmYWxzZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hbGxvd01vdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHModmFsdWVzLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5lbmFibGVEcmFnQW5kRHJvcCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBlYXJseSB3aGVuIG5vIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0cyhudWxsLCBtb2NrVXBkYXRlLCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RSb3cpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlT2JqZWN0Um93JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZURlbGV0ZUJ1dHRvbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHJvdyB3aXRoIGNvcnJlY3QgY2xhc3NlcyBhbmQgc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdHMgPSB2YWx1ZXNbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG9iamVjdHMsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1vYmplY3Qtcm93JykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyb3cuc3R5bGUucG9zaXRpb24pLnRvQmUoJ3JlbGF0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBzZXQgZHJhZ2dhYmxlIHdoZW4gYWxsb3dNb3ZlIGlzIHRydWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hbGxvd01vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlT2JqZWN0Um93KHZhbHVlcywgbW9ja1VwZGF0ZSwgb2JqZWN0cywgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5kcmFnZ2FibGUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyb3cuZGF0YXNldC5pbmRleCkudG9CZSgnMCcpO1xyXG4gICAgICAgICAgICBleHBlY3Qocm93LnN0eWxlLmN1cnNvcikudG9CZSgnZ3JhYicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgbm90IHNldCBkcmFnZ2FibGUgd2hlbiBhbGxvd01vdmUgaXMgZmFsc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hbGxvd01vdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG9iamVjdHMsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFdoZW4gYWxsb3dNb3ZlIGlzIGZhbHNlLCBkcmFnZ2FibGUgaXMgbm90IGV4cGxpY2l0bHkgc2V0LCBzbyBpdCByZW1haW5zIGZhbHNlIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5kcmFnZ2FibGUpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgICAgICBleHBlY3Qocm93LmRhdGFzZXQuaW5kZXgpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJvdy5zdHlsZS5jdXJzb3IpLm5vdC50b0JlKCdncmFiJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgcHJvcGVydHkgY29udGFpbmVycyBmb3IgZWFjaCBwcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBvYmplY3RzID0gdmFsdWVzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnVwZGF0ZU9iamVjdCA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG9iamVjdHMsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZVByb3BlcnR5LmZpbGxEaXNwbGF5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnZhdWx0LCBcclxuICAgICAgICAgICAgICAgICdmaWxlMS5tZCcsIFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmFueShGdW5jdGlvbilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZXh0UHJvcGVydHkuZmlsbERpc3BsYXkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkudmF1bHQsIFxyXG4gICAgICAgICAgICAgICAgJ1RpdGxlIDEnLCBcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eUNvbnRhaW5lcnMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgnLm1ldGFkYXRhLW9iamVjdC1wcm9wZXJ0eScpO1xyXG4gICAgICAgICAgICBleHBlY3QocHJvcGVydHlDb250YWluZXJzKS50b0hhdmVMZW5ndGgoMyk7IC8vIGZpbGUsIHRpdGxlLCBtdWx0aUZpbGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHNldCBncmlkIGNvbHVtbiBzcGFuIGZvciBwcm9wZXJ0aWVzIHdpdGggZmxleFNwYW4nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IHZhbHVlc1swXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBtb2NrRmlsZVByb3BlcnR5LmZsZXhTcGFuID0gMjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG9iamVjdHMsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5Q29udGFpbmVyID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1vYmplY3QtcHJvcGVydHknKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgZXhwZWN0KHByb3BlcnR5Q29udGFpbmVyPy5zdHlsZS5ncmlkQ29sdW1uKS50b0JlKCdzcGFuIDInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBkZWxldGUgYnV0dG9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdHMgPSB2YWx1ZXNbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdFJvdyh2YWx1ZXMsIG1vY2tVcGRhdGUsIG9iamVjdHMsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVEZWxldGVCdXR0b24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZURlbGV0ZUJ1dHRvbicsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5yZW1vdmVQcm9wZXJ0eSA9IGplc3QuZm4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBkZWxldGUgYnV0dG9uIHdpdGggY29ycmVjdCBjbGFzcyBhbmQgaWNvbicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IG9iamVjdFByb3BlcnR5LmNyZWF0ZURlbGV0ZUJ1dHRvbih2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24udGFnTmFtZSkudG9CZSgnQlVUVE9OJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1kZWxldGUtYnV0dG9uJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZXRJY29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChidXR0b24sICdjaXJjbGUtbWludXMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBidXR0b24gY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBvYmplY3RQcm9wZXJ0eS5jcmVhdGVEZWxldGVCdXR0b24odmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBvbmNsaWNrIGV2ZW50XHJcbiAgICAgICAgICAgIGlmIChidXR0b24ub25jbGljaykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgYnV0dG9uLm9uY2xpY2sobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykgYXMgYW55KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbW92ZVByb3BlcnR5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVUYWJsZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVBZGRCdXR0b24gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkudXBkYXRlT2JqZWN0ID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVEZWxldGVCdXR0b24gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSB0YWJsZSB3cmFwcGVyIGFuZCB0YWJsZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdGFibGVXcmFwcGVyID0gbW9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdkaXYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRhYmxlV3JhcHBlcj8uc3R5bGUucG9zaXRpb24pLnRvQmUoJ3JlbGF0aXZlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IG1vY2tDb250YWluZXIucXVlcnlTZWxlY3RvcigndGFibGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRhYmxlPy5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLW9iamVjdC10YWJsZScpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGhlYWRlciByb3cgd2l0aCBwcm9wZXJ0eSBuYW1lcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVUYWJsZSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gbW9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0cicpO1xyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gaGVhZGVyUm93Py5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcnMpLnRvSGF2ZUxlbmd0aCg0KTsgLy8gZmlsZSwgdGl0bGUsIG11bHRpRmlsZSArIGRlbGV0ZSBjb2x1bW5cclxuICAgICAgICAgICAgZXhwZWN0KGhlYWRlcnM/LlswXS50ZXh0Q29udGVudCkudG9CZSgnZmlsZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVycz8uWzFdLnRleHRDb250ZW50KS50b0JlKCd0aXRsZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoaGVhZGVycz8uWzJdLnRleHRDb250ZW50KS50b0JlKCdtdWx0aUZpbGUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSByb3dzIGZvciBlYWNoIHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJywgbXVsdGlGaWxlOiBbXSB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTIubWQnLCB0aXRsZTogJ1RpdGxlIDInLCBtdWx0aUZpbGU6IFtdIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByb3dzID0gbW9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG4gICAgICAgICAgICBleHBlY3Qocm93cykudG9IYXZlTGVuZ3RoKDMpOyAvLyBoZWFkZXIgKyAyIGRhdGEgcm93c1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tGaWxlUHJvcGVydHkuZmlsbERpc3BsYXkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZXh0UHJvcGVydHkuZmlsbERpc3BsYXkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHBvc2l0aW9uIGFkZCBidXR0b24gYWJzb2x1dGVseScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tBZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgamVzdC5zcHlPbihvYmplY3RQcm9wZXJ0eSwgJ2NyZWF0ZUFkZEJ1dHRvbicpLm1vY2tSZXR1cm5WYWx1ZShtb2NrQWRkQnV0dG9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FkZEJ1dHRvbi5zdHlsZS5wb3NpdGlvbikudG9CZSgnYWJzb2x1dGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBZGRCdXR0b24uc3R5bGUudG9wKS50b0JlKCcwcHgnKTtcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tBZGRCdXR0b24uc3R5bGUucmlnaHQpLnRvQmUoJzBweCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3JlbW92ZVByb3BlcnR5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eSgndGVzdE9iamVjdCcsIG1vY2tWYXVsdCwgcHJvcGVydGllcyk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHMgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIC8vIE1vY2sgY29uc29sZS5sb2cgdG8gYXZvaWQgb3V0cHV0IGR1cmluZyB0ZXN0c1xyXG4gICAgICAgICAgICBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmVtb3ZlIG9iamVjdCBhdCBzcGVjaWZpZWQgaW5kZXgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTIubWQnLCB0aXRsZTogJ1RpdGxlIDInIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdmaWxlMy5tZCcsIHRpdGxlOiAnVGl0bGUgMycgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gMTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnJlbW92ZVByb3BlcnR5KHZhbHVlcywgbW9ja1VwZGF0ZSwgaW5kZXgsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlcykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgICAgICAgICBleHBlY3QodmFsdWVzWzBdKS50b0VxdWFsKHsgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlc1sxXSkudG9FcXVhbCh7IGZpbGU6ICdmaWxlMy5tZCcsIHRpdGxlOiAnVGl0bGUgMycgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHVwZGF0ZSBhbmQgcmVsb2FkT2JqZWN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5yZW1vdmVQcm9wZXJ0eSh2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBtb2NrQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSwgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnYWRkUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5ID0gbmV3IE9iamVjdFByb3BlcnR5KCd0ZXN0T2JqZWN0JywgbW9ja1ZhdWx0LCBwcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyA9IGplc3QuZm4oKTtcclxuICAgICAgICAgICAgLy8gTW9jayBjb25zb2xlLmxvZyB0byBhdm9pZCBvdXRwdXQgZHVyaW5nIHRlc3RzXHJcbiAgICAgICAgICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHVwZGF0ZSBhbmQgcmVsb2FkT2JqZWN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSBlbnRpcmUgYWRkUHJvcGVydHkgbWV0aG9kIHRvIGF2b2lkIGNvbXBsZXggbG9naWNcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxBZGRQcm9wZXJ0eSA9IG9iamVjdFByb3BlcnR5LmFkZFByb3BlcnR5O1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKHZhbHMsIHVwZCwgY29udCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFscy5wdXNoKHsgZmlsZTogJycsIHRpdGxlOiAnJywgbXVsdGlGaWxlOiAnJyB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwZCh2YWxzKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHModmFscywgdXBkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS5hZGRQcm9wZXJ0eSh2YWx1ZXMsIG1vY2tVcGRhdGUsIG1vY2tDb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFkZCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuYWRkUHJvcGVydHkgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlczogYW55W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gb2JqZWN0UHJvcGVydHkuY3JlYXRlQWRkQnV0dG9uKHZhbHVlcywgbW9ja1VwZGF0ZSwgbW9ja0NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBvbmNsaWNrIGhhbmRsZXIgaXMgc2V0XHJcbiAgICAgICAgICAgIGV4cGVjdChidXR0b24ub25jbGljaykudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZU9iamVjdCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5yZWxvYWRPYmplY3RzID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICAvLyBNb2NrIGNvbnNvbGUubG9nIHRvIGF2b2lkIG91dHB1dCBkdXJpbmcgdGVzdHNcclxuICAgICAgICAgICAgamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSBzcGVjaWZpYyBwcm9wZXJ0eSBhdCBpbmRleCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBmaWxlOiAnZmlsZTEubWQnLCB0aXRsZTogJ1RpdGxlIDEnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGZpbGU6ICdmaWxlMi5tZCcsIHRpdGxlOiAnVGl0bGUgMicgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gbW9ja1RleHRQcm9wZXJ0eTtcclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAnVXBkYXRlZCBUaXRsZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhd2FpdCBvYmplY3RQcm9wZXJ0eS51cGRhdGVPYmplY3QodmFsdWVzLCBtb2NrVXBkYXRlLCBpbmRleCwgcHJvcGVydHksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZXNbMV0udGl0bGUpLnRvQmUoJ1VwZGF0ZWQgVGl0bGUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlc1swXSkudG9FcXVhbCh7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfSk7IC8vIFVuY2hhbmdlZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHZhbHVlcyBhcnJheSBpZiBudWxsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmFsdWVzOiBhbnkgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gbW9ja1RleHRQcm9wZXJ0eTtcclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAnTmV3IFRpdGxlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IG9iamVjdFByb3BlcnR5LnVwZGF0ZU9iamVjdCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGluZGV4LCBwcm9wZXJ0eSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tVcGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFt7IHRpdGxlOiAnTmV3IFRpdGxlJyB9XSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjYWxsIHVwZGF0ZSBhbmQgcmVsb2FkT2JqZWN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IG1vY2tUZXh0UHJvcGVydHk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJ1VwZGF0ZWQgVGl0bGUnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkudXBkYXRlT2JqZWN0KHZhbHVlcywgbW9ja1VwZGF0ZSwgaW5kZXgsIHByb3BlcnR5LCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsdWVzKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LnJlbG9hZE9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgncmVsb2FkT2JqZWN0cycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkgPSBuZXcgT2JqZWN0UHJvcGVydHkoJ3Rlc3RPYmplY3QnLCBtb2NrVmF1bHQsIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICBvYmplY3RQcm9wZXJ0eS5jcmVhdGVIZWFkZXIgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICAvLyBNb2NrIGNvbnNvbGUubG9nIHRvIGF2b2lkIG91dHB1dCBkdXJpbmcgdGVzdHNcclxuICAgICAgICAgICAgamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNsZWFyIGNvbnRhaW5lciBhbmQgcmVjcmVhdGUgY29udGVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBpbiB0aGUgRE9NIHdpdGggdGhlIGNvcnJlY3QgY2xhc3NcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtZXRhZGF0YS1vYmplY3QtY29udGFpbmVyLXRlc3RvYmplY3QnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2Pk9sZCBDb250ZW50PC9kaXY+JztcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTW9jayBxdWVyeVNlbGVjdG9yIHRvIHJldHVybiBvdXIgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUXVlcnlTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChzZWxlY3RvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yID09PSAnLm1ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsUXVlcnlTZWxlY3Rvci5jYWxsKGRvY3VtZW50LCBzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyh2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5pbm5lckhUTUwpLnRvQmUoJycpO1xyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9IG9yaWdpbmFsUXVlcnlTZWxlY3RvcjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlY3JlYXRlIG9iamVjdHMgd2hlbiBkaXNwbGF5IGlzIG5vdCB0YWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgb2JqZWN0UHJvcGVydHkuZGlzcGxheSA9ICdvYmplY3QnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtZXRhZGF0YS1vYmplY3QtY29udGFpbmVyLXRlc3RvYmplY3QnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTW9jayBxdWVyeVNlbGVjdG9yXHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUXVlcnlTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChzZWxlY3RvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yID09PSAnLm1ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsUXVlcnlTZWxlY3Rvci5jYWxsKGRvY3VtZW50LCBzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyh2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZU9iamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHZhbHVlcywgbW9ja1VwZGF0ZSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBxdWVyeVNlbGVjdG9yXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSBvcmlnaW5hbFF1ZXJ5U2VsZWN0b3I7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZWNyZWF0ZSB0YWJsZSB3aGVuIGRpc3BsYXkgaXMgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFt7IGZpbGU6ICdmaWxlMS5tZCcsIHRpdGxlOiAnVGl0bGUgMScgfV07XHJcbiAgICAgICAgICAgIG9iamVjdFByb3BlcnR5LmRpc3BsYXkgPSAndGFibGUnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtZXRhZGF0YS1vYmplY3QtY29udGFpbmVyLXRlc3RvYmplY3QnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTW9jayBxdWVyeVNlbGVjdG9yXHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUXVlcnlTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChzZWxlY3RvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yID09PSAnLm1ldGFkYXRhLW9iamVjdC1jb250YWluZXItdGVzdG9iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsUXVlcnlTZWxlY3Rvci5jYWxsKGRvY3VtZW50LCBzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyh2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KG9iamVjdFByb3BlcnR5LmNyZWF0ZVRhYmxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWx1ZXMsIG1vY2tVcGRhdGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGV4cGVjdChvYmplY3RQcm9wZXJ0eS5jcmVhdGVPYmplY3RzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBxdWVyeVNlbGVjdG9yXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSBvcmlnaW5hbFF1ZXJ5U2VsZWN0b3I7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBjb250YWluZXIgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW3sgZmlsZTogJ2ZpbGUxLm1kJywgdGl0bGU6ICdUaXRsZSAxJyB9XTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIE5vIGNvbnRhaW5lciBpbiBET01cclxuICAgICAgICAgICAgYXdhaXQgb2JqZWN0UHJvcGVydHkucmVsb2FkT2JqZWN0cyh2YWx1ZXMsIG1vY2tVcGRhdGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCB0aHJvdyBlcnJvclxyXG4gICAgICAgICAgICBleHBlY3Qob2JqZWN0UHJvcGVydHkuY3JlYXRlSGVhZGVyKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=