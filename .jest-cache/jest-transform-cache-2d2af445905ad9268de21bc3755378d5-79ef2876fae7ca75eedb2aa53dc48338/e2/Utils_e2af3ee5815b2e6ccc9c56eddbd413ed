fc427690f210d29069d6dc5990aaa590
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.waitForMetaDataCacheUpdate = exports.waitForFileMetaDataUpdate = void 0;
// Utility functions for file metadata operations
const waitForFileMetaDataUpdate = async (app, filePath, key, callback) => {
    // Attendre que les métadonnées du fichier soient mises à jour
    // Dans un environnement réel, ceci surveillerait les changements de métadonnées
    let attempts = 0;
    const maxAttempts = 50;
    while (attempts < maxAttempts) {
        const file = await app.getFile(filePath);
        if (file) {
            const metadata = await app.getMetadata(file);
            if (metadata && metadata[key] !== undefined) {
                await callback();
                return;
            }
        }
        await new Promise(resolve => setTimeout(resolve, 100));
        attempts++;
    }
    // Si on n'arrive pas à détecter le changement, on exécute quand même le callback
    await callback();
};
exports.waitForFileMetaDataUpdate = waitForFileMetaDataUpdate;
const waitForMetaDataCacheUpdate = async (app, callback) => {
    // Attendre que le cache des métadonnées soit mis à jour
    // Simulation d'une attente courte
    await new Promise(resolve => setTimeout(resolve, 100));
    await callback();
};
exports.waitForMetaDataCacheUpdate = waitForMetaDataCacheUpdate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHZhdWx0XFxVdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSxpREFBaUQ7QUFFMUMsTUFBTSx5QkFBeUIsR0FBRyxLQUFLLEVBQzFDLEdBQVMsRUFDVCxRQUFnQixFQUNoQixHQUFXLEVBQ1gsUUFBNkIsRUFDaEIsRUFBRTtJQUNmLDhEQUE4RDtJQUM5RCxnRkFBZ0Y7SUFDaEYsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUV2QixPQUFPLFFBQVEsR0FBRyxXQUFXLEVBQUUsQ0FBQztRQUM1QixNQUFNLElBQUksR0FBRyxNQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekMsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUNQLE1BQU0sUUFBUSxHQUFHLE1BQU0sR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QyxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQzFDLE1BQU0sUUFBUSxFQUFFLENBQUM7Z0JBQ2pCLE9BQU87WUFDWCxDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkQsUUFBUSxFQUFFLENBQUM7SUFDZixDQUFDO0lBRUQsaUZBQWlGO0lBQ2pGLE1BQU0sUUFBUSxFQUFFLENBQUM7QUFDckIsQ0FBQyxDQUFDO0FBM0JXLFFBQUEseUJBQXlCLDZCQTJCcEM7QUFFSyxNQUFNLDBCQUEwQixHQUFHLEtBQUssRUFDM0MsR0FBUSxFQUNSLFFBQTZCLEVBQ2hCLEVBQUU7SUFDZix3REFBd0Q7SUFDeEQsa0NBQWtDO0lBQ2xDLE1BQU0sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdkQsTUFBTSxRQUFRLEVBQUUsQ0FBQztBQUNyQixDQUFDLENBQUM7QUFSVyxRQUFBLDBCQUEwQiw4QkFRckMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHZhdWx0XFxVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQXBwIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvSUFwcFwiO1xyXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgZmlsZSBtZXRhZGF0YSBvcGVyYXRpb25zXHJcblxyXG5leHBvcnQgY29uc3Qgd2FpdEZvckZpbGVNZXRhRGF0YVVwZGF0ZSA9IGFzeW5jIChcclxuICAgIGFwcDogSUFwcCxcclxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXHJcbiAgICBrZXk6IHN0cmluZyxcclxuICAgIGNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+XHJcbik6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgLy8gQXR0ZW5kcmUgcXVlIGxlcyBtw6l0YWRvbm7DqWVzIGR1IGZpY2hpZXIgc29pZW50IG1pc2VzIMOgIGpvdXJcclxuICAgIC8vIERhbnMgdW4gZW52aXJvbm5lbWVudCByw6llbCwgY2VjaSBzdXJ2ZWlsbGVyYWl0IGxlcyBjaGFuZ2VtZW50cyBkZSBtw6l0YWRvbm7DqWVzXHJcbiAgICBsZXQgYXR0ZW1wdHMgPSAwO1xyXG4gICAgY29uc3QgbWF4QXR0ZW1wdHMgPSA1MDtcclxuICAgIFxyXG4gICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgYXBwLmdldEZpbGUoZmlsZVBhdGgpO1xyXG4gICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgYXBwLmdldE1ldGFkYXRhKGZpbGUpO1xyXG4gICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGFba2V5XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTaSBvbiBuJ2Fycml2ZSBwYXMgw6AgZMOpdGVjdGVyIGxlIGNoYW5nZW1lbnQsIG9uIGV4w6ljdXRlIHF1YW5kIG3Dqm1lIGxlIGNhbGxiYWNrXHJcbiAgICBhd2FpdCBjYWxsYmFjaygpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JNZXRhRGF0YUNhY2hlVXBkYXRlID0gYXN5bmMgKFxyXG4gICAgYXBwOiBhbnksXHJcbiAgICBjYWxsYmFjazogKCkgPT4gUHJvbWlzZTx2b2lkPlxyXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIC8vIEF0dGVuZHJlIHF1ZSBsZSBjYWNoZSBkZXMgbcOpdGFkb25uw6llcyBzb2l0IG1pcyDDoCBqb3VyXHJcbiAgICAvLyBTaW11bGF0aW9uIGQndW5lIGF0dGVudGUgY291cnRlXHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcbiAgICBhd2FpdCBjYWxsYmFjaygpO1xyXG59O1xyXG4iXSwidmVyc2lvbiI6M30=