0ccac3137a8bb1cd8f3b0a13b51afdd9
"use strict";
/**
 * @jest-environment jsdom
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock flatpickr
jest.mock('flatpickr', () => {
    const mockFlatpickr = jest.fn();
    return mockFlatpickr;
});
jest.mock('flatpickr/dist/l10n/fr.js', () => ({}));
// Mock setIcon
jest.mock('../../vault/Utils', () => ({
    setIcon: jest.fn()
}));
const DateProperty_1 = require("../../properties/DateProperty");
const RangeDateProperty_1 = require("../../properties/RangeDateProperty");
// Get the mocked flatpickr function
const flatpickr = jest.requireMock('flatpickr');
describe('RangeDateProperty', () => {
    let rangeDateProperty;
    let mockUpdate;
    beforeEach(() => {
        // Reset DOM
        document.body.innerHTML = '';
        // Reset all mocks
        jest.clearAllMocks();
        mockUpdate = jest.fn().mockResolvedValue(undefined);
        // Reset flatpickr mock
        flatpickr.mockImplementation((element, options) => {
            // Store options on element for testing
            element._flatpickrOptions = options;
            return {
                destroy: jest.fn(),
                clear: jest.fn(),
                setDate: jest.fn()
            };
        });
    });
    describe('Constructor', () => {
        test('should create RangeDateProperty with correct type', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.type).toBe('dateRange');
        });
        test('should inherit from DateProperty', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
        });
        test('should handle custom arguments', () => {
            const args = { icon: 'calendar', defaultValue: '2023-01-01 to 2023-01-31' };
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange', args);
            expect(rangeDateProperty.name).toBe('dateRange');
            expect(rangeDateProperty.icon).toBe('calendar');
        });
    });
    describe('validate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should validate single date format', () => {
            const result = rangeDateProperty.validate('2023-01-15');
            expect(result).toBe('2023-01-15');
        });
        test('should validate date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 to 2023-01-31');
            expect(result).toBe('2023-01-15 to 2023-01-31');
        });
        test('should reject invalid date format', () => {
            const result = rangeDateProperty.validate('2023/01/15');
            expect(result).toBe('');
        });
        test('should reject invalid date range format', () => {
            const result = rangeDateProperty.validate('2023-01-15 - 2023-01-31');
            expect(result).toBe('');
        });
        test('should reject malformed dates', () => {
            expect(rangeDateProperty.validate('invalid-date')).toBe('');
            // Note: La validation actuelle est basée sur regex, pas sur la validité de la date
            // Elle accepte donc des dates comme 2023-13-45 si elles suivent le format YYYY-MM-DD
            expect(rangeDateProperty.validate('15-01-2023')).toBe('');
        });
        test('should handle empty value', () => {
            expect(rangeDateProperty.validate('')).toBe('');
            expect(rangeDateProperty.validate(' ')).toBe('');
        });
    });
    describe('formatDateRangeForDisplay', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should format single date for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26');
            expect(result).toMatch(/dimanche 26 février 2023/);
        });
        test('should format date range for display', () => {
            const result = rangeDateProperty.formatDateRangeForDisplay('2023-02-26 to 2023-02-28');
            expect(result).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle invalid date gracefully', () => {
            // This might throw or return a default - let's test the behavior
            expect(() => {
                rangeDateProperty.formatDateRangeForDisplay('invalid-date');
            }).not.toThrow();
        });
    });
    describe('createFieldLink', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should create link with formatted date display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            expect(link.tagName).toBe('DIV');
            expect(link.classList.contains('date-field-link')).toBe(true);
            expect(link.classList.contains('field-link')).toBe(true);
            expect(link.style.cursor).toBe('pointer');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should create link with range display', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should show default text for empty value', () => {
            const link = rangeDateProperty.createFieldLink('');
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should show default text for null value', () => {
            const link = rangeDateProperty.createFieldLink(null);
            expect(link.textContent).toBe('Aucune date sélectionnée');
        });
        test('should have click event listener', () => {
            const link = rangeDateProperty.createFieldLink('2023-02-26');
            // Mock the modifyField method
            rangeDateProperty.modifyField = jest.fn();
            // Simulate click
            link.click();
            expect(rangeDateProperty.modifyField).toHaveBeenCalled();
        });
    });
    describe('createFieldDate', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should create input with correct attributes', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(input.tagName).toBe('INPUT');
            expect(input.type).toBe('text');
            expect(input.value).toBe('2023-02-26');
            expect(input.classList.contains('field-input')).toBe(true);
        });
        test('should initialize flatpickr with correct options', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                dateFormat: 'Y-m-d',
                defaultDate: '2023-02-26',
                locale: 'fr',
                mode: 'range'
            }));
        });
        test('should handle empty value', () => {
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            expect(input.value).toBe('');
            expect(flatpickr).toHaveBeenCalledWith(input, expect.objectContaining({
                defaultDate: ''
            }));
        });
        test('should configure onChange callback for single date selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting same start and end date
            const sameDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([sameDate, sameDate]);
            expect(input.value).toBe('2023-02-26');
        });
        test('should configure onChange callback for date range selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting date range
            const startDate = new Date('2023-02-26');
            const endDate = new Date('2023-02-28');
            await flatpickrOptions.onChange([startDate, endDate]);
            expect(input.value).toBe('2023-02-26 to 2023-02-28');
        });
        test('should handle onChange with incomplete selection', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            // Simulate selecting only one date
            const startDate = new Date('2023-02-26');
            await flatpickrOptions.onChange([startDate]);
            expect(rangeDateProperty.updateField).not.toHaveBeenCalled();
        });
        test('should configure onClose callback', async () => {
            const link = document.createElement('div');
            rangeDateProperty.updateField = jest.fn();
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            const flatpickrOptions = input._flatpickrOptions;
            await flatpickrOptions.onClose();
            expect(rangeDateProperty.updateField).toHaveBeenCalledWith(mockUpdate, input, link);
        });
    });
    describe('createFieldContainerContent', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should create container with correct structure', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            expect(container.tagName).toBe('DIV');
            expect(container.classList.contains('field-container')).toBe(true);
            expect(container.classList.contains('metadata-field')).toBe(true);
            expect(container.children.length).toBe(2); // link and input
        });
        test('should show link and hide input for valid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '2023-02-26');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('block');
            expect(input.style.display).toBe('none');
        });
        test('should hide link and show input for invalid date', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, 'invalid-date');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
        test('should hide link and show input for empty value', () => {
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const link = container.children[0];
            const input = container.children[1];
            expect(link.style.display).toBe('none');
            expect(input.style.display).toBe('block');
        });
    });
    describe('updateField', () => {
        beforeEach(() => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
        });
        test('should update with valid date and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023/);
        });
        test('should update with valid date range and show link', async () => {
            const input = document.createElement('input');
            input.value = '2023-02-26 to 2023-02-28';
            const link = document.createElement('div');
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(input.style.display).toBe('none');
            expect(link.style.display).toBe('block');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should update with invalid date without changing display', async () => {
            const input = document.createElement('input');
            input.value = 'invalid-date';
            const link = document.createElement('div');
            // Set initial display states
            input.style.display = 'block';
            link.style.display = 'none';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('invalid-date');
            expect(input.style.display).toBe('block'); // Should remain unchanged
            expect(link.style.display).toBe('none'); // Should remain unchanged
        });
        test('should handle update errors gracefully', async () => {
            mockUpdate.mockRejectedValue(new Error('Update failed'));
            const input = document.createElement('input');
            input.value = '2023-02-26';
            const link = document.createElement('div');
            await expect(rangeDateProperty.updateField(mockUpdate, input, link)).rejects.toThrow('Update failed');
        });
    });
    describe('extractFirstDate static method', () => {
        test('should extract date from French formatted string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1); // February is month 1 (0-indexed)
            expect(result?.getDate()).toBe(26);
        });
        test('should extract first date from range string', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('dimanche 26 février 2023 au mardi 28 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getFullYear()).toBe(2023);
            expect(result?.getMonth()).toBe(1);
            expect(result?.getDate()).toBe(26);
        });
        test('should handle different months', () => {
            const testCases = [
                { input: '15 janvier 2023', expected: { year: 2023, month: 0, day: 15 } },
                { input: '10 mars 2023', expected: { year: 2023, month: 2, day: 10 } },
                { input: '25 novembre 2023', expected: { year: 2023, month: 10, day: 25 } } // éviter décembre à cause du bug d'accent
            ];
            testCases.forEach(({ input, expected }) => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result?.getFullYear()).toBe(expected.year);
                expect(result?.getMonth()).toBe(expected.month);
                expect(result?.getDate()).toBe(expected.day);
            });
        });
        test('should handle accented characters', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('15 février 2023');
            expect(result).toBeInstanceOf(Date);
            expect(result?.getMonth()).toBe(1); // février = February
        });
        test('should return null for invalid format', () => {
            const testCases = [
                'invalid date string',
                '2023-02-26',
                'February 26, 2023',
                '26/02/2023',
                ''
            ];
            testCases.forEach(input => {
                const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate(input);
                expect(result).toBeNull();
            });
        });
        test('should return null for invalid month names', () => {
            const result = RangeDateProperty_1.RangeDateProperty.extractFirstDate('26 invalidmonth 2023');
            expect(result).toBeNull();
        });
    });
    describe('Integration tests', () => {
        test('should work with complete workflow', async () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
            // Create complete container
            const container = rangeDateProperty.createFieldContainerContent(mockUpdate, '');
            const input = container.querySelector('input');
            const link = container.querySelector('.date-field-link');
            // Simulate user input
            input.value = '2023-02-26 to 2023-02-28';
            await rangeDateProperty.updateField(mockUpdate, input, link);
            expect(mockUpdate).toHaveBeenCalledWith('2023-02-26 to 2023-02-28');
            expect(link.textContent).toMatch(/dimanche 26 février 2023 au mardi 28 février 2023/);
        });
        test('should handle flatpickr integration', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
            const link = document.createElement('div');
            const input = rangeDateProperty.createFieldDate('2023-02-26', mockUpdate, link);
            expect(flatpickr).toHaveBeenCalled();
            expect(input._flatpickrOptions).toBeDefined();
            expect(input._flatpickrOptions.mode).toBe('range');
            expect(input._flatpickrOptions.locale).toBe('fr');
        });
        test('should maintain proper inheritance', () => {
            rangeDateProperty = new RangeDateProperty_1.RangeDateProperty('dateRange');
            expect(rangeDateProperty).toBeInstanceOf(DateProperty_1.DateProperty);
            expect(rangeDateProperty.type).toBe('dateRange');
            expect(typeof rangeDateProperty.formatDateForStorage).toBe('function');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXF9fdGVzdHNfX1xcUHJvcGVydGllc1xcUmFuZ2VEYXRlUHJvcGVydHkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBS0gsaUJBQWlCO0FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtJQUN4QixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDaEMsT0FBTyxhQUFhLENBQUM7QUFDekIsQ0FBQyxDQUFDLENBQUM7QUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUVuRCxlQUFlO0FBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3JCLENBQUMsQ0FBQyxDQUFDO0FBYkosZ0VBQTZEO0FBQzdELDBFQUF1RTtBQWN2RSxvQ0FBb0M7QUFDcEMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUVoRCxRQUFRLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFO0lBQy9CLElBQUksaUJBQW9DLENBQUM7SUFDekMsSUFBSSxVQUE4QyxDQUFDO0lBRW5ELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDWixZQUFZO1FBQ1osUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQzdCLGtCQUFrQjtRQUNsQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIsVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FB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QUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JDLE1BQU0sQ0FBRSxLQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN2RCxNQUFNLENBQUUsS0FBYSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxNQUFNLENBQUUsS0FBYSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsaUJBQWlCLEdBQUcsSUFBSSxxQ0FBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUV2RCxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxjQUFjLENBQUMsMkJBQVksQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLE9BQU8saUJBQWlCLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0UsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxfX3Rlc3RzX19cXFByb3BlcnRpZXNcXFJhbmdlRGF0ZVByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0ZVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vcHJvcGVydGllcy9EYXRlUHJvcGVydHknO1xyXG5pbXBvcnQgeyBSYW5nZURhdGVQcm9wZXJ0eSB9IGZyb20gJy4uLy4uL3Byb3BlcnRpZXMvUmFuZ2VEYXRlUHJvcGVydHknO1xyXG5cclxuLy8gTW9jayBmbGF0cGlja3JcclxuamVzdC5tb2NrKCdmbGF0cGlja3InLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2NrRmxhdHBpY2tyID0gamVzdC5mbigpO1xyXG4gICAgcmV0dXJuIG1vY2tGbGF0cGlja3I7XHJcbn0pO1xyXG5qZXN0Lm1vY2soJ2ZsYXRwaWNrci9kaXN0L2wxMG4vZnIuanMnLCAoKSA9PiAoe30pKTtcclxuXHJcbi8vIE1vY2sgc2V0SWNvblxyXG5qZXN0Lm1vY2soJy4uLy4uL3ZhdWx0L1V0aWxzJywgKCkgPT4gKHtcclxuICAgIHNldEljb246IGplc3QuZm4oKVxyXG59KSk7XHJcblxyXG4vLyBHZXQgdGhlIG1vY2tlZCBmbGF0cGlja3IgZnVuY3Rpb25cclxuY29uc3QgZmxhdHBpY2tyID0gamVzdC5yZXF1aXJlTW9jaygnZmxhdHBpY2tyJyk7XHJcblxyXG5kZXNjcmliZSgnUmFuZ2VEYXRlUHJvcGVydHknLCAoKSA9PiB7XHJcbiAgICBsZXQgcmFuZ2VEYXRlUHJvcGVydHk6IFJhbmdlRGF0ZVByb3BlcnR5O1xyXG4gICAgbGV0IG1vY2tVcGRhdGU6IGplc3QuTW9jazxQcm9taXNlPHZvaWQ+LCBbc3RyaW5nXT47XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgRE9NXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAvLyBSZXNldCBhbGwgbW9ja3NcclxuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuXHJcbiAgICAgICAgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFJlc2V0IGZsYXRwaWNrciBtb2NrXHJcbiAgICAgICAgZmxhdHBpY2tyLm1vY2tJbXBsZW1lbnRhdGlvbigoZWxlbWVudDogYW55LCBvcHRpb25zOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgb3B0aW9ucyBvbiBlbGVtZW50IGZvciB0ZXN0aW5nXHJcbiAgICAgICAgICAgIChlbGVtZW50IGFzIGFueSkuX2ZsYXRwaWNrck9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICAgICAgY2xlYXI6IGplc3QuZm4oKSxcclxuICAgICAgICAgICAgICAgIHNldERhdGU6IGplc3QuZm4oKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yJywgKCkgPT4ge1xyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgUmFuZ2VEYXRlUHJvcGVydHkgd2l0aCBjb3JyZWN0IHR5cGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS5uYW1lKS50b0JlKCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnR5cGUpLnRvQmUoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaW5oZXJpdCBmcm9tIERhdGVQcm9wZXJ0eScsICgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5KS50b0JlSW5zdGFuY2VPZihEYXRlUHJvcGVydHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGN1c3RvbSBhcmd1bWVudHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB7IGljb246ICdjYWxlbmRhcicsIGRlZmF1bHRWYWx1ZTogJzIwMjMtMDEtMDEgdG8gMjAyMy0wMS0zMScgfTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScsIGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5Lm5hbWUpLnRvQmUoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkuaWNvbikudG9CZSgnY2FsZW5kYXInKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgc2luZ2xlIGRhdGUgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy0wMS0xNScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcyMDIzLTAxLTE1Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBkYXRlIHJhbmdlIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmFuZ2VEYXRlUHJvcGVydHkudmFsaWRhdGUoJzIwMjMtMDEtMTUgdG8gMjAyMy0wMS0zMScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcyMDIzLTAxLTE1IHRvIDIwMjMtMDEtMzEnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIGRhdGUgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy8wMS8xNScpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIGRhdGUgcmFuZ2UgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMjAyMy0wMS0xNSAtIDIwMjMtMDEtMzEnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgbWFsZm9ybWVkIGRhdGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkudmFsaWRhdGUoJ2ludmFsaWQtZGF0ZScpKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgLy8gTm90ZTogTGEgdmFsaWRhdGlvbiBhY3R1ZWxsZSBlc3QgYmFzw6llIHN1ciByZWdleCwgcGFzIHN1ciBsYSB2YWxpZGl0w6kgZGUgbGEgZGF0ZVxyXG4gICAgICAgICAgICAvLyBFbGxlIGFjY2VwdGUgZG9uYyBkZXMgZGF0ZXMgY29tbWUgMjAyMy0xMy00NSBzaSBlbGxlcyBzdWl2ZW50IGxlIGZvcm1hdCBZWVlZLU1NLUREXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnMTUtMDEtMjAyMycpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnZhbGlkYXRlKCcnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS52YWxpZGF0ZSgnICcpKS50b0JlKCcnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmb3JtYXREYXRlUmFuZ2VGb3JEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBmb3JtYXQgc2luZ2xlIGRhdGUgZm9yIGRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJhbmdlRGF0ZVByb3BlcnR5LmZvcm1hdERhdGVSYW5nZUZvckRpc3BsYXkoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGZvcm1hdCBkYXRlIHJhbmdlIGZvciBkaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSByYW5nZURhdGVQcm9wZXJ0eS5mb3JtYXREYXRlUmFuZ2VGb3JEaXNwbGF5KCcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMgYXUgbWFyZGkgMjggZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgZGF0ZSBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRocm93IG9yIHJldHVybiBhIGRlZmF1bHQgLSBsZXQncyB0ZXN0IHRoZSBiZWhhdmlvclxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkuZm9ybWF0RGF0ZVJhbmdlRm9yRGlzcGxheSgnaW52YWxpZC1kYXRlJyk7XHJcbiAgICAgICAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY3JlYXRlRmllbGRMaW5rJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgbGluayB3aXRoIGZvcm1hdHRlZCBkYXRlIGRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzIwMjMtMDItMjYnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRhZ05hbWUpLnRvQmUoJ0RJVicpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5jbGFzc0xpc3QuY29udGFpbnMoJ2RhdGUtZmllbGQtbGluaycpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpZWxkLWxpbmsnKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuY3Vyc29yKS50b0JlKCdwb2ludGVyJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b01hdGNoKC9kaW1hbmNoZSAyNiBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgbGluayB3aXRoIHJhbmdlIGRpc3BsYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMgYXUgbWFyZGkgMjggZsOpdnJpZXIgMjAyMy8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2hvdyBkZWZhdWx0IHRleHQgZm9yIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChsaW5rLnRleHRDb250ZW50KS50b0JlKCdBdWN1bmUgZGF0ZSBzw6lsZWN0aW9ubsOpZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2hvdyBkZWZhdWx0IHRleHQgZm9yIG51bGwgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZExpbmsobnVsbCBhcyBhbnkpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvQmUoJ0F1Y3VuZSBkYXRlIHPDqWxlY3Rpb25uw6llJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNsaWNrIGV2ZW50IGxpc3RlbmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGRMaW5rKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNb2NrIHRoZSBtb2RpZnlGaWVsZCBtZXRob2RcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkubW9kaWZ5RmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBjbGlja1xyXG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QocmFuZ2VEYXRlUHJvcGVydHkubW9kaWZ5RmllbGQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjcmVhdGVGaWVsZERhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBpbnB1dCB3aXRoIGNvcnJlY3QgYXR0cmlidXRlcycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnMjAyMy0wMi0yNicsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnRhZ05hbWUpLnRvQmUoJ0lOUFVUJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC50eXBlKS50b0JlKCd0ZXh0Jyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1pbnB1dCcpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSBmbGF0cGlja3Igd2l0aCBjb3JyZWN0IG9wdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZERhdGUoJzIwMjMtMDItMjYnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChmbGF0cGlja3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGlucHV0LCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICBkYXRlRm9ybWF0OiAnWS1tLWQnLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGU6ICcyMDIzLTAyLTI2JyxcclxuICAgICAgICAgICAgICAgIGxvY2FsZTogJ2ZyJyxcclxuICAgICAgICAgICAgICAgIG1vZGU6ICdyYW5nZSdcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbHVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcnLCBtb2NrVXBkYXRlLCBsaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChpbnB1dC52YWx1ZSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmbGF0cGlja3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGlucHV0LCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0ZTogJydcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY29uZmlndXJlIG9uQ2hhbmdlIGNhbGxiYWNrIGZvciBzaW5nbGUgZGF0ZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnJywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGluZyBzYW1lIHN0YXJ0IGFuZCBlbmQgZGF0ZVxyXG4gICAgICAgICAgICBjb25zdCBzYW1lRGF0ZSA9IG5ldyBEYXRlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGF3YWl0IGZsYXRwaWNrck9wdGlvbnMub25DaGFuZ2UoW3NhbWVEYXRlLCBzYW1lRGF0ZV0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnZhbHVlKS50b0JlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBjb25maWd1cmUgb25DaGFuZ2UgY2FsbGJhY2sgZm9yIGRhdGUgcmFuZ2Ugc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkID0gamVzdC5mbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZERhdGUoJycsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG4gICAgICAgICAgICBjb25zdCBmbGF0cGlja3JPcHRpb25zID0gKGlucHV0IGFzIGFueSkuX2ZsYXRwaWNrck9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBzZWxlY3RpbmcgZGF0ZSByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgnMjAyMy0wMi0yNicpO1xyXG4gICAgICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJzIwMjMtMDItMjgnKTtcclxuICAgICAgICAgICAgYXdhaXQgZmxhdHBpY2tyT3B0aW9ucy5vbkNoYW5nZShbc3RhcnREYXRlLCBlbmREYXRlXSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvQmUoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG9uQ2hhbmdlIHdpdGggaW5jb21wbGV0ZSBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnJywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXRwaWNrck9wdGlvbnMgPSAoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGluZyBvbmx5IG9uZSBkYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCcyMDIzLTAyLTI2Jyk7XHJcbiAgICAgICAgICAgIGF3YWl0IGZsYXRwaWNrck9wdGlvbnMub25DaGFuZ2UoW3N0YXJ0RGF0ZV0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnVwZGF0ZUZpZWxkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY29uZmlndXJlIG9uQ2xvc2UgY2FsbGJhY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkudXBkYXRlRmllbGQgPSBqZXN0LmZuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkRGF0ZSgnMjAyMy0wMi0yNicsIG1vY2tVcGRhdGUsIGxpbmspO1xyXG4gICAgICAgICAgICBjb25zdCBmbGF0cGlja3JPcHRpb25zID0gKGlucHV0IGFzIGFueSkuX2ZsYXRwaWNrck9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBmbGF0cGlja3JPcHRpb25zLm9uQ2xvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1VwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGNvbnRhaW5lciB3aXRoIGNvcnJlY3Qgc3RydWN0dXJlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgJzIwMjMtMDItMjYnKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIudGFnTmFtZSkudG9CZSgnRElWJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdmaWVsZC1jb250YWluZXInKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWZpZWxkJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKS50b0JlKDIpOyAvLyBsaW5rIGFuZCBpbnB1dFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgc2hvdyBsaW5rIGFuZCBoaWRlIGlucHV0IGZvciB2YWxpZCBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgaGlkZSBsaW5rIGFuZCBzaG93IGlucHV0IGZvciBpbnZhbGlkIGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnaW52YWxpZC1kYXRlJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIGhpZGUgbGluayBhbmQgc2hvdyBpbnB1dCBmb3IgZW1wdHkgdmFsdWUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJhbmdlRGF0ZVByb3BlcnR5LmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudChtb2NrVXBkYXRlLCAnJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd1cGRhdGVGaWVsZCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIHdpdGggdmFsaWQgZGF0ZSBhbmQgc2hvdyBsaW5rJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzIwMjMtMDItMjYnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJzIwMjMtMDItMjYnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGlucHV0LnN0eWxlLmRpc3BsYXkpLnRvQmUoJ25vbmUnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTtcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsudGV4dENvbnRlbnQpLnRvTWF0Y2goL2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSB3aXRoIHZhbGlkIGRhdGUgcmFuZ2UgYW5kIHNob3cgbGluaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay5zdHlsZS5kaXNwbGF5KS50b0JlKCdibG9jaycpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgd2l0aCBpbnZhbGlkIGRhdGUgd2l0aG91dCBjaGFuZ2luZyBkaXNwbGF5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJ2ludmFsaWQtZGF0ZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIGRpc3BsYXkgc3RhdGVzXHJcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2ludmFsaWQtZGF0ZScpO1xyXG4gICAgICAgICAgICBleHBlY3QoaW5wdXQuc3R5bGUuZGlzcGxheSkudG9CZSgnYmxvY2snKTsgLy8gU2hvdWxkIHJlbWFpbiB1bmNoYW5nZWRcclxuICAgICAgICAgICAgZXhwZWN0KGxpbmsuc3R5bGUuZGlzcGxheSkudG9CZSgnbm9uZScpOyAgIC8vIFNob3VsZCByZW1haW4gdW5jaGFuZ2VkXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdXBkYXRlIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrVXBkYXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVXBkYXRlIGZhaWxlZCcpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnMjAyMy0wMi0yNic7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluaykpLnJlamVjdHMudG9UaHJvdygnVXBkYXRlIGZhaWxlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2V4dHJhY3RGaXJzdERhdGUgc3RhdGljIG1ldGhvZCcsICgpID0+IHtcclxuICAgICAgICB0ZXN0KCdzaG91bGQgZXh0cmFjdCBkYXRlIGZyb20gRnJlbmNoIGZvcm1hdHRlZCBzdHJpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoJ2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRGdWxsWWVhcigpKS50b0JlKDIwMjMpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRNb250aCgpKS50b0JlKDEpOyAvLyBGZWJydWFyeSBpcyBtb250aCAxICgwLWluZGV4ZWQpXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldERhdGUoKSkudG9CZSgyNik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBleHRyYWN0IGZpcnN0IGRhdGUgZnJvbSByYW5nZSBzdHJpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoJ2RpbWFuY2hlIDI2IGbDqXZyaWVyIDIwMjMgYXUgbWFyZGkgMjggZsOpdnJpZXIgMjAyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldEZ1bGxZZWFyKCkpLnRvQmUoMjAyMyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldE1vbnRoKCkpLnRvQmUoMSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldERhdGUoKSkudG9CZSgyNik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IG1vbnRocycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdENhc2VzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBpbnB1dDogJzE1IGphbnZpZXIgMjAyMycsIGV4cGVjdGVkOiB7IHllYXI6IDIwMjMsIG1vbnRoOiAwLCBkYXk6IDE1IH0gfSxcclxuICAgICAgICAgICAgICAgIHsgaW5wdXQ6ICcxMCBtYXJzIDIwMjMnLCBleHBlY3RlZDogeyB5ZWFyOiAyMDIzLCBtb250aDogMiwgZGF5OiAxMCB9IH0sXHJcbiAgICAgICAgICAgICAgICB7IGlucHV0OiAnMjUgbm92ZW1icmUgMjAyMycsIGV4cGVjdGVkOiB7IHllYXI6IDIwMjMsIG1vbnRoOiAxMCwgZGF5OiAyNSB9IH0gLy8gw6l2aXRlciBkw6ljZW1icmUgw6AgY2F1c2UgZHUgYnVnIGQnYWNjZW50XHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0ZXN0Q2FzZXMuZm9yRWFjaCgoeyBpbnB1dCwgZXhwZWN0ZWQgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmFuZ2VEYXRlUHJvcGVydHkuZXh0cmFjdEZpcnN0RGF0ZShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXRGdWxsWWVhcigpKS50b0JlKGV4cGVjdGVkLnllYXIpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdD8uZ2V0TW9udGgoKSkudG9CZShleHBlY3RlZC5tb250aCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Py5nZXREYXRlKCkpLnRvQmUoZXhwZWN0ZWQuZGF5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgYWNjZW50ZWQgY2hhcmFjdGVycycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmFuZ2VEYXRlUHJvcGVydHkuZXh0cmFjdEZpcnN0RGF0ZSgnMTUgZsOpdnJpZXIgMjAyMycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQ/LmdldE1vbnRoKCkpLnRvQmUoMSk7IC8vIGbDqXZyaWVyID0gRmVicnVhcnlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBpbnZhbGlkIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVzdENhc2VzID0gW1xyXG4gICAgICAgICAgICAgICAgJ2ludmFsaWQgZGF0ZSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJzIwMjMtMDItMjYnLFxyXG4gICAgICAgICAgICAgICAgJ0ZlYnJ1YXJ5IDI2LCAyMDIzJyxcclxuICAgICAgICAgICAgICAgICcyNi8wMi8yMDIzJyxcclxuICAgICAgICAgICAgICAgICcnXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0ZXN0Q2FzZXMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSYW5nZURhdGVQcm9wZXJ0eS5leHRyYWN0Rmlyc3REYXRlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIGludmFsaWQgbW9udGggbmFtZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJhbmdlRGF0ZVByb3BlcnR5LmV4dHJhY3RGaXJzdERhdGUoJzI2IGludmFsaWRtb250aCAyMDIzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnSW50ZWdyYXRpb24gdGVzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgdGVzdCgnc2hvdWxkIHdvcmsgd2l0aCBjb21wbGV0ZSB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgcmFuZ2VEYXRlUHJvcGVydHkgPSBuZXcgUmFuZ2VEYXRlUHJvcGVydHkoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbXBsZXRlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByYW5nZURhdGVQcm9wZXJ0eS5jcmVhdGVGaWVsZENvbnRhaW5lckNvbnRlbnQobW9ja1VwZGF0ZSwgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRhdGUtZmllbGQtbGluaycpIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgdXNlciBpbnB1dFxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcyMDIzLTAyLTI2IHRvIDIwMjMtMDItMjgnO1xyXG4gICAgICAgICAgICBhd2FpdCByYW5nZURhdGVQcm9wZXJ0eS51cGRhdGVGaWVsZChtb2NrVXBkYXRlLCBpbnB1dCwgbGluayk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1VwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJzIwMjMtMDItMjYgdG8gMjAyMy0wMi0yOCcpO1xyXG4gICAgICAgICAgICBleHBlY3QobGluay50ZXh0Q29udGVudCkudG9NYXRjaCgvZGltYW5jaGUgMjYgZsOpdnJpZXIgMjAyMyBhdSBtYXJkaSAyOCBmw6l2cmllciAyMDIzLyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZmxhdHBpY2tyIGludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByYW5nZURhdGVQcm9wZXJ0eSA9IG5ldyBSYW5nZURhdGVQcm9wZXJ0eSgnZGF0ZVJhbmdlJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcmFuZ2VEYXRlUHJvcGVydHkuY3JlYXRlRmllbGREYXRlKCcyMDIzLTAyLTI2JywgbW9ja1VwZGF0ZSwgbGluayk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBleHBlY3QoZmxhdHBpY2tyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucykudG9CZURlZmluZWQoKTtcclxuICAgICAgICAgICAgZXhwZWN0KChpbnB1dCBhcyBhbnkpLl9mbGF0cGlja3JPcHRpb25zLm1vZGUpLnRvQmUoJ3JhbmdlJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCgoaW5wdXQgYXMgYW55KS5fZmxhdHBpY2tyT3B0aW9ucy5sb2NhbGUpLnRvQmUoJ2ZyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRlc3QoJ3Nob3VsZCBtYWludGFpbiBwcm9wZXIgaW5oZXJpdGFuY2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJhbmdlRGF0ZVByb3BlcnR5ID0gbmV3IFJhbmdlRGF0ZVByb3BlcnR5KCdkYXRlUmFuZ2UnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChyYW5nZURhdGVQcm9wZXJ0eSkudG9CZUluc3RhbmNlT2YoRGF0ZVByb3BlcnR5KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJhbmdlRGF0ZVByb3BlcnR5LnR5cGUpLnRvQmUoJ2RhdGVSYW5nZScpO1xyXG4gICAgICAgICAgICBleHBlY3QodHlwZW9mIHJhbmdlRGF0ZVByb3BlcnR5LmZvcm1hdERhdGVGb3JTdG9yYWdlKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==