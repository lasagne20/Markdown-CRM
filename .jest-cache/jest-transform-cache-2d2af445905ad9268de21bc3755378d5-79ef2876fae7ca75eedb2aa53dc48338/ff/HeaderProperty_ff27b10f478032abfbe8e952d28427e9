8e0c30aae0adab79af9b391517c60aa8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HearderProperty = void 0;
const Property_1 = require("./Property");
class HearderProperty extends Property_1.Property {
    constructor(name, vault, args = {}) {
        super(name, vault, args);
        this.type = "header";
    }
    fillDisplay(vault, value, update, args = { size: "2em" }) {
        this.vault = vault;
        const field = this.createFieldContainer();
        const fieldContainer = this.createFieldContainerContent(update, value);
        if (fieldContainer && args.size) {
            const link = fieldContainer.querySelector('.field-headerlink');
            const input = fieldContainer.querySelector('.field-header');
            input.style.fontSize = args.size;
            link.style.fontSize = args.size;
        }
        field.appendChild(fieldContainer);
        return field;
    }
    createFieldInput(value) {
        const input = document.createElement("input");
        input.type = "text";
        input.value = value || "";
        input.classList.add("field-header");
        return input;
    }
    createFieldContainer() {
        const field = document.createElement("div");
        field.classList.add("metadata-headerfield");
        return field;
    }
    createFieldLink(value) {
        const link = document.createElement("h2");
        link.innerHTML = value || "";
        link.classList.add("field-headerlink");
        link.style.cursor = this.static ? "default" : "text";
        if (!this.static) {
            link.onclick = (event) => this.modifyField(event);
        }
        return link;
    }
    modifyField(event) {
        const link = event.target.closest('.metadata-headerfield')?.querySelector('.field-headerlink');
        const input = event.target.closest('.metadata-headerfield')?.querySelector('.field-header');
        if (link && input) {
            link.style.display = "none";
            input.style.display = "block";
            input.focus();
        }
    }
    handleFieldInput(update, input, link) {
        input.onblur = async () => {
            await this.updateField(update, input, link);
            return;
        };
        input.onkeydown = async (event) => {
            if (event.key === "Escape" || event.key === "Enter") {
                event.preventDefault();
                await this.updateField(update, input, link);
            }
        };
    }
}
exports.HearderProperty = HearderProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEhlYWRlclByb3BlcnR5LnRzIiwibWFwcGluZ3MiOiI7OztBQUNBLHlDQUFzQztBQVN0QyxNQUFhLGVBQWdCLFNBQVEsbUJBQVE7SUFHM0MsWUFBWSxJQUFZLEVBQUUsS0FBWSxFQUFFLElBQUksR0FBRyxFQUFFO1FBQy9DLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBSFgsU0FBSSxHQUFXLFFBQVEsQ0FBQztJQUl4QyxDQUFDO0lBRVEsV0FBVyxDQUFDLEtBQVcsRUFBRSxLQUFVLEVBQUUsTUFBcUMsRUFBRSxPQUEwQixFQUFDLElBQUksRUFBRyxLQUFLLEVBQUM7UUFDdkgsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDMUMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV2RSxJQUFJLGNBQWMsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDOUIsTUFBTSxJQUFJLEdBQUcsY0FBYyxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBZ0IsQ0FBQztZQUM5RSxNQUFNLEtBQUssR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBcUIsQ0FBQztZQUNoRixLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ2pDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDcEMsQ0FBQztRQUVELEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDbEMsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVNLGdCQUFnQixDQUFDLEtBQWE7UUFDckMsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxLQUFLLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQztRQUNwQixLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDMUIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7UUFHcEMsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRVEsb0JBQW9CO1FBQzNCLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUM1QyxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFUSxlQUFlLENBQUMsS0FBYTtRQUNwQyxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBRXJELElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRVEsV0FBVyxDQUFDLEtBQVk7UUFDL0IsTUFBTSxJQUFJLEdBQUksS0FBSyxDQUFDLE1BQXNCLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEVBQUUsYUFBYSxDQUFDLG1CQUFtQixDQUFnQixDQUFDO1FBQy9ILE1BQU0sS0FBSyxHQUFJLEtBQUssQ0FBQyxNQUFzQixDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxlQUFlLENBQXFCLENBQUM7UUFDakksSUFBSSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQzVCLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUM5QixLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEIsQ0FBQztJQUNILENBQUM7SUFFUSxnQkFBZ0IsQ0FBQyxNQUF3QyxFQUFFLEtBQTZDLEVBQUUsSUFBaUI7UUFDbEksS0FBSyxDQUFDLE1BQU0sR0FBRyxLQUFLLElBQUksRUFBRTtZQUN0QixNQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztZQUM1QyxPQUFPO1FBQ1gsQ0FBQyxDQUFDO1FBRUYsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDOUIsSUFBSyxLQUF1QixDQUFDLEdBQUcsS0FBSyxRQUFRLElBQUssS0FBdUIsQ0FBQyxHQUFHLEtBQUssT0FBTyxFQUFFLENBQUM7Z0JBQ3BGLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDdkIsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEQsQ0FBQztRQUNMLENBQUMsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQTFFRCwwQ0EwRUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEhlYWRlclByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpbmtQcm9wZXJ0eSB9IGZyb20gXCIuL0xpbmtQcm9wZXJ0eVwiO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eSB9IGZyb20gXCIuL1Byb3BlcnR5XCI7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCB7IHNldEljb24gfSBmcm9tIFwiLi4vdmF1bHQvVXRpbHNcIjtcclxuaW1wb3J0IHsgVmF1bHQgfSBmcm9tIFwiLi4vdmF1bHQvVmF1bHRcIjtcclxuXHJcbi8vIFRlbXBvcmFyeSB0eXBlIGRlY2xhcmF0aW9ucyBmb3IgbWlzc2luZyBpbXBvcnRzXHJcbmRlY2xhcmUgY29uc3QgTm90aWNlOiBhbnk7XHJcbmRlY2xhcmUgY29uc3QgVEZpbGU6IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBIZWFyZGVyUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcbiAgcHVibGljIG92ZXJyaWRlIHR5cGU6IHN0cmluZyA9IFwiaGVhZGVyXCI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmF1bHQ6IFZhdWx0LCBhcmdzID0ge30pIHtcclxuICAgIHN1cGVyKG5hbWUsIHZhdWx0LCBhcmdzKTtcclxuICB9XHJcblxyXG4gIG92ZXJyaWRlIGZpbGxEaXNwbGF5KHZhdWx0IDogYW55LCB2YWx1ZTogYW55LCB1cGRhdGU6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+LCBhcmdzIDoge3NpemUgPzogc3RyaW5nfSA9IHtzaXplIDogXCIyZW1cIn0pIHtcclxuICAgICAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmNyZWF0ZUZpZWxkQ29udGFpbmVyKCk7XHJcbiAgICAgICAgY29uc3QgZmllbGRDb250YWluZXIgPSB0aGlzLmNyZWF0ZUZpZWxkQ29udGFpbmVyQ29udGVudCh1cGRhdGUsIHZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZmllbGRDb250YWluZXIgJiYgYXJncy5zaXplKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBmaWVsZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmllbGQtaGVhZGVybGluaycpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGZpZWxkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1oZWFkZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpbnB1dC5zdHlsZS5mb250U2l6ZSA9IGFyZ3Muc2l6ZTtcclxuICAgICAgICAgICAgbGluay5zdHlsZS5mb250U2l6ZSA9IGFyZ3Muc2l6ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpZWxkLmFwcGVuZENoaWxkKGZpZWxkQ29udGFpbmVyKTtcclxuICAgICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICB9XHJcblxyXG4gIG92ZXJyaWRlIGNyZWF0ZUZpZWxkSW5wdXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlIHx8IFwiXCI7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmllbGQtaGVhZGVyXCIpO1xyXG4gICAgXHJcblxyXG4gICAgcmV0dXJuIGlucHV0O1xyXG4gIH1cclxuXHJcbiAgb3ZlcnJpZGUgY3JlYXRlRmllbGRDb250YWluZXIoKSB7XHJcbiAgICBjb25zdCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmaWVsZC5jbGFzc0xpc3QuYWRkKFwibWV0YWRhdGEtaGVhZGVyZmllbGRcIik7XHJcbiAgICByZXR1cm4gZmllbGQ7XHJcbiAgfVxyXG5cclxuICBvdmVycmlkZSBjcmVhdGVGaWVsZExpbmsodmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgIGxpbmsuaW5uZXJIVE1MID0gdmFsdWUgfHwgXCJcIjtcclxuICAgIGxpbmsuY2xhc3NMaXN0LmFkZChcImZpZWxkLWhlYWRlcmxpbmtcIik7XHJcbiAgICBsaW5rLnN0eWxlLmN1cnNvciA9IHRoaXMuc3RhdGljID8gXCJkZWZhdWx0XCIgOiBcInRleHRcIjtcclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLnN0YXRpYykge1xyXG4gICAgICBsaW5rLm9uY2xpY2sgPSAoZXZlbnQpID0+IHRoaXMubW9kaWZ5RmllbGQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxpbms7XHJcbiAgfVxyXG5cclxuICBvdmVycmlkZSBtb2RpZnlGaWVsZChldmVudDogRXZlbnQpIHtcclxuICAgIGNvbnN0IGxpbmsgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcubWV0YWRhdGEtaGVhZGVyZmllbGQnKT8ucXVlcnlTZWxlY3RvcignLmZpZWxkLWhlYWRlcmxpbmsnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0IGlucHV0ID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLm1ldGFkYXRhLWhlYWRlcmZpZWxkJyk/LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1oZWFkZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgaWYgKGxpbmsgJiYgaW5wdXQpIHtcclxuICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGlucHV0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvdmVycmlkZSBoYW5kbGVGaWVsZElucHV0KHVwZGF0ZTogKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4sIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudCwgbGluazogSFRNTEVsZW1lbnQpIHtcclxuICAgIGlucHV0Lm9uYmx1ciA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUZpZWxkKHVwZGF0ZSwgaW5wdXQsIGxpbmspO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH07XHJcblxyXG4gICAgaW5wdXQub25rZXlkb3duID0gYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKChldmVudCBhcyBLZXlib2FyZEV2ZW50KS5rZXkgPT09IFwiRXNjYXBlXCIgfHwgKGV2ZW50IGFzIEtleWJvYXJkRXZlbnQpLmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGaWVsZCh1cGRhdGUsIGlucHV0LCBsaW5rKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=