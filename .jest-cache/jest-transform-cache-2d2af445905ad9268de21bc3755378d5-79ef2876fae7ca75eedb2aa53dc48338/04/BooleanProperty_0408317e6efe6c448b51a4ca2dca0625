ac7c513c3c096b32f83c5edc41cb2bd7
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BooleanProperty = void 0;
const Utils_1 = require("../vault/Utils");
const Property_1 = require("./Property");
class BooleanProperty extends Property_1.Property {
    constructor(name, vault, args = {}) {
        super(name, vault, args);
        this.type = "boolean";
    }
    fillDisplay(value, update, args) {
        const container = document.createElement('div');
        const button = document.createElement('span');
        button.style.cursor = 'pointer';
        button.style.userSelect = 'none';
        button.tabIndex = 0; // Make focusable for accessibility
        (0, Utils_1.setIcon)(button, this.icon);
        // Keep track of current state internally
        let currentValue = Boolean(value);
        const updateButtonState = (newValue) => {
            if (newValue) {
                button.classList.add('boolean-property-button-active');
            }
            else {
                button.classList.remove('boolean-property-button-active');
            }
        };
        // Set initial state
        updateButtonState(currentValue);
        if (!this.static) {
            button.onclick = async () => {
                currentValue = !currentValue;
                updateButtonState(currentValue);
                await update(currentValue);
            };
        }
        container.appendChild(button);
        return container;
    }
}
exports.BooleanProperty = BooleanProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEJvb2xlYW5Qcm9wZXJ0eS50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSwwQ0FBeUM7QUFDekMseUNBQXNDO0FBR3RDLE1BQWEsZUFBZ0IsU0FBUSxtQkFBUTtJQUl6QyxZQUFZLElBQVksRUFBRSxLQUFZLEVBQUUsSUFBSSxHQUFHLEVBQUU7UUFDN0MsS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFIYixTQUFJLEdBQVksU0FBUyxDQUFDO0lBSTFDLENBQUM7SUFFUyxXQUFXLENBQUMsS0FBVSxFQUFFLE1BQXFDLEVBQUUsSUFBVTtRQUMzRSxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hELE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUNqQyxNQUFNLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLG1DQUFtQztRQUN4RCxJQUFBLGVBQU8sRUFBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTNCLHlDQUF5QztRQUN6QyxJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbEMsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLFFBQWlCLEVBQUUsRUFBRTtZQUM1QyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNYLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFDM0QsQ0FBQztpQkFBTSxDQUFDO2dCQUNKLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFDOUQsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLG9CQUFvQjtRQUNwQixpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVoQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2YsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLElBQUksRUFBRTtnQkFDeEIsWUFBWSxHQUFHLENBQUMsWUFBWSxDQUFDO2dCQUM3QixpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDaEMsTUFBTSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0IsQ0FBQyxDQUFDO1FBQ04sQ0FBQztRQUVELFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztDQUNSO0FBekNELDBDQXlDQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXHNyY1xccHJvcGVydGllc1xcQm9vbGVhblByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldEljb24gfSBmcm9tICcuLi92YXVsdC9VdGlscyc7XHJcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSAnLi9Qcm9wZXJ0eSc7XHJcbmltcG9ydCB7IFZhdWx0IH0gZnJvbSAnLi4vdmF1bHQvVmF1bHQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJvb2xlYW5Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5IHtcclxuXHJcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdHlwZSA6IHN0cmluZyA9IFwiYm9vbGVhblwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmF1bHQ6IFZhdWx0LCBhcmdzID0ge30pIHtcclxuICAgICAgICBzdXBlcihuYW1lLCB2YXVsdCwgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgIG92ZXJyaWRlIGZpbGxEaXNwbGF5KHZhbHVlOiBhbnksIHVwZGF0ZTogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4sIGFyZ3M/IDoge30pIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi50YWJJbmRleCA9IDA7IC8vIE1ha2UgZm9jdXNhYmxlIGZvciBhY2Nlc3NpYmlsaXR5XHJcbiAgICAgICAgICAgIHNldEljb24oYnV0dG9uLCB0aGlzLmljb24pO1xyXG5cclxuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBjdXJyZW50IHN0YXRlIGludGVybmFsbHlcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IEJvb2xlYW4odmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlQnV0dG9uU3RhdGUgPSAobmV3VmFsdWU6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdib29sZWFuLXByb3BlcnR5LWJ1dHRvbi1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Jvb2xlYW4tcHJvcGVydHktYnV0dG9uLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGVcclxuICAgICAgICAgICAgdXBkYXRlQnV0dG9uU3RhdGUoY3VycmVudFZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0aWMpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9ICFjdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQnV0dG9uU3RhdGUoY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGUoY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgICAgIH1cclxufSJdLCJ2ZXJzaW9uIjozfQ==