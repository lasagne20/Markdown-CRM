{"version":3,"names":["cov_22kzlx0glp","s","waitForFileMetaDataUpdate","app","filePath","key","callback","f","attempts","maxAttempts","file","getFile","b","metadata","getMetadata","undefined","Promise","resolve","setTimeout","exports","waitForMetaDataCacheUpdate"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\vault\\Utils.ts"],"sourcesContent":["import { IApp } from \"../interfaces/IApp\";\r\n// Utility functions for file metadata operations\r\n\r\nexport const waitForFileMetaDataUpdate = async (\r\n    app: IApp,\r\n    filePath: string,\r\n    key: string,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que les métadonnées du fichier soient mises à jour\r\n    // Dans un environnement réel, ceci surveillerait les changements de métadonnées\r\n    let attempts = 0;\r\n    const maxAttempts = 50;\r\n    \r\n    while (attempts < maxAttempts) {\r\n        const file = await app.getFile(filePath);\r\n        if (file) {\r\n            const metadata = await app.getMetadata(file);\r\n            if (metadata && metadata[key] !== undefined) {\r\n                await callback();\r\n                return;\r\n            }\r\n        }\r\n        \r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        attempts++;\r\n    }\r\n    \r\n    // Si on n'arrive pas à détecter le changement, on exécute quand même le callback\r\n    await callback();\r\n};\r\n\r\nexport const waitForMetaDataCacheUpdate = async (\r\n    app: any,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que le cache des métadonnées soit mis à jour\r\n    // Simulation d'une attente courte\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    await callback();\r\n};\r\n"],"mappings":"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","ignoreList":[]}