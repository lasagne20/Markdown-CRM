bc71876e5e4d6fd2a7e7766d34cfea47
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MultiSelectProperty = void 0;
const Property_1 = require("./Property");
class MultiSelectProperty extends Property_1.Property {
    constructor(name, options, args = {}) {
        super(name, args);
        this.type = "multiSelect";
        this.options = options;
    }
    fillDisplay(vault, value, update) {
        this.vault = vault;
        const field = this.createFieldContainer();
        const fieldContainer = document.createElement("div");
        fieldContainer.classList.add("field-container-column");
        const header = document.createElement("div");
        header.classList.add("metadata-header");
        header.textContent = this.name;
        fieldContainer.appendChild(header);
        const buttonContainer = this.createButtonGroup(value, update);
        fieldContainer.appendChild(buttonContainer);
        field.appendChild(fieldContainer);
        return field;
    }
    getDefaultValue(vault) {
        for (let index in this.default) {
            if (this.default[index] == "personalName") {
                this.default[index] = vault.getPersonalName();
            }
        }
        return this.default;
    }
    // Crée le conteneur des boutons avec les options
    createButtonGroup(value, update) {
        const buttonContainer = document.createElement("div");
        buttonContainer.classList.add("multi-select-container");
        const selectedValues = new Set(value);
        this.options.forEach(option => {
            const button = document.createElement("button");
            button.classList.add("multi-select-button");
            button.textContent = option.name;
            if (selectedValues.has(option.name)) {
                button.classList.add("selected");
            }
            button.onclick = async () => {
                if (selectedValues.has(option.name)) {
                    selectedValues.delete(option.name);
                }
                else {
                    selectedValues.add(option.name);
                }
                await update([...selectedValues]);
                this.updateButtonState(buttonContainer, selectedValues);
            };
            buttonContainer.appendChild(button);
        });
        return buttonContainer;
    }
    // Met à jour l'affichage des boutons après sélection
    updateButtonState(container, selectedValues) {
        const buttons = container.querySelectorAll(".multi-select-button");
        buttons.forEach(button => {
            if (selectedValues.has(button.textContent || "")) {
                button.classList.add("selected");
            }
            else {
                button.classList.remove("selected");
            }
        });
    }
}
exports.MultiSelectProperty = MultiSelectProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXE11bHRpU2VsZWN0UHJvcGVydHkudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEseUNBQXNDO0FBSXRDLE1BQWEsbUJBQW9CLFNBQVEsbUJBQVE7SUFJN0MsWUFBWSxJQUFZLEVBQUUsT0FBMEMsRUFBRSxJQUFJLEdBQUcsRUFBRTtRQUMzRSxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBSE4sU0FBSSxHQUFZLGFBQWEsQ0FBQztRQUkxQyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUMzQixDQUFDO0lBRVEsV0FBVyxDQUFDLEtBQVUsRUFBRSxLQUFXLEVBQUUsTUFBMEM7UUFDcEYsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDMUMsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRCxjQUFjLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBRXZELE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUE7UUFDOUIsY0FBYyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVuQyxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzlELGNBQWMsQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUVsQyxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRVEsZUFBZSxDQUFDLEtBQWU7UUFDcEMsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFDLENBQUM7WUFDNUIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLGNBQWMsRUFBQyxDQUFDO2dCQUN2QyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUNsRCxDQUFDO1FBQ0wsQ0FBQztRQUVELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN4QixDQUFDO0lBRUQsaURBQWlEO0lBQ2pELGlCQUFpQixDQUFDLEtBQWUsRUFBRSxNQUEwQztRQUN6RSxNQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RELGVBQWUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFFeEQsTUFBTSxjQUFjLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDMUIsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztZQUVqQyxJQUFJLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ2xDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7WUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssSUFBSSxFQUFFO2dCQUN4QixJQUFJLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7b0JBQ2xDLGNBQWMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN2QyxDQUFDO3FCQUFNLENBQUM7b0JBQ0osY0FBYyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3BDLENBQUM7Z0JBRUQsTUFBTSxNQUFNLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsY0FBYyxDQUFDLENBQUM7WUFDNUQsQ0FBQyxDQUFDO1lBRUYsZUFBZSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sZUFBZSxDQUFDO0lBQzNCLENBQUM7SUFFRCxxREFBcUQ7SUFDckQsaUJBQWlCLENBQUMsU0FBc0IsRUFBRSxjQUEyQjtRQUNqRSxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNuRSxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3JCLElBQUksY0FBYyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQy9DLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7aUJBQU0sQ0FBQztnQkFDSixNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7QUFqRkQsa0RBaUZDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxwcm9wZXJ0aWVzXFxNdWx0aVNlbGVjdFByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSBcIi4vUHJvcGVydHlcIjtcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gXCIuLi92YXVsdC9GaWxlXCI7XHJcbmltcG9ydCB7IE15VmF1bHQgfSBmcm9tIFwiLi4vdmF1bHQvTXlWYXVsdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE11bHRpU2VsZWN0UHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcbiAgICBwdWJsaWMgb3B0aW9uczoge25hbWUgOiBzdHJpbmcsIGNvbG9yIDogc3RyaW5nfVtdO1xyXG4gICAgcHVibGljIG92ZXJyaWRlIHR5cGUgOiBzdHJpbmcgPSBcIm11bHRpU2VsZWN0XCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBvcHRpb25zOiB7bmFtZSA6IHN0cmluZywgY29sb3IgOiBzdHJpbmd9W10sIGFyZ3MgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUsIGFyZ3MpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgZmlsbERpc3BsYXkodmF1bHQ6IGFueSwgdmFsdWUgOiBhbnksIHVwZGF0ZTogKHZhbHVlOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTx2b2lkPikge1xyXG4gICAgICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuY3JlYXRlRmllbGRDb250YWluZXIoKTtcclxuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZmllbGRDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImZpZWxkLWNvbnRhaW5lci1jb2x1bW5cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJtZXRhZGF0YS1oZWFkZXJcIik7XHJcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gdGhpcy5uYW1lXHJcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGhpcy5jcmVhdGVCdXR0b25Hcm91cCh2YWx1ZSwgdXBkYXRlKTtcclxuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpO1xyXG4gICAgICAgIGZpZWxkLmFwcGVuZENoaWxkKGZpZWxkQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgfVxyXG5cclxuICAgIG92ZXJyaWRlIGdldERlZmF1bHRWYWx1ZSh2YXVsdCA6IE15VmF1bHQpe1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4IGluIHRoaXMuZGVmYXVsdCl7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHRbaW5kZXhdID09IFwicGVyc29uYWxOYW1lXCIpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0W2luZGV4XSA9IHZhdWx0LmdldFBlcnNvbmFsTmFtZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3LDqWUgbGUgY29udGVuZXVyIGRlcyBib3V0b25zIGF2ZWMgbGVzIG9wdGlvbnNcclxuICAgIGNyZWF0ZUJ1dHRvbkdyb3VwKHZhbHVlOiBzdHJpbmdbXSwgdXBkYXRlOiAodmFsdWU6IHN0cmluZ1tdKSA9PiBQcm9taXNlPHZvaWQ+KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtdWx0aS1zZWxlY3QtY29udGFpbmVyXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IG5ldyBTZXQodmFsdWUpOyBcclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtdWx0aS1zZWxlY3QtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBvcHRpb24ubmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5oYXMob3B0aW9uLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBidXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5oYXMob3B0aW9uLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMuZGVsZXRlKG9wdGlvbi5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMuYWRkKG9wdGlvbi5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGUoWy4uLnNlbGVjdGVkVmFsdWVzXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblN0YXRlKGJ1dHRvbkNvbnRhaW5lciwgc2VsZWN0ZWRWYWx1ZXMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBidXR0b25Db250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWV0IMOgIGpvdXIgbCdhZmZpY2hhZ2UgZGVzIGJvdXRvbnMgYXByw6hzIHPDqWxlY3Rpb25cclxuICAgIHVwZGF0ZUJ1dHRvblN0YXRlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNlbGVjdGVkVmFsdWVzOiBTZXQ8c3RyaW5nPikge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5tdWx0aS1zZWxlY3QtYnV0dG9uXCIpO1xyXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMuaGFzKGJ1dHRvbi50ZXh0Q29udGVudCB8fCBcIlwiKSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=