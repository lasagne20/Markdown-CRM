{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\vault\\Utils.ts","mappings":";;;AACA,iDAAiD;AAE1C,MAAM,yBAAyB,GAAG,KAAK,EAC1C,GAAS,EACT,QAAgB,EAChB,GAAW,EACX,QAA6B,EAChB,EAAE;IACf,8DAA8D;IAC9D,gFAAgF;IAChF,IAAI,QAAQ,GAAG,CAAC,CAAC;IACjB,MAAM,WAAW,GAAG,EAAE,CAAC;IAEvB,IAAI,CAAC;QACD,OAAO,QAAQ,GAAG,WAAW,EAAE,CAAC;YAC5B,IAAI,CAAC;gBACD,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACzC,IAAI,IAAI,EAAE,CAAC;oBACP,MAAM,QAAQ,GAAG,MAAM,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;oBAC7C,IAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE,CAAC;wBAC1C,IAAI,CAAC;4BACD,MAAM,QAAQ,EAAE,CAAC;wBACrB,CAAC;wBAAC,OAAO,KAAK,EAAE,CAAC;4BACb,oCAAoC;4BACpC,OAAO,CAAC,IAAI,CAAC,8CAA8C,EAAE,KAAK,CAAC,CAAC;wBACxE,CAAC;wBACD,OAAO;oBACX,CAAC;gBACL,CAAC;YACL,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACb,uCAAuC;gBACvC,OAAO,CAAC,IAAI,CAAC,iDAAiD,EAAE,KAAK,CAAC,CAAC;gBACvE,MAAM;YACV,CAAC;YAED,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;YACvD,QAAQ,EAAE,CAAC;QACf,CAAC;QAED,iFAAiF;QACjF,IAAI,CAAC;YACD,MAAM,QAAQ,EAAE,CAAC;QACrB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACb,oCAAoC;YACpC,OAAO,CAAC,IAAI,CAAC,8CAA8C,EAAE,KAAK,CAAC,CAAC;QACxE,CAAC;IACL,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACb,qCAAqC;QACrC,OAAO,CAAC,IAAI,CAAC,gDAAgD,EAAE,KAAK,CAAC,CAAC;IAC1E,CAAC;AACL,CAAC,CAAC;AAhDW,QAAA,yBAAyB,6BAgDpC;AAEK,MAAM,0BAA0B,GAAG,KAAK,EAC3C,GAAQ,EACR,QAA6B,EAChB,EAAE;IACf,wDAAwD;IACxD,kCAAkC;IAClC,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;IACvD,6DAA6D;IAC7D,MAAM,QAAQ,EAAE,CAAC;AACrB,CAAC,CAAC;AATW,QAAA,0BAA0B,8BASrC","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\vault\\Utils.ts"],"sourcesContent":["import { IApp } from \"../interfaces/IApp\";\r\n// Utility functions for file metadata operations\r\n\r\nexport const waitForFileMetaDataUpdate = async (\r\n    app: IApp,\r\n    filePath: string,\r\n    key: string,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que les métadonnées du fichier soient mises à jour\r\n    // Dans un environnement réel, ceci surveillerait les changements de métadonnées\r\n    let attempts = 0;\r\n    const maxAttempts = 50;\r\n    \r\n    try {\r\n        while (attempts < maxAttempts) {\r\n            try {\r\n                const file = await app.getFile(filePath);\r\n                if (file) {\r\n                    const metadata = await app.getMetadata(file);\r\n                    if (metadata && metadata[key] !== undefined) {\r\n                        try {\r\n                            await callback();\r\n                        } catch (error) {\r\n                            // Handle callback errors gracefully\r\n                            console.warn('Callback error in waitForFileMetaDataUpdate:', error);\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                // Handle file access errors gracefully\r\n                console.warn('File access error in waitForFileMetaDataUpdate:', error);\r\n                break;\r\n            }\r\n            \r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            attempts++;\r\n        }\r\n        \r\n        // Si on n'arrive pas à détecter le changement, on exécute quand même le callback\r\n        try {\r\n            await callback();\r\n        } catch (error) {\r\n            // Handle callback errors gracefully\r\n            console.warn('Callback error in waitForFileMetaDataUpdate:', error);\r\n        }\r\n    } catch (error) {\r\n        // Handle any other errors gracefully\r\n        console.warn('Unexpected error in waitForFileMetaDataUpdate:', error);\r\n    }\r\n};\r\n\r\nexport const waitForMetaDataCacheUpdate = async (\r\n    app: any,\r\n    callback: () => Promise<void>\r\n): Promise<void> => {\r\n    // Attendre que le cache des métadonnées soit mis à jour\r\n    // Simulation d'une attente courte\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    // Let callback errors propagate to caller - don't catch them\r\n    await callback();\r\n};\r\n"],"version":3}