681fc26ec056b4e27e42b2642a235bd8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.waitForMetaDataCacheUpdate = exports.waitForFileMetaDataUpdate = void 0;
// Utility functions for file metadata operations
const waitForFileMetaDataUpdate = async (app, filePath, key, callback) => {
    // Attendre que les métadonnées du fichier soient mises à jour
    // Dans un environnement réel, ceci surveillerait les changements de métadonnées
    let attempts = 0;
    const maxAttempts = 50;
    while (attempts < maxAttempts) {
        const file = app.vault.getAbstractFileByPath(filePath);
        if (file) {
            const metadata = app.metadataCache.getFileCache(file)?.frontmatter;
            if (metadata && metadata[key] !== undefined) {
                await callback();
                return;
            }
        }
        await new Promise(resolve => setTimeout(resolve, 100));
        attempts++;
    }
    // Si on n'arrive pas à détecter le changement, on exécute quand même le callback
    await callback();
};
exports.waitForFileMetaDataUpdate = waitForFileMetaDataUpdate;
const waitForMetaDataCacheUpdate = async (app, callback) => {
    // Attendre que le cache des métadonnées soit mis à jour
    // Simulation d'une attente courte
    await new Promise(resolve => setTimeout(resolve, 100));
    await callback();
};
exports.waitForMetaDataCacheUpdate = waitForMetaDataCacheUpdate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHZhdWx0XFxVdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSxpREFBaUQ7QUFFMUMsTUFBTSx5QkFBeUIsR0FBRyxLQUFLLEVBQzFDLEdBQVMsRUFDVCxRQUFnQixFQUNoQixHQUFXLEVBQ1gsUUFBNkIsRUFDaEIsRUFBRTtJQUNmLDhEQUE4RDtJQUM5RCxnRkFBZ0Y7SUFDaEYsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUV2QixPQUFPLFFBQVEsR0FBRyxXQUFXLEVBQUUsQ0FBQztRQUM1QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZELElBQUksSUFBSSxFQUFFLENBQUM7WUFDUCxNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxXQUFXLENBQUM7WUFDbkUsSUFBSSxRQUFRLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsRUFBRSxDQUFDO2dCQUMxQyxNQUFNLFFBQVEsRUFBRSxDQUFDO2dCQUNqQixPQUFPO1lBQ1gsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELFFBQVEsRUFBRSxDQUFDO0lBQ2YsQ0FBQztJQUVELGlGQUFpRjtJQUNqRixNQUFNLFFBQVEsRUFBRSxDQUFDO0FBQ3JCLENBQUMsQ0FBQztBQTNCVyxRQUFBLHlCQUF5Qiw2QkEyQnBDO0FBRUssTUFBTSwwQkFBMEIsR0FBRyxLQUFLLEVBQzNDLEdBQVEsRUFDUixRQUE2QixFQUNoQixFQUFFO0lBQ2Ysd0RBQXdEO0lBQ3hELGtDQUFrQztJQUNsQyxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELE1BQU0sUUFBUSxFQUFFLENBQUM7QUFDckIsQ0FBQyxDQUFDO0FBUlcsUUFBQSwwQkFBMEIsOEJBUXJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFx2YXVsdFxcVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElBcHAgZnJvbSBcIi4vaW50ZXJmYWNlcy9JQXBwXCI7XHJcbi8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBmaWxlIG1ldGFkYXRhIG9wZXJhdGlvbnNcclxuXHJcbmV4cG9ydCBjb25zdCB3YWl0Rm9yRmlsZU1ldGFEYXRhVXBkYXRlID0gYXN5bmMgKFxyXG4gICAgYXBwOiBJQXBwLFxyXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcclxuICAgIGtleTogc3RyaW5nLFxyXG4gICAgY2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD5cclxuKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAvLyBBdHRlbmRyZSBxdWUgbGVzIG3DqXRhZG9ubsOpZXMgZHUgZmljaGllciBzb2llbnQgbWlzZXMgw6Agam91clxyXG4gICAgLy8gRGFucyB1biBlbnZpcm9ubmVtZW50IHLDqWVsLCBjZWNpIHN1cnZlaWxsZXJhaXQgbGVzIGNoYW5nZW1lbnRzIGRlIG3DqXRhZG9ubsOpZXNcclxuICAgIGxldCBhdHRlbXB0cyA9IDA7XHJcbiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDUwO1xyXG4gICAgXHJcbiAgICB3aGlsZSAoYXR0ZW1wdHMgPCBtYXhBdHRlbXB0cykge1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XHJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG4gICAgICAgIGF0dGVtcHRzKys7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFNpIG9uIG4nYXJyaXZlIHBhcyDDoCBkw6l0ZWN0ZXIgbGUgY2hhbmdlbWVudCwgb24gZXjDqWN1dGUgcXVhbmQgbcOqbWUgbGUgY2FsbGJhY2tcclxuICAgIGF3YWl0IGNhbGxiYWNrKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgd2FpdEZvck1ldGFEYXRhQ2FjaGVVcGRhdGUgPSBhc3luYyAoXHJcbiAgICBhcHA6IGFueSxcclxuICAgIGNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+XHJcbik6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgLy8gQXR0ZW5kcmUgcXVlIGxlIGNhY2hlIGRlcyBtw6l0YWRvbm7DqWVzIHNvaXQgbWlzIMOgIGpvdXJcclxuICAgIC8vIFNpbXVsYXRpb24gZCd1bmUgYXR0ZW50ZSBjb3VydGVcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcclxuICAgIGF3YWl0IGNhbGxiYWNrKCk7XHJcbn07XHJcbiJdLCJ2ZXJzaW9uIjozfQ==