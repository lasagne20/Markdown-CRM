10fad5e4b76e43c90bc48706bc54cdeb
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BooleanProperty = void 0;
const Utils_1 = require("../vault/Utils");
const Property_1 = require("./Property");
class BooleanProperty extends Property_1.Property {
    constructor(name, args = {}) {
        super(name, args);
        this.type = "boolean";
    }
    fillDisplay(vault, value, update, args) {
        this.vault = vault;
        const container = document.createElement('div');
        const button = document.createElement('span');
        button.style.cursor = 'pointer';
        button.style.userSelect = 'none';
        button.tabIndex = 0; // Make focusable for accessibility
        (0, Utils_1.setIcon)(button, this.icon);
        // Keep track of current state internally
        let currentValue = Boolean(value);
        const updateButtonState = (newValue) => {
            if (newValue) {
                button.classList.add('boolean-property-button-active');
            }
            else {
                button.classList.remove('boolean-property-button-active');
            }
        };
        // Set initial state
        updateButtonState(currentValue);
        if (!this.static) {
            button.onclick = async () => {
                currentValue = !currentValue;
                updateButtonState(currentValue);
                await update(currentValue);
            };
        }
        container.appendChild(button);
        return container;
    }
}
exports.BooleanProperty = BooleanProperty;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxzcmNcXHByb3BlcnRpZXNcXEJvb2xlYW5Qcm9wZXJ0eS50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSwwQ0FBeUM7QUFDekMseUNBQXNDO0FBRXRDLE1BQWEsZUFBZ0IsU0FBUSxtQkFBUTtJQUl6QyxZQUFZLElBQVksRUFBRSxJQUFJLEdBQUcsRUFBRTtRQUMvQixLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBSE4sU0FBSSxHQUFZLFNBQVMsQ0FBQztJQUkxQyxDQUFDO0lBRVMsV0FBVyxDQUFDLEtBQVcsRUFBRSxLQUFVLEVBQUUsTUFBcUMsRUFBRSxJQUFVO1FBQ3hGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7UUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsbUNBQW1DO1FBQ3hELElBQUEsZUFBTyxFQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFM0IseUNBQXlDO1FBQ3pDLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVsQyxNQUFNLGlCQUFpQixHQUFHLENBQUMsUUFBaUIsRUFBRSxFQUFFO1lBQzVDLElBQUksUUFBUSxFQUFFLENBQUM7Z0JBQ1gsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztZQUMzRCxDQUFDO2lCQUFNLENBQUM7Z0JBQ0osTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztZQUM5RCxDQUFDO1FBQ0wsQ0FBQyxDQUFDO1FBRUYsb0JBQW9CO1FBQ3BCLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRWhDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDZixNQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssSUFBSSxFQUFFO2dCQUN4QixZQUFZLEdBQUcsQ0FBQyxZQUFZLENBQUM7Z0JBQzdCLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNoQyxNQUFNLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMvQixDQUFDLENBQUM7UUFDTixDQUFDO1FBRUQsU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0NBQ1I7QUExQ0QsMENBMENDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGVvZHVcXERvY3VtZW50c1xcMSAtIFByb1xcVGVzdCBwbHVnaW4gb2JzaWRpYW5cXC5vYnNpZGlhblxccGx1Z2luc1xcb2JzaWRpYW4tQ1JNXFxkeW5hbWljLWZpZWxkc1xcc3JjXFxwcm9wZXJ0aWVzXFxCb29sZWFuUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJy4uL3ZhdWx0L1V0aWxzJztcclxuaW1wb3J0IHsgUHJvcGVydHkgfSBmcm9tICcuL1Byb3BlcnR5JztcclxuXHJcbmV4cG9ydCBjbGFzcyBCb29sZWFuUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcblxyXG4gICAgcHVibGljIG92ZXJyaWRlIHR5cGUgOiBzdHJpbmcgPSBcImJvb2xlYW5cIjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3MgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgICBvdmVycmlkZSBmaWxsRGlzcGxheSh2YXVsdCA6IGFueSwgdmFsdWU6IGFueSwgdXBkYXRlOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPiwgYXJncz8gOiB7fSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBidXR0b24udGFiSW5kZXggPSAwOyAvLyBNYWtlIGZvY3VzYWJsZSBmb3IgYWNjZXNzaWJpbGl0eVxyXG4gICAgICAgICAgICBzZXRJY29uKGJ1dHRvbiwgdGhpcy5pY29uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgY3VycmVudCBzdGF0ZSBpbnRlcm5hbGx5XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUJ1dHRvblN0YXRlID0gKG5ld1ZhbHVlOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYm9vbGVhbi1wcm9wZXJ0eS1idXR0b24tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdib29sZWFuLXByb3BlcnR5LWJ1dHRvbi1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXHJcbiAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSAhY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbn0iXSwidmVyc2lvbiI6M30=