{"version":3,"names":["cov_1j382nr9so","actualCoverage","s","Property_1","require","SelectProperty","Property","constructor","name","vault","options","args","b","f","type","fillDisplay","value","update","field","createFieldContainer","fieldContainer","document","createElement","classList","add","title","header","textContent","appendChild","selectElement","createSelectWidget","selectedOption","find","option","style","backgroundColor","color","length","forEach","optionElement","selected","onchange","event","selectedValue","target","static","disabled","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\SelectProperty.ts"],"sourcesContent":["import { File } from \"../vault/File\";\r\nimport { Property } from \"./Property\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\nexport class SelectProperty extends Property {\r\n    public options: {name : string, color : string}[];\r\n    public override type : string = \"select\";\r\n\r\n    constructor(name: string, vault: Vault, options: {name : string, color : string}[], args = {}) {\r\n        super(name, vault, args);\r\n        this.options = options;\r\n    }\r\n\r\n    override fillDisplay(value : any, update: (value: string) => Promise<void>) {\r\n        const field = this.createFieldContainer();\r\n        const fieldContainer = document.createElement(\"div\");\r\n        fieldContainer.classList.add(\"field-container-column\");\r\n\r\n        if (this.title) {\r\n            const header = document.createElement(\"div\");\r\n            header.classList.add(\"metadata-header\");\r\n            header.textContent = this.title;\r\n            fieldContainer.appendChild(header);\r\n        }\r\n\r\n        const selectElement = this.createSelectWidget(value, update);\r\n        fieldContainer.appendChild(selectElement);\r\n        field.appendChild(fieldContainer);\r\n\r\n        return field;\r\n    }\r\n\r\n    // Crée le widget de sélection avec une liste déroulante\r\n    createSelectWidget(value: string, update: (value: string) => Promise<void>): HTMLSelectElement {\r\n        const selectElement = document.createElement(\"select\");\r\n        selectElement.classList.add(\"select-dropdown\");\r\n        // Appliquer la couleur de l'option sélectionnée\r\n        if (value) {\r\n            const selectedOption = this.options.find(option => option.name === value);\r\n            if (selectedOption) {\r\n            selectElement.style.backgroundColor = selectedOption.color;\r\n            }\r\n        }\r\n        else {\r\n            if (this.options.length > 0) {\r\n                selectElement.style.backgroundColor = this.options[0].color;\r\n                // Met à jour avec la première valeur de la liste\r\n                update(this.options[0].name);\r\n            }\r\n        }\r\n\r\n        // Ajouter les options de la liste\r\n        this.options.forEach(option => {\r\n            const optionElement = document.createElement(\"option\");\r\n            optionElement.classList.add(\"select-dropdown-option\")\r\n            optionElement.value = option.name;\r\n            optionElement.textContent = option.name;\r\n            optionElement.style.backgroundColor = option.color;\r\n\r\n\r\n            // Si la valeur est déjà sélectionnée, l'option sera sélectionnée\r\n            if (option.name === value) {\r\n                optionElement.selected = true;\r\n            }\r\n\r\n            selectElement.appendChild(optionElement);\r\n        });\r\n\r\n\r\n        // Gérer le changement de valeur\r\n        selectElement.onchange = async (event) => {\r\n            const selectedValue = (event.target as HTMLSelectElement).value;\r\n            // Met à jour la couleur de l'option sélectionnée\r\n            const selectedOption = this.options.find(option => option.name === selectedValue);\r\n            if (selectedOption) {\r\n                selectElement.style.backgroundColor = selectedOption.color;\r\n            }\r\n            await update(selectedValue);\r\n        };\r\n\r\n        // Bloquer l'affichage de la liste si this.static est faux\r\n        if (this.static) {\r\n            selectElement.disabled = true;\r\n        }\r\n\r\n        return selectElement;\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]}