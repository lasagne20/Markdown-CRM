{"version":3,"names":["cov_113us7iguo","actualCoverage","s","MediaProperty_1","require","ThreeDModelProperty","MediaProperty","constructor","name","vault","args","b","icon","create","f","type","render3DModel","mediaPath","container","fileExists","app","getFile","errorDiv","document","createElement","textContent","console","error","style","textAlign","margin","color","appendChild","embed","classList","add","renderer","THREE","WebGLRenderer","canvas","alpha","antialias","setSize","scene","Scene","camera","PerspectiveCamera","position","set","up","lookAt","directions","forEach","dir","light","DirectionalLight","target","ambientLight","AmbientLight","loader","GLTFLoader","model","animationActive","controls","OrbitControls","domElement","enableDamping","dampingFactor","enableZoom","enablePan","enableRotate","minPolarAngle","maxPolarAngle","Math","PI","load","getAbsolutePath","gltf","traverse","child","isMesh","material","materials","Array","isArray","mat","transparent","opacity","box","Box3","setFromObject","center","Vector3","size","getCenter","getSize","sub","maxDim","max","x","y","z","targetFill","viewHeight","tan","fov","desiredSize","scale","setScalar","animate","requestAnimationFrame","rotation","update","render","newBox","newCenter","undefined","addEventListener","fillDisplay","value","file","mediaFile","getMediaFromLink","readLinkFile","extension","split","pop","toLowerCase","includes","exports"],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\3DModelProperty.ts"],"sourcesContent":["import { Vault } from \"vault/Vault\";\r\nimport { MediaProperty } from \"./MediaProperty\";\r\n\r\n// Déclarations temporaires pour les dépendances 3D\r\ndeclare const THREE: any;\r\ndeclare const GLTFLoader: any;\r\ndeclare const OrbitControls: any;\r\ndeclare const FreecadFile: any;\r\ndeclare const shell: any;\r\n\r\nexport class ThreeDModelProperty extends MediaProperty {\r\n    \r\n    public override type: string = \"3dmodel\";\r\n\r\n    constructor(name: string, vault : Vault, args: { icon?: string; display?: string; create?: string} = {icon: \"box\", create: \"\"}) {\r\n        super(name, vault, args);\r\n    }\r\n\r\n    /**\r\n     * Renders a 3D model using THREE.js\r\n     */\r\n    protected render3DModel(mediaPath: string, container: HTMLDivElement): void {\r\n        // Check if the file exists in the vault before trying to load it\r\n        const fileExists = this.vault.app.getFile(mediaPath);\r\n        if (!fileExists) {\r\n            const errorDiv = document.createElement(\"div\");\r\n            errorDiv.textContent = `Rendu 3D introuvable. Ouvrir le fichier dans FreeCAD pour le créer.`;\r\n            console.error(\"3D model file not found:\", mediaPath);\r\n            errorDiv.style.textAlign = \"center\";\r\n            errorDiv.style.margin = \"40px auto\";\r\n            errorDiv.style.color = \"#c00\";\r\n            container.appendChild(errorDiv);\r\n            return;\r\n        }\r\n\r\n        const embed = document.createElement(\"canvas\");\r\n        embed.classList.add(\"embed-media\");\r\n        container.appendChild(embed);\r\n        \r\n        const renderer = new THREE.WebGLRenderer({ canvas: embed, alpha: true, antialias: true });\r\n        renderer.setSize(300, 300);\r\n\r\n        const scene = new THREE.Scene();\r\n        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 100);\r\n        // Position the camera directly above, looking down the -Z axis\r\n        camera.position.set(0, 10, 0);\r\n        camera.up.set(0, 0, -1); // Make Z axis \"up\" for the camera\r\n        camera.lookAt(0, 0, 0);\r\n\r\n        // Add multiple directional lights from different directions for even illumination\r\n        const directions = [\r\n            [0, 10, 0],    // Top\r\n            [0, -10, 0],   // Bottom\r\n            [10, 0, 0],    // Right\r\n            [-10, 0, 0],   // Left\r\n            [0, 0, 10],    // Front\r\n            [0, 0, -10],   // Back\r\n        ];\r\n        directions.forEach(dir => {\r\n            const light = new THREE.DirectionalLight(0xffffff, 1);\r\n            light.position.set(dir[0], dir[1], dir[2]);\r\n            light.target.position.set(0, 0, 0);\r\n            scene.add(light);\r\n            scene.add(light.target);\r\n        });\r\n        \r\n        // Optionally add a soft ambient light for subtle fill\r\n        const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);\r\n        scene.add(ambientLight);\r\n\r\n        const loader = new GLTFLoader();\r\n        let model: any;\r\n        let animationActive = true; // Track animation state\r\n        const controls = new OrbitControls(camera, renderer.domElement);\r\n        controls.enableDamping = true; // Smooth rotation\r\n        controls.dampingFactor = 0.05;\r\n        controls.enableZoom = true;\r\n        controls.enablePan = true;\r\n        controls.enableRotate = true;\r\n        controls.minPolarAngle = 0; // Permet toutes les rotations verticales\r\n        controls.maxPolarAngle = Math.PI; // Permet toutes les rotations verticales\r\n        controls.target.set(0, 0, 0);\r\n\r\n        loader.load(\r\n            this.vault.app.getAbsolutePath(mediaPath),\r\n            (gltf: any) => {\r\n                model = gltf.scene;\r\n                model.traverse((child: any) => {\r\n                    if (child.isMesh && child.material) {\r\n                        // Handle both array and single material\r\n                        const materials = Array.isArray(child.material) ? child.material : [child.material];\r\n                        for (const mat of materials) {\r\n                            if (mat.transparent || mat.opacity < 0.5) {\r\n                                // Set mesh to be fully visible (opaque)\r\n                                mat.opacity = 1;\r\n                                mat.transparent = false;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Automatically center the model\r\n                const box = new THREE.Box3().setFromObject(model);\r\n                const center = new THREE.Vector3();\r\n                const size = new THREE.Vector3();\r\n                box.getCenter(center);\r\n                box.getSize(size);\r\n\r\n                // Center the model at the origin\r\n                model.position.sub(center);\r\n\r\n                // Scale model to fill 80% of the 300x300 area\r\n                const maxDim = Math.max(size.x, size.y, size.z);\r\n                const targetFill = 0.8;\r\n                const viewHeight = 2 * camera.position.y * Math.tan((camera.fov * Math.PI) / 360);\r\n                const desiredSize = viewHeight * targetFill;\r\n                const scale = desiredSize / maxDim;\r\n                model.scale.setScalar(scale);\r\n\r\n                scene.add(model);\r\n\r\n                // Animation function\r\n                const animate = () => {\r\n                    if (animationActive) {\r\n                        requestAnimationFrame(animate);\r\n                        // Rotate the model\r\n                        if (model) {\r\n                            model.rotation.z += 0.01; // Rotate around Z-axis\r\n                        }\r\n                        controls.update(); // Update camera controls\r\n                        renderer.render(scene, camera);\r\n                    }\r\n                };\r\n                animate();\r\n\r\n                // Reset model position and rotation after loading\r\n                model.rotation.set(0, 0, 0);\r\n\r\n                // Recalculate bounding box after positioning\r\n                const newBox = new THREE.Box3().setFromObject(model);\r\n                const newCenter = new THREE.Vector3();\r\n                newBox.getCenter(newCenter);\r\n                model.position.sub(newCenter);\r\n\r\n                controls.update();\r\n            },\r\n            undefined,\r\n            (error: any) => {\r\n                console.error(\"Erreur lors du chargement du modèle 3D:\", error);\r\n                const errorDiv = document.createElement(\"div\");\r\n                errorDiv.textContent = \"Erreur lors du chargement du modèle 3D\";\r\n                errorDiv.style.textAlign = \"center\";\r\n                errorDiv.style.margin = \"40px auto\";\r\n                errorDiv.style.color = \"#c00\";\r\n                container.appendChild(errorDiv);\r\n            }\r\n        );\r\n\r\n        // Add interaction controls\r\n        embed.addEventListener(\"mouseenter\", () => {\r\n            animationActive = false;\r\n        });\r\n\r\n        embed.addEventListener(\"mouseleave\", () => {\r\n            animationActive = true;\r\n        });\r\n    }\r\n\r\n    override fillDisplay(value: any, update: (value: any) => Promise<void>, file: any = null): HTMLDivElement {\r\n        \r\n        const mediaFile = this.vault.getMediaFromLink(value);\r\n        if (!mediaFile) {\r\n            return super.fillDisplay(value, update, file);\r\n        }\r\n\r\n        const mediaPath = this.vault.readLinkFile(value, true);\r\n        if (!mediaPath) {\r\n            return super.fillDisplay(value, update, file);\r\n        }\r\n        const extension = mediaPath.split('.').pop()?.toLowerCase();\r\n\r\n        // Check if it's a 3D model file\r\n        if (['gltf', 'glb'].includes(extension || '')) {\r\n            const container = document.createElement(\"div\");\r\n            container.classList.add(\"embed-container\");\r\n            this.render3DModel(mediaPath, container);\r\n            return container;\r\n        }\r\n\r\n        // For non-3D files, use the parent MediaProperty behavior\r\n        return super.fillDisplay(value, update, file);\r\n    }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}