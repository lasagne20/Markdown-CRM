{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiMediaProperty.ts","mappings":";;;AAIA,2DAAwD;AACxD,mDAAgD;AAShD,MAAa,kBAAmB,SAAQ,qCAAiB;IAOrD,YAAY,IAAY,EAAE,KAAa,EAAE,IAAI,GAAG,EAAE;QAC9C,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;QANjB,SAAI,GAAY,YAAY,CAAC;QAE7B,aAAQ,GAAG,CAAC,CAAC;QAKzB,IAAI,CAAC,QAAQ,GAAG,IAAI,6BAAa,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IACzD,CAAC;IAED,8CAA8C;IACrC,WAAW,CAAC,MAAW,EAAE,MAAqC;QACnE,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChD,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,gCAAgC,GAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;QAClF,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAEzD,2BAA2B;QAC3B,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QAE9C,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QAClE,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAEjC,OAAO,SAAS,CAAC;IACrB,CAAC;IAEQ,aAAa,CAAC,MAAW,EAAE,MAAqC,EAAE,SAAyB;QAChG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO;QAC1D,MAAM,CAAC,OAAO,CAAC,CAAC,OAAY,EAAE,KAAa,EAAE,EAAE;YAC3C,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;YAC5E,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACP,CAAC;IAEQ,eAAe,CAAC,MAAW,EAAE,MAAqC,EAAE,KAAU,EAAE,KAAa,EAAE,SAAyB;QAC7H,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAEpD,mCAAmC;QACnC,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;QAC/E,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAI9B,IAAI,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACtD,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QACvE,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,EAAE,KAAK,EAAE,KAAW,EAAE,EAAE,CAAC,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAC7J,GAAG,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;QAEnC,OAAO,GAAG,CAAC;IACf,CAAC;IAEQ,kBAAkB,CAAC,MAAW,EAAE,MAAqC,EAAE,KAAa,EAAE,SAAyB;QACpH,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACtD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAC9C,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QAClE,YAAY,CAAC,OAAO,GAAG,KAAK,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;QAC/F,OAAO,YAAY,CAAC;IACxB,CAAC;IAEQ,KAAK,CAAC,WAAW,CAAC,MAAW,EAAE,MAAqC,EAAE,SAAyB;QACpG,IAAI,OAAO,GAAG,MAAM,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,sBAAsB,CAAC,CAAC;QAC/E,IAAI,OAAO,EAAE,CAAC;YACV,IAAI,CAAC,MAAM,EAAC,CAAC;gBAAA,MAAM,GAAG,EAAE,CAAA;YAAA,CAAC;YACzB,MAAM,CAAC,IAAI,CAAC,KAAK,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC;YACnD,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC;YACrB,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;QAC5C,CAAC;IACL,CAAC;IAEQ,eAAe,CAAC,MAAW,EAAE,MAAqC,EAAE,SAAyB;QAClG,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACnD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC1C,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;QAC5D,SAAS,CAAC,OAAO,GAAG,KAAK,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QAClF,OAAO,SAAS,CAAC;IACrB,CAAC;IAEQ,iBAAiB;QACtB,wBAAwB;IAC5B,CAAC;CACJ;AAlFD,gDAkFC","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\src\\properties\\MultiMediaProperty.ts"],"sourcesContent":["\r\nimport { ObjectProperty } from \"./ObjectProperty\";\r\nimport { FileProperty } from \"./FileProperty\";\r\nimport { File } from \"../vault/File\";\r\nimport { MultiFileProperty } from \"./MultiFileProperty\";\r\nimport { MediaProperty } from \"./MediaProperty\";\r\nimport { Vault } from \"../vault/Vault\";\r\n\r\n// Declare selectMedia as external function for TypeScript\r\ndeclare global {\r\n    var selectMedia: (vault: any, title: string) => Promise<any>;\r\n}\r\n\r\n\r\nexport class MultiMediaProperty extends MultiFileProperty {\r\n\r\n    public override type : string = \"multiMedia\";\r\n    public override property : MediaProperty;\r\n    public override flexSpan = 2;\r\n\r\n\r\n    constructor(name: string, vault : Vault, args = {}){\r\n        super(name, vault, [], args);\r\n        this.property = new MediaProperty(name, vault, args);\r\n    }\r\n\r\n    // Méthode principale pour obtenir l'affichage\r\n    override fillDisplay(values: any, update: (value: any) => Promise<void>) {\r\n        const container = document.createElement(\"div\");\r\n        container.classList.add(\"metadata-multiFiles-container-\"+this.name.toLowerCase());\r\n        container.classList.add(\"metadata-multiFiles-container\");\r\n\r\n        // Créer les lignes d'objet\r\n        this.createObjects(values, update, container);\r\n\r\n        const addButton = this.createAddButton(values, update, container);\r\n        container.appendChild(addButton);\r\n\r\n        return container;\r\n    }\r\n\r\n    override createObjects(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        if (!Array.isArray(values) || values.length === 0) return;\r\n        values.forEach((objects: any, index: number) => {\r\n            const row = this.createObjectRow(values, update, objects, index, container);\r\n            container.appendChild(row);\r\n        });\r\n    }\r\n\r\n    override createObjectRow(values: any, update: (value: any) => Promise<void>, value: any, index: number, container: HTMLDivElement): HTMLDivElement {\r\n        const row = document.createElement(\"div\");\r\n        row.classList.add(\"metadata-multiFiles-row-inline\");\r\n\r\n        // Ajouter le bouton de suppression\r\n        const deleteButton = this.createDeleteButton(values, update, index, container);\r\n        row.appendChild(deleteButton);\r\n\r\n\r\n \r\n        let propertyContainer = document.createElement(\"div\");\r\n        propertyContainer.classList.add(\"metadata-multiFiles-property-inline\");\r\n        propertyContainer.appendChild(this.property.fillDisplay(value, async (value : any) => await this.updateObject(values, update, index, this.property, value)));\r\n        row.appendChild(propertyContainer);\r\n\r\n        return row;\r\n    }\r\n\r\n    override createDeleteButton(values: any, update: (value: any) => Promise<void>, index: number, container: HTMLDivElement): HTMLButtonElement {\r\n        const deleteButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(deleteButton, \"minus\");\r\n        deleteButton.classList.add(\"metadata-delete-button-inline-small\");\r\n        deleteButton.onclick = async () => await this.removeProperty(values, update, index, container);\r\n        return deleteButton;\r\n    }\r\n\r\n    override async addProperty(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement) {\r\n        let newFile = await globalThis.selectMedia(this.vault, \"Choisissez un media \");\r\n        if (newFile) {\r\n            if (!values){values = []}\r\n            values.push(`[[${newFile.path}|${newFile.name}]]`);\r\n            await update(values);\r\n            await this.reloadObjects(values, update)\r\n        }\r\n    }\r\n\r\n    override createAddButton(values: any, update: (value: any) => Promise<void>, container: HTMLDivElement): HTMLButtonElement {\r\n        const addButton = document.createElement(\"button\");\r\n        this.vault.app.setIcon(addButton, \"plus\");\r\n        addButton.classList.add(\"metadata-add-button-inline-small\");\r\n        addButton.onclick = async () => await this.addProperty(values, update, container);\r\n        return addButton;\r\n    }\r\n\r\n    override enableDragAndDrop() {\r\n        // Disable drag and drop\r\n    }\r\n}"],"version":3}