{"file":"C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\Vault.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\leodu\\Documents\\1 - Pro\\Test plugin obsidian\\.obsidian\\plugins\\obsidian-CRM\\dynamic-fields\\__tests__\\vault\\Vault.test.ts"],"sourcesContent":["import { Vault } from '../../src/vault/Vault';\r\n\r\n// Mock DynamicClassFactory pour Ã©viter les erreurs\r\njest.mock('../../src/Config/DynamicClassFactory', () => ({\r\n    DynamicClassFactory: jest.fn().mockImplementation(() => ({\r\n        getAvailableClasses: jest.fn().mockResolvedValue([]),\r\n        getClass: jest.fn()\r\n    }))\r\n}));\r\n\r\ndescribe('Vault', () => {\r\n    let vault: Vault;\r\n    let mockApp: any;\r\n    let mockSettings: any;\r\n\r\n    beforeEach(() => {\r\n        // Reset all mocks\r\n        jest.clearAllMocks();\r\n        \r\n        // Create mock app\r\n        mockApp = {\r\n            getVaultPath: jest.fn(() => '/test/path'),\r\n            getName: jest.fn(() => 'TestVault'),\r\n            listFiles: jest.fn(() => Promise.resolve([])),\r\n            listFolders: jest.fn(() => Promise.resolve([])),\r\n            getMetadata: jest.fn(),\r\n            sendNotice: jest.fn()\r\n        };\r\n\r\n        // Create mock settings\r\n        mockSettings = {\r\n            templateFolder: 'Templates',\r\n            personalName: 'TestUser',\r\n            configPath: './test-config'\r\n        };\r\n        \r\n        // Create vault instance\r\n        vault = new Vault(mockApp, mockSettings);\r\n    });\r\n\r\n    describe('constructor', () => {\r\n        it('should create vault instance with app and settings', () => {\r\n            expect(vault).toBeInstanceOf(Vault);\r\n            expect(vault.app).toBe(mockApp);\r\n            expect(vault.settings).toBe(mockSettings);\r\n        });\r\n    });\r\n\r\n    describe('getPath', () => {\r\n        it('should return vault path from app', () => {\r\n            const path = vault.getPath();\r\n            expect(path).toBe('/test/path');\r\n            expect(mockApp.getVaultPath).toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('getName', () => {\r\n        it('should return vault name from app', () => {\r\n            const name = vault.getName();\r\n            expect(name).toBe('TestVault');\r\n            expect(mockApp.getName).toHaveBeenCalled();\r\n        });\r\n    });\r\n\r\n    describe('getPersonalName', () => {\r\n        it('should return personal name from settings', () => {\r\n            const personalName = vault.getPersonalName();\r\n            expect(personalName).toBe('TestUser');\r\n        });\r\n    });\r\n\r\n    describe('readLinkFile', () => {\r\n        it('should parse wikilinks correctly', () => {\r\n            expect(vault.readLinkFile('[[test]]')).toBe('test');\r\n            expect(vault.readLinkFile('[[test|alias]]')).toBe('alias');\r\n            expect(vault.readLinkFile('[[folder/test]]')).toBe('test');\r\n        });\r\n\r\n        it('should return path when path=true', () => {\r\n            expect(vault.readLinkFile('[[test]]', true)).toBe('test.md');\r\n            expect(vault.readLinkFile('[[test.pdf]]', true)).toBe('test.pdf');\r\n        });\r\n\r\n        it('should handle invalid input', () => {\r\n            expect(vault.readLinkFile('')).toBe('');\r\n            expect(vault.readLinkFile(null as any)).toBe('');\r\n            expect(vault.readLinkFile('invalid')).toBe('invalid');\r\n        });\r\n    });\r\n\r\n    describe('getDynamicClassFactory', () => {\r\n        it('should return dynamic class factory', () => {\r\n            const factory = vault.getDynamicClassFactory();\r\n            expect(factory).toBeDefined();\r\n        });\r\n    });\r\n\r\n    describe('getClasseFromName', () => {\r\n        it('should return undefined for non-existent class', () => {\r\n            const classe = vault.getClasseFromName('NonExistent');\r\n            expect(classe).toBeUndefined();\r\n        });\r\n    });\r\n});"],"version":3}