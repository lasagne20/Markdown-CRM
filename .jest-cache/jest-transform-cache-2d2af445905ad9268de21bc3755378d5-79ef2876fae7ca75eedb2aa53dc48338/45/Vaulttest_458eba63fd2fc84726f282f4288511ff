160209b7cc5d050fda295e6103dc6e6e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock DynamicClassFactory pour Ã©viter les erreurs
jest.mock('../../src/Config/DynamicClassFactory', () => ({
    DynamicClassFactory: jest.fn().mockImplementation(() => ({
        getAvailableClasses: jest.fn().mockResolvedValue([]),
        getClass: jest.fn()
    }))
}));
const Vault_1 = require("../../src/vault/Vault");
describe('Vault', () => {
    let vault;
    let mockApp;
    let mockSettings;
    beforeEach(() => {
        // Reset all mocks
        jest.clearAllMocks();
        // Create mock app
        mockApp = {
            getVaultPath: jest.fn(() => '/test/path'),
            getName: jest.fn(() => 'TestVault'),
            listFiles: jest.fn(() => Promise.resolve([])),
            listFolders: jest.fn(() => Promise.resolve([])),
            getMetadata: jest.fn(),
            sendNotice: jest.fn()
        };
        // Create mock settings
        mockSettings = {
            templateFolder: 'Templates',
            personalName: 'TestUser',
            configPath: './test-config'
        };
        // Create vault instance
        vault = new Vault_1.Vault(mockApp, mockSettings);
    });
    describe('constructor', () => {
        it('should create vault instance with app and settings', () => {
            expect(vault).toBeInstanceOf(Vault_1.Vault);
            expect(vault.app).toBe(mockApp);
            expect(vault.settings).toBe(mockSettings);
        });
    });
    describe('getPath', () => {
        it('should return vault path from app', () => {
            const path = vault.getPath();
            expect(path).toBe('/test/path');
            expect(mockApp.getVaultPath).toHaveBeenCalled();
        });
    });
    describe('getName', () => {
        it('should return vault name from app', () => {
            const name = vault.getName();
            expect(name).toBe('TestVault');
            expect(mockApp.getName).toHaveBeenCalled();
        });
    });
    describe('getPersonalName', () => {
        it('should return personal name from settings', () => {
            const personalName = vault.getPersonalName();
            expect(personalName).toBe('TestUser');
        });
    });
    describe('readLinkFile', () => {
        it('should parse wikilinks correctly', () => {
            expect(vault.readLinkFile('[[test]]')).toBe('test');
            expect(vault.readLinkFile('[[test|alias]]')).toBe('alias');
            expect(vault.readLinkFile('[[folder/test]]')).toBe('test');
        });
        it('should return path when path=true', () => {
            expect(vault.readLinkFile('[[test]]', true)).toBe('test.md');
            expect(vault.readLinkFile('[[test.pdf]]', true)).toBe('test.pdf');
        });
        it('should handle invalid input', () => {
            expect(vault.readLinkFile('')).toBe('');
            expect(vault.readLinkFile(null)).toBe('');
            expect(vault.readLinkFile('invalid')).toBe('invalid');
        });
    });
    describe('getDynamicClassFactory', () => {
        it('should return dynamic class factory', () => {
            const factory = vault.getDynamicClassFactory();
            expect(factory).toBeDefined();
        });
    });
    describe('getClasseFromName', () => {
        it('should return undefined for non-existent class', () => {
            const classe = vault.getClasseFromName('NonExistent');
            expect(classe).toBeUndefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxsZW9kdVxcRG9jdW1lbnRzXFwxIC0gUHJvXFxUZXN0IHBsdWdpbiBvYnNpZGlhblxcLm9ic2lkaWFuXFxwbHVnaW5zXFxvYnNpZGlhbi1DUk1cXGR5bmFtaWMtZmllbGRzXFxfX3Rlc3RzX19cXHZhdWx0XFxWYXVsdC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBRUEsbURBQW1EO0FBQ25ELElBQUksQ0FBQyxJQUFJLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNyRCxtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNyRCxtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDO1FBQ3BELFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ3RCLENBQUMsQ0FBQztDQUNOLENBQUMsQ0FBQyxDQUFDO0FBUkosaURBQThDO0FBVTlDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO0lBQ25CLElBQUksS0FBWSxDQUFDO0lBQ2pCLElBQUksT0FBWSxDQUFDO0lBQ2pCLElBQUksWUFBaUIsQ0FBQztJQUV0QixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUVyQixrQkFBa0I7UUFDbEIsT0FBTyxHQUFHO1lBQ04sWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDO1lBQ3pDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQztZQUNuQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzdDLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDL0MsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDdEIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7U0FDeEIsQ0FBQztRQUVGLHVCQUF1QjtRQUN2QixZQUFZLEdBQUc7WUFDWCxjQUFjLEVBQUUsV0FBVztZQUMzQixZQUFZLEVBQUUsVUFBVTtZQUN4QixVQUFVLEVBQUUsZUFBZTtTQUM5QixDQUFDO1FBRUYsd0JBQXdCO1FBQ3hCLEtBQUssR0FBRyxJQUFJLGFBQUssQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtRQUN6QixFQUFFLENBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxjQUFjLENBQUMsYUFBSyxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFO1FBQ3JCLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDaEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUNyQixFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUMvQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtRQUM3QixFQUFFLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUM3QyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtRQUMxQixFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDM0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzdELE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN0RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7UUFDcEMsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUMzQyxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUMvQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRTtZQUN0RCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxlb2R1XFxEb2N1bWVudHNcXDEgLSBQcm9cXFRlc3QgcGx1Z2luIG9ic2lkaWFuXFwub2JzaWRpYW5cXHBsdWdpbnNcXG9ic2lkaWFuLUNSTVxcZHluYW1pYy1maWVsZHNcXF9fdGVzdHNfX1xcdmF1bHRcXFZhdWx0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmF1bHQgfSBmcm9tICcuLi8uLi9zcmMvdmF1bHQvVmF1bHQnO1xyXG5cclxuLy8gTW9jayBEeW5hbWljQ2xhc3NGYWN0b3J5IHBvdXIgw6l2aXRlciBsZXMgZXJyZXVyc1xyXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9Db25maWcvRHluYW1pY0NsYXNzRmFjdG9yeScsICgpID0+ICh7XHJcbiAgICBEeW5hbWljQ2xhc3NGYWN0b3J5OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XHJcbiAgICAgICAgZ2V0QXZhaWxhYmxlQ2xhc3NlczogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcclxuICAgICAgICBnZXRDbGFzczogamVzdC5mbigpXHJcbiAgICB9KSlcclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ1ZhdWx0JywgKCkgPT4ge1xyXG4gICAgbGV0IHZhdWx0OiBWYXVsdDtcclxuICAgIGxldCBtb2NrQXBwOiBhbnk7XHJcbiAgICBsZXQgbW9ja1NldHRpbmdzOiBhbnk7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgYWxsIG1vY2tzXHJcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIG1vY2sgYXBwXHJcbiAgICAgICAgbW9ja0FwcCA9IHtcclxuICAgICAgICAgICAgZ2V0VmF1bHRQYXRoOiBqZXN0LmZuKCgpID0+ICcvdGVzdC9wYXRoJyksXHJcbiAgICAgICAgICAgIGdldE5hbWU6IGplc3QuZm4oKCkgPT4gJ1Rlc3RWYXVsdCcpLFxyXG4gICAgICAgICAgICBsaXN0RmlsZXM6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSksXHJcbiAgICAgICAgICAgIGxpc3RGb2xkZXJzOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZShbXSkpLFxyXG4gICAgICAgICAgICBnZXRNZXRhZGF0YTogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBzZW5kTm90aWNlOiBqZXN0LmZuKClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgbW9jayBzZXR0aW5nc1xyXG4gICAgICAgIG1vY2tTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgdGVtcGxhdGVGb2xkZXI6ICdUZW1wbGF0ZXMnLFxyXG4gICAgICAgICAgICBwZXJzb25hbE5hbWU6ICdUZXN0VXNlcicsXHJcbiAgICAgICAgICAgIGNvbmZpZ1BhdGg6ICcuL3Rlc3QtY29uZmlnJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIHZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgdmF1bHQgPSBuZXcgVmF1bHQobW9ja0FwcCwgbW9ja1NldHRpbmdzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB2YXVsdCBpbnN0YW5jZSB3aXRoIGFwcCBhbmQgc2V0dGluZ3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YXVsdCkudG9CZUluc3RhbmNlT2YoVmF1bHQpO1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQuYXBwKS50b0JlKG1vY2tBcHApO1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQuc2V0dGluZ3MpLnRvQmUobW9ja1NldHRpbmdzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRQYXRoJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhdWx0IHBhdGggZnJvbSBhcHAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSB2YXVsdC5nZXRQYXRoKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwYXRoKS50b0JlKCcvdGVzdC9wYXRoJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQXBwLmdldFZhdWx0UGF0aCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldE5hbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdmF1bHQgbmFtZSBmcm9tIGFwcCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHZhdWx0LmdldE5hbWUoKTtcclxuICAgICAgICAgICAgZXhwZWN0KG5hbWUpLnRvQmUoJ1Rlc3RWYXVsdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC5nZXROYW1lKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0UGVyc29uYWxOYW1lJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHBlcnNvbmFsIG5hbWUgZnJvbSBzZXR0aW5ncycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcGVyc29uYWxOYW1lID0gdmF1bHQuZ2V0UGVyc29uYWxOYW1lKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChwZXJzb25hbE5hbWUpLnRvQmUoJ1Rlc3RVc2VyJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgncmVhZExpbmtGaWxlJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcGFyc2Ugd2lraWxpbmtzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgICAgICAgZXhwZWN0KHZhdWx0LnJlYWRMaW5rRmlsZSgnW1t0ZXN0XV0nKSkudG9CZSgndGVzdCcpO1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQucmVhZExpbmtGaWxlKCdbW3Rlc3R8YWxpYXNdXScpKS50b0JlKCdhbGlhcycpO1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQucmVhZExpbmtGaWxlKCdbW2ZvbGRlci90ZXN0XV0nKSkudG9CZSgndGVzdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBwYXRoIHdoZW4gcGF0aD10cnVlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQucmVhZExpbmtGaWxlKCdbW3Rlc3RdXScsIHRydWUpKS50b0JlKCd0ZXN0Lm1kJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YXVsdC5yZWFkTGlua0ZpbGUoJ1tbdGVzdC5wZGZdXScsIHRydWUpKS50b0JlKCd0ZXN0LnBkZicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGlucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QodmF1bHQucmVhZExpbmtGaWxlKCcnKSkudG9CZSgnJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh2YXVsdC5yZWFkTGlua0ZpbGUobnVsbCBhcyBhbnkpKS50b0JlKCcnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHZhdWx0LnJlYWRMaW5rRmlsZSgnaW52YWxpZCcpKS50b0JlKCdpbnZhbGlkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0RHluYW1pY0NsYXNzRmFjdG9yeScsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBkeW5hbWljIGNsYXNzIGZhY3RvcnknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSB2YXVsdC5nZXREeW5hbWljQ2xhc3NGYWN0b3J5KCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChmYWN0b3J5KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2dldENsYXNzZUZyb21OYW1lJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCBmb3Igbm9uLWV4aXN0ZW50IGNsYXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbGFzc2UgPSB2YXVsdC5nZXRDbGFzc2VGcm9tTmFtZSgnTm9uRXhpc3RlbnQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNsYXNzZSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==