# Configuration de la classe Tache
name: Tache
icon: âœ…
description: Gestion des tÃ¢ches individuelles avec suivi dÃ©taillÃ©
template: Tache.md

# Configuration des propriÃ©tÃ©s
properties:
  - name: titre
    type: TextProperty
    title: Titre de la tÃ¢che
    icon: ğŸ“
    required: true
    defaultValue: ""
    
  - name: description
    type: TextProperty
    title: Description dÃ©taillÃ©e
    icon: ğŸ“„
    required: false
    defaultValue: ""
    multiline: true
    
  - name: statut
    type: SelectProperty
    title: Statut de la tÃ¢che
    icon: ğŸ”„
    required: true
    defaultValue: "Ã€ faire"
    options:
      - "Ã€ faire"
      - "En cours"
      - "En attente"
      - "TerminÃ©e"
      - "AnnulÃ©e"
    
  - name: priorite
    type: SelectProperty
    title: PrioritÃ©
    icon: ğŸš¨
    required: false
    defaultValue: "Normale"
    options:
      - "Critique"
      - "Haute"
      - "Normale"
      - "Basse"
    
  - name: assignee
    type: LinkProperty
    title: AssignÃ© Ã 
    icon: ğŸ‘¤
    required: false
    defaultValue: ""
    linkClass: "Contact"
    
  - name: projet
    type: LinkProperty
    title: Projet parent
    icon: ğŸ“‹
    required: false
    defaultValue: ""
    linkClass: "Projet"
    
  - name: dateCreation
    type: DateProperty
    title: Date de crÃ©ation
    icon: ğŸ“…
    required: false
    defaultValue: "today"
    readonly: true
    
  - name: dateEcheance
    type: DateProperty
    title: Date d'Ã©chÃ©ance
    icon: â°
    required: false
    defaultValue: ""
    
  - name: dateCompletion
    type: DateProperty
    title: Date de completion
    icon: âœ…
    required: false
    defaultValue: ""
    
  - name: tempsEstime
    type: NumberProperty
    title: Temps estimÃ© (heures)
    icon: â±ï¸
    required: false
    defaultValue: 0
    min: 0
    step: 0.5
    
  - name: tempsPasse
    type: NumberProperty
    title: Temps passÃ© (heures)
    icon: â°
    required: false
    defaultValue: 0
    min: 0
    step: 0.25
    
  - name: avancement
    type: NumberProperty
    title: Avancement (%)
    icon: ğŸ“Š
    required: false
    defaultValue: 0
    min: 0
    max: 100
    
  - name: difficulte
    type: RatingProperty
    title: DifficultÃ© (1-5)
    icon: ğŸ’ª
    required: false
    defaultValue: 3
    min: 1
    max: 5
    
  - name: tags
    type: MultiSelectProperty
    title: Tags
    icon: ğŸ·ï¸
    required: false
    defaultValue: []
    options:
      - "Urgent"
      - "Bug"
      - "Feature"
      - "Documentation"
      - "Test"
      - "Review"
      - "Deploy"
      - "Meeting"
    
  - name: dependances
    type: MultiSelectProperty
    title: DÃ©pendances
    icon: ğŸ”—
    required: false
    defaultValue: []
    linkClass: "Tache"
    
  - name: checklist
    type: TextProperty
    title: Checklist
    icon: â˜‘ï¸
    required: false
    defaultValue: ""
    multiline: true
    
  - name: fichiers
    type: MultiFileProperty
    title: Fichiers attachÃ©s
    icon: ğŸ“
    required: false
    defaultValue: []
    
  - name: commentaires
    type: TextProperty
    title: Commentaires
    icon: ğŸ’¬
    required: false
    defaultValue: ""
    multiline: true

# Configuration d'affichage
display:
  headerFormat: "{{titre}} [{{statut}}]"
  summaryFields:
    - titre
    - statut
    - priorite
    - assignee
    - dateEcheance
    - avancement
  
# Actions disponibles
actions:
  - name: commencer
    label: "Commencer"
    icon: â–¶ï¸
    condition: "statut == 'Ã€ faire'"
    
  - name: mettrePause
    label: "Mettre en pause"
    icon: â¸ï¸
    condition: "statut == 'En cours'"
    
  - name: reprendre
    label: "Reprendre"
    icon: â–¶ï¸
    condition: "statut == 'En attente'"
    
  - name: terminer
    label: "Terminer"
    icon: âœ…
    condition: "statut != 'TerminÃ©e'"
    
  - name: dupliquer
    label: "Dupliquer"
    icon: ğŸ“‹
    
  - name: chronometrer
    label: "DÃ©marrer chrono"
    icon: â±ï¸

# Relations avec autres classes
relations:
  - targetClass: Projet
    relationName: "projet"
    type: "many-to-one"
    description: "Projet auquel appartient cette tÃ¢che"
    
  - targetClass: Contact
    relationName: "assignee"
    type: "many-to-one"
    description: "Personne assignÃ©e Ã  cette tÃ¢che"
    
  - targetClass: Tache
    relationName: "sousTaches"
    type: "one-to-many"
    description: "Sous-tÃ¢ches de cette tÃ¢che"

# Formules calculÃ©es
formulas:
  - name: tempsRestant
    formula: "tempsEstime - tempsPasse"
    description: "Temps restant estimÃ©"
    
  - name: enRetard
    formula: "dateEcheance < today() && statut != 'TerminÃ©e'"
    description: "Indique si la tÃ¢che est en retard"
    
  - name: efficacite
    formula: "(avancement / 100) / (tempsPasse / tempsEstime)"
    description: "Ratio d'efficacitÃ© basÃ© sur le temps"
    
  - name: joursRestants
    formula: "dateEcheance - today()"
    description: "Nombre de jours avant l'Ã©chÃ©ance"

# Configuration des notifications
notifications:
  - trigger: "dateEcheance - 1day"
    message: "Ã‰chÃ©ance demain pour: {{titre}}"
    
  - trigger: "dateEcheance"
    message: "Ã‰chÃ©ance aujourd'hui pour: {{titre}}"
    
  - trigger: "statut == 'TerminÃ©e'"
    message: "TÃ¢che terminÃ©e: {{titre}}"