# Configuration de la classe Institution
name: Institution
icon: üè¢
description: Gestion des institutions et organisations
template: Institution.md

# Configuration des propri√©t√©s
properties:
  nom:
    type: Property
    title: Nom de l'institution
    icon: üè¢
    required: true
    defaultValue: ""
    
  type:
    type: SelectProperty
    title: Type d'institution
    icon: üè∑Ô∏è
    required: false
    defaultValue: "Entreprise"
    options:
      - "Entreprise"
      - "Association"
      - "Administration"
      - "√âcole/Universit√©"
      - "Autre"
    
  secteur:
    type: TextProperty
    title: Secteur d'activit√©
    icon: üíº
    required: false
    defaultValue: ""
    
  siteWeb:
    type: LinkProperty
    title: Site web
    icon: üåê
    required: false
    defaultValue: ""
    
  adresse:
    type: AdressProperty
    title: Adresse
    icon: üìç
    required: false
    defaultValue: ""
    
  telephonePrincipal:
    type: PhoneProperty
    title: T√©l√©phone principal
    icon: üìû
    required: false
    defaultValue: ""
    
  email:
    type: EmailProperty
    title: Email principal
    icon: üìß
    required: false
    defaultValue: ""
    
  dateCreation:
    type: DateProperty
    title: Date de cr√©ation
    icon: üìÖ
    required: false
    defaultValue: ""
    
  nombreEmployes:
    type: NumberProperty
    title: Nombre d'employ√©s
    icon: üë•
    required: false
    defaultValue: 0
    validation:
      min: 0
    
  description:
    type: TextProperty
    title: Description
    icon: üìã
    required: false
    defaultValue: ""
    multiline: true

# Configuration d'affichage
display:
  containers:
    - type: line
      title: "Informations principales"
      className: "institution-info-section"
      properties:
        - nom
        - type
        - secteur
    
    - type: tabs
      title: "D√©tails"
      className: "institution-details-tabs"
      tabs:
        - name: "Contact"
          properties:
            - siteWeb
            - email
            - telephonePrincipal
            - adresse
        - name: "Informations"
          properties:
            - dateCreation
            - nombreEmployes
            - description
    
    - type: table
      title: "Membres de l'institution"
      className: "members-table"
      source:
        class: Personne
        filter: children
        filterBy:
          statut: ["Actif", "En cong√©"]
      columns:
        - name: "Fichier"
          propertyName: _fileName
          filter: text
          sort: true
        - name: "Nom"
          propertyName: nom
          filter: text
          sort: true
        - name: "Poste"
          propertyName: poste
          filter: select
          sort: true
        - name: "Statut"
          propertyName: statut
          filter: select
          sort: true
        - name: "Email"
          propertyName: email
          filter: text
          sort: true
        - name: "T√©l√©phone"
          propertyName: telephone
          filter: false
          sort: false
      totals:
        - column: "Nombre de membres"
          formula: count
    
    - type: table
      title: "Projets de l'institution"
      className: "projects-table"
      source:
        class: Projet
        filter: children
      columns:
        - name: "Fichier"
          propertyName: _fileName
          filter: text
          sort: true
        - name: "Nom du projet"
          propertyName: nom
          filter: text
          sort: true
        - name: "Statut"
          propertyName: statut
          filter: select
          sort: true
        - name: "Priorit√©"
          propertyName: priorite
          filter: false
          sort: true
        - name: "Progression"
          propertyName: pourcentageCompletion
          filter: false
          sort: true
        - name: "Budget"
          propertyName: budget
          filter: false
          sort: true
        - name: "Responsable"
          propertyName: responsable
          filter: text
          sort: true
      totals:
        - column: "Total projets"
          formula: count
        - column: "Total budget"
          formula: sum
          propertyName: budget
